{"version":3,"sources":["components/lifting/LiftingView.module.scss","components/meet-setup/ColorPicker.module.scss","components/lifting/LiftingHeader.module.scss","components/results/ResultsView.module.scss","components/lifting/gpc-nz-horizontal.png","components/flight-order/OneFlightOrder.module.scss","components/lifting/gpc-nz-square.png","components/lifting/BarLoad.module.scss","components/lifting/LiftingTable.module.scss","serviceWorker.js","translations/index.ts","components/translations/OpenLifterIntlProvider.tsx","components/translations/LanguageSelector.tsx","actions/languageActions.ts","actions/globalActions.ts","types/utils.ts","logic/units.ts","logic/strings.ts","reducers/versionsReducer.ts","versions.ts","logic/date.ts","constants/plateColors.ts","reducers/meetReducer.ts","logic/entry.ts","reducers/registrationReducer.ts","reducers/liftingReducer.ts","reducers/recordsReducer.ts","reducers/rootReducer.ts","reducers/languageReducer.ts","actions/meetSetupActions.ts","components/meet-setup/AutoFillRules.tsx","components/home/NewMeetModal.tsx","components/ErrorModal.tsx","containers/HomeContainer.tsx","components/ValidatedInput.tsx","components/meet-setup/MeetDate.tsx","components/common/NumberInput.tsx","components/meet-setup/MeetLength.tsx","components/meet-setup/PlatformCount.tsx","components/meet-setup/PlatformCounts.tsx","components/meet-setup/DivisionSelect.tsx","components/meet-setup/WeightClassesSelect.tsx","components/meet-setup/BarAndCollarsWeightKg.tsx","components/meet-setup/ColorPicker.tsx","components/meet-setup/PlateInput.tsx","components/meet-setup/Plates.tsx","components/common/YesNoButton.tsx","components/meet-setup/MeetSetup.tsx","containers/MeetSetupContainer.tsx","components/registration/LifterTable.tsx","components/translations/LocalizedString.tsx","validation/iso8601Date.ts","validation/positiveInteger.ts","actions/registrationActions.ts","components/registration/LifterRow.tsx","components/registration/NewButton.tsx","logic/export/csv.ts","logic/parsers.ts","logic/import/validation.ts","logic/import/registration-csv.ts","logic/export/registrations.ts","components/debug/RandomizeHelpers.ts","components/registration/RegistrationView.tsx","containers/RegistrationContainer.tsx","components/weighins/LifterTable.tsx","actions/liftingActions.ts","components/weighins/WeightInput.tsx","components/weighins/LifterRow.tsx","components/weighins/WeighinsView.tsx","containers/WeighinsContainer.tsx","logic/barLoad.ts","components/lifting/BarLoad.tsx","logic/records/records.ts","logic/liftingOrder.ts","logic/divisionPlace.ts","components/lifting/LeftCard.tsx","components/lifting/AttemptInput.tsx","logic/coefficients/ah.ts","logic/coefficients/dots.ts","logic/coefficients/foster-mcculloch.ts","logic/coefficients/schwartzmalone.ts","logic/coefficients/wilks.ts","logic/coefficients/glossbrenner.ts","logic/coefficients/goodlift.ts","logic/coefficients/ipf.ts","logic/coefficients/reshel.ts","logic/coefficients/wilks2020.ts","logic/coefficients/coefficients.ts","logic/coefficients/bodyweight-multiple.ts","logic/coefficients/nasa.ts","components/lifting/LiftingTable.tsx","components/lifting/LiftingFooter.tsx","components/lifting/LiftingHeader.tsx","components/lifting/LiftingView.tsx","containers/LiftingContainer.tsx","components/flight-order/OneFlightOrder.tsx","components/flight-order/FlightOrderView.tsx","containers/FlightOrderContainer.tsx","components/results/ByDivision.tsx","logic/pointsPlace.ts","components/results/ByPoints.tsx","logic/export/oplcsv.ts","logic/export/usapl.ts","components/results/ResultsView.tsx","containers/ResultsContainer.tsx","components/debug/RandomizeMeetSetup.tsx","components/debug/RandomizeRegistration.tsx","components/debug/RandomizeWeighins.tsx","components/debug/StateTools.tsx","containers/DebugContainer.tsx","containers/AboutContainer.tsx","logic/import/records-csv.ts","logic/records/ExportedRecordsPage.css.ts","logic/records/ExportedRecordsPage.tsx","logic/records/ExportedRecordsPageLogo.tsx","components/registration/RecordsView.tsx","logic/export/records.ts","logic/records/htmlExport.tsx","actions/recordActions.ts","containers/RecordsContainer.tsx","containers/RootContainer.tsx","components/Navigation.tsx","store.ts","App.tsx","index.tsx","components/common/ContentArea.module.scss","components/lifting/LeftCard.module.scss","components/lifting/LiftingFooter.module.scss"],"names":["module","exports","liftingView","middleParentContainer","leftCardContainer","rightCardContainer","swatch","color","onTop","header","logo","lifterName","info","controlPanel","dropdown","__webpack_require__","p","leftDivider","container","rackInfo","bar","kg50","kg25","kg20","kg15","kg10","kg5","kg2p5","kg1p25","kg1","kg0p75","kg0p5","kg0p25","lbs100","lbs55","lbs45","lbs35","lbs25","lbs10","lbs5","lbs2p5","lbs1p25","lbs0p5","collar","error","liftingtable","textCell","smallCell","spacerCell","activeColumn","attemptInputCell","current","goodlift","nolift","attemptInput","Boolean","window","location","hostname","match","translations","de","el","eo","en","es","fr","hr","it","lt","nl","pt","ru","tr","uk","zh-Hans","OpenLifterIntlProvider","language","this","props","Error","messages","react","provider","locale","defaultLocale","key","children","React","connect","state","languageOptions","react_default","a","createElement","value","LanguageSelector","FormControl_default","as","onChange","changeLanguage","className","Component","dispatch","event","type","currentTarget","overwriteStore","store","isString","assertString","result","concat","isNotUndefined","undefined","assertFlight","flight","assertSex","sex","assertEquipment","equipment","kg2lbs","kg","lbs2kg","lbs","string2number","s","Number","replace","displayWeight","weight","lang","rounded","Math","round","Intl","NumberFormat","useGrouping","maximumFractionDigits","format","displayPoints","points","minimumFractionDigits","displayNumber","number","displayPlaceOrdinal","entry","getString","id","localizeEquipment","delocalizeEquipment","text","localizeEvent","localizeRecordLift","recordLift","delocalizeRecordLift","localizeRecordType","recordType","delocaliseRecordType","delocalizeEvent","localizeFlight","delocalizeFlight","localizeSexPlural","localizeSex","delocalizeSex","localizeWeightClassStr","wtcls","isSHW","endsWith","asNumber","getDefaultLanguage","navigator","languages","i","length","initialState","stateVersion","releaseVersion","process","localDateToIso8601","d","year","getFullYear","month","getMonth","day","getDate","yearStr","String","monthStr","dayStr","PlateColors","PLATE_DEFAULT_BLACK","PLATE_DEFAULT_WHITE","PLATE_DEFAULT_BLUE","PLATE_DEFAULT_GREEN","PLATE_DEFAULT_GRAY","PLATE_DEFAULT_RED","PLATE_DEFAULT_YELLOW","PLATE_DEFAULT_ORANGE","PLATE_DEFAULT_PINK","PLATE_DEFAULT_PURPLE","defaultPlatesKg","weightKg","pairCount","defaultPlatesLbs","name","country","city","federation","date","Date","lengthDays","platformsOnDays","divisions","weightClassesKgMen","weightClassesKgWomen","weightClassesKgMx","formula","ageCoefficients","combineSleevesAndWraps","allow4thAttempts","recordsEnabled","inKg","showAlternateUnits","squatBarAndCollarsWeightKg","benchBarAndCollarsWeightKg","deadliftBarAndCollarsWeightKg","plates","getWeightClassStr","classes","bodyweightKg","wtclsStrKg2Lbs","kgcls","shw","truncated","floor","getWeightClassLbsStr","newDefaultEntry","platform","birthDate","age","intendedWeightClassKg","events","lot","memberId","paid","team","guest","canBreakRecords","novice","notes","squatRackInfo","benchRackInfo","squatKg","benchKg","deadliftKg","squatStatus","benchStatus","deadliftStatus","getAge","meetDate","_meetDate$split$map","split","map","_meetDate$split$map2","Object","slicedToArray","my","mm","md","_entry$birthDate$spli","_entry$birthDate$spli2","by","bm","bd","years","getBest5SquatKg","best3SquatKg","max","getBest5BenchKg","best3BenchKg","getBest5DeadliftKg","best3DeadliftKg","getProjectedTotalKg","best3Squat","best3Bench","best3Dead","getProjectedEventTotalKg","includes","getBest3SquatKg","getBest3BenchKg","getBest3DeadliftKg","getFinalTotalKg","getFinalEventTotalKg","getLiftersOnDay","entries","filter","liftToAttemptFieldName","lift","liftToStatusFieldName","getAttemptWeight","attemptOneIndexed","entryHasLifted","liftingPresentOnPlatform","getWhetherPlatformsHaveLifted","ret","platformsOnDay","acc","push","mapSexToClasses","getWeightClassForEntry","weightClassesForSex","nextEntryId","lookup","overrideAttempt","overrideEntryId","columnDivisionWidthPx","confirmedRecords","calculateRecordKey","record","division","weightClass","combineReducers","versions","arguments","action","meet","objectSpread","numDays","diff","newPlatformsOnDays","slice","count","defaultPlates","defaultBar","classesKg","index","findIndex","newPlates","changes","newState","assign","registration","obj","overwriteDefaults","newEntry","previousEntry","entryId","item","field","newEntries","oldEntry","newarray","newfields","status","success","fieldStatus","platformEntries","e","updatedEntries","lotNumbers","lifting","attempt","combined","records","recordLookup","forEach","setDivisions","setLengthDays","setPlatformsOnDays","setWeightClasses","updateMeet","traditionalDefaults","bpDefaults","gpcDefaults","spfDefaults","upaDefaults","usaplDefaults","uspaDefaults","wabdlDefaults","wpcDefaults","wrpfDefaults","AutoFillRules","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleSelectChange","setState","selectedOption","handleClick","bind","assertThisInitialized","stringTraditional","stringBP","stringGPC","stringSPF","stringUPA","stringUSAPL","stringUSPA","stringWABDL","stringWPC","stringWRPF","FormGroup_default","Form_default","Label","message","defaultMessage","style","width","display","Button_default","onClick","variant","marginLeft","NewMeetModal","Modal_default","show","onHide","close","Header","closeButton","Title","values","meetName","Body","Footer","lib","to","defaultStore","rootReducer","ErrorModal","title","centerConsole","maxWidth","marginRight","backgroundColor","buttonMargin","marginBottom","HomeContainer","handleLoadClick","loadhelper","document","getElementById","click","handleNewClick","showNewMeetModal","closeConfirmModal","closeErrorModal","handleLoadFileInput","loadHelper","HTMLInputElement","files","selectedFile","redux","rememberThis","reader","FileReader","onload","errored","JSON","parse","target","err","readAsText","handleSaveClick","meetname","stringify","blob","Blob","saveAs","renderContinueButton","block","newMeetButton","wrongVersion","dataReleaseVersion","warning","oldVersion","thisVersion","Card_default","styles","contentArea","home_NewMeetModal","components_ErrorModal","alt","src","Logo","Container_default","Row_default","Col_default","href","otherVersion","translations_LanguageSelector","rel","textAlign","releaseDate","accept","BirthDateInput","validate","handleKeyDown","blur","handleChange","handleBlur","initialValue","onSuccess","validation","maybeLabel","label","Group","keepMargin","Control","placeholder","disabled","onKeyDown","onBlur","isValid","isInvalid","registerLocale","zh_CN","MeetDate","initialDate","_s$split","_s$split2","parseInt","setFullYear","iso8601ToLocalDate","react_datepicker_min_default","dateFormat","selected","setMeetDate","inline","NumberInput","num","handleDecrement","handleStep","step","handleIncrement","n","multiple","abs","ceil","InputGroup_default","Prepend","borderRight","onMouseDown","index_es","icon","faMinus","Append","borderLeft","faPlus","MeetLength","isInteger","common_NumberInput","days","PlatformCount","PlatformCounts","createPlatformInputs","inputs","meet_setup_PlatformCount","components","DropdownIndicator","createOption","DivisionSelect","maybeUpdateRedux","objarray","Array","handleInputChange","inputValue","_this$state","preventDefault","newValue","toConsumableArray","_this$state2","react_select_browser_esm","isDisabled","isMulti","menuIsOpen","onInputChange","WeightClassesSelect","isNaN","isFinite","sort","b","c","selectClassesBySex","ownProps","BarAndCollarsWeightKg","getInitialBarAndCollarsWeightKg","setBarAndCollarsWeightKg","getLiftLabel","ColorPicker","clearTimeout","timeoutId","displayColorPicker","handleMouseLeave","setTimeout","handleMouseEnter","clientX","hex","toUpperCase","_this2","colors","picker","Popper","placement","_ref","ref","data-placement","react_color_es","triangle","Manager","onMouseLeave","onMouseEnter","Reference","_ref2","background","PlateInput","meet_setup_ColorPicker","Plates","validateAmountInput","widget","asNum","updateHandler","amount","isNumber","setPlateConfig","renderWeightRow","meet_setup_PlateInput","plateRows","unitId","stringPlate","Table_default","striped","size","hover","margin","YesNoButton","ButtonGroup_default","active","setValue","no","yes","MeetSetup","validateRequiredText","ticker","stringMeetName","stringFederation","stringCountry","stringStateProvince","stringCityTown","stringKilograms","stringPounds","stringMensClasses","stringWomensClasses","stringMxClasses","stringAH","stringBodyweightMultiple","stringDots","stringGlossbrenner","stringIPFGLPoints","stringIPFPoints","stringNASAPoints","stringSchwartzMalone","stringTotal","stringWilks","stringWilks2020","stringNone","stringFosterMcCulloch","stringNo","stringYes","stringAlsoKilograms","stringAlsoPounds","ValidatedInput","setMeetName","setFederation","setCountry","setCity","meet_setup_MeetDate","meet_setup_MeetLength","meet_setup_PlatformCounts","meet_setup_AutoFillRules","meet_setup_DivisionSelect","meet_setup_WeightClassesSelect","setFormula","setAgeCoefficients","common_YesNoButton","setCombineSleevesAndWraps","setAllow4thAttempts","setRecordsEnabled","setInKg","setShowAlternateUnits","meet_setup_BarAndCollarsWeightKg","meet_setup_Plates","fed","bool","assertFormula","coefficient","assertAgeCoefficients","MeetSetupContainer","meet_setup_MeetSetup","LifterTable","LifterRow","rowRenderer","renderRows","LocalizedString","injectIntl","Consumer","intl","validateIso8601Date","pieces","_pieces","onlyNumbers","validatePositiveInteger","inclusiveMax","startsWith","newRegistration","deleteRegistration","updateRegistration","updateRegistrationMemberId","updateRegistrationBirthDate","updateRegistrationAge","updateRegistrationCountry","updateRegistrationState","updateRegistrationGuest","updateRegistrationNovice","updateRegistrationCanBreakRecords","updateRegistrationTeam","updateRegistrationInstagram","instagram","updateRegistrationNotes","validateAge","pos","selectedDay","deleteRegistrationClick","updateRegistrationDay","updateRegistrationPlatform","updateRegistrationFlight","updateRegistrationName","updateRegistrationSex","updateRegistrationLot","updateRegistrationDivisions","updateRegistrationEvents","updateRegistrationEquipment","dayOptions","platformOptions","divisionOptions","selectedDivisions","selectedEvents","gridStyle","padding","stringState","stringBirthDatePlaceholder","stringMemberIdPlaceholder","stringSelectPlaceholder","eventOptions","overflow","minWidth","translations_LocalizedString","toString","dist_react_select_browser_esm","menuPlacement","options","isClearable","min","Text","NewButton","csvString","x","trim","csvDate","iso8601","getSpreadsheetColumnName","alphabet","mod","remainder","validateCsvColumns","csv","MANDATORY_FIELDNAMES","OPTIONAL_FIELDNAMES","fieldnames","colname","allfields","join","j","iname","jname","Csv","rows","createClass","indexOf","namelist","splice","removeColumnByIndex","empty","removeEmptyColumns","lines","row","headers","strRows","parseInteger","charcode","charCodeAt","parseDate","validateSex","cell","errorPrefix","errorMessage","m","f","mx","validateEquipment","bare","sleeves","wraps","single","multi","validateEvent","sbd","sb","sd","validateRecordLift","validateRecordType","makeExampleRegistrationsCsv","division1","division2","division3","event1","event2","event3","birthdate","memberid","appendColumns","loadRegistrations","division_template","event_template","col_day","col_platform","col_flight","col_name","col_sex","col_equipment","col_division1","col_division2","col_division3","col_division4","col_division5","col_event1","col_event2","col_event3","col_event4","col_event5","col_birthdate","col_age","col_memberid","col_country","col_state","col_lot","col_guest","col_novice","col_canBreakRecords","col_team","col_instagram","col_notes","csvValidationError","errprefix_template","fieldname","val","rowstr","errprefix","integer","platforms","validationResult","evt","boolToYesNo","makeRegistrationsCsv","fill","column","prevIndex","insertColumn","randomString","random","substr","randomInt","randomFixedPoint","fixedPoints","power","pow","shuffle","array","numElements","switchIndex","temp","globalImportKind","RegistrationView","handleDownloadCsvTemplateClick","global","filename","handleExportCsvClick","handleOverwriteClick","handleSequentialLotNumbersClick","updateLotNumbers","handleRandomLotNumbersClick","handleRemoveLotNumbersClick","manipulation","_entry","assignLotNumbers","handleAppendClick","maybeError","fromString","maybeEntries","entryIds","alert","onloadstart","isLoadingFiles","onloadend","numEntries","dropdownIconStyle","faSpinner","spin","vertical","DropdownButton","ButtonGroup","Dropdown","Item","faSort","faRandom","faTimes","registration_LifterTable","registration_NewButton","RegistrationContainer","registration_RegistrationView","inLiftingPage","renderHeader","shortStyle","bodyweightId","squatId","benchId","deadliftId","enterAttempt","WeightInput","weightNum","weightStr","multipleOf","updateRegistrationSquatRackInfo","updateRegistrationBenchRackInfo","validateRack","hasSquat","hasBench","hasDeadlift","disableSquatWeight","disableBenchWeight","disableDeadliftWeight","ageStr","weighins_WeightInput","WeighinsView","getNumDaysFromEntries","max_day","dayCards","lifters","dayNumber","weighins_LifterTable","WeighinsContainer","weighins_WeighinsView","safeKg2Lbs","selectPlates","loadingKg","barAndCollarsWeightKg","loadingAny","barAndCollarsWeightAny","platesAny","sortedPlates","sideWeightKg","loading","weightAny","isAlreadyLoaded","findWeightFrom","startFrom","kgToStyleMap","Map","lbsToStyleMap","weightTextMap","weightAnyToText","get","PlatesDiv","weightLbs","divs","plateCount","showCounter","plate","counter","is_light","opacity","border","Fragment","RackInfoDiv","_ref3","BarLoad_PlatesDiv","BarLoad_RackInfoDiv","wouldBreakConfirmedRecord","potentialRecord","confirmedRecord","getRecordTypeForEntry","getEquipmentForEntry","addPotentialRecordIfRelevant","potentialRecords","basePotentialRecord","weightLifted","getWeightForUnconfirmedRecord","getUpdatedRecordState","initialRecordState","registrationState","newRecordState","fullName","candidateDiv","updatedPotentialRecord","addCustomPotentialRecords","recordKey","newLookup","upsertRecord","getLiftSortOrder","getSexSortOrder","getRecordTypeSortOrder","getEquipmentSortOrder","getWeightClassSortOrder","weightClassString","POSITIVE_INFINITY","compareRecords","groupAndSortRecordsIntoCategories","meetState","unSortedCategories","category","recordsInCategory","set","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","return","categories","openIndex","gpcDivisions","compareCategory","getNextAttemptNumberForEntry","fieldKg","weightsKg","statuses","MAX_ATTEMPTS","getMaxAttemptNumberForEntry","compareEntriesByAttempt","aKg","bKg","orderEntriesByAttempt","getLiftingOrder","entriesInFlight","earliestAttemptOneIndexed","latestAttemptOneIndexed","getActiveAttemptNumber","orderedEntries","attemptZeroIndexed","existsNextAttempt","existsPrevAttempt","byNextAttempt","byThisAttempt","byPrevAttempt","notLifting","prototype","orderEntriesForAttempt","currentEntryId","idx","getCurrentEntryId","nextEntryInfo","currentEntryIndex","hasAttempt","notTaken","nextAttemptOneIndexed","getNextEntryInfo","categoryToKey","keyToCategory","getLastSuccessfulLift","getLastSuccessfulAttempt","sortByPlaceInCategory","clonedEntries","aTotal","bTotal","aLastSuccessfulLift","bLastSuccessfulLift","aLastSuccessfulLiftIndex","bLastSuccessfulLiftIndex","aLastSuccessfulAttempt","bLastSuccessfulAttempt","getEventSortOrder","ev","eq","getAllResults","categoryMap","classesForSex","weightClassStr","numDivisions","dividx","evidx","isNovice","catEntries","results","catA","catB","aSex","bSex","aEvent","bEvent","aEquipment","bEquipment","aIsSHW","bIsSHW","sortCategoryResults","getProjectedResults","getFinalResults","getPlaceOrdinal","categoryResults","firstDiv","LeftCard","getBarLoadProps","getEntryById","getBarAndCollarsWeightKg","currentLoading","nextLoading","relativeTo","finger","loadedPlate","makeLoadingRelative","nextEntryName","nextBarLoad","loadingBar","nextText","lifter","barArea","lifting_BarLoad","activeCard","renderStreamOverlayCard","justifyContent","recordTypesBroken","currentEntry","canSetTotalRecords","isRecordAttempt","localizedLift","officialOrUnOfficial","messageTemplate","barLoadProps","placeOrdinal","placeOrdinalStr","k","getOrdinalSuffix","weightClassPrefix","attemptText","overlaySubTitle","overlayWeight","overlayRecordText","getRecordAttemptText","updatedRecordState","AttemptInput","asKg","prevAttemptOneIndexed","prevWeightKg","prevStatus","fixups","lastGoodValue","ah","totalKg","adjusted","log10","ahMen","ahWomen","dotsPoly","x2","x3","dots","dotsMen","dotsWomen","AGE_COEFFICIENTS","fosterMcCulloch","schwartz_coefficient","malone_coefficient","wilksPoly","x4","wilksMen","wilksWomen","glossbrenner","glossbrenner_coefficient_men","glossbrenner_coefficient_women","PARAMETERS","M","Sleeves","SBD","B","Single-ply","F","S","D","reshel","normalized","reshelMen","reshelWomen","wilks2020Poly","wilks2020","wilks2020Men","wilks2020Women","getPoints","bodyweight_multiple","normalizedEquipment","normalizedSex","params","denom","exp","glp","bw_log","log","ipfpoints","nasapoints","schwartzmalone","wilks","getAgeAdjustedPoints","globalFocusAttemptInputId","globalHighestAttemptInputAttempt","LiftingTable","renderBest3AttemptField","columnType","best3","lightestFailed","renderAttemptField","wStr","displayStr","lifting_AttemptInput","maybeNegative","anyPreviousAttemptTaken","currentAndHasPrevious","nextAndTookLast","renderCell","bw","bwStr","columns","cells","col","rowClassName","getColumnHeaderLabel","useProjected","highlightColumn","nameCell","divisionCell","LiftingFooter","handleDayChange","setLiftingGroup","handlePlatformChange","handleFlightChange","handleLiftChange","assertLift","handleAttemptChange","handleLifterChange","setFocusAttemptInputTimeout","elem","focus","handleOnMouseEnter","activeElement","HTMLElement","handleGoodLift","handleLiftResult","handleNoLift","hasFullscreenElement","doc","fullscreenElement","webkitFullscreenElement","mozFullscreenElement","msFullscreenElement","exitFullscreen","webkitExitFullscreen","mozExitFullscreen","msExitFullscreen","requestFullscreen","webkitRequestFullscreen","mozRequestFullscreen","msRequestFullscreen","handleFullscreen","makeLifterOptions","lifterOptions","getCurrentEntry","markLift","find","numPlatforms","dayTemplate","platformTemplate","liftOptions","flightOptions","flightTemplate","flightsOnPlatform","attemptOptions","attemptTemplate","footer","leftControls","selector","rightControls","toggleReplaceTableWithWeighins","fullscreen","noLift","goodLift","LiftingHeader","LiftingView","replaceTableWithWeighins","now","rightElement","lifting_LiftingTable","lifting_LiftingHeader","lifting_LeftCard","lifting_LiftingFooter","entriesOnPlatform","flights","LiftingContainer","lifting_LiftingView","OneFlightOrder","getOrderBy","entriesForLift","bySquat","byBench","byDeadlift","maxRows","builder","content","getColumnHeader","FlightOrderView","updateDay","updatePlatform","handlePrint","print","selectorStyle","shownEntries","knownFlights","flightOrders","_loop","flight_order_OneFlightOrder","FlightOrderContainer","flight_order_FlightOrderView","ByDivision","renderEntryRow","place","pointsStr","squat","bench","deadlift","weightTemplate","weightString","renderCategoryResults","eqpstr","units","noviceOrMember","marginTop","categoryCards","panel","sortByFormulaPlaceInCategory","indexMap","memoizedPoints","aIndex","bIndex","aPoints","bPoints","getAllRankings","sortPointsCategoryResults","ByPoints","rank","firstDivision","total","categoryString","agePointsCategory","addEntriesRow","cls","unit","finalEventTotalKg","standardizeEquipment","exportAsOplCsv","meetCsv","makeMeetCsv","entriesCsv","squatFieldnames","benchFieldnames","deadliftFieldnames","meet_date","_results$_i","makeEntriesCsv","versionStr","addDataRow","hasDL","makeBirthDate","translateEvent","exportAsUSAPLCsv","_results$i","assertValidResultsBy","resultsBy","globalMergeDay","globalMergePlatform","ResultsView","makeDayOptions","justDayTemplate","handleByChange","handleExportAsOplCsvClick","handleExportAsUSAPLCsvClick","handleExportPlatformClick","exportname","handleMergePlatformClick","mergePlatform","makePlatformMergeButtons","platformsHaveLifted","combineTemplate","mergeTemplate","exportTemplate","forms","liftedOnDay","buttons","_loop2","lifted","marginStyle","actionTemplate","results_ByDivision","results_ByPoints","daySelector","CardDeck_default","fontWeight","controlCard","ResultsContainer","results_ResultsView","NonsenseFederations","NonsenseDivisions","RandomizeMeetSetupButton","randomizeMeetSetup","numClassesMen","numClassesWomen","classesMen","classesWomen","classesMx","div","age_lower","age_upper","NonsenseFirstNames","NonsenseLastNames","RandomizeRegistrationButton","deleteExistingRegistrations","generateEntries","randomizeRegistration","numLifters","sexes","isGuest","teams","equipmentSelect","divisionsUpperBound","divchooser","choice","FLIGHTCHARS","numFlights","RandomizeWeighinsButton","randomAttempt","randomizeWeighins","height","safety","StateTools","reInitializeRedux","localStorage","clear","reload","RandomizeMeetSetup","RandomizeRegistration","RandomizeWeighins","DebugContainer","debug_StateTools","AboutContainer","getRecordCsvMetadata","col_weight","col_date","col_location","col_division","col_class","col_record_lift","col_record_type","allColumns","mandatoryColumns","optionalColumns","columnNames","class","makeExampleRecordsCsv","metadata","firstRow","secondRow","exportedRecordsPageCss","ExportedRecordsPage","_React$Component","apply","inherits","recordCategories","renderCategory","grouping","localizedSex","localizedEquipment","renderRecord","AnyOption","RecordsView","divisionFilter","sexFilter","weightClassFilter","equipmentFilter","recordLiftFilter","recordTypeFilter","recordState","sortedAndGroupedRecords","flatMap","group","makeRecordsCsv","updatedRecords","html","kvp","ReactDOMServer","renderToString","ExportedRecordsPage_ExportedRecordsPage","generateRecordsPageHtml","assertRecordLift","assertRecordType","maybeRecords","validationError","parsedFloat","rawDiv","loadRecordsFromCsv","importRecords","filterType","getEligibleWeightClasses","allOptions","Alert","faExclamationTriangle","_this3","filteredSortedRecords","cat","renderRecordsDisabledWarning","es_Card","es_Button","handleImportClick","handleExportWebPageClick","es_Row","es_Col","es_Form","handleDivisionFilterChange","handleSexFilterChange","handleWeightClassFilterChange","handleEquipmentFilterChange","handleRecordLiftFilterChange","handleRecordTypeFilterChange","es_Table","renderRow","RecordsContainer","registration_RecordsView","RootContainer","search","containers_HomeContainer","containers_MeetSetupContainer","containers_RegistrationContainer","containers_WeighinsContainer","containers_FlightOrderContainer","containers_LiftingContainer","containers_ResultsContainer","containers_DebugContainer","containers_AboutContainer","containers_RecordsContainer","Navigation","Navbar_default","sticky","bg","expand","Brand","Toggle","aria-controls","Collapse","Nav_default","exact","Link","persistConfig","storage","persistedReducer","persistReducer","App","_configureStore","createStore","composeWithDevTools","applyMiddleware","thunk","persistor","persistStore","configureStore","integration_react","translations_OpenLifterIntlProvider","react_router_dom","basename","components_Navigation","react_router","path","component","rootElement","ReactDOM","render","src_App","serviceWorker","ready","then","unregister"],"mappings":"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CA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,KACA,QACA,MACA,SACA,OACA,UACA,OACA,UACA,KACA,QACA,MACA,SACA,OACA,UACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,KACA,QACA,MACA,SACA,KACA,QACA,MACA,SACA,OACA,UACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,KACA,QACA,MACA,SACA,OACA,UACA,OACA,UACA,KACA,QACA,MACA,SACA,OACA,UACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,WACA,MACA,SACA,OACA,UACA,QACA,YAEFC,mBAAoB,CAAC,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,IAAK,IAAK,KACpEC,qBAAsB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,IAC3DC,kBAAmB,CAAC,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,IAAK,IAAK,KACnEC,QAAS,kBACTC,gBAAiB,kBACjBC,wBAAwB,EACxBC,kBAAkB,GAGd6J,GAAoC,CACxCpK,UAAW,CACT,OACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,OACA,MACA,MACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,MACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,OACA,MACA,MACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,OAEFC,mBAAoB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,KAClDC,qBAAsB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAC/CC,kBAAmB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,KACjDC,QAAS,gBACTC,gBAAiB,kBACjBC,wBAAwB,EACxBC,kBAAkB,GAGd8J,GAAmC,CACvCrK,UAAW,CACT,OACA,QACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,QAEFC,mBAAoB,CAAC,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,IAAK,IAAK,KACpEC,qBAAsB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,IAC3DC,kBAAmB,CAAC,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,IAAK,IAAK,KACnEC,QAAS,YACTC,gBAAiB,kBACjBC,wBAAwB,EACxBC,kBAAkB,GAGd+J,GAAoC,CACxCtK,UAAW,CACT,OACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,QAEFC,mBAAoB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,IAAK,MAAO,IAAK,KACnFC,qBAAsB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,GAAI,KAC/DC,kBAAmB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,IAAK,MAAO,IAAK,KAClFC,QAAS,kBACTC,gBAAiB,kBACjBC,wBAAwB,EACxBC,kBAAkB,GAGdgK,GAAkC,CACtCvK,UAAW,CACT,QACA,UACA,QACA,UACA,QACA,UACA,OACA,SACA,QACA,UACA,QACA,UACA,QACA,UACA,OACA,SACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,QACA,OACA,QACA,UACA,QACA,UACA,QACA,UACA,OACA,SACA,QACA,UACA,QACA,UACA,QACA,UACA,QACA,UACA,OACA,SACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,QACA,UACA,QACA,UACA,QACA,UACA,OACA,SACA,QACA,UACA,QACA,UACA,QACA,UACA,OACA,SACA,QACA,UACA,QACA,UACA,QACA,UACA,OACA,SACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,QACA,UACA,OACA,SACA,QACA,UACA,QACA,UACA,QACA,UACA,OACA,SACA,SACA,WACA,UACA,QACA,UACA,QACA,UACA,QACA,UACA,SACA,WACA,QACA,UACA,OACA,SACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,UACA,YACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,QACA,UACA,QACA,UACA,OACA,UAEFC,mBAAoB,CAAC,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,IAAK,IAAK,KACpEC,qBAAsB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,IAC3DC,kBAAmB,CAAC,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,IAAK,IAAK,KACnEC,QAAS,eACTC,gBAAiB,kBACjBC,wBAAwB,EACxBC,kBAAkB,GAGdiK,GAAmC,CACvCxK,UAAW,CACT,OACA,QACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,QAEFC,mBAAoB,CAAC,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,IAAK,IAAK,KACpEC,qBAAsB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,IAC3DC,kBAAmB,CAAC,GAAI,GAAI,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,IAAK,IAAK,KACnEC,QAAS,QACTC,gBAAiB,kBACjBC,wBAAwB,EACxBC,kBAAkB,GAGdkK,eACJ,SAAAA,EAAYhT,GAAc,IAAAiT,EAAA,OAAAtH,OAAAuH,EAAA,EAAAvH,CAAA5L,KAAAiT,IACxBC,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Ac,KAAQ,KAuB9Cw7B,CAAQx7B,GAAgB+6B,EACjC,IAAK,IACH,OArBC,SAAmB/6B,GAQxB,OAAOo7B,IAPI,UACD,aACC,YACD,YACC,SAEMthC,KAAKkJ,IAAIlJ,KAAKynB,IAAIvhB,EAAc,KAAQ,KAc9Cy7B,CAAUz7B,GAAgB+6B,EACnC,QAEE,OAAO,ICxDPW,GAAmB,CAEvB,EACA,EACA,EACA,EACA,EAIA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KAIA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KAEA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EAMA,KACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,KACA,KACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KAIA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MAEA,MACA,MACA,KACA,MACA,MACA,IACA,MACA,MACA,MACA,OAIWC,GAAkB,SAACj7B,GAC9B,OAAKlH,OAAO2a,UAAUzT,IAAQA,GAAO,EAC5B,EAILA,EAAMg7B,GAAiBn/B,OAClB,EAGFm/B,GAAiBh7B,ICrGbk7B,GAAuB,SAAC57B,GACnC,IAAMg7B,EAAWlhC,KAAKynB,IAAIznB,KAAKkJ,IAAIhD,EAAc,IAAO,KAExD,GAAIg7B,GAAY,IAAO,CAQrB,OAPW,QACA,QAAWA,EACX,OAAUlhC,KAAKovB,IAAI,IAAO,GAAKpvB,KAAKovB,IAAI8R,EAAU,GAClD,QAAWlhC,KAAKovB,IAAI,IAAO,GAAKpvB,KAAKovB,IAAI8R,EAAU,GACnD,QAAWlhC,KAAKovB,IAAI,IAAO,GAAKpvB,KAAKovB,IAAI8R,EAAU,GACnD,QAAWlhC,KAAKovB,IAAI,IAAO,GAAKpvB,KAAKovB,IAAI8R,EAAU,GACnD,QAAWlhC,KAAKovB,IAAI,IAAO,IAAMpvB,KAAKovB,IAAI8R,EAAU,GAE1D,OAAIA,GAAY,IACd,KAAQ,OAAUA,EAAW,KAC3BA,GAAY,IACd,KAAQ,OAAUA,EAAW,KAC3BA,GAAY,IACd,KAAQ,MAASA,EAAW,KAU5B,MAAS,UAAcA,EAAW,MAKhCa,GAAqB,SAAC77B,GAEjC,IAKMg7B,EAAWlhC,KAAKkJ,IAAIhD,EAAc,OAExC,OAPU,iBAOClG,KAAKovB,IAAI8R,GANT,mBACD,kBClEZ,SAASc,GAAUxkC,EAAW4e,EAAWC,EAAWtZ,EAAWmL,EAAWoc,EAAWzC,GACnF,IAAM0Z,EAAK1Z,EAAIA,EACT2Z,EAAKD,EAAK1Z,EACVoa,EAAKT,EAAK3Z,EAEhB,OAAO,KAASrqB,EAAI4e,EAAIyL,EAAIxL,EAAIklB,EAAKx+B,EAAIy+B,EAAKtzB,EAAI+zB,EAAK3X,GAD5C2X,EAAKpa,IAIX,SAASqa,GAASh8B,GAEvB,OAAO87B,IAAW,YAAa,YAAa,YAAc,UAAY,YAAa,SADhEhiC,KAAKynB,IAAIznB,KAAKkJ,IAAIhD,EAAc,IAAO,QAIrD,SAASi8B,GAAWj8B,GAEzB,OAAO87B,GACL,iBACC,eACD,cACC,aACD,aACC,SAPgBhiC,KAAKynB,IAAIznB,KAAKkJ,IAAIhD,EAAc,OAAQ,SAYtD,ICOMk8B,GAAe,SAACnjC,EAAUiH,EAAsB+6B,GAC3D,OAAQhiC,GACN,IAAK,IACL,IAAK,KACH,OAlC+B,SAACiH,GAEpC,GAAIA,EAAe,OACjB,OAAQ47B,GAAqB57B,GAAgBg8B,GAASh8B,IAAiB,EAKvE,OAAQ47B,GAAqB57B,IAFlB,iBAEsCA,EADvC,kBAC2D,EA0B5Dm8B,CAA6Bn8B,GAAgB+6B,EACtD,IAAK,IACH,OAxBiC,SAAC/6B,GAEtC,GAAIA,EAAe,MACjB,OAAQ67B,GAAmB77B,GAAgBi8B,GAAWj8B,IAAiB,EAKvE,OAAQ67B,GAAmB77B,IAFhB,iBAEoCA,EADrC,kBACyD,EAgB1Do8B,CAA+Bp8B,GAAgB+6B,EACxD,QAEE,OAAO,IC9BPsB,GAAoB,CACxBC,EAAG,CACDC,QAAS,CACPC,IAAK,CAAC,WAAY,WAAY,QAC9BC,EAAG,CAAC,UAAW,UAAW,SAE5BC,aAAc,CACZF,IAAK,CAAC,WAAY,WAAY,QAC9BC,EAAG,CAAC,UAAW,UAAW,UAG9BE,EAAG,CACDJ,QAAS,CACPC,IAAK,CAAC,UAAW,WAAY,QAC7BC,EAAG,CAAC,UAAW,UAAW,SAE5BC,aAAc,CACZF,IAAK,CAAC,UAAW,UAAW,QAC5BC,EAAG,CAAC,UAAW,UAAW,WCf1BJ,GAAoB,CACxBC,EAAG,CACDC,QAAS,CACPC,IAAK,CAAC,OAAQ,QAAS,OAAQ,UAC/BI,EAAG,CAAC,MAAO,QAAS,QAAS,SAC7BH,EAAG,CAAC,QAAS,QAAS,SAAU,QAChCI,EAAG,CAAC,SAAU,QAAS,QAAS,UAElCH,aAAc,CACZF,IAAK,CAAC,QAAS,QAAS,QAAS,UACjCI,EAAG,CAAC,QAAS,QAAS,QAAS,UAC/BH,EAAG,CAAC,OAAQ,QAAS,QAAS,UAC9BI,EAAG,CAAC,QAAS,OAAQ,OAAQ,UAGjCF,EAAG,CACDJ,QAAS,CACPC,IAAK,CAAC,SAAU,OAAQ,QAAS,SACjCI,EAAG,CAAC,OAAQ,QAAS,QAAS,SAC9BH,EAAG,CAAC,QAAS,OAAQ,OAAQ,QAC7BI,EAAG,CAAC,OAAQ,OAAQ,OAAQ,QAE9BH,aAAc,CACZF,IAAK,CAAC,OAAQ,QAAS,QAAS,UAChCI,EAAG,CAAC,QAAS,QAAS,QAAS,SAC/BH,EAAG,CAAC,OAAQ,QAAS,OAAQ,SAC7BI,EAAG,CAAC,OAAQ,QAAS,OAAQ,WCd5B,IAAMC,GAAS,SAAC/jC,EAAUiH,EAAsB+6B,GACrD,OAAQhiC,GACN,IAAK,IACL,IAAK,KACH,OA1BC,SAAmBiH,GAExB,IAKM+8B,EAAajjC,KAAKynB,IAAIznB,KAAKkJ,IAAIhD,EAAc,IAAO,QAC1D,OANkB,iBAMPlG,KAAKovB,IAAI6T,GALD,kBAEA,kBADD,iBAsBPC,CAAUh9B,GAAgB+6B,EACnC,IAAK,IACH,OAjBC,SAAqB/6B,GAE1B,IAKM+8B,EAAajjC,KAAKynB,IAAIznB,KAAKkJ,IAAIhD,EAAc,IAAO,QAC1D,OANkB,iBAMPlG,KAAKovB,IAAI6T,GALD,kBAEA,kBADD,iBAaPE,CAAYj9B,GAAgB+6B,EACrC,QAEE,OAAO,ICrCb,SAASmC,GAAc5lC,EAAW4e,EAAWC,EAAWtZ,EAAWmL,EAAWoc,EAAWzC,GACvF,IAAM0Z,EAAK1Z,EAAIA,EACT2Z,EAAKD,EAAK1Z,EACVoa,EAAKT,EAAK3Z,EAEhB,OAAO,KAASrqB,EAAI4e,EAAIyL,EAAIxL,EAAIklB,EAAKx+B,EAAIy+B,EAAKtzB,EAAI+zB,EAAK3X,GAD5C2X,EAAKpa,IA8BX,IAAMwb,GAAY,SAACpkC,EAAUiH,EAAsB+6B,GACxD,OAAQhiC,GACN,IAAK,IACL,IAAK,KACH,OA9BC,SAAsBiH,GAE3B,OAAOk9B,GACL,iBACA,iBACA,kBACC,mBACD,qBACC,oBAPgBpjC,KAAKynB,IAAIznB,KAAKkJ,IAAIhD,EAAc,IAAO,SA6B/Co9B,CAAap9B,GAAgB+6B,EACtC,IAAK,IACH,OAnBC,SAAwB/6B,GAE7B,OAAOk9B,IACJ,iBACD,kBACC,mBACA,kBACD,qBACC,mBAPgBpjC,KAAKynB,IAAIznB,KAAKkJ,IAAIhD,EAAc,IAAO,SAkB/Cq9B,CAAer9B,GAAgB+6B,EACxC,QAEE,OAAO,IC3BAuC,GAAY,SAACn+B,EAAkBxE,EAAc1C,EAAc8iC,EAAiBv7B,GAEvF,IAAMzG,EAAW4B,EAAM5B,IACjBE,EAAuB0B,EAAM1B,UAC7B+G,EAAuBrF,EAAMqF,aAEnC,OAAQb,GACN,IAAK,KACH,OAAO27B,GAAG/hC,EAAKiH,EAAc+6B,GAC/B,IAAK,sBACH,OC1B6B,SAAC/6B,EAAsB+6B,GACxD,OAAI/6B,GAAgB,GAAK+6B,GAAW,EAC3B,EAEFA,EAAU/6B,EDsBNu9B,CAAoBv9B,EAAc+6B,GAC3C,IAAK,OACH,OAAOQ,GAAKxiC,EAAKiH,EAAc+6B,GACjC,IAAK,eACH,OAAOmB,GAAanjC,EAAKiH,EAAc+6B,GACzC,IAAK,gBACH,OJIkB,SACtBA,EACA/6B,EACAjH,EACAE,EACAhB,GAEA,GAAgB,IAAZ8iC,EAAe,OAAO,EAC1B,GAAI/6B,EAAe,GAAI,OAAO,EAG9B,IAAIw9B,EAAsBvkC,EAM1B,GALkB,SAAdA,GAAsC,UAAdA,EAC1BukC,EAAsB,UACC,cAAdvkC,GAA2C,cAAdA,IACtCukC,EAAsB,cAEI,YAAxBA,GAA6D,eAAxBA,EACvC,OAAO,EAIT,IAAIC,EAAgB1kC,EAGpB,GAFY,OAARA,IAAc0kC,EAAgB,KAEpB,QAAVxlC,GAA6B,MAAVA,EAAe,OAAO,EAC7C,GAAsB,MAAlBwlC,GAA2C,MAAlBA,EAAuB,OAAO,EAE3D,IAAMC,EAASrB,GAAWoB,GAAeD,GAAqBvlC,GACxD0lC,EAAQD,EAAO,GAAKA,EAAO,GAAK5jC,KAAK8jC,KAAK,EAAMF,EAAO,GAAK19B,GAC5D69B,EAAgB,IAAVF,EAAc,EAAI7jC,KAAKkJ,IAAI,EAAc,IAAV+3B,EAAmB4C,GAC9D,OAAI5nB,MAAM8nB,IAAQ79B,EAAe,GACxB,EAEF69B,EItCIhpC,CAASkmC,EAAS/6B,EAAcjH,EAAKE,EAAWhB,GACzD,IAAK,aACH,OHamB,SACvB8iC,EACA/6B,EACAjH,EACAE,EACAhB,GAEA,GAAgB,IAAZ8iC,EAAe,OAAO,EAC1B,GAAI/6B,EAAe,GAAI,OAAO,EAG9B,IAAIw9B,EAAsBvkC,EAM1B,GALkB,SAAdA,GAAsC,UAAdA,EAC1BukC,EAAsB,UACC,cAAdvkC,GAA2C,cAAdA,IACtCukC,EAAsB,cAEI,YAAxBA,GAA6D,eAAxBA,EACvC,OAAO,EAIT,IAAIC,EAAgB1kC,EAGpB,GAFY,OAARA,IAAc0kC,EAAgB,KAEpB,QAAVxlC,GAA6B,MAAVA,GAA2B,MAAVA,GAA2B,MAAVA,EAAe,OAAO,EAC/E,GAAsB,MAAlBwlC,GAA2C,MAAlBA,EAAuB,OAAO,EAE3D,IAAMC,EAASrB,GAAWoB,GAAeD,GAAqBvlC,GACxD6lC,EAAShkC,KAAKikC,IAAI/9B,GAKlB1F,EAAS,IAAO,KAAOygC,GAHhB2C,EAAO,GAAKI,EAASJ,EAAO,MAC7BA,EAAO,GAAKI,EAASJ,EAAO,IAGxC,OAAI3nB,MAAMzb,IAAWA,EAAS,EACrB,EAEFA,EGnDI0jC,CAAUjD,EAAS/6B,EAAcjH,EAAKE,EAAWhB,GAC1D,IAAK,cACH,OErCoB,SAAC+H,EAAsB+6B,GAU/C,OAAI/6B,EAAe,GAAW,EACtB+6B,EAAU/6B,GAJR,UAI6BA,EAH7B,SF6BCi+B,CAAWj+B,EAAc+6B,GAClC,IAAK,SACH,OAAO+B,GAAO/jC,EAAKiH,EAAc+6B,GACnC,IAAK,kBACH,OPsCwB,SAAChiC,EAAUiH,EAAsB+6B,GAC7D,OAAQhiC,GACN,IAAK,IACH,OAAO6iC,GAAqB57B,GAAgB+6B,EAC9C,IAAK,IACH,OAAOc,GAAmB77B,GAAgB+6B,EAC5C,QACE,OAAO,GO7CAmD,CAAenlC,EAAKiH,EAAc+6B,GAC3C,IAAK,QACH,OAAOv7B,EAAOu7B,EAAU7hC,EAAO6hC,GACjC,IAAK,QACH,ONjBe,SAAChiC,EAAUiH,EAAsB+6B,GACpD,OAAQhiC,GACN,IAAK,IACL,IAAK,KACH,OAAOijC,GAASh8B,GAAgB+6B,EAClC,IAAK,IACH,OAAOkB,GAAWj8B,GAAgB+6B,EACpC,QAEE,OAAO,GMQAoD,CAAMplC,EAAKiH,EAAc+6B,GAClC,IAAK,YACH,OAAOoC,GAAUpkC,EAAKiH,EAAc+6B,GACtC,QAEE,OAAO,IAIAqD,GAAuB,SAClCh/B,EACA0C,EACA3C,EACAxE,EACA1C,EACA8iC,EACAv7B,GAEA,IAAMlF,EAASgjC,GAAUn+B,EAASxE,EAAO1C,EAAO8iC,EAASv7B,GAEzD,OAAQJ,GACN,IAAK,OACH,OAAO9E,EACT,IAAK,kBACH,OAAOqhC,GAAgB95B,GAAOlH,EAAOmH,IAAaxH,EACpD,QAEE,OAAO,IGOF+jC,GAA2C,KAIlDC,GAA2C,EAEzCC,eACJ,SAAAA,EAAY/nC,GAAc,IAAAiT,EAAA,OAAAtH,OAAAuH,EAAA,EAAAvH,CAAA5L,KAAAgoC,IACxB90B,EAAAtH,OAAAwH,EAAA,EAAAxH,CAAA5L,KAAA4L,OAAAyH,EAAA,EAAAzH,CAAAo8B,GAAA10B,KAAAtT,KAAMC,KAORgoC,wBAA0B,SAAC7jC,EAAcyJ,EAAYq6B,GAQnD,IAPA,IAAMrL,EAAUjvB,GAAuBC,GACjC0D,EAAczD,GAAsBD,GAGtCs6B,EAAQ,EACRC,EAAiB,EAEZriC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAMnD,EAAKwB,EAAMy4B,GAAS92B,GAEI,IAA1B3B,EAAMmN,GAAaxL,GACrBoiC,EAAQ5kC,KAAKkJ,IAAI07B,EAAOvlC,IACY,IAA3BwB,EAAMmN,GAAaxL,KAC5BqiC,EAAoC,IAAnBA,EAAuBxlC,EAAKW,KAAKynB,IAAIod,EAAgBxlC,IAK1E,GAAc,IAAVulC,EAAa,CACf,IAAMxiC,EAAWuN,EAAKjT,MAAMwP,KAAKxG,KAAOk/B,EAAQxlC,EAAOwlC,GACvD,OACErnC,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,EAAY3mC,UAAW6X,KAAO9a,UACpC6E,GAAcwC,EAAUuN,EAAKjT,MAAMF,WAI1C,GAAuB,IAAnBqoC,EAAsB,CACxB,IAAMziC,EAAWuN,EAAKjT,MAAMwP,KAAKxG,KAAOm/B,EAAiBzlC,EAAOylC,GAChE,OACEtnC,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,EAAY3mC,UAAW6X,KAAO7a,QACpC4E,GAAcwC,EAAUuN,EAAKjT,MAAMF,WAM1C,OAAOe,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,KA7CQh1B,EAgD1Bm1B,mBAAqB,SAACjkC,EAAcyJ,EAAYG,EAA2Bk6B,GACzE,IAAMrL,EAAUjvB,GAAuBC,GACjC0D,EAAczD,GAAsBD,GAEpCjL,EAAKwB,EAAMy4B,GAAS7uB,EAAoB,GACxCqD,EAASjN,EAAMmN,GAAavD,EAAoB,GAChDs6B,EAAOnlC,GAAc+P,EAAKjT,MAAMwP,KAAKxG,KAAOrG,EAAKD,EAAOC,GAAKsQ,EAAKjT,MAAMF,UACxEwoC,EAAoB,IAAP3lC,EAAW,GAAK0lC,EAK7BhkC,EAAK,gBAAkBF,EAAME,GAAK,IAAMuJ,EAAOG,EAKrD,GAAIkF,EAAKjT,MAAM2R,QAAQ9C,kBAAoB1K,EAAME,IAAM0J,IAAsBkF,EAAKjT,MAAM+N,kBAOtF,OALIA,GAAqB+5B,KACvBA,GAAmC/5B,EACnC85B,GAA4BxjC,GAI5BxD,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,EAAY3mC,UAAW6X,KAAOhb,kBACrC0C,EAAAC,EAAAC,cAACwnC,GAAD,CAAclkC,GAAIA,EAAIF,MAAOA,EAAOyJ,KAAMA,EAAMG,kBAAmBA,KAOzE,GAAe,IAAXqD,EAAc,CAChB,IAAM9P,EAAuB,IAAX8P,EAAe+H,KAAO9a,SAAW8a,KAAO7a,OACpDkqC,EAA2B,IAAXp3B,EAAe,GAAK,IAC1C,OACEvQ,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,EAAY3mC,UAAWA,GAC7BknC,EACAF,GAMP,GAAI16B,IAASqF,EAAKjT,MAAM2R,QAAQ/D,KAC9B,OAAO/M,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAaK,GAK/B,IADA,IAAIG,GAA0B,EACrB3iC,EAAI,EAAGA,EAAIiI,EAAmBjI,IACrC,GAAkC,IAA9B3B,EAAMmN,GAAaxL,EAAI,GAAU,CACnC2iC,GAA0B,EAC1B,MAQJ,IAAMC,EAAwB36B,IAAsBkF,EAAKjT,MAAM+N,mBAAqB06B,EAC9EE,EACJ56B,IAAsBkF,EAAKjT,MAAM+N,kBAAoB,GACI,IAAzD5J,EAAMmN,GAAa2B,EAAKjT,MAAM+N,kBAAoB,GAEpD,OAAW,IAAPpL,GAAY+lC,GAAyBC,GAEnC56B,GAAqB+5B,KACvBA,GAAmC/5B,EACnC85B,GAA4BxjC,GAI5BxD,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,EAAY3mC,UAAW6X,KAAOhb,kBACrC0C,EAAAC,EAAAC,cAACwnC,GAAD,CAAclkC,GAAIA,EAAIF,MAAOA,EAAOyJ,KAAMA,EAAMG,kBAAmBA,MAMlElN,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAaK,IAlILr1B,EAqI1B21B,WAAa,SAACzkC,EAAc8jC,EAAwB3G,GAClD,OAAQ2G,GACN,IAAK,SACH,IAAIza,EAA6BrpB,EAAM4D,KAOvC,OAJIkL,EAAKjT,MAAMo+B,iBAAmBj6B,EAAME,KACtCmpB,EAAO3sB,EAAAC,EAAAC,cAAA,SAAIoD,EAAM4D,OAIjBlH,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,EAAY3mC,UAAW6X,KAAOpb,UACpCyvB,GAIP,IAAK,aACH,IAAMqb,EAAK1kC,EAAMqF,aACXs/B,EAAQ5lC,GAAc+P,EAAKjT,MAAMwP,KAAKxG,KAAO6/B,EAAKnmC,EAAOmmC,GAAK51B,EAAKjT,MAAMF,UAC/E,OAAOe,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAoB,IAAPY,EAAW,KAAOC,GAEjD,IAAK,cACH,IAAMD,EAAK1kC,EAAMqF,aACXw2B,EAAgBzxB,GACpBpK,EAAM5B,IACN0Q,EAAKjT,MAAMwP,KAAKhH,mBAChByK,EAAKjT,MAAMwP,KAAK/G,qBAChBwK,EAAKjT,MAAMwP,KAAK9G,mBAEZyG,EAAc8D,EAAKjT,MAAMwP,KAAKxG,KAChCM,GAAkB02B,EAAe6I,EAAI51B,EAAKjT,MAAMF,UAChDgK,GAAqBk2B,EAAe6I,GACxC,OAAOhoC,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAoB,IAAPY,EAAW,KAAO15B,GAEjD,IAAK,WAGH,IAAMoyB,EAAWp9B,EAAMoE,UAAUxC,OAAS,EAAI5B,EAAMoE,UAAU,GAAK,KACnE,OACE1H,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,EAAY3mC,UAAW6X,KAAOpb,UACpCwjC,GAIP,IAAK,MACH,OACE1gC,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,EAAY3mC,UAAW6X,KAAOpb,UACtB,IAAdoG,EAAMkG,IAAY,GAAKlG,EAAMkG,KAIpC,IAAK,YAEH,IAAI5H,EAAgC0B,EAAM1B,UAG1C,MAFkB,eAAdA,IAA4BA,EAAY,UAC1B,cAAdA,IAA2BA,EAAY,SACpC5B,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAaxlC,GAE/B,IAAK,MACH,OAAO5B,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAa9jC,EAAM+F,KACrC,IAAK,KACH,OAAO+I,EAAKm1B,mBAAmBjkC,EAAO,IAAK,EAAG8jC,GAChD,IAAK,KACH,OAAOh1B,EAAKm1B,mBAAmBjkC,EAAO,IAAK,EAAG8jC,GAChD,IAAK,KACH,OAAOh1B,EAAKm1B,mBAAmBjkC,EAAO,IAAK,EAAG8jC,GAChD,IAAK,KACH,OAAOh1B,EAAKm1B,mBAAmBjkC,EAAO,IAAK,EAAG8jC,GAChD,IAAK,KACH,OAAOh1B,EAAKm1B,mBAAmBjkC,EAAO,IAAK,EAAG8jC,GAChD,IAAK,KACH,OAAOh1B,EAAKm1B,mBAAmBjkC,EAAO,IAAK,EAAG8jC,GAChD,IAAK,KACH,OAAOh1B,EAAKm1B,mBAAmBjkC,EAAO,IAAK,EAAG8jC,GAChD,IAAK,KACH,OAAOh1B,EAAKm1B,mBAAmBjkC,EAAO,IAAK,EAAG8jC,GAChD,IAAK,KACH,OAAOh1B,EAAKm1B,mBAAmBjkC,EAAO,IAAK,EAAG8jC,GAChD,IAAK,KACH,OAAOh1B,EAAKm1B,mBAAmBjkC,EAAO,IAAK,EAAG8jC,GAChD,IAAK,KACH,OAAOh1B,EAAKm1B,mBAAmBjkC,EAAO,IAAK,EAAG8jC,GAChD,IAAK,KACH,OAAOh1B,EAAKm1B,mBAAmBjkC,EAAO,IAAK,EAAG8jC,GAChD,IAAK,YACH,OAAOh1B,EAAK+0B,wBAAwB7jC,EAAO,IAAK8jC,GAClD,IAAK,YACH,OAAOh1B,EAAK+0B,wBAAwB7jC,EAAO,IAAK8jC,GAClD,IAAK,UACL,IAAK,UACH,OAAOpnC,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,EAAY3mC,UAAW6X,KAAOlb,aAChD,IAAK,iBACH,IAAMsmC,EAAU13B,GAAoB1I,GAC9BuB,EAAWuN,EAAKjT,MAAMwP,KAAKxG,KAAOu7B,EAAU7hC,EAAO6hC,GACzD,OAAO1jC,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAyB,IAAZ1D,EAAgB,KAAOrhC,GAAcwC,EAAUuN,EAAKjT,MAAMF,WAEzF,IAAK,kBACH,IAAMykC,EAAkB13B,GAAoB1I,GACtC1C,EAAQ0C,EAAMiG,OAAOrE,OAAS,EAAI5B,EAAMiG,OAAO,GAAK,MACpDtG,EAAiBgjC,GAAU7zB,EAAKjT,MAAMwP,KAAK7G,QAASxE,EAAO1C,EAAO8iC,EAAStxB,EAAKjT,MAAMwP,KAAKxG,MAGjG,MAAgC,UAA5BiK,EAAKjT,MAAMwP,KAAK7G,QACX9H,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAwB,IAAXnkC,EAAeZ,GAAcY,EAAQmP,EAAKjT,MAAMF,UAAY,MAEpFe,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAwB,IAAXnkC,EAAeD,GAAcC,EAAQmP,EAAKjT,MAAMF,UAAY,MAE3F,IAAK,aACH,IAAMykC,EAAUj3B,GAAgBnJ,GAC1BuB,EAAWuN,EAAKjT,MAAMwP,KAAKxG,KAAOu7B,EAAU7hC,EAAO6hC,GACzD,OAAO1jC,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAyB,IAAZ1D,EAAgB,KAAOrhC,GAAcwC,EAAUuN,EAAKjT,MAAMF,WAEzF,IAAK,cACH,IAAMykC,EAAkBj3B,GAAgBnJ,GAClC1C,EAAQ0C,EAAMiG,OAAOrE,OAAS,EAAI5B,EAAMiG,OAAO,GAAK,MACpDtG,EAAiBgjC,GAAU7zB,EAAKjT,MAAMwP,KAAK7G,QAASxE,EAAO1C,EAAO8iC,EAAStxB,EAAKjT,MAAMwP,KAAKxG,MAGjG,MAAgC,UAA5BiK,EAAKjT,MAAMwP,KAAK7G,QACX9H,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAwB,IAAXnkC,EAAeZ,GAAcY,EAAQmP,EAAKjT,MAAMF,UAAY,MAEpFe,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAwB,IAAXnkC,EAAeD,GAAcC,EAAQmP,EAAKjT,MAAMF,UAAY,MAE3F,IAAK,QAEH,GAA+B,IAA3BwN,GAAgBnJ,GAAc,OAAOtD,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,IAGlD,GAAI9jC,EAAMsG,MAAO,OAAO5J,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GAAa7jC,GAAU,uBAAwB6O,EAAKjT,MAAMF,WAE3F,IAAMsjC,EAAe/B,GAAgBl9B,EAAOm9B,GAC5C,OACEzgC,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,GACW,OAAjB7E,EAAwBl/B,GAAoBk/B,EAAcj/B,EAAO8O,EAAKjT,MAAMF,eAAYqC,GAI/F,QAEE,OAAOtB,EAAAC,EAAAC,cAAA,MAAIR,IAAK0nC,MAhRIh1B,EAoR1BkU,WAAa,SAAC4hB,EAA4BzH,GAKxC,IAJA,IAAM5D,EAAiBzqB,EAAKjT,MAAM09B,eAC5BU,EAAiBnrB,EAAKjT,MAAMo+B,eAE5B7R,EAAO,GACJzmB,EAAI,EAAGA,EAAI43B,EAAe33B,OAAQD,IAAK,CAK9C,IAJA,IAAM3B,EAAQu5B,EAAe53B,GAGvBkjC,EAAQ,GACLC,EAAM,EAAGA,EAAMF,EAAQhjC,OAAQkjC,IAAO,CAC7C,IAAMhB,EAAac,EAAQE,GAC3BD,EAAM16B,KAAK2E,EAAK21B,WAAWzkC,EAAO8jC,EAAY3G,IAGhD,IACM4H,EADY/kC,EAAME,KAAO+5B,EACEjlB,KAAO/a,QAAU,GAClDmuB,EAAKje,KACHzN,EAAAC,EAAAC,cAAA,MAAIR,IAAK4D,EAAME,GAAI/C,UAAW4nC,GAC3BF,IAIP,OAAOzc,GA3SiBtZ,EA8S1Bk2B,qBAAuB,SAAClB,GACtB,OAAQA,GACN,IAAK,SACH,OAAOpnC,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,0BAC7B,IAAK,aACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,8BAC7B,IAAK,cACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,+BAC7B,IAAK,WACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,4BAC7B,IAAK,MACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,uBAC7B,IAAK,YACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,6BAC7B,IAAK,MACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,uBAC7B,IAAK,KACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,sBAC7B,IAAK,KACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,sBAC7B,IAAK,KACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,sBAC7B,IAAK,KACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,sBAC7B,IAAK,KACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,sBAC7B,IAAK,KACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,sBAC7B,IAAK,KACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,sBAC7B,IAAK,KACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,sBAC7B,IAAK,KACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,sBAC7B,IAAK,KACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,sBAC7B,IAAK,KACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,sBAC7B,IAAK,KACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,sBAC7B,IAAK,YACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,6BAC7B,IAAK,YACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,6BAC7B,IAAK,UACL,IAAK,UACH,MAAO,GACT,IAAK,iBACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,kCAC7B,IAAK,kBACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,mCAC7B,IAAK,aACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,kCAC7B,IAAK,cACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,+BAC7B,IAAK,QACH,OAAOxD,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,yBAC7B,QAEE,MAAO,KAvWX4O,EAAKkU,WAAalU,EAAKkU,WAAWzT,KAAhB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAClBA,EAAK+0B,wBAA0B/0B,EAAK+0B,wBAAwBt0B,KAA7B/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAC/BA,EAAKm1B,mBAAqBn1B,EAAKm1B,mBAAmB10B,KAAxB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAC1BA,EAAK21B,WAAa31B,EAAK21B,WAAWl1B,KAAhB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IALMA,wEA+WxB60B,GAAmC,EAGnC,IAAMiB,EAA6B,CAAC,UAEa,IAA7ChpC,KAAKC,MAAM2R,QAAQ7C,uBACrBi6B,EAAQz6B,KAAK,YAEfy6B,EAAQz6B,KAAK,aAAc,eAG3B,IAAK,IAAIxI,EAAI,EAAGA,EAAI/F,KAAKC,MAAM09B,eAAe33B,SAAUD,EACtD,GAAyC,IAArC/F,KAAKC,MAAM09B,eAAe53B,GAAGuE,IAAW,CAC1C0+B,EAAQz6B,KAAK,OACb,MAK4B,MAA5BvO,KAAKC,MAAM2R,QAAQ/D,MACrBm7B,EAAQz6B,KAAK,WACby6B,EAAQz6B,KAAK,KAAM,KAAM,MACY,IAAjCvO,KAAKC,MAAM+N,mBACbg7B,EAAQz6B,KAAK,MAEfy6B,EAAQz6B,KAAK,WACby6B,EAAQz6B,KAAK,KAAM,OACkB,MAA5BvO,KAAKC,MAAM2R,QAAQ/D,MAC5Bm7B,EAAQz6B,KAAK,YAAa,UAAW,KAAM,KAAM,MACZ,IAAjCvO,KAAKC,MAAM+N,mBACbg7B,EAAQz6B,KAAK,MAEfy6B,EAAQz6B,KAAK,UAAW,OACa,MAA5BvO,KAAKC,MAAM2R,QAAQ/D,OAC5Bm7B,EAAQz6B,KAAK,YAAa,YAAa,UAAW,KAAM,KAAM,MACzB,IAAjCvO,KAAKC,MAAM+N,mBACbg7B,EAAQz6B,KAAK,MAEfy6B,EAAQz6B,KAAK,YAIf,IAAM86B,EAA2C,MAA5BrpC,KAAKC,MAAM2R,QAAQ/D,MAAgB7N,KAAKC,MAAM+N,kBAAoB,EACvFg7B,EAAQz6B,KAAK86B,EAAe,iBAAmB,cACf,UAA5BrpC,KAAKC,MAAMwP,KAAK7G,SAClBogC,EAAQz6B,KAAK86B,EAAe,kBAAoB,eAElDL,EAAQz6B,KAAK,SAKb,IAFA,IAAM2e,EAAU,GACVoc,EAAkBtpC,KAAKC,MAAM2R,QAAQ/D,KAAO/G,OAAO9G,KAAKC,MAAM+N,mBAC3DjI,EAAI,EAAGA,EAAIijC,EAAQhjC,OAAQD,IAAK,CACvC,IAAMksB,EAAS+W,EAAQjjC,GACnBxE,EAAY6X,KAAOnb,UACnB2W,OAAgC,EAErB,WAAXqd,EACF1wB,EAAY6X,KAAOmwB,SACC,aAAXtX,GACT1wB,EAAY6X,KAAOowB,aACfxpC,KAAKC,MAAM2R,QAAQ7C,wBACrB6F,EAAQ,CAAEC,MAAO7U,KAAKC,MAAM2R,QAAQ7C,sBAAwB,QAE1C,YAAXkjB,GAAmC,YAAXA,EACjC1wB,EAAY6X,KAAOlb,WACV+zB,IAAWqX,IACpB/nC,EAAY6X,KAAOjb,cAGrB+uB,EAAQ3e,KACNzN,EAAAC,EAAAC,cAAA,MAAIR,IAAKyxB,EAAQ1wB,UAAWA,EAAWqT,MAAOA,GAC3C5U,KAAKopC,qBAAqBnX,KAMjC,IAAMsP,EAAkB8H,EACpBjI,GACEphC,KAAKC,MAAMwQ,aAAa/C,QACxB1N,KAAKC,MAAMwP,KAAKhH,mBAChBzI,KAAKC,MAAMwP,KAAK/G,qBAChB1I,KAAKC,MAAMwP,KAAK9G,kBAChB3I,KAAKC,MAAMwP,KAAK3G,wBAElBu4B,GACErhC,KAAKC,MAAMwQ,aAAa/C,QACxB1N,KAAKC,MAAMwP,KAAKhH,mBAChBzI,KAAKC,MAAMwP,KAAK/G,qBAChB1I,KAAKC,MAAMwP,KAAK9G,kBAChB3I,KAAKC,MAAMwP,KAAK3G,wBAGtB,OACEhI,EAAAC,EAAAC,cAAA,SAAOO,UAAW6X,KAAOrb,cACvB+C,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UAAKksB,IAEPpsB,EAAAC,EAAAC,cAAA,aAAQhB,KAAKonB,WAAW4hB,EAASzH,YAndd7gC,IAAMc,WAkelBb,eATS,SAACC,GACvB,MAAO,CACL6O,KAAM7O,EAAM6O,KACZmC,QAAShR,EAAMgR,QACf7R,SAAUa,EAAMb,SAChB0Q,aAAc7P,EAAM6P,eAIT9P,CAAyBqnC,wBCrgBlCyB,eACJ,SAAAA,EAAYxpC,GAAc,IAAAiT,EAAA,OAAAtH,OAAAuH,EAAA,EAAAvH,CAAA5L,KAAAypC,IACxBv2B,EAAAtH,OAAAwH,EAAA,EAAAxH,CAAA5L,KAAA4L,OAAAyH,EAAA,EAAAzH,CAAA69B,GAAAn2B,KAAAtT,KAAMC,KAmBRypC,gBAAkB,SAAChoC,GACjB,IAAMiF,EAAM1D,OAAOvB,EAAME,cAAcX,OACjCqB,EAAS4Q,EAAKjT,MAAM2R,QAAQtP,OAC5BuL,EAAOqF,EAAKjT,MAAM2R,QAAQ/D,KAG5B5D,EAAWiJ,EAAKjT,MAAM2R,QAAQ3H,SAC9BA,EAAWiJ,EAAKjT,MAAMsI,gBAAgB5B,EAAM,KAC9CsD,EAAW,GAGbiJ,EAAKjT,MAAM0pC,gBAAgBhjC,EAAKsD,EAAU3H,EAAQuL,IA/B1BqF,EAkC1B02B,qBAAuB,SAACloC,GACtB,IAAMiF,EAAMuM,EAAKjT,MAAM2R,QAAQjL,IACzBsD,EAAWhH,OAAOvB,EAAME,cAAcX,OACtCqB,EAAS4Q,EAAKjT,MAAM2R,QAAQtP,OAC5BuL,EAAOqF,EAAKjT,MAAM2R,QAAQ/D,KAChCqF,EAAKjT,MAAM0pC,gBAAgBhjC,EAAKsD,EAAU3H,EAAQuL,IAvC1BqF,EA0C1B22B,mBAAqB,SAACnoC,GACpB,IAAMiF,EAAMuM,EAAKjT,MAAM2R,QAAQjL,IACzBsD,EAAWiJ,EAAKjT,MAAM2R,QAAQ3H,SAC9B3H,EAASZ,EAAME,cAAcX,MAC7B4M,EAAOqF,EAAKjT,MAAM2R,QAAQ/D,KAC5B7L,EAAaM,IAAWD,EAAaC,IACvC4Q,EAAKjT,MAAM0pC,gBAAgBhjC,EAAKsD,EAAU3H,EAAQuL,IAhD5BqF,EAoD1B42B,iBAAmB,SAACpoC,GAClB,IAAMiF,EAAMuM,EAAKjT,MAAM2R,QAAQjL,IACzBsD,EAAWiJ,EAAKjT,MAAM2R,QAAQ3H,SAE9B4D,EAAOnM,EAAME,cAAcX,MAC7Be,EAAa6L,I5EzBd,SAAoB5M,GACzB,IAAM4M,EAAO5M,EACb,OAAQ4M,GACN,IAAK,IACL,IAAK,IACL,IAAK,IACH,OAAO,EACT,QAEE,MAAM,IAAI3N,MAAJ,uDAAAgC,OAAiEjB,EAAjE,O4EgBkB8oC,CAAWl8B,IACnCqF,EAAKjT,MAAM0pC,gBAAgBhjC,EAAKsD,EAHnB,IAGqC4D,IA1D5BqF,EA8D1B82B,oBAAsB,SAACtoC,GACrB,IAAMmQ,EAAU5O,OAAOvB,EAAME,cAAcX,OAC3CiS,EAAKjT,MAAM4O,gBAAgBgD,IAhEHqB,EAmE1B+2B,mBAAqB,SAACvoC,GACpB,IAAMoP,EAAU7N,OAAOvB,EAAME,cAAcX,OAC3CiS,EAAKjT,MAAM6O,gBAAgBgC,IArEHoC,EA0E1Bg3B,4BAA8B,WACM,OAA9BpC,KAKA50B,EAAKjT,MAAM+N,mBAAqB,GAIpCwS,WAAW,WACT,GAAkC,OAA9BsnB,GAAJ,CAIA,IAAMqC,EAAOrzB,SAASC,eAAe+wB,IACjCqC,GACFA,EAAKC,UAEN,OA7FqBl3B,EA0G1Bm3B,mBAAqB,WACnB,IAAMC,EAAgBxzB,SAASwzB,cAC3BA,aAAyBC,aAC3BD,EAAc9vB,QA7GQtH,EAiH1Bs3B,eAAiB,kBAAMt3B,EAAKu3B,kBAAiB,IAjHnBv3B,EAkH1Bw3B,aAAe,kBAAMx3B,EAAKu3B,kBAAiB,IAlHjBv3B,EAkI1By3B,qBAAuB,WACrB,IAAMC,EAAW9zB,SACjB,QAAI8zB,EAAIC,sBACJD,EAAIE,4BACJF,EAAIG,wBACJH,EAAII,uBAvIgB93B,EA4I1B+3B,eAAiB,WACf,IAAML,EAAW9zB,SACiB,oBAAvB8zB,EAAIK,eAA+BL,EAAIK,iBACL,oBAA7BL,EAAIM,qBAAqCN,EAAIM,uBACnB,oBAA1BN,EAAIO,kBAAkCP,EAAIO,oBACjB,oBAAzBP,EAAIQ,kBAAiCR,EAAIQ,oBAjJjCl4B,EAqJ1Bm4B,kBAAoB,SAAC55B,GACgB,oBAAxBA,EAAE45B,kBAAkC55B,EAAE45B,oBACH,oBAA9B55B,EAAE65B,wBAAwC75B,EAAE65B,0BACjB,oBAA3B75B,EAAE85B,qBAAqC95B,EAAE85B,uBACf,oBAA1B95B,EAAE+5B,qBAAoC/5B,EAAE+5B,uBAzJhCt4B,EA6J1Bu4B,iBAAmB,WAGjB,IAAoC,IAAhCv4B,EAAKy3B,uBACPz3B,EAAK+3B,qBACA,CACL,IAAM7vC,EAAc0b,SAASC,eAAe,eACxB,OAAhB3b,GACF8X,EAAKm4B,kBAAkBjwC,KArKH8X,EA0K1Bw4B,kBAAoB,WAClB,IAAM/N,EAAiBzqB,EAAKjT,MAAM09B,eAElC,GAA8B,IAA1BA,EAAe33B,OACjB,OACElF,EAAAC,EAAAC,cAAA,UAAQC,MAAO,EAAGT,IAAK,GACpB6D,GAAU,4BAA6B6O,EAAKjT,MAAMF,WAMzD,IADA,IAAM4rC,EAAgB,GACb5lC,EAAI,EAAGA,EAAI43B,EAAe33B,OAAQD,IAAK,CAC9C,IAAM3B,EAAQu5B,EAAe53B,GAC7B4lC,EAAcp9B,KACZzN,EAAAC,EAAAC,cAAA,UAAQC,MAAOmD,EAAME,GAAI9D,IAAK4D,EAAME,IACjCF,EAAM4D,OAIb,OAAO2jC,GA3LPz4B,EAAKw2B,gBAAkBx2B,EAAKw2B,gBAAgB/1B,KAArB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACvBA,EAAK02B,qBAAuB12B,EAAK02B,qBAAqBj2B,KAA1B/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAC5BA,EAAK22B,mBAAqB32B,EAAK22B,mBAAmBl2B,KAAxB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAC1BA,EAAK42B,iBAAmB52B,EAAK42B,iBAAiBn2B,KAAtB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAExBA,EAAKm3B,mBAAqBn3B,EAAKm3B,mBAAmB12B,KAAxB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAC1BA,EAAKs3B,eAAiBt3B,EAAKs3B,eAAe72B,KAApB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACtBA,EAAKw3B,aAAex3B,EAAKw3B,aAAa/2B,KAAlB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAEpBA,EAAK82B,oBAAsB92B,EAAK82B,oBAAoBr2B,KAAzB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAC3BA,EAAK+2B,mBAAqB/2B,EAAK+2B,mBAAmBt2B,KAAxB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAE1BA,EAAKg3B,4BAA8Bh3B,EAAKg3B,4BAA4Bv2B,KAAjC/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAEnCA,EAAKw4B,kBAAoBx4B,EAAKw4B,kBAAkB/3B,KAAvB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAjBDA,gFAoHT5B,GAEf,GAAkC,OAA9BtR,KAAKC,MAAMo+B,eAAf,CAIA,IAAMj6B,EAAQpE,KAAK4rC,kBACb/9B,EAAO7N,KAAKC,MAAM2R,QAAQ/D,KAC1BgE,EAAU7R,KAAKC,MAAM+N,kBAC3BhO,KAAKC,MAAM4rC,SAASznC,EAAOyJ,EAAMgE,EAASP,GAC1CtR,KAAKkqC,yEAoEL,IAAMp5B,EAAU9Q,KAAKC,MAAMo+B,eACrBj6B,EAAQpE,KAAKC,MAAMyN,QAAQo+B,KAAK,SAACr6B,GAAD,OAAOA,EAAEnN,KAAOwM,IACtD,QAAc1O,IAAVgC,EACF,MAAM,IAAIlE,MAAJ,8BAAAgC,OAAwC4O,EAAxC,yDAER,OAAO1M,mCASP,IALA,IAAMrE,EAAWC,KAAKC,MAAMF,SACtBgsC,EAAe/rC,KAAKC,MAAMsI,gBAAgBvI,KAAKC,MAAM2R,QAAQjL,IAAM,GAEnEijB,EAAa,GACboiB,EAAc3nC,GAAU,8BAA+BtE,GACpDgG,EAAI,EAAGA,GAAK/F,KAAKC,MAAMqI,WAAYvC,IAC1C6jB,EAAWrb,KACTzN,EAAAC,EAAAC,cAAA,UAAQC,MAAO8E,EAAGvF,IAAKuF,GACpBimC,EAAY9oC,QAAQ,MAAOe,GAAc8B,EAAGhG,MAOnD,IAFA,IAAM8pB,EAAkB,GAClBoiB,EAAmB5nC,GAAU,mCAAoCtE,GAC9DgG,EAAI,EAAGA,GAAKgmC,EAAchmC,IACjC8jB,EAAgBtb,KACdzN,EAAAC,EAAAC,cAAA,UAAQC,MAAO8E,EAAGvF,IAAKuF,GACpBkmC,EAAiB/oC,QAAQ,MAAOe,GAAc8B,EAAGhG,MAmBxD,IAdA,IAAMmsC,EAAc,CAClBprC,EAAAC,EAAAC,cAAA,UAAQR,IAAK,IAAKS,MAAO,KACtBoD,GAAU,uBAAwBtE,IAErCe,EAAAC,EAAAC,cAAA,UAAQR,IAAK,IAAKS,MAAO,KACtBoD,GAAU,uBAAwBtE,IAErCe,EAAAC,EAAAC,cAAA,UAAQR,IAAK,IAAKS,MAAO,KACtBoD,GAAU,0BAA2BtE,KAIpCosC,EAAgB,GAChBC,EAAiB/nC,GAAU,iCAAkCtE,GAC1DgG,EAAI,EAAGA,EAAI/F,KAAKC,MAAMosC,kBAAkBrmC,OAAQD,IAAK,CAC5D,IAAMzD,EAAStC,KAAKC,MAAMosC,kBAAkBtmC,GACtCvF,EAAMR,KAAKC,MAAM2R,QAAQjL,IAAM,IAAM3G,KAAKC,MAAM2R,QAAQ3H,SAAW,IAAMlE,EAC/EomC,EAAc59B,KACZzN,EAAAC,EAAAC,cAAA,UAAQC,MAAOqB,EAAQ9B,IAAKA,GACzB4rC,EAAelpC,QAAQ,WAAYgC,GAAe5C,EAAQvC,MAIpC,IAAzBosC,EAAcnmC,QAChBmmC,EAAc59B,KAAKzN,EAAAC,EAAAC,cAAA,UAAQR,IAAI,QAAQ6D,GAAU,4BAA6BtE,KAKhF,IAFA,IAAMusC,EAAiB,GACjBC,EAAkBloC,GAAU,kCAAmCtE,GAC5DgG,EAAI,EAAGA,GAAK,EAAGA,IACtBumC,EAAe/9B,KACbzN,EAAAC,EAAAC,cAAA,UAAQR,IAAKuF,EAAG9E,MAAO8E,GACpBwmC,EAAgBrpC,QAAQ,MAAOe,GAAc8B,EAAGhG,OAInB,IAAhCC,KAAKC,MAAM8I,kBACbujC,EAAe/9B,KACbzN,EAAAC,EAAAC,cAAA,UAAQR,IAAK,EAAGS,MAAO,GACpBsrC,EAAgBrpC,QAAQ,MAAOe,GAAc,EAAGlE,MAKvD,IAAMs+B,EAA+C,OAA9Br+B,KAAKC,MAAMo+B,oBAA0Bj8B,EAAYpC,KAAKC,MAAMo+B,eAAe1T,WAElG,OACE7pB,EAAAC,EAAAC,cAAA,OAAKO,UAAW6X,KAAOozB,QACrB1rC,EAAAC,EAAAC,cAAA,OAAKO,UAAW6X,KAAOqzB,cACrB3rC,EAAAC,EAAAC,cAACwT,GAAAzT,EAAKma,QAAN,CACE9Z,GAAG,SACHH,MAAOjB,KAAKC,MAAM2R,QAAQjL,IAAIgkB,WAC9BtpB,SAAUrB,KAAK0pC,gBACfnoC,UAAS,iBAAAW,OAAmBkX,KAAOszB,WAElC9iB,GAEH9oB,EAAAC,EAAAC,cAACwT,GAAAzT,EAAKma,QAAN,CACE9Z,GAAG,SACHH,MAAOjB,KAAKC,MAAM2R,QAAQ3H,SAAS0gB,WACnCtpB,SAAUrB,KAAK4pC,qBACfroC,UAAS,iBAAAW,OAAmBkX,KAAOszB,WAElC7iB,GAEH/oB,EAAAC,EAAAC,cAACwT,GAAAzT,EAAKma,QAAN,CACE9Z,GAAG,SACHH,MAAOjB,KAAKC,MAAM2R,QAAQ/D,KAC1BxM,SAAUrB,KAAK8pC,iBACfvoC,UAAS,iBAAAW,OAAmBkX,KAAOszB,WAElCR,GAEHprC,EAAAC,EAAAC,cAACwT,GAAAzT,EAAKma,QAAN,CACE1a,IAAK,UAAYR,KAAKC,MAAM2R,QAAQtP,OACpClB,GAAG,SACHH,MAAOjB,KAAKC,MAAM2R,QAAQtP,OAC1BjB,SAAUrB,KAAK6pC,mBACftoC,UAAS,iBAAAW,OAAmBkX,KAAOszB,WAElCP,GAEHrrC,EAAAC,EAAAC,cAACwT,GAAAzT,EAAKma,QAAN,CACEja,MAAOjB,KAAKC,MAAM+N,kBAAkB2c,WACpCvpB,GAAG,SACHC,SAAUrB,KAAKgqC,oBACfzoC,UAAS,iBAAAW,OAAmBkX,KAAOszB,WAElCJ,GAEHxrC,EAAAC,EAAAC,cAACwT,GAAAzT,EAAKma,QAAN,CACEja,MAAOo9B,EACPj9B,GAAG,SACHC,SAAUrB,KAAKiqC,mBACf1oC,UAAS,iBAAAW,OAAmBkX,KAAOszB,WAElC1sC,KAAK0rC,sBAIV5qC,EAAAC,EAAAC,cAAA,OAAKO,UAAW6X,KAAOuzB,eACrB7rC,EAAAC,EAAAC,cAACkiB,GAAAniB,EAAD,KACED,EAAAC,EAAAC,cAAC+T,EAAAhU,EAAD,CAAQkU,QAAQ,kBAAkBD,QAAShV,KAAKC,MAAM2sC,gCACpD9rC,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,kCAAkCqQ,eAAe,sBAExE7T,EAAAC,EAAAC,cAAC+T,EAAAhU,EAAD,CAAQkU,QAAQ,oBAAoBD,QAAShV,KAAKyrC,iBAAkBlqC,UAAW6X,KAAOyzB,YACpF/rC,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,mCAAmCqQ,eAAe,wBAG3E7T,EAAAC,EAAAC,cAAA,UACEW,KAAK,SACL8f,aAAczhB,KAAKqqC,mBACnBjtB,YAAapd,KAAK0qC,aAClBnpC,UAAW6X,KAAO0zB,QAElBhsC,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,yBAAyBqQ,eAAe,aAE/D7T,EAAAC,EAAAC,cAAA,UACEW,KAAK,SACL8f,aAAczhB,KAAKqqC,mBACnBjtB,YAAapd,KAAKwqC,eAClBjpC,UAAW6X,KAAO2zB,UAElBjsC,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,2BAA2BqQ,eAAe,wBA9V/CjU,IAAMc,WA+XnBb,eAzBS,SAACC,GACvB,MAAO,CACL0H,WAAY1H,EAAM6O,KAAKnH,WACvBC,gBAAiB3H,EAAM6O,KAAKlH,gBAC5BQ,iBAAkBnI,EAAM6O,KAAK1G,iBAC7BN,mBAAoB7H,EAAM6O,KAAKhH,mBAC/BC,qBAAsB9H,EAAM6O,KAAK/G,qBACjCC,kBAAmB/H,EAAM6O,KAAK9G,kBAC9BiJ,QAAShR,EAAMgR,QACf7R,SAAUa,EAAMb,SAChB2N,QAAS9M,EAAM6P,aAAa/C,UAIL,SAACjM,GAC1B,MAAO,CACLkoC,gBAAiB,SAAChjC,EAAasD,EAAkB3H,EAAgBuL,GAAhD,OACfpM,E1BhYyB,SAACkF,EAAasD,EAAkB3H,EAAgBuL,GAC7E,MAAO,CACLlM,KAAM,oBACNgF,IAAKA,EACLsD,SAAUA,EACV3H,OAAQA,EACRuL,KAAMA,G0B0XK87B,CAAgBhjC,EAAKsD,EAAU3H,EAAQuL,KAClDgB,gBAAiB,SAACgD,GAAD,OAAqBpQ,E1BrXX,SAACoQ,GAC9B,MAAO,CACLlQ,KAAM,mBACNkQ,QAASA,G0BkXsChD,CAAgBgD,KAC/D/C,gBAAiB,SAACgC,GAAD,OAAqBrP,E1B7WX,SAACqP,GAC9B,MAAO,CACLnP,KAAM,oBACNmP,QAASA,G0B0WsChC,CAAgBgC,KAC/D+6B,SAAU,SAACznC,EAAcyJ,EAAYgE,EAAiBP,GAA5C,OACR7P,E1BhZkB,SAACqP,EAAiBjD,EAAYG,EAA2BsD,GAC/E,MAAO,CACL3P,KAAM,YACNmP,UACAjD,OACAG,oBACAsD,W0B0YWu6B,CAASznC,EAAME,GAAIuJ,EAAMgE,EAASP,OAIlC3Q,CAA6C8oC,yBC7ZtDuD,oLAEF,OACElsC,EAAAC,EAAAC,cAAA,OAAKO,UAAW6X,KAAOzd,QACrBmF,EAAAC,EAAAC,cAAA,OAAKO,UAAW6X,KAAOvd,YAAamE,KAAKC,MAAMwP,KAAKzH,MACpDlH,EAAAC,EAAAC,cAAA,OAAKO,UAAW6X,KAAOxd,KAAM6d,IAAKC,cALdhZ,IAAMc,WAiBnBb,eANS,SAACC,GACvB,MAAO,CACL6O,KAAM7O,EAAM6O,OAID9O,CAAyBqsC,yBCFlCC,eACJ,SAAAA,EAAYhtC,GAAc,IAAAiT,EAAA,OAAAtH,OAAAuH,EAAA,EAAAvH,CAAA5L,KAAAitC,IACxB/5B,EAAAtH,OAAAwH,EAAA,EAAAxH,CAAA5L,KAAA4L,OAAAyH,EAAA,EAAAzH,CAAAqhC,GAAA35B,KAAAtT,KAAMC,KAOR2sC,+BAAiC,WAC/B15B,EAAKM,SAAS,CACZ05B,0BAA2Bh6B,EAAKtS,MAAMssC,4BARxCh6B,EAAK05B,+BAAiC15B,EAAK05B,+BAA+Bj5B,KAApC/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACtCA,EAAKtS,MAAQ,CACXssC,0BAA0B,GAJJh6B,wEAexB,IAAMi6B,EAAM7P,GAAgBt9B,KAAKC,MAAMs9B,gBAAiBv9B,KAAKC,MAAM2R,SAE/Dw7B,EAAe,KAenB,OAbEA,GAD0C,IAAxCptC,KAAKY,MAAMssC,yBAEXpsC,EAAAC,EAAAC,cAACqsC,GAAD,CACEr/B,kBAAmBm/B,EAAIn/B,kBACvB2vB,eAAgBwP,EAAIxP,eACpBU,eAAgB8O,EAAI9O,iBAKtBv9B,EAAAC,EAAAC,cAACu2B,GAAD,CAAc5wB,IAAK3G,KAAKC,MAAM2R,QAAQjL,IAAKsD,SAAUjK,KAAKC,MAAM2R,QAAQ3H,SAAUurB,eAAe,IAKnG10B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKsD,GAAG,cAAc/C,UAAW6X,KAAOhe,aACtC0F,EAAAC,EAAAC,cAACssC,GAAD,CACEt/B,kBAAmBm/B,EAAIn/B,kBACvB2vB,eAAgBwP,EAAIxP,eACpBU,eAAgB8O,EAAI9O,iBAGtBv9B,EAAAC,EAAAC,cAAA,OAAKO,UAAW6X,KAAO/d,uBACrByF,EAAAC,EAAAC,cAAA,OAAKO,UAAW6X,KAAO9d,mBACrBwF,EAAAC,EAAAC,cAACusC,GAAD,CACEv/B,kBAAmBm/B,EAAIn/B,kBACvB2vB,eAAgBwP,EAAIxP,eACpBU,eAAgB8O,EAAI9O,eACpB1vB,YAAaw+B,EAAIx+B,YACjBiwB,sBAAuBuO,EAAIvO,yBAI/B99B,EAAAC,EAAAC,cAAA,OAAKO,UAAW6X,KAAO7d,oBAAqB6xC,IAG9CtsC,EAAAC,EAAAC,cAACwsC,GAAD,CACEx/B,kBAAmBm/B,EAAIn/B,kBACvB2vB,eAAgBwP,EAAIxP,eACpBU,eAAgB8O,EAAI9O,eACpBgO,kBAAmBrsC,KAAKC,MAAMosC,kBAC9BO,+BAAgC5sC,KAAK4sC,0CA7DvBlsC,IAAMc,WAoGjBb,eA/BS,SAACC,GAWvB,IAVA,IAAM+F,EAAM/F,EAAMgR,QAAQjL,IACpBsD,EAAWrJ,EAAMgR,QAAQ3H,SACzB3H,EAAS1B,EAAMgR,QAAQtP,OAEvBmrC,EAAoB7sC,EAAM6P,aAAa/C,QAAQC,OACnD,SAACvJ,GAAD,OAAWA,EAAMuC,MAAQA,GAAOvC,EAAM6F,WAAaA,IAI/CyjC,EAAyB,GACtB3nC,EAAI,EAAGA,EAAI0nC,EAAkBznC,OAAQD,IAAK,CACjD,IAAM3B,EAAQqpC,EAAkB1nC,IACO,IAAnC2nC,EAAQhhB,QAAQtoB,EAAM9B,SACxBorC,EAAQn/B,KAAKnK,EAAM9B,QAGvBorC,EAAQhuB,OAGR,IAAM6d,EAAkBkQ,EAAkB9/B,OAAO,SAACvJ,GAAD,OAAWA,EAAM9B,SAAWA,IAE7E,MAAO,CACLmN,KAAM7O,EAAM6O,KACZmC,QAAShR,EAAMgR,QACfy6B,kBAAmBqB,EACnBnQ,gBAAiBA,EACjBx9B,SAAUa,EAAMb,WAILY,CAAyBssC,IChIzBU,oLAJX,OAAO7sC,EAAAC,EAAAC,cAAC4sC,GAAD,aAFoBltC,IAAMc,gCCyC/BqsC,8MACJC,WAAa,SAACjgC,GACZ,IAAMgvB,EAAUjvB,GAAuBC,GAGjCkgC,EAAiB76B,EAAKjT,MAAMs9B,gBAAgB5vB,OAAO,SAAC8D,GACxD,OAAyB,IAAlBA,EAAEorB,GAAS,KAIpB,OAAOQ,GAAsB0Q,EAAgBlR,EAAS,mFAGxC5K,EAAgBlyB,GAC9B,OAAQkyB,GACN,IAAK,YACH,OAAO5tB,GAAU,mCAAoCtE,GACvD,IAAK,UACH,OAAOsE,GAAU,gCAAiCtE,GACpD,IAAK,WACH,OAAOsE,GAAU,6BAA8BtE,GACjD,IAAK,iBACH,MAAO,GACT,IAAK,YACH,OAAOsE,GAAU,mCAAoCtE,GACvD,IAAK,UACH,OAAOsE,GAAU,gCAAiCtE,GACpD,IAAK,WACH,OAAOsE,GAAU,6BAA8BtE,GACjD,IAAK,oBACH,MAAO,GACT,IAAK,eACH,OAAOsE,GAAU,sCAAuCtE,GAC1D,IAAK,aACH,OAAOsE,GAAU,gCAAiCtE,GACpD,IAAK,cACH,OAAOsE,GAAU,6BAA8BtE,GACjD,QAEE,MAAO,qCAKX,IAAMA,EAAWC,KAAKC,MAAMF,SAEtBiuC,EAAUhuC,KAAK8tC,WAAW,KAC1BG,EAAUjuC,KAAK8tC,WAAW,KAC1BI,EAAaluC,KAAK8tC,WAAW,KAE7BvX,EAA8B,IAAnByX,EAAQhoC,OACnBwwB,EAA8B,IAAnByX,EAAQjoC,OACnBywB,EAAoC,IAAtByX,EAAWloC,OAEzBmoC,EAAU5qC,KAAKkJ,IAAIuhC,EAAQhoC,OAAQioC,EAAQjoC,OAAQkoC,EAAWloC,QAG9DgjC,EAAyB,GAC3BzS,IACFyS,EAAQz6B,KAAK,aACby6B,EAAQz6B,KAAKvO,KAAKC,MAAMgJ,KAAO,UAAY,YACvCjJ,KAAKC,MAAMiJ,oBACb8/B,EAAQz6B,KAAKvO,KAAKC,MAAMgJ,KAAO,WAAa,YAG5CutB,IACED,GACFyS,EAAQz6B,KAAK,kBAEfy6B,EAAQz6B,KAAK,aACby6B,EAAQz6B,KAAKvO,KAAKC,MAAMgJ,KAAO,UAAY,YACvCjJ,KAAKC,MAAMiJ,oBACb8/B,EAAQz6B,KAAKvO,KAAKC,MAAMgJ,KAAO,WAAa,YAG5CwtB,KACEF,GAAYC,IACdwS,EAAQz6B,KAAK,qBAEfy6B,EAAQz6B,KAAK,gBACby6B,EAAQz6B,KAAKvO,KAAKC,MAAMgJ,KAAO,aAAe,eAC1CjJ,KAAKC,MAAMiJ,oBACb8/B,EAAQz6B,KAAKvO,KAAKC,MAAMgJ,KAAO,cAAgB,eAMnD,IADA,IAAMujB,EAAO,GACJzmB,EAAI,EAAGA,EAAIooC,IAAWpoC,EAAG,CAGhC,IAFA,IAAMqoC,EAAU,GAEPhiB,EAAI,EAAGA,EAAI4c,EAAQhjC,SAAUomB,EAAG,CACvC,IAAM6F,EAAS+W,EAAQ5c,GACjB5rB,EAAcyxB,EAASnrB,OAAOf,GAEhCsoC,EAAkB,GAClB9sC,OAAYa,EAEhB,OAAQ6vB,GACN,IAAK,YACH,GAAIlsB,EAAIioC,EAAQhoC,OAAQ,CACtB,IAAM5B,EAAQ4pC,EAAQjoC,GACtBsoC,EAAUpqC,GAAc8B,EAAI,EAAGhG,GAAY,KAAOqE,EAAM4D,KAE1D,MAEF,IAAK,UACH,GAAIjC,EAAIioC,EAAQhoC,OAAQ,CACtB,IAAM5B,EAAQ4pC,EAAQjoC,GACtBsoC,EAAUlrC,GAAciB,EAAM4G,QAAQ,GAAIjL,GAE5C,MAEF,IAAK,WACH,GAAIgG,EAAIioC,EAAQhoC,OAAQ,CACtB,IAAM5B,EAAQ4pC,EAAQjoC,GACtBsoC,EAAUlrC,GAAcR,EAAOyB,EAAM4G,QAAQ,IAAKjL,GAEpD,MAEF,IAAK,iBACHwB,EAAY6X,KAAOjd,YACnB,MACF,IAAK,YACH,GAAI4J,EAAIkoC,EAAQjoC,OAAQ,CACtB,IAAM5B,EAAQ6pC,EAAQloC,GACtBsoC,EAAUpqC,GAAc8B,EAAI,EAAGhG,GAAY,KAAOqE,EAAM4D,KAE1D,MAEF,IAAK,UACH,GAAIjC,EAAIkoC,EAAQjoC,OAAQ,CACtB,IAAM5B,EAAQ6pC,EAAQloC,GACtBsoC,EAAUlrC,GAAciB,EAAM6G,QAAQ,GAAIlL,GAE5C,MAEF,IAAK,WACH,GAAIgG,EAAIkoC,EAAQjoC,OAAQ,CACtB,IAAM5B,EAAQ6pC,EAAQloC,GACtBsoC,EAAUlrC,GAAcR,EAAOyB,EAAM6G,QAAQ,IAAKlL,GAEpD,MAEF,IAAK,oBACHwB,EAAY6X,KAAOjd,YACnB,MACF,IAAK,eACH,GAAI4J,EAAImoC,EAAWloC,OAAQ,CACzB,IAAM5B,EAAQ8pC,EAAWnoC,GACzBsoC,EAAUpqC,GAAc8B,EAAI,EAAGhG,GAAY,KAAOqE,EAAM4D,KAE1D,MAEF,IAAK,aACH,GAAIjC,EAAImoC,EAAWloC,OAAQ,CACzB,IAAM5B,EAAQ8pC,EAAWnoC,GACzBsoC,EAAUlrC,GAAciB,EAAM8G,WAAW,GAAInL,GAE/C,MAEF,IAAK,cACH,GAAIgG,EAAImoC,EAAWloC,OAAQ,CACzB,IAAM5B,EAAQ8pC,EAAWnoC,GACzBsoC,EAAUlrC,GAAcR,EAAOyB,EAAM8G,WAAW,IAAKnL,IAM3DquC,EAAQ7/B,KACNzN,EAAAC,EAAAC,cAAA,MAAIR,IAAKA,EAAKe,UAAWA,GACtB8sC,IAKP7hB,EAAKje,KAAKzN,EAAAC,EAAAC,cAAA,MAAIR,IAAKuF,GAAIqoC,IAKzB,IADA,IAAMzyC,EAAS,GACNoK,EAAI,EAAGA,EAAIijC,EAAQhjC,SAAUD,EAAG,CACvC,IAAMksB,EAAS+W,EAAQjjC,GACjBqQ,EAAQpW,KAAKsuC,gBAAgBrc,EAAQjyB,KAAKC,MAAMF,UACtDpE,EAAO4S,KAAKzN,EAAAC,EAAAC,cAAA,MAAIR,IAAKyxB,GAAS7b,IAGhC,OACEtV,EAAAC,EAAAC,cAACmY,EAAApY,EAAD,KACED,EAAAC,EAAAC,cAACmY,EAAApY,EAAKyU,OAAN,KACE1U,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,2BACHqQ,eAAe,gCACfgB,OAAQ,CAAErT,OAAQ4C,GAAelF,KAAKC,MAAMqC,OAAQtC,KAAKC,MAAMF,cAGnEe,EAAAC,EAAAC,cAACmY,EAAApY,EAAK8U,KAAN,KACE/U,EAAAC,EAAAC,cAAC4hB,GAAA7hB,EAAD,CAAO8hB,SAAO,EAACE,OAAK,EAACD,KAAK,KAAKlO,MAAO,CAAEoO,OAAQ,QAC9CliB,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UAAKrF,IAEPmF,EAAAC,EAAAC,cAAA,aAAQwrB,aA1MS9rB,IAAMc,WA0NpBb,eARS,SAACC,GACvB,MAAO,CACLqI,KAAMrI,EAAM6O,KAAKxG,KACjBC,mBAAoBtI,EAAM6O,KAAKvG,mBAC/BnJ,SAAUa,EAAMb,WAILY,CAAyBktC,ICxOlCU,eACJ,SAAAA,EAAYtuC,GAAc,IAAAiT,EAAA,OAAAtH,OAAAuH,EAAA,EAAAvH,CAAA5L,KAAAuuC,IACxBr7B,EAAAtH,OAAAwH,EAAA,EAAAxH,CAAA5L,KAAA4L,OAAAyH,EAAA,EAAAzH,CAAA2iC,GAAAj7B,KAAAtT,KAAMC,KAYRuuC,UAAY,SAAC9sC,GACX,IAAMiF,EAAM1D,OAAOvB,EAAME,cAAcX,OACnCiS,EAAKtS,MAAM+F,MAAQA,IAEjBuM,EAAKtS,MAAMqJ,SAAWiJ,EAAKjT,MAAMwP,KAAKlH,gBAAgB5B,EAAM,GAC9DuM,EAAKM,SAAS,CAAE7M,IAAKA,EAAKsD,SAAU,IAEpCiJ,EAAKM,SAAS,CAAE7M,IAAKA,MApBDuM,EAyB1Bu7B,eAAiB,SAAC/sC,GAChB,IAAMuI,EAAWhH,OAAOvB,EAAME,cAAcX,OACxCiS,EAAKtS,MAAMqJ,WAAaA,GAC1BiJ,EAAKM,SAAS,CAAEvJ,SAAUA,KA5BJiJ,EAgC1Bw7B,YAAc,WACZhwC,OAAOiwC,SA9BPz7B,EAAKs7B,UAAYt7B,EAAKs7B,UAAU76B,KAAf/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACjBA,EAAKu7B,eAAiBv7B,EAAKu7B,eAAe96B,KAApB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACtBA,EAAKw7B,YAAcx7B,EAAKw7B,YAAY/6B,KAAjB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAEnBA,EAAKtS,MAAQ,CACX+F,IAAK,EACLsD,SAAU,GATYiJ,wEA2CxB,IAPO,IAAA2N,EAAA7gB,KACDD,EAAWC,KAAKC,MAAMF,SACtB6uC,EAAgB,CAAE/5B,MAAO,QAAS0B,YAAa,QAG/CqT,EAAa,GACboiB,EAAc3nC,GAAU,8BAA+BtE,GACpDgG,EAAI,EAAGA,GAAK/F,KAAKC,MAAMwP,KAAKnH,WAAYvC,IAC/C6jB,EAAWrb,KACTzN,EAAAC,EAAAC,cAAA,UAAQC,MAAO8E,EAAGvF,IAAKuF,GACpBimC,EAAY9oC,QAAQ,MAAOe,GAAc8B,EAAGhG,MASnD,IAHA,IAAM8pB,EAAkB,GAClBoiB,EAAmB5nC,GAAU,mCAAoCtE,GACjEgsC,EAAe/rC,KAAKC,MAAMwP,KAAKlH,gBAAgBvI,KAAKY,MAAM+F,IAAM,GAC7DZ,EAAI,EAAGA,GAAKgmC,EAAchmC,IACjC8jB,EAAgBtb,KACdzN,EAAAC,EAAAC,cAAA,UAAQC,MAAO8E,EAAGvF,IAAKuF,GACpBkmC,EAAiB/oC,QAAQ,MAAOe,GAAc8B,EAAGhG,MAYxD,IANA,IAAM8uC,EAAe7uC,KAAKC,MAAMyN,QAAQC,OAAO,SAAC8D,GAC9C,OAAOA,EAAE9K,MAAQka,EAAKjgB,MAAM+F,KAAO8K,EAAExH,WAAa4W,EAAKjgB,MAAMqJ,WAIzD6kC,EAAyB,GACtB/oC,EAAI,EAAGA,EAAI8oC,EAAa7oC,OAAQD,IAAK,CAC5C,IAAM3B,EAAQyqC,EAAa9oC,IACiB,IAAxC+oC,EAAapiB,QAAQtoB,EAAM9B,SAC7BwsC,EAAavgC,KAAKnK,EAAM9B,QAG5BwsC,EAAapvB,OAIb,IADA,IAAMqvB,EAAe,GA3CdC,EAAA,SA4CEjpC,GACP,IAAMzD,EAASwsC,EAAa/oC,GACtBw3B,EAAkBsR,EAAalhC,OAAO,SAAC8D,GAAD,OAAOA,EAAEnP,SAAWA,IAC1DgC,EAAUuc,EAAKjgB,MAAM+F,IAAM,IAAMka,EAAKjgB,MAAMqJ,SAAW,IAAM3H,EACnEysC,EAAaxgC,KAAKzN,EAAAC,EAAAC,cAACiuC,GAAD,CAAgBzuC,IAAK8D,EAAIhC,OAAQA,EAAQi7B,gBAAiBA,MAJrEx3B,EAAI,EAAGA,EAAI+oC,EAAa9oC,OAAQD,IAAKipC,EAArCjpC,GA0BT,OACEjF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACmY,EAAApY,EAAD,CAAM6T,MAAO,CAAE8B,aAAc,SAC3B5V,EAAAC,EAAAC,cAACmY,EAAApY,EAAK8U,KAAN,CAAWjB,MAAO,CAAEE,QAAS,SAC3BhU,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CACEE,MAAOjB,KAAKY,MAAM+F,IAAIgkB,WACtBvpB,GAAG,SACHC,SAAUrB,KAAKwuC,UACf55B,MAAOg6B,EACPrtC,UAAU,iBAETqoB,GAGH9oB,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CACEE,MAAOjB,KAAKY,MAAMqJ,SAAS0gB,WAC3BvpB,GAAG,SACHC,SAAUrB,KAAKyuC,eACf75B,MAAOg6B,EACPrtC,UAAU,iBAETsoB,GAGH/oB,EAAAC,EAAAC,cAAC+T,EAAAhU,EAAD,CAAQkU,QAAQ,OAAOD,QAAShV,KAAK0uC,aACnC5tC,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,4BAA4BqQ,eAAe,kBAKrEo6B,UAzIqBruC,IAAMc,WAuJrBb,eARS,SAACC,GACvB,MAAO,CACL6O,KAAM7O,EAAM6O,KACZ/B,QAAS9M,EAAM6P,aAAa/C,QAC5B3N,SAAUa,EAAMb,WAILY,CAAyB4tC,ICtKzBW,oLARX,OACEpuC,EAAAC,EAAAC,cAAA,OAAKO,UAAW6X,KAAOC,aACrBvY,EAAAC,EAAAC,cAACmuC,GAAD,cAJ2BzuC,IAAMc,gCC8CnC4tC,8MACJC,eAAiB,SAACjrC,EAAcu3B,EAAoBn7B,GAElD,IAAKyN,GAAe7J,GAAQ,OAAO,KAInC,IAAMogC,EAAUh3B,GAAqBpJ,EAAOu3B,EAASj6B,OACrD,GAAgB,IAAZ8iC,EAAe,OAAO,KAE1B,IAAMv7B,EAAOiK,EAAKjT,MAAMgJ,KAClBlJ,EAAWmT,EAAKjT,MAAMF,SAGtBuvC,EAAQlrC,EAAMsG,MAChBrG,GAAU,uBAAwBtE,GAClCoE,GAAoB3D,EAAM,EAAG4D,EAAO8O,EAAKjT,MAAMF,UAE7CgE,EAAiBgjC,GAAU7zB,EAAKjT,MAAM2I,QAASxE,EAAOu3B,EAASj6B,MAAO8iC,EAASv7B,GAEjFsmC,EAAY,GACA,IAAZ/K,GAA4B,IAAXzgC,EACnBwrC,EAAYlrC,GAAU,+BAAgCtE,GACjC,IAAZykC,GAA4B,IAAXzgC,IAC1BwrC,EAAYzrC,GAAcC,EAAQhE,IAGpC,IAAMyJ,EAAUgF,GACdpK,EAAM5B,IACN0Q,EAAKjT,MAAMwI,mBACXyK,EAAKjT,MAAMyI,qBACXwK,EAAKjT,MAAM0I,mBAEPnD,EAAQyD,EACVM,GAAkBC,EAASpF,EAAMqF,aAAc1J,GAC/CgK,GAAqBP,EAASpF,EAAMqF,cAClCq/B,EAAK7/B,EAAO7E,EAAMqF,aAAe9G,EAAOyB,EAAMqF,cAE9CuB,EAAUuB,GAAgBnI,GAC1BorC,EAAQvmC,EAAO+B,EAAUrI,EAAOqI,GAEhCC,EAAUyB,GAAgBtI,GAC1BqrC,EAAQxmC,EAAOgC,EAAUtI,EAAOsI,GAEhCC,EAAa0B,GAAmBxI,GAChCsrC,EAAWzmC,EAAOiC,EAAavI,EAAOuI,GAExCykC,EAAiB,GAGjBA,EAFA1mC,GACoC,IAAlCiK,EAAKjT,MAAMiJ,mBACI7E,GAAU,gCAAiCtE,GAE3CsE,GAAU,4BAA6BtE,IAGpB,IAAlCmT,EAAKjT,MAAMiJ,mBACI7E,GAAU,gCAAiCtE,GAE3CsE,GAAU,6BAA8BtE,GAI7D,IAAI6vC,EAA8B,KAOlC,OANIpL,EAAU,IACZoL,EAAeD,EACZzsC,QAAQ,OAAQC,GAAcqhC,EAASzkC,IACvCmD,QAAQ,QAASC,GAAcR,EAAO6hC,GAAUzkC,KAInDe,EAAAC,EAAAC,cAAA,MAAIR,IAAKA,GACPM,EAAAC,EAAAC,cAAA,UAAKsuC,GACLxuC,EAAAC,EAAAC,cAAA,UAAKoD,EAAM4D,MACXlH,EAAAC,EAAAC,cAAA,UAA4B,IAAvBoD,EAAMqF,aAAqB,KAAOjE,GACvC1E,EAAAC,EAAAC,cAAA,UAA4B,IAAvBoD,EAAMqF,aAAqB,KAAOtG,GAAc2lC,EAAI/oC,IACzDe,EAAAC,EAAAC,cAAA,UAAmB,IAAdoD,EAAM+F,IAAY,KAAO/F,EAAM+F,KACpCrJ,EAAAC,EAAAC,cAAA,UAAiB,IAAZgK,EAAgB,GAAK7H,GAAcqsC,EAAOzvC,IAC/Ce,EAAAC,EAAAC,cAAA,UAAiB,IAAZiK,EAAgB,GAAK9H,GAAcssC,EAAO1vC,IAC/Ce,EAAAC,EAAAC,cAAA,UAAoB,IAAfkK,EAAmB,GAAK/H,GAAcusC,EAAU3vC,IACrDe,EAAAC,EAAAC,cAAA,UAAK4uC,GACL9uC,EAAAC,EAAAC,cAAA,UAAKuuC,OAKXM,sBAAwB,SAACrP,EAA0BhgC,GAOjD,IAPqF,IAC7Em7B,EAA6B6E,EAA7B7E,SAAUgC,EAAmB6C,EAAnB7C,eACZ59B,EAAWmT,EAAKjT,MAAMF,SACtByC,EAAc4C,GAAkBu2B,EAASn5B,IAAKzC,GAG9CysB,EAAO,GACJzmB,EAAI,EAAGA,EAAI43B,EAAe33B,OAAQD,IAAK,CAC9C,IAAMknB,EAAM/Z,EAAKm8B,eAAe1R,EAAe53B,GAAI41B,EAAU51B,GACjD,OAARknB,GACFT,EAAKje,KAAK0e,GAKd,GAAoB,IAAhBT,EAAKxmB,OACP,OAAO,KAGT,IAAI8pC,EAAiBvrC,GAAkBo3B,EAASj5B,UAAW3C,IACvDmT,EAAKjT,MAAM6I,wBAAkD,YAAvB6yB,EAASj5B,WAAkD,UAAvBi5B,EAASj5B,YACrFotC,EAASzrC,GAAU,iCAAkCtE,IAGvD,IAAMgwC,EAAQ78B,EAAKjT,MAAMgJ,KACrB5E,GAAU,2BAA4BtE,GACtCsE,GAAU,4BAA6BtE,GAGvCyF,EAAQD,GAAuBo2B,EAASuE,eAAgBngC,GAC5B,KAA5B47B,EAASuE,gBAA0BhtB,EAAKjT,MAAMgJ,OAChDzD,EAAQkE,GAAeiyB,EAASuE,iBAGlC,IAAM8P,EAAiBrU,EAAS2E,SAC5Bj8B,GAAU,iBAAkBtE,GAC5BsE,GAAU,iBAAkBtE,GAG1BoP,EADW9K,GAAU,4BAA6BtE,GAErDmD,QAAQ,QAASV,GACjBU,QAAQ,mBAAoB8sC,GAC5B9sC,QAAQ,gBAAiBsC,GACzBtC,QAAQ,gBAA6C,KAA5By4B,EAASuE,eAAwB6P,EAAQ,IAClE7sC,QAAQ,cAAe4sC,GACvB5sC,QAAQ,aAAcy4B,EAASxsB,UAC/BjM,QAAQ,UAAWwB,GAAci3B,EAASj6B,MAAO3B,IAEpD,OACEe,EAAAC,EAAAC,cAACmY,EAAApY,EAAD,CAAMP,IAAKA,EAAKoU,MAAO,CAAEq7B,UAAW,SAClCnvC,EAAAC,EAAAC,cAACmY,EAAApY,EAAKyU,OAAN,KAAcrG,GACdrO,EAAAC,EAAAC,cAACmY,EAAApY,EAAK8U,KAAN,KACE/U,EAAAC,EAAAC,cAAC4hB,GAAA7hB,EAAD,CAAOgiB,OAAK,EAACD,KAAK,MAChBhiB,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,uBAAwBtE,IACvCe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,wBAAyBtE,IACxCe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,6BAA8BtE,IAC7Ce,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,4BAA6BtE,IAC5Ce,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,qBAAsBtE,IACrCe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,mCAAoCtE,IACnDe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,mCAAoCtE,IACnDe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,sCAAuCtE,IACtDe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,4BAA6BtE,IAC5Ce,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,6BAA8BtE,MAGjDe,EAAAC,EAAAC,cAAA,aAAQwrB,+EAiBhB,IATA,IAAMgU,EAAUa,GACdrhC,KAAKC,MAAMyN,QACX1N,KAAKC,MAAMwI,mBACXzI,KAAKC,MAAMyI,qBACX1I,KAAKC,MAAM0I,kBACX3I,KAAKC,MAAM6I,wBAGPonC,EAAgB,GACbnqC,EAAI,EAAGA,EAAIy6B,EAAQx6B,OAAQD,IAAK,CACvC,IAAMoqC,EAAQnwC,KAAK6vC,sBAAsBrP,EAAQz6B,GAAIA,GACvC,OAAVoqC,GACFD,EAAc3hC,KAAK4hC,GAIvB,OAAOrvC,EAAAC,EAAAC,cAAA,WAAMkvC,UAhLQxvC,IAAMc,WA0MhBb,eAtBS,SAACC,EAAoBkf,GAC3C,IAAMnZ,EAAM1D,OAAO6c,EAASnZ,KACxB+G,EAAU9M,EAAM6P,aAAa/C,QAKjC,OAJI/G,EAAM,IACR+G,EAAUA,EAAQC,OAAO,SAAC8D,GAAD,OAAOA,EAAE9K,MAAQA,KAGrC,CACLsC,KAAMrI,EAAM6O,KAAKxG,KACjBC,mBAAoBtI,EAAM6O,KAAKvG,mBAC/B0M,SAAUhV,EAAM6O,KAAKzH,KACrBY,QAAShI,EAAM6O,KAAK7G,QACpBE,uBAAwBlI,EAAM6O,KAAK3G,uBACnCR,WAAY1H,EAAM6O,KAAKnH,WACvBG,mBAAoB7H,EAAM6O,KAAKhH,mBAC/BC,qBAAsB9H,EAAM6O,KAAK/G,qBACjCC,kBAAmB/H,EAAM6O,KAAK9G,kBAC9B5I,SAAUa,EAAMb,SAChB2N,QAASA,IAIE/M,CAAyByuC,IChOlCtQ,GAAgB,SAACnD,GACrB,OAAO3jB,KAAKO,UAAUojB,IAElBoD,GAAgB,SAACv+B,GACrB,OAAOwX,KAAKC,MAAMzX,IAKd4vC,GAA+B,SACnC1iC,EACAiuB,EACA/yB,EACAC,EACAI,EACAsC,GAIA,IADA,IAAM8kC,EAAW,IAAI9X,IACZxyB,EAAI,EAAGA,EAAI2H,EAAQ1H,OAAQD,IAClCsqC,EAASxU,IAAInuB,EAAQ3H,GAAIA,GAM3B,IADA,IAAMuqC,EAAiB,IAAI5xB,MAAMhR,EAAQ1H,QAChCD,EAAI,EAAGA,EAAI2H,EAAQ1H,OAAQD,IAAK,CACvC,IAAM3B,EAAQsJ,EAAQ3H,GAChBy+B,EAAUh3B,GAAqBpJ,EAAOu3B,EAASj6B,OAErD4uC,EAAevqC,GAAK8hC,GAAqBh/B,EAAiB0C,EAAU3C,EAASxE,EAAOu3B,EAASj6B,MAAO8iC,EAASv7B,GAI/G,IAAMk2B,EAAgBzxB,EAAQoC,QA6B9B,OA1BAqvB,EAAczf,KAAK,SAAC3e,EAAG4e,GACrB,IAAM4wB,EAASF,EAAS1X,IAAI53B,GACtByvC,EAASH,EAAS1X,IAAIhZ,GAG5B,QAAevd,IAAXmuC,QAAmCnuC,IAAXouC,EAAsB,OAAO,EAIzD,GAAIzvC,EAAE2J,QAAUiV,EAAEjV,MAAO,CACvB,GAAI3J,EAAE2J,MAAO,OAAO,EACpB,GAAIiV,EAAEjV,MAAO,OAAQ,EAIvB,IAAM+lC,EAAUH,EAAeC,GACzBG,EAAUJ,EAAeE,GAC/B,OAAIC,IAAYC,EAAgBA,EAAUD,EAGtC1vC,EAAE0I,eAAiBkW,EAAElW,aAAqB1I,EAAE0I,aAAekW,EAAElW,aAG1D,IAGF01B,GAIHS,GAAoB,SAACC,GACzB,MAAO,CAAC,MAAO,KAAM,KAAM,KAAM,IAAK,IAAK,KAAKnT,QAAQmT,IAIpD1E,GAAwB,SAAC2E,GAE7B,MAAO,CAAC,OAAQ,UAAW,QAAS,aAAc,YAAa,aAAapT,QAAQoT,IAIhF7E,GAAkB,SAACz4B,GACvB,OAAQA,GACN,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,KACH,OAAO,EACT,QAEE,OAAO,IAgCAmuC,GAAiB,SAC5BjjC,EACA9E,EACAC,EACAC,EACAG,EACAsC,GAMA,IADA,IAAMy0B,EAAc,IAAIzH,IACfxyB,EAAI,EAAGA,EAAI2H,EAAQ1H,OAAQD,IAAK,CACvC,IAAM0L,EAAI/D,EAAQ3H,GAGZvD,EAAMiP,EAAEjP,IACVE,EAAuB+O,EAAE/O,UAGzBoG,GAAwC,YAAdpG,IAC5BA,EAAY,SAId,IAAK,IAAI29B,EAAQ,EAAGA,EAAQ5uB,EAAEpH,OAAOrE,OAAQq6B,IAAS,CACpD,IACM1E,EAAW,CAAEn5B,MAAKd,MADV+P,EAAEpH,OAAOg2B,GACQ39B,YAAW49B,SAAU7uB,EAAE7G,SAAU,GAC1DpK,EAAMs+B,GAAcnD,GAEpB4E,EAAaP,EAAYrH,IAAIn4B,QACpB4B,IAAfm+B,EAA2BP,EAAYnE,IAAIr7B,EAAK,CAACiR,IAAM8uB,EAAWhyB,KAAKkD,IAK3E,IAAM+uB,EAAU,GA7BiB1E,GAAA,EAAAC,GAAA,EAAAC,OAAA55B,EAAA,IA8BjC,QAAA65B,EAAAC,EAAgC8D,EAAhC7D,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA6C,KAAAtC,EAAAyC,EAAAh7B,MAAA0gB,EAAA/V,OAAAC,GAAA,EAAAD,CAAA4tB,EAAA,GAAjCh5B,EAAiCmhB,EAAA,GAA5B4e,EAA4B5e,EAAA,GACrCga,EAAWoD,GAAcv+B,GACzBm9B,EAAiByS,GAA6B7P,EAAY5E,EAAU/yB,EAASC,EAAiBI,EAAMsC,GAC1Gi1B,EAAQjyB,KAAK,CAAEotB,WAAUgC,oBAjCM,MAAAxlB,GAAA4jB,GAAA,EAAAC,EAAA7jB,EAAA,YAAA2jB,GAAA,MAAAI,EAAAK,QAAAL,EAAAK,SAAA,WAAAR,EAAA,MAAAC,GAqCjC,OAtEuC,SAACwE,GACxCA,EAAQ9gB,KAAK,SAAC3e,EAAG4e,GACf,IAAM8gB,EAAO1/B,EAAE46B,SACT+E,EAAO/gB,EAAEgc,SAGTgF,EAAO1F,GAAgBwF,EAAKj+B,KAC5Bo+B,EAAO3F,GAAgByF,EAAKl+B,KAClC,GAAIm+B,IAASC,EAAM,OAAOD,EAAOC,EAGjC,IAAMC,EAASjB,GAAkBa,EAAK/+B,OAChCo/B,EAASlB,GAAkBc,EAAKh/B,OACtC,GAAIm/B,IAAWC,EAAQ,OAAOD,EAASC,EAGvC,IAAMC,EAAa5F,GAAsBsF,EAAK/9B,WACxCs+B,EAAa7F,GAAsBuF,EAAKh+B,WAC9C,OAAIq+B,IAAeC,EAAmBD,EAAaC,EAE5C,IAiDT4P,CAA0BpQ,GACnBA,GC7IHqQ,8MACJxB,eAAiB,SAACjrC,EAAcu3B,EAA0Bn7B,GAExD,IAAKyN,GAAe7J,GAAQ,OAAO,KAInC,IAAMogC,EAAUh3B,GAAqBpJ,EAAOu3B,EAASj6B,OACrD,GAAgB,IAAZ8iC,EAAe,OAAO,KAE1B,IAAMv7B,EAAOiK,EAAKjT,MAAMgJ,KAClBlJ,EAAWmT,EAAKjT,MAAMF,SAGtB+wC,EAAO1sC,EAAMsG,MACfrG,GAAU,uBAAwBtE,GAClCoE,GAAoB3D,EAAM,EAAG4D,EAAOrE,GAElCgE,EAAiB8jC,GACrB30B,EAAKjT,MAAM4I,gBACXqK,EAAKjT,MAAMsL,SACX2H,EAAKjT,MAAM2I,QACXxE,EACAu3B,EAASj6B,MACT8iC,EACAv7B,GAGEsmC,EAAY,GACA,IAAZ/K,GAA4B,IAAXzgC,EACnBwrC,EAAYlrC,GAAU,+BAAgCtE,GACjC,IAAZykC,GAA4B,IAAXzgC,IAC1BwrC,EAAYzrC,GAAcC,EAAQhE,IAGpC,IAAMgxC,EAAgB3sC,EAAMoE,UAAUxC,OAAS,EAAI5B,EAAMoE,UAAU,GAAK,GAClE23B,EAAe/7B,EAAMoE,UAAUxC,OAE/BwD,EAAUgF,GACdpK,EAAM5B,IACN0Q,EAAKjT,MAAMwI,mBACXyK,EAAKjT,MAAMyI,qBACXwK,EAAKjT,MAAM0I,mBAEPnD,EAAQyD,EACVM,GAAkBC,EAASpF,EAAMqF,aAAc1J,GAC/CgK,GAAqBP,EAASpF,EAAMqF,cAClCq/B,EAAK7/B,EAAO7E,EAAMqF,aAAe9G,EAAOyB,EAAMqF,cAE9CuB,EAAUuB,GAAgBnI,GAC1BorC,EAAQvmC,EAAO+B,EAAUrI,EAAOqI,GAEhCC,EAAUyB,GAAgBtI,GAC1BqrC,EAAQxmC,EAAOgC,EAAUtI,EAAOsI,GAEhCC,EAAa0B,GAAmBxI,GAChCsrC,EAAWzmC,EAAOiC,EAAavI,EAAOuI,GAEtC8lC,EAAQ/nC,EAAOu7B,EAAU7hC,EAAO6hC,GAEtC,OACE1jC,EAAAC,EAAAC,cAAA,MAAIR,IAAKA,GACPM,EAAAC,EAAAC,cAAA,UAAK8vC,GACLhwC,EAAAC,EAAAC,cAAA,UAAKoD,EAAM4D,MACXlH,EAAAC,EAAAC,cAAA,UAAKqE,GAAYjB,EAAM5B,IAAKzC,IAC5Be,EAAAC,EAAAC,cAAA,UACG+vC,EADH,IACmB5Q,EAAe,EAAI,MAAQA,EAAe,GAAK,IAAM,IAExEr/B,EAAAC,EAAAC,cAAA,UAAKuD,GAAkBH,EAAM1B,UAAW3C,IACxCe,EAAAC,EAAAC,cAAA,UAA4B,IAAvBoD,EAAMqF,aAAqB,KAAOjE,GACvC1E,EAAAC,EAAAC,cAAA,UAA4B,IAAvBoD,EAAMqF,aAAqB,KAAOtG,GAAc2lC,EAAI/oC,IACzDe,EAAAC,EAAAC,cAAA,UAAmB,IAAdoD,EAAM+F,IAAY,KAAOlG,GAAcG,EAAM+F,IAAKpK,IACvDe,EAAAC,EAAAC,cAAA,UAAiB,IAAZgK,EAAgB,GAAK7H,GAAcqsC,EAAOzvC,IAC/Ce,EAAAC,EAAAC,cAAA,UAAiB,IAAZiK,EAAgB,GAAK9H,GAAcssC,EAAO1vC,IAC/Ce,EAAAC,EAAAC,cAAA,UAAoB,IAAfkK,EAAmB,GAAK/H,GAAcusC,EAAU3vC,IACrDe,EAAAC,EAAAC,cAAA,UAAiB,IAAZwjC,EAAgB,GAAKrhC,GAAc6tC,EAAOjxC,IAC/Ce,EAAAC,EAAAC,cAAA,UAAKuuC,OAKXM,sBAAwB,SAACrP,EAAgChgC,GAOvD,IAP2F,IACnFm7B,EAA6B6E,EAA7B7E,SAAUgC,EAAmB6C,EAAnB7C,eACZ59B,EAAWmT,EAAKjT,MAAMF,SACtByC,EAAc4C,GAAkBu2B,EAASn5B,IAAKzC,GAG9CysB,EAAO,GACJzmB,EAAI,EAAGA,EAAI43B,EAAe33B,OAAQD,IAAK,CAC9C,IAAMknB,EAAM/Z,EAAKm8B,eAAe1R,EAAe53B,GAAI41B,EAAU51B,GACjD,OAARknB,GACFT,EAAKje,KAAK0e,GAKd,GAAoB,IAAhBT,EAAKxmB,OACP,OAAO,KAGT,IAAI8pC,EAAiBvrC,GAAkBo3B,EAASj5B,UAAW3C,IACvDmT,EAAKjT,MAAM6I,wBAAkD,YAAvB6yB,EAASj5B,WAAkD,UAAvBi5B,EAASj5B,YACrFotC,EAASzrC,GAAU,iCAAkCtE,IAGvD,IAAMiwC,EAAiBrU,EAAS2E,SAC5Bj8B,GAAU,iBAAkBtE,GAC5BsE,GAAU,iBAAkBtE,GAG1BkxC,EADW5sC,GAAU,4BAA6BtE,GAErDmD,QAAQ,QAASV,GACjBU,QAAQ,mBAAoB8sC,GAC5B9sC,QAAQ,cAAe4sC,GACvB5sC,QAAQ,UAAWwB,GAAci3B,EAASj6B,MAAO3B,IAEpD,OACEe,EAAAC,EAAAC,cAACmY,EAAApY,EAAD,CAAMP,IAAKA,EAAKoU,MAAO,CAAEq7B,UAAW,SAClCnvC,EAAAC,EAAAC,cAACmY,EAAApY,EAAKyU,OAAN,KAAcy7B,GACdnwC,EAAAC,EAAAC,cAACmY,EAAApY,EAAK8U,KAAN,KACE/U,EAAAC,EAAAC,cAAC4hB,GAAA7hB,EAAD,CAAO8hB,SAAO,EAACE,OAAK,EAACD,KAAK,MACxBhiB,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,sBAAuBtE,IACtCe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,wBAAyBtE,IACxCe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,qBAAsBtE,IACrCe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,0BAA2BtE,IAC1Ce,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,2BAA4BtE,IAC3Ce,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,6BAA8BtE,IAC7Ce,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,4BAA6BtE,IAC5Ce,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,qBAAsBtE,IACrCe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,mCAAoCtE,IACnDe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,mCAAoCtE,IACnDe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,sCAAuCtE,IACtDe,EAAAC,EAAAC,cAAA,UAAKqD,GAAU,4BAA6BtE,IAC5Ce,EAAAC,EAAAC,cAAA,UACkC,SAA/BkS,EAAKjT,MAAM4I,gBACRxE,GAAU,6BAA8BtE,GACxCsE,GAAU,4BAA6BtE,MAIjDe,EAAAC,EAAAC,cAAA,aAAQwrB,+EAOT,IAAA3L,EAAA7gB,KACH0N,EAAU1N,KAAKC,MAAMyN,QAGY,eAAjC1N,KAAKC,MAAMixC,oBACbxjC,EAAUA,EAAQC,OAAO,SAAC8D,GAExB,OAAQoP,EAAK5gB,MAAMixC,mBACjB,IAAK,aACH,MACF,IAAK,oBAGH,GAAIz/B,EAAEtH,KAAO,GACX,OAAO,EAET,MACF,IAAK,oBAGH,GAAIsH,EAAEtH,KAAO,GACX,OAAO,EAET,MACF,QACiB0W,EAAK5gB,MAAMixC,kBAK9B,OAAQrwB,EAAK5gB,MAAM4I,iBACjB,IAAK,OACH,OAAO,EACT,IAAK,kBACH,OAAkC,IAA3Bu8B,GAAgB3zB,EAAEtH,KAC3B,QAEE,OADe0W,EAAK5gB,MAAM4I,iBACnB,MAef,IAVA,IAAM23B,EAAUmQ,GACdjjC,EACA1N,KAAKC,MAAM2I,QACX5I,KAAKC,MAAM4I,gBACX7I,KAAKC,MAAM6I,uBACX9I,KAAKC,MAAMgJ,KACXjJ,KAAKC,MAAMsL,UAGP2kC,EAAgB,GACbnqC,EAAI,EAAGA,EAAIy6B,EAAQx6B,OAAQD,IAAK,CACvC,IAAMoqC,EAAQnwC,KAAK6vC,sBAAsBrP,EAAQz6B,GAAIA,GACvC,OAAVoqC,GACFD,EAAc3hC,KAAK4hC,GAIvB,OAAOrvC,EAAAC,EAAAC,cAAA,WAAMkvC,UAhNMxvC,IAAMc,WA0Odb,eAtBS,SAACC,EAAoBkf,GAC3C,IAAMnZ,EAAM1D,OAAO6c,EAASnZ,KACxB+G,EAAU9M,EAAM6P,aAAa/C,QAKjC,OAJI/G,EAAM,IACR+G,EAAUA,EAAQC,OAAO,SAAC8D,GAAD,OAAOA,EAAE9K,MAAQA,KAGrC,CACLsC,KAAMrI,EAAM6O,KAAKxG,KACjB2M,SAAUhV,EAAM6O,KAAKzH,KACrBuD,SAAU3K,EAAM6O,KAAKrH,KACrBQ,QAAShI,EAAM6O,KAAK7G,QACpBE,uBAAwBlI,EAAM6O,KAAK3G,uBACnCR,WAAY1H,EAAM6O,KAAKnH,WACvBG,mBAAoB7H,EAAM6O,KAAKhH,mBAC/BC,qBAAsB9H,EAAM6O,KAAK/G,qBACjCC,kBAAmB/H,EAAM6O,KAAK9G,kBAC9B5I,SAAUa,EAAMb,SAChB2N,QAASA,IAIE/M,CAAyBkwC,IC9NlCM,GAAgB,SACpBtlB,EACA8P,EACA1yB,EACAsC,EACA3C,EACAxE,EACA+L,GAEA,IAOeihC,EAPTC,EAAepoC,EAAO,KAAO,MAC7BqoC,EAAoB9jC,GAAqBpJ,EAAOu3B,EAASj6B,OAGzD0B,EAAS,SAACR,GACd,OAAOO,GAAc8F,EAAOrG,EAAKD,EAAOC,KAOpCqqB,EAAqBvO,MAAMmN,EAAIG,WAAWhmB,QAAQgsB,KAAK,IA0B7D,GAxBK/jB,GAAe7J,GAETA,EAAMsG,MACfuiB,EAAIpB,EAAI1b,MAAM,UAAY,IAE1B8c,EAAIpB,EAAI1b,MAAM,UAAkC,IAAtBmhC,EAA0B,KAAOnmB,GAAUhb,EAAQ,GAJ7E8c,EAAIpB,EAAI1b,MAAM,UAAY,KAO5B8c,EAAIpB,EAAI1b,MAAM,SAAWgb,GAAU/mB,EAAM4D,MACzCilB,EAAIpB,EAAI1b,MAAM,cAAgBgb,GAAU/mB,EAAMykB,WAC9CoE,EAAIpB,EAAI1b,MAAM,QAAUgb,GAAU/mB,EAAM5B,KACxCyqB,EAAIpB,EAAI1b,MAAM,cAAgBmb,GAAQlnB,EAAM8F,WAC5C+iB,EAAIpB,EAAI1b,MAAM,QAAUgb,GAAU7f,GAAOlH,EAAOmH,IAChD0hB,EAAIpB,EAAI1b,MAAM,YAAcgb,GAAU/mB,EAAM6D,SAC5CglB,EAAIpB,EAAI1b,MAAM,UAAYgb,GAAU/mB,EAAMxD,OAC1CqsB,EAAIpB,EAAI1b,MAAM,cAAgBgb,GA1DH,SAAC2U,GAC5B,OAAQA,GACN,IAAK,OAEL,IAAK,UACH,MAAO,MACT,IAAK,QACH,MAAO,QACT,IAAK,aACH,MAAO,aACT,IAAK,YACH,MAAO,YACT,IAAK,YACH,MAAO,YACT,QAEE,MAAO,OA0C6ByR,CAAqBntC,EAAM1B,YACnEuqB,EAAIpB,EAAI1b,MAAM,aAAegb,GAAUwQ,EAASxsB,UAChD8d,EAAIpB,EAAI1b,MAAM,aAAekhC,IAASlmB,GAAU/nB,EAAOgB,EAAMqF,eAC7DwjB,EAAIpB,EAAI1b,MAAM,cAAgBkhC,IAASlmB,IAzBxBimB,EAyBwCzV,EAASuE,eAxBvDj3B,EAAOmoC,EAAM1nC,GAAe0nC,KAyBrCnkB,EAAIpB,EAAI1b,MAAM,QAAUkhC,IAASlmB,GAAU/nB,EAAOkuC,IAClDrkB,EAAIpB,EAAI1b,MAAM,UAAYgb,GAAUwQ,EAASj6B,OAC7CurB,EAAIpB,EAAI1b,MAAM,SAAWgb,GAAU/mB,EAAMqG,MAGrCkxB,EAASj6B,MAAMyL,SAAS,KAAM,CAChC8f,EAAIpB,EAAI1b,MAAM,aAAekhC,IAASlmB,GAAU/nB,EAAOgK,GAAgBhJ,KACvE,IAAK,IAAI2B,EAAI,EAAGA,E9E5GQ,E8E4GUA,IAAK,CACrC,IAAMiL,EAAQ,SAAWjL,EAAI,GAAKsrC,EAClCpkB,EAAIpB,EAAI1b,MAAMa,IAAUma,GAAU/nB,EAAOgB,EAAM4G,QAAQjF,GAAK3B,EAAM+G,YAAYpF,MAKlF,GAAI41B,EAASj6B,MAAMyL,SAAS,KAAM,CAChC8f,EAAIpB,EAAI1b,MAAM,aAAekhC,IAASlmB,GAAU/nB,EAAOiK,GAAgBjJ,KACvE,IAAK,IAAI2B,EAAI,EAAGA,E9ErHQ,E8EqHUA,IAAK,CACrC,IAAMiL,EAAQ,SAAWjL,EAAI,GAAKsrC,EAClCpkB,EAAIpB,EAAI1b,MAAMa,IAAUma,GAAU/nB,EAAOgB,EAAM6G,QAAQlF,GAAK3B,EAAMgH,YAAYrF,MAKlF,GAAI41B,EAASj6B,MAAMyL,SAAS,KAAM,CAChC8f,EAAIpB,EAAI1b,MAAM,gBAAkBkhC,IAASlmB,GAAU/nB,EAAOkK,GAAmBlJ,KAC7E,IAAK,IAAI2B,EAAI,EAAGA,E9E9HQ,E8E8HUA,IAAK,CACrC,IAAMiL,EAAQ,YAAcjL,EAAI,GAAKsrC,EACrCpkB,EAAIpB,EAAI1b,MAAMa,IAAUma,GAAU/nB,EAAOgB,EAAM8G,WAAWnF,GAAK3B,EAAMiH,eAAetF,MAKxF,IAAMhC,EAASgjC,GAAUn+B,EAASxE,EAAOu3B,EAASj6B,MAAO4vC,EAAmBroC,GAC5EgkB,EAAIpB,EAAI1b,MAAM,WAAagb,GAAqB,IAAXpnB,EAAe,GAAKD,GAAcC,EAAQ,OAE/E8nB,EAAIW,KAAKje,KAAK0e,IA6DHukB,GAAiB,SAAC5wC,GAC7B,IAAM6wC,EAvLY,SAAChiC,GACnB,IAAMoc,EAAM,IAAIU,GAChBV,EAAIG,WAAa,CAAC,aAAc,OAAQ,cAAe,YAAa,WAAY,WAAY,WAE5F,IAAMiB,EAAqB,CACzB9B,GAAU1b,EAAKtH,YACfmjB,GAAQ7b,EAAKrH,MACb+iB,GAAU1b,EAAKxH,SACfkjB,GAAU1b,EAAK7O,OACfuqB,GAAU1b,EAAKvH,MACfijB,GAAU1b,EAAKzH,MACfmjB,GAAU1b,EAAK7G,UAUjB,OARAijB,EAAIW,KAAO,CAACS,IAGwB,IAAhCxd,EAAK3G,yBACP+iB,EAAIG,WAAWzd,KAAK,WACpBsd,EAAIW,KAAK,GAAGje,KAAK,uBAGZsd,EAkKc6lB,CAAY9wC,EAAM6O,MAEjCkiC,EA7De,SAAC/wC,GAOtB,IANA,IAAMqI,EAAgBrI,EAAM6O,KAAKxG,KAC3BooC,EAAepoC,EAAO,KAAO,MAE7B4iB,EAAM,IAAIU,GAEVqlB,EAAkB,GACf7rC,EAAI,EAAGA,E9ElJU,E8EkJQA,IAChC6rC,EAAgBrjC,KAAK,SAAWxI,EAAI,GAAKsrC,GAE3CO,EAAgBrjC,KAAK,aAAe8iC,GAGpC,IADA,IAAMQ,EAAkB,GACf9rC,EAAI,EAAGA,E9ExJU,E8EwJQA,IAChC8rC,EAAgBtjC,KAAK,SAAWxI,EAAI,GAAKsrC,GAE3CQ,EAAgBtjC,KAAK,aAAe8iC,GAGpC,IADA,IAAMS,EAAqB,GAClB/rC,EAAI,EAAGA,E9E9JU,E8E8JQA,IAChC+rC,EAAmBvjC,KAAK,YAAcxI,EAAI,GAAKsrC,GAEjDS,EAAmBvjC,KAAK,gBAAkB8iC,GAE1CxlB,EAAIG,WAAatN,MAAMyf,UAAUj8B,OAC/B,CAAC,QAAS,OAAQ,YAAa,MAAO,YAAa,MAAO,UAAW,SACrE,CAAC,YAAa,WAAY,aAAemvC,EAAM,cAAgBA,GAC/DO,EACAC,EACAC,EACA,CAAC,QAAUT,EAAM,SAAU,QAAS,SActC,IAXA,IAAM7Q,EAAkCa,GACtCzgC,EAAM6P,aAAa/C,QACnB9M,EAAM6O,KAAKhH,mBACX7H,EAAM6O,KAAK/G,qBACX9H,EAAM6O,KAAK9G,kBACX/H,EAAM6O,KAAK3G,wBAGPipC,EAAYnxC,EAAM6O,KAAKrH,KACvBQ,EAAmBhI,EAAM6O,KAAK7G,QAE3B7C,EAAI,EAAGA,EAAIy6B,EAAQx6B,OAAQD,IAGlC,IAHuC,IAAAisC,EACFxR,EAAQz6B,GAArC41B,EAD+BqW,EAC/BrW,SAAUgC,EADqBqU,EACrBrU,eAETvR,EAAI,EAAGA,EAAIuR,EAAe33B,OAAQomB,IAAK,CAC9C,IAAMhoB,EAAQu5B,EAAevR,GACxBhoB,EAAMwG,QACTumC,GAActlB,EAAK8P,EAAU1yB,EAAM8oC,EAAWnpC,EAASxE,EAAOgoB,GAKpE,OAAOP,EAMiBomB,CAAerxC,GACvC+wC,EAAW5kB,qBAIX,MAAOmlB,iEAAsBT,EAAQ9mB,WAAa,KAAOgnB,EAAWhnB,YCpKhEwnB,GAAa,SAACtmB,EAAU8P,EAAoBv3B,GAChD,IAAMmyB,EAAoBoF,EAASj6B,MAAMyL,SAAS,KAC5CqpB,EAAoBmF,EAASj6B,MAAMyL,SAAS,KAC5CilC,EAAiBzW,EAASj6B,MAAMyL,SAAS,KAGzC8f,EAAqBvO,MAAMmN,EAAIG,WAAWhmB,QAAQgsB,KAAK,IAE7D/E,EAAIpB,EAAI1b,MAAM,SAAWgb,GAAU/mB,EAAM4D,MACzCilB,EAAIpB,EAAI1b,MAAM,SAAWgb,GAAU/mB,EAAMqG,MACzCwiB,EAAIpB,EAAI1b,MAAM,QAAUgb,GAAUwQ,EAASxsB,UAC3C8d,EAAIpB,EAAI1b,MAAM,aAAegb,GAAUhoB,GAAciB,EAAMqF,eAC3DwjB,EAAIpB,EAAI1b,MAAM,eAAiBgb,GAAUwQ,EAASuE,gBAClDjT,EAAIpB,EAAI1b,MAAM,QAAUgb,GAvBJ,SAAC/mB,GACrB,QAAwBhC,IAApBgC,EAAM8F,WAA+C,KAApB9F,EAAM8F,UACzC,MAAO,GAFqC,IAAA+B,EAIJ7H,EAAM8F,UAAUuB,MAAM,KAJlBS,EAAAN,OAAAC,GAAA,EAAAD,CAAAK,EAAA,GAIvC1F,EAJuC2F,EAAA,GAK9C,OAL8CA,EAAA,GAK/B,IAL+BA,EAAA,GAKnB,IAAM3F,EAkBC8rC,CAAcjuC,IAChD6oB,EAAIpB,EAAI1b,MAAM,YAAcgb,GAAUhoB,GAAcozB,EAAWnyB,EAAM4G,QAAQ,GAAK5G,EAAM+G,YAAY,GAAK,IACzG8hB,EAAIpB,EAAI1b,MAAM,YAAcgb,GAAUhoB,GAAcozB,EAAWnyB,EAAM4G,QAAQ,GAAK5G,EAAM+G,YAAY,GAAK,IACzG8hB,EAAIpB,EAAI1b,MAAM,YAAcgb,GAAUhoB,GAAcozB,EAAWnyB,EAAM4G,QAAQ,GAAK5G,EAAM+G,YAAY,GAAK,IACzG8hB,EAAIpB,EAAI1b,MAAM,YAAcgb,GAAUhoB,GAAcqzB,EAAWpyB,EAAM6G,QAAQ,GAAK7G,EAAMgH,YAAY,GAAK,IACzG6hB,EAAIpB,EAAI1b,MAAM,YAAcgb,GAAUhoB,GAAcqzB,EAAWpyB,EAAM6G,QAAQ,GAAK7G,EAAMgH,YAAY,GAAK,IACzG6hB,EAAIpB,EAAI1b,MAAM,YAAcgb,GAAUhoB,GAAcqzB,EAAWpyB,EAAM6G,QAAQ,GAAK7G,EAAMgH,YAAY,GAAK,IACzG6hB,EAAIpB,EAAI1b,MAAM,eAAiBgb,GAAUhoB,GAAcivC,EAAQhuC,EAAM8G,WAAW,GAAK9G,EAAMiH,eAAe,GAAK,IAC/G4hB,EAAIpB,EAAI1b,MAAM,eAAiBgb,GAAUhoB,GAAcivC,EAAQhuC,EAAM8G,WAAW,GAAK9G,EAAMiH,eAAe,GAAK,IAC/G4hB,EAAIpB,EAAI1b,MAAM,eAAiBgb,GAAUhoB,GAAcivC,EAAQhuC,EAAM8G,WAAW,GAAK9G,EAAMiH,eAAe,GAAK,IAC/G4hB,EAAIpB,EAAI1b,MAAM,UAAYgb,GA3DL,SAAC0U,GACtB,OAAQA,GAEN,IAAK,MACH,MAAO,KACT,IAAK,KACH,MAAO,KACT,IAAK,IACH,MAAO,KACT,IAAK,IACH,MAAO,KACT,IAAK,IACH,MAAO,KAGT,IAAK,KACH,MAAO,KACT,IAAK,KACH,MAAO,KACT,QAEE,OAAOA,GAsCyByS,CAAe3W,EAASj6B,QAC5DurB,EAAIpB,EAAI1b,MAAM,UAAYgb,GAAU/mB,EAAMxD,OAC1CqsB,EAAIpB,EAAI1b,MAAM,aAAegb,GAAU/mB,EAAMmG,UAG7CshB,EAAIW,KAAKje,KAAK0e,IAGHslB,GAAmB,SAAC3xC,GAC/B,IAAMirB,EAAM,IAAIU,GAChBV,EAAIG,WAAa,CACf,OACA,OACA,MACA,WACA,aACA,MACA,UACA,UACA,UACA,UACA,UACA,UACA,aACA,aACA,aACA,QACA,QACA,WACA,aAWF,IARA,IAAMwU,EAAkCa,GACtCzgC,EAAM6P,aAAa/C,QACnB9M,EAAM6O,KAAKhH,mBACX7H,EAAM6O,KAAK/G,qBACX9H,EAAM6O,KAAK9G,kBACX/H,EAAM6O,KAAK3G,wBAGJ/C,EAAI,EAAGA,EAAIy6B,EAAQx6B,OAAQD,IAGlC,IAHuC,IAAAysC,EACFhS,EAAQz6B,GAArC41B,EAD+B6W,EAC/B7W,SAAUgC,EADqB6U,EACrB7U,eAETvR,EAAI,EAAGA,EAAIuR,EAAe33B,OAAQomB,IACzC+lB,GAAWtmB,EAAK8P,EAAUgC,EAAevR,IAI7C,OAAOP,EAAIlB,iCCtFP8nB,GAAuB,SAACxxC,GAC5B,IAAMyxC,EAAYzxC,EAClB,OAAQyxC,GACN,IAAK,oBACL,IAAK,oBACL,IAAK,WACL,IAAK,SACH,OAAO,EACT,QAEE,MAAM,IAAIxyC,MAAJ,8CAAAgC,OAAwDjB,EAAxD,QAyBR0xC,GAAyB,EACzBC,GAA8B,EAE5BC,eACJ,SAAAA,EAAY5yC,GAAc,IAAAiT,EAAA,OAAAtH,OAAAuH,EAAA,EAAAvH,CAAA5L,KAAA6yC,IACxB3/B,EAAAtH,OAAAwH,EAAA,EAAAxH,CAAA5L,KAAA4L,OAAAyH,EAAA,EAAAzH,CAAAinC,GAAAv/B,KAAAtT,KAAMC,KAmBR6yC,eAAiB,WASf,IARA,IAAM/yC,EAAWmT,EAAKjT,MAAMF,SACtB+qB,EAAU,CACdhqB,EAAAC,EAAAC,cAAA,UAAQR,IAAK,MAAOS,MAAO,GACxBoD,GAAU,4BAA6BtE,KAItCgzC,EAAkB1uC,GAAU,qBAAsBtE,GAC/C4G,EAAM,EAAGA,GAAOuM,EAAKjT,MAAMmzB,OAAO3jB,KAAKnH,WAAY3B,IAC1DmkB,EAAQvc,KACNzN,EAAAC,EAAAC,cAAA,UAAQR,IAAKmG,EAAK1F,MAAO0F,GACtBosC,EAAgB7vC,QAAQ,MAAO4D,OAAOH,MAI7C,OAAOmkB,GApCiB5X,EAuC1Bw2B,gBAAkB,SAAChoC,GACjB,IAAMiF,EAAM1D,OAAOvB,EAAME,cAAcX,OACnCiS,EAAKtS,MAAM+F,MAAQA,GACrBuM,EAAKM,SAAS,CAAE7M,IAAKA,KA1CCuM,EA8C1B8/B,eAAiB,SAACtxC,GAChB,IAAMyK,EAAKzK,EAAME,cAAcX,MAC3BiS,EAAKtS,MAAMuL,KAAOA,GAAMnK,EAAamK,IAAOsmC,GAAqBtmC,IACnE+G,EAAKM,SAAS,CAAErH,GAAIA,KAjDE+G,EAqD1B+/B,0BAA4B,WAE1B,IAAI36B,EAAWpF,EAAKjT,MAAMmzB,OAAO3jB,KAAKzH,KACrB,KAAbsQ,IACFA,EAAWjU,GAAU,0BAA2B6O,EAAKjT,MAAMF,WAE7DuY,EAAWA,EAASpV,QAAQ,KAAM,KAElC,IAAM2oB,EAAc2lB,GAAet+B,EAAKjT,MAAMmzB,QACxC5a,EAAO,IAAIC,KAAK,CAACoT,GAAM,CAAElqB,KAAM,2BACrC+W,iBAAOF,EAAMF,EAAW,aA/DApF,EAkE1BggC,4BAA8B,WAE5B,IAAI56B,EAAWpF,EAAKjT,MAAMmzB,OAAO3jB,KAAKzH,KACrB,KAAbsQ,IACFA,EAAWjU,GAAU,0BAA2B6O,EAAKjT,MAAMF,WAE7DuY,EAAWA,EAASpV,QAAQ,KAAM,KAElC,IAAM2oB,EAAc0mB,GAAiBr/B,EAAKjT,MAAMmzB,QAC1C5a,EAAO,IAAIC,KAAK,CAACoT,GAAM,CAAElqB,KAAM,2BACrC+W,iBAAOF,EAAMF,EAAW,eA5EApF,EA+E1BigC,0BAA4B,SAACxsC,EAAasD,GAExC,IAAMlK,EAAWmT,EAAKjT,MAAMF,SACxBuY,EAAWpF,EAAKjT,MAAMmzB,OAAO3jB,KAAKzH,KACrB,KAAbsQ,IACFA,EAAWjU,GAAU,0BAA2BtE,IAElDuY,EAAWA,EAASpV,QAAQ,KAAM,KAElC,IACMkwC,EADW/uC,GAAU,mCAAoCtE,GAE5DmD,QAAQ,QAAS4D,OAAOH,IACxBzD,QAAQ,aAAc4D,OAAOmD,IAC7B/G,QAAQ,aAAcoV,GAEnB1X,EAAQoX,KAAKO,UAAUrF,EAAKjT,MAAMmzB,QAClC5a,EAAO,IAAIC,KAAK,CAAC7X,GAAQ,CAAEe,KAAM,mCACvC+W,iBAAOF,EAAM46B,EAAa,uBAhGFlgC,EAqG1BmgC,yBAA2B,SAAC1sC,EAAasD,GACvC,IAAMqN,EAAaR,SAASC,eAAe,cACxB,OAAfO,IACFq7B,GAAiBhsC,EACjBisC,GAAsB3oC,EACtBqN,EAAWN,UA1GW9D,EA+G1BmE,oBAAsB,WACpB,IAAMC,EAAaR,SAASC,eAAe,cAC3C,GAAmB,OAAfO,GAAyBA,aAAsBC,kBAA0C,OAArBD,EAAWE,MAAnF,CAKA,IAAM7Q,EAAcgsC,GACd1oC,EAAmB2oC,GAGnB3yC,EAAQiT,EAAKjT,MACbF,EAAWE,EAAMF,SAEjB4X,EAAY/L,OAAAgI,EAAA,EAAAhI,CAAAsH,GACZuE,EAAeH,EAAWE,MAAM,GAChCI,EAAS,IAAIC,WACnBD,EAAOE,OAAS,WACd,IAAIha,EAAuB,KAI3B,GAA6B,kBAAlB8Z,EAAO3V,OAAlB,CAKA,IACE,IAAMyO,EAAmBsH,KAAKC,MAAML,EAAO3V,QAG3C,GAAIyO,EAAIpB,SAASpJ,eAAiBjG,EAAMmzB,OAAO9jB,SAASpJ,aAEtDpI,EADUuG,GAAU,yBAA0BtE,GAE3CmD,QAAQ,gBAAiBjD,EAAMmzB,OAAO9jB,SAASpJ,cAC/ChD,QAAQ,iBAAkBwN,EAAIpB,SAASpJ,mBACrC,GAAIwK,EAAIjB,KAAKzH,OAAS/H,EAAMmzB,OAAO3jB,KAAKzH,KAAM,CAGnDlK,EADUuG,GAAU,0BAA2BtE,GACrCmD,QAAQ,aAAcjD,EAAMmzB,OAAO3jB,KAAKzH,MAAM9E,QAAQ,cAAewN,EAAIjB,KAAKzH,WACnF,GAAKkG,GAAyBwC,EAAID,aAAa/C,QAAS/G,EAAKsD,GAI7D,CAEL,IAAMuH,EAAkBd,EAAID,aAAa/C,QAAQC,OAAO,SAAC8D,GACvD,OAAOA,EAAE9K,MAAQA,GAAO8K,EAAExH,WAAaA,IAEzChK,EAAMqzC,cAAc3sC,EAAKsD,EAAUuH,OAT0C,CAG7E1T,EADUuG,GAAU,yBAA0BtE,GACpCmD,QAAQ,QAAS4D,OAAOH,IAAMzD,QAAQ,aAAc4D,OAAOmD,KAQvE,MAAOkO,GACPra,EAAQuG,GAAU,iBAAkBtE,GAGjB,kBAAVjC,GACT6Z,EAAanE,SAAS,CAAE1V,MAAOA,SAjC/BY,OAAO01B,MAAM/vB,GAAU,uBAAwBtE,KAoCnD6X,EAAOQ,WAAWX,KA1KMvE,EA6K1BkE,gBAAkB,WAChBlE,EAAKM,SAAS,CAAE1V,MAAO,MA9KCoV,EAiL1BqgC,yBAA2B,WAezB,IAbA,IAAMC,EAA6CrlC,GACjD+E,EAAKjT,MAAMmzB,OAAO3jB,KAAKlH,gBACvB2K,EAAKjT,MAAMmzB,OAAO3iB,aAAa/C,SAG3B3N,EAAWmT,EAAKjT,MAAMF,SACtB0zC,EAAkBpvC,GAAU,mCAAoCtE,GAChE2zC,EAAgBrvC,GAAU,yBAA0BtE,GACpD4zC,EAAiBtvC,GAAU,0BAA2BtE,GAEtD6zC,EAAQ,GACRjkC,EAAUpM,KAAKynB,IAAI9X,EAAKjT,MAAMmzB,OAAO3jB,KAAKnH,WAAYkrC,EAAoBxtC,QAbjDgpC,EAAA,SAetBjpC,GAIP,IAHA,IAAM8tC,EAAcL,EAAoBztC,GAElC+tC,EAAU,GAlBaC,EAAA,SAmBpB3nB,GACP,IAAM4nB,EAASH,EAAYznB,GACrBnX,GAAqB,IAAX++B,EAAkB,UAAY,UACxCC,EAAc7nB,EAAI,EAAI,CAAElX,WAAY,aAAW9S,EAE/C8xC,GAA4B,IAAXF,EAAkBL,EAAiBD,EAC1DI,EAAQvlC,KACNzN,EAAAC,EAAAC,cAAC+T,EAAAhU,EAAD,CACEP,IAAKuF,EAAI,IAAMqmB,EACfnX,QAASA,EACTL,MAAOq/B,EACPj/B,QAAS,YACI,IAAXg/B,EACI9gC,EAAKigC,0BAA0BptC,EAAI,EAAGqmB,EAAI,GAC1ClZ,EAAKmgC,yBAAyBttC,EAAI,EAAGqmB,EAAI,KAG9C8nB,EAAehxC,QAAQ,QAAS4D,OAAOf,EAAI,IAAI7C,QAAQ,aAAc4D,OAAOslB,EAAI,OAjB9EA,EAAI,EAAGA,EAAIynB,EAAY7tC,OAAQomB,IAAK2nB,EAApC3nB,GAsBTwnB,EAAMrlC,KACJzN,EAAAC,EAAAC,cAAA,OAAKR,IAAKuF,GACRjF,EAAAC,EAAAC,cAAA,WAAMyyC,EAAgBvwC,QAAQ,MAAO4D,OAAOf,EAAI,KAChDjF,EAAAC,EAAAC,cAAA,WAAM8yC,GACL/tC,EAAIytC,EAAoBxtC,OAAS,EAAIlF,EAAAC,EAAAC,cAAA,WAAS,QA9B5C+E,EAAI,EAAGA,EAAI4J,EAAS5J,IAAKipC,EAAzBjpC,GAmCT,OAAO6tC,GAhOP1gC,EAAKw2B,gBAAkBx2B,EAAKw2B,gBAAgB/1B,KAArB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACvBA,EAAK8/B,eAAiB9/B,EAAK8/B,eAAer/B,KAApB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACtBA,EAAK+/B,0BAA4B//B,EAAK+/B,0BAA0Bt/B,KAA/B/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACjCA,EAAKggC,4BAA8BhgC,EAAKggC,4BAA4Bv/B,KAAjC/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACnCA,EAAKigC,0BAA4BjgC,EAAKigC,0BAA0Bx/B,KAA/B/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACjCA,EAAKmgC,yBAA2BngC,EAAKmgC,yBAAyB1/B,KAA9B/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAChCA,EAAKmE,oBAAsBnE,EAAKmE,oBAAoB1D,KAAzB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAC3BA,EAAKkE,gBAAkBlE,EAAKkE,gBAAgBzD,KAArB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACvBA,EAAKqgC,yBAA2BrgC,EAAKqgC,yBAAyB5/B,KAA9B/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAEhCA,EAAKtS,MAAQ,CACX+F,IAAK,EACLwF,GAAI,WACJrO,MAAO,IAhBeoV,wEAuOxB,IAAMnT,EAAWC,KAAKC,MAAMF,SACxBygC,EAAU,KACd,OAAQxgC,KAAKY,MAAMuL,IACjB,IAAK,WACHq0B,EAAU1/B,EAAAC,EAAAC,cAACmzC,GAAD,CAAY3zC,IAAKR,KAAKY,MAAM+F,IAAKA,IAAK3G,KAAKY,MAAM+F,MAC3D,MACF,IAAK,SACH65B,EACE1/B,EAAAC,EAAAC,cAACozC,GAAD,CAAU5zC,IAAKR,KAAKY,MAAM+F,IAAKA,IAAK3G,KAAKY,MAAM+F,IAAKkC,gBAAgB,OAAOqoC,kBAAkB,eAE/F,MACF,IAAK,oBACH1Q,EACE1/B,EAAAC,EAAAC,cAACozC,GAAD,CACE5zC,IAAKR,KAAKY,MAAM+F,IAChBA,IAAK3G,KAAKY,MAAM+F,IAChBkC,gBAAiB7I,KAAKC,MAAMmzB,OAAO3jB,KAAK5G,gBACxCqoC,kBAAkB,sBAGtB,MACF,IAAK,oBACH1Q,EACE1/B,EAAAC,EAAAC,cAACozC,GAAD,CACE5zC,IAAKR,KAAKY,MAAM+F,IAChBA,IAAK3G,KAAKY,MAAM+F,IAChBkC,gBAAiB7I,KAAKC,MAAMmzB,OAAO3jB,KAAK5G,gBACxCqoC,kBAAkB,sBAQ1B,IAAImD,EAAc,KAelB,OAdIr0C,KAAKC,MAAMmzB,OAAO3jB,KAAKnH,WAAa,IACtC+rC,EACEvzC,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CACEE,MAAOjB,KAAKY,MAAM+F,IAAIgkB,WACtBvpB,GAAG,SACHC,SAAUrB,KAAK0pC,gBACfnoC,UAAS,iBAAAW,OAAmBkX,KAAOpd,UACnC4Y,MAAO,CAAE2B,YAAa,SAErBvW,KAAK8yC,mBAMVhyC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACuY,GAAD,CACEzb,MAAOkC,KAAKY,MAAM9C,MAClBsY,MAAO/R,GAAU,4BAA6BtE,GAC9CsV,KAA2B,KAArBrV,KAAKY,MAAM9C,MACjByX,MAAOvV,KAAKoX,kBAGdtW,EAAAC,EAAAC,cAACszC,GAAAvzC,EAAD,KACED,EAAAC,EAAAC,cAACmY,EAAApY,EAAD,CAAM6T,MAAO,CAAE8B,aAAc,SAC3B5V,EAAAC,EAAAC,cAACmY,EAAApY,EAAKyU,OAAN,KACE1U,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,sCAAsCqQ,eAAe,qBAE5E7T,EAAAC,EAAAC,cAACmY,EAAApY,EAAK8U,KAAN,KACE/U,EAAAC,EAAAC,cAAA,OAAK4T,MAAO,CAAE2/B,WAAY,SACxBzzC,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,kCACHqQ,eAAe,wEAGnB7T,EAAAC,EAAAC,cAAA,WACChB,KAAKuzC,6BAIVzyC,EAAAC,EAAAC,cAACmY,EAAApY,EAAD,CAAM6T,MAAO,CAAE8B,aAAc,SAC3B5V,EAAAC,EAAAC,cAACmY,EAAApY,EAAKyU,OAAN,KACE1U,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,qCAAqCqQ,eAAe,6BAE3E7T,EAAAC,EAAAC,cAACmY,EAAApY,EAAK8U,KAAN,KACE/U,EAAAC,EAAAC,cAAC+T,EAAAhU,EAAD,CAAQiU,QAAShV,KAAKizC,2BACpBnyC,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,yCACHqQ,eAAe,iCAInB7T,EAAAC,EAAAC,cAAC+T,EAAAhU,EAAD,CAAQiU,QAAShV,KAAKkzC,4BAA6Bt+B,MAAO,CAAEM,WAAY,SACtEpU,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,8BAA8BqQ,eAAe,yBAM1E7T,EAAAC,EAAAC,cAACmY,EAAApY,EAAD,KACED,EAAAC,EAAAC,cAACmY,EAAApY,EAAKyU,OAAN,KACE1U,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,8BAA8BqQ,eAAe,oBAEpE7T,EAAAC,EAAAC,cAACmY,EAAApY,EAAK8U,KAAN,CAAWtU,UAAW6X,KAAOo7B,aAC1BH,EAEDvzC,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CACEE,MAAOjB,KAAKY,MAAMuL,GAClB/K,GAAG,SACHC,SAAUrB,KAAKgzC,eACfzxC,UAAS,iBAAAW,OAAmBkX,KAAOpd,WAEnC8E,EAAAC,EAAAC,cAAA,UAAQC,MAAM,YAAYoD,GAAU,sBAAuBtE,IACf,SAA3CC,KAAKC,MAAMmzB,OAAO3jB,KAAK5G,gBACtB/H,EAAAC,EAAAC,cAAA,UAAQC,MAAM,qBAAqBoD,GAAU,8BAA+BtE,IAC1E,KACwC,SAA3CC,KAAKC,MAAMmzB,OAAO3jB,KAAK5G,gBACtB/H,EAAAC,EAAAC,cAAA,UAAQC,MAAM,qBAAqBoD,GAAU,8BAA+BtE,IAC1E,KACJe,EAAAC,EAAAC,cAAA,UAAQC,MAAM,UAAUoD,GAAU,sBAAuBtE,OAK9DygC,EAED1/B,EAAAC,EAAAC,cAAA,SACEsD,GAAG,aACH3C,KAAK,OACLyY,OAAO,8BACPxF,MAAO,CAAEE,QAAS,QAClBzT,SAAUrB,KAAKqX,8BAvWC3W,IAAMc,WA2XjBb,eAbS,SAACC,GACvB,MAAO,CACLwyB,OAAQxyB,EACRb,SAAUa,EAAMb,WAIO,SAAC0B,GAC1B,MAAO,CACL6xC,cAAe,SAAC3sC,EAAKsD,EAAUuH,GAAhB,OAAoC/P,ElD9Y1B,SAACkF,EAAasD,EAAkBuH,GAC3D,MAAO,CACL7P,KAAM,iBACNgF,IAAKA,EACLsD,SAAUA,EACVuH,gBAAiBA,GkDyY2C8hC,CAAc3sC,EAAKsD,EAAUuH,OAI9E7Q,CAA6CkyC,ICjb7C4B,oLARX,OACE3zC,EAAAC,EAAAC,cAAA,OAAKO,UAAW6X,KAAOC,aACrBvY,EAAAC,EAAAC,cAAC0zC,GAAD,cAJuBh0C,IAAMc,WC4B/BmzC,GAAsB,CAC1B,UACA,UACA,UACA,WACA,UACA,WACA,SACA,UACA,aAGIC,GAAoB,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,WAE5EC,eACJ,SAAAA,EAAY50C,GAAc,IAAAiT,EAAA,OAAAtH,OAAAuH,EAAA,EAAAvH,CAAA5L,KAAA60C,IACxB3hC,EAAAtH,OAAAwH,EAAA,EAAAxH,CAAA5L,KAAA4L,OAAAyH,EAAA,EAAAzH,CAAAipC,GAAAvhC,KAAAtT,KAAMC,KACD60C,mBAAqB5hC,EAAK4hC,mBAAmBnhC,KAAxB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAFFA,oFAQxBlT,KAAKC,MAAMqlB,YAAY8M,KAAiBA,MAIxC,IAAM1L,EAAMiuB,GAAoBpiB,GAAU,EAAGoiB,GAAoB3uC,OAAS,IAC1EhG,KAAKC,MAAMslB,cAAcmB,GAQzB,IAJA,IAAMquB,EAAgBxiB,GAAU,EAAG,IAC7ByiB,EAAkBziB,GAAU,EAAG,GAEjC0iB,EAAa,GACRlvC,EAAI,EAAGA,EAAIgvC,EAAehvC,IACjCkvC,EAAW1mC,KAAKikB,GAAiB,GAAI,IAAK,IAE5CyiB,EAAaA,EAAWv1B,KAAK,SAAC3e,EAAG4e,GAAJ,OAAU1c,OAAOlC,GAAKkC,OAAO0c,KAG1D,IADA,IAAIu1B,EAAe,GACVnvC,EAAI,EAAGA,EAAIivC,EAAiBjvC,IACnCmvC,EAAa3mC,KAAKikB,GAAiB,GAAI,IAAK,IAE9C0iB,EAAeA,EAAax1B,KAAK,SAAC3e,EAAG4e,GAAJ,OAAU1c,OAAOlC,GAAKkC,OAAO0c,KAG9D,IADA,IAAIw1B,EAAY,GACPpvC,EAAI,EAAGA,EAAIivC,EAAiBjvC,IACnCovC,EAAU5mC,KAAKikB,GAAiB,GAAI,IAAK,IAE3C2iB,EAAYA,EAAUz1B,KAAK,SAAC3e,EAAG4e,GAAJ,OAAU1c,OAAOlC,GAAKkC,OAAO0c,KAExD3f,KAAKC,MAAMoS,iBAAiB,IAAK4iC,GACjCj1C,KAAKC,MAAMoS,iBAAiB,IAAK6iC,GACjCl1C,KAAKC,MAAMoS,iBAAiB,KAAM8iC,GAIlC,IAAMxlC,EAAU4iB,GAAU,EAAG,GAC7BvyB,KAAKC,MAAMkS,cAAcxC,GAEzB,IAAK,IAAI5J,EAAI,EAAGA,EAAI4J,EAAS5J,IAAK,CAChC,IAAMY,EAAMZ,EAAI,EACVgmC,EAAexZ,GAAU,EAAG,GAClCvyB,KAAKC,MAAMmS,mBAAmBzL,EAAKolC,GAOrC,IAFA,IAAM5L,EAAe5N,GAAU,EAAG,IAC5B/pB,EAAY,GACTzC,EAAI,EAAGA,EAAIo6B,EAAcp6B,IAAK,CACrC,IAAIqvC,EAAMR,GAAkBriB,GAAU,EAAGqiB,GAAkB5uC,OAAS,IACpE,GAAIzC,KAAK8uB,SAAW,GAAK,CACvB,IAAMgjB,EAAY9iB,GAAU,EAAG,IACzB+iB,EAAY/iB,GAAU8iB,EAAY,EAAG,IAC3CD,EAAMA,EAAM,IAAMtuC,OAAOuuC,GAAa,IAAMvuC,OAAOwuC,IAIrB,IAA5B9sC,EAAUkkB,QAAQ0oB,IACpB5sC,EAAU+F,KAAK6mC,GAGnBp1C,KAAKC,MAAMiS,aAAa1J,oCAIxB,OACE1H,EAAAC,EAAAC,cAAC+T,EAAAhU,EAAD,CAAQiU,QAAShV,KAAK80C,oBACpBh0C,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,2BA7EW5D,IAAMc,WAkG9Bb,eAfS,SAACC,GAAD,OAAAgL,OAAA8D,EAAA,EAAA9D,CAAA,GACnBhL,IAGsB,SAACa,GAC1B,MAAO,CACLyQ,aAAc,SAAC1J,GAAD,OAA8B/G,EAASyQ,GAAa1J,KAClE+c,cAAe,SAACpd,GAAD,OAAwB1G,E5E5Gd,SAAC0G,GAC5B,MAAO,CACLxG,KAAM,iBACNwG,c4EyGgDod,CAAcpd,KAC9DgK,cAAe,SAACnM,GAAD,OAAoBvE,EAAS0Q,GAAcnM,KAC1Dsf,YAAa,SAACtd,GAAD,OAAkBvG,E5E5HR,SAACuG,GAC1B,MAAO,CACLrG,KAAM,gBACNqG,Q4EyHwCsd,CAAYtd,KACpDoK,mBAAoB,SAACzL,EAAaoJ,GAAd,OAAgCtO,EAAS2Q,GAAmBzL,EAAKoJ,KACrFsC,iBAAkB,SAAC7P,EAAU0N,GAAX,OAAmCzO,EAAS4Q,GAAiB7P,EAAK0N,OAIzEvP,CAA6Ck0C,ICnItDU,GAAqB,CACzB,UACA,QACA,OACA,QACA,QACA,WACA,OACA,QACA,QACA,QACA,OACA,SACA,UACA,WACA,aACA,QACA,OACA,WACA,OACA,WACA,OACA,SACA,UACA,SACA,QACA,QACA,OACA,UACA,OACA,WACA,QACA,YACA,SACA,UACA,QACA,QACA,aACA,YACA,SACA,UACA,QACA,UACA,OACA,UACA,SACA,SACA,QACA,SACA,WACA,QACA,SACA,OACA,MACA,MACA,QACA,WACA,SACA,WACA,OACA,UACA,UACA,SACA,SACA,QACA,UACA,SACA,YACA,MACA,YACA,SACA,OACA,QACA,OACA,QACA,UACA,WAGIC,GAAoB,CACxB,QACA,UACA,SACA,aACA,QACA,aACA,SACA,UACA,SACA,WACA,UACA,aACA,UACA,YACA,QACA,WACA,QACA,QACA,UACA,cACA,SACA,aACA,aACA,WACA,aACA,WACA,QACA,SACA,aACA,aACA,WACA,QACA,OACA,QACA,aACA,YACA,YACA,WACA,QACA,UACA,UACA,SACA,WACA,SACA,WACA,QACA,UACA,aACA,cACA,WACA,WACA,WACA,YACA,QACA,UACA,SACA,aACA,QACA,YACA,WACA,WACA,QACA,YACA,UACA,OACA,SACA,UAUIC,eACJ,SAAAA,EAAYx1C,GAAc,IAAAiT,EAAA,OAAAtH,OAAAuH,EAAA,EAAAvH,CAAA5L,KAAAy1C,IACxBviC,EAAAtH,OAAAwH,EAAA,EAAAxH,CAAA5L,KAAA4L,OAAAyH,EAAA,EAAAzH,CAAA6pC,GAAAniC,KAAAtT,KAAMC,KACDy1C,4BAA8BxiC,EAAKwiC,4BAA4B/hC,KAAjC/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACnCA,EAAKyiC,gBAAkBziC,EAAKyiC,gBAAgBhiC,KAArB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IACvBA,EAAK0iC,sBAAwB1iC,EAAK0iC,sBAAsBjiC,KAA3B/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAJLA,6FASxB,IADA,IAAMihB,EAAWn0B,KAAKC,MAAMwQ,aAAa/C,QAAQhC,IAAI,SAAC+F,GAAD,OAAOA,EAAEnN,KACrDyB,EAAI,EAAGA,EAAIouB,EAASnuB,OAAQD,IACnC/F,KAAKC,MAAMgoB,mBAAmBkM,EAASpuB,4CAM3BY,EAAasD,EAAkB3H,GAG7C,IAFA,IAAMuzC,EAAatjB,GAAU,EAAG,IAEvBxsB,EAAI,EAAGA,EAAI8vC,EAAY9vC,IAAK,CAGnC,IAEMiC,EAFYutC,GAAmBhjB,GAAU,EAAGgjB,GAAmBvvC,OAAS,IAErD,IADRwvC,GAAkBjjB,GAAU,EAAGijB,GAAkBxvC,OAAS,IAKrE8vC,EAAe,CAAC,IAAK,IAAK,MAC1BtzC,EAAWszC,EAAMvjB,GAAU,EAAGujB,EAAM9vC,OAAS,IAI7C+vC,EAAwC,IAArBxjB,GAAU,EAAG,IAIhC5nB,EAA2B4nB,GAAU,EAAG,IAAM,EAI9CyjB,EAAkB,CAAC,WAAY,aAAc,aAC7CvrC,EAAeurC,EAAMzjB,GAAU,EAAGyjB,EAAMhwC,OAAS,IAIjDqE,EAAkB,GACpB9G,KAAK8uB,SAAW,IAClBhoB,EAAOkE,KAAK,OAEVhL,KAAK8uB,SAAW,IAClBhoB,EAAOkE,KAAK,MAEVhL,KAAK8uB,SAAW,IAClBhoB,EAAOkE,KAAK,KAEVhL,KAAK8uB,SAAW,IAClBhoB,EAAOkE,KAAK,KAEVhL,KAAK8uB,SAAW,IAClBhoB,EAAOkE,KAAK,KAEQ,IAAlBlE,EAAOrE,QACTqE,EAAOkE,KAAK,OAOd,IADA,IAAIgoB,GAAW,EACNxwB,EAAI,EAAGA,EAAIsE,EAAOrE,OAAQD,IACjC,GAAIsE,EAAOtE,GAAGoH,SAAS,KAAM,CAC3BopB,GAAW,EACX,MAIJ,IAAM0f,EAAkB1yC,KAAK8uB,SACzB3vB,EAAuB,UACvBuzC,EAAkB,KAEXA,EAAkB,GACvB1f,IACF7zB,EAAY,SAGdA,EADSuzC,EAAkB,IACf,aACHA,EAAkB,IACf,YAEA,aAKd,IAAMztC,EAAY,GAClB,GAAIxI,KAAKC,MAAMwP,KAAKjH,UAAUxC,OAAS,EAOrC,IANA,IAAMkwC,EAAsB3yC,KAAKkJ,IAAI,EAAGzM,KAAKC,MAAMwP,KAAKjH,UAAUxC,OAAS,GACrEm6B,EAAe5N,GAAU,EAAG2jB,GAG5BC,EAAan2C,KAAKC,MAAMwP,KAAKjH,UAAUsH,QAEpC/J,EAAI,EAAGA,EAAIo6B,EAAcp6B,IAAK,CACrC,IAAMqwC,EAAS7jB,GAAU,EAAG4jB,EAAWnwC,OAAS,GAChDwC,EAAU+F,KAAK4nC,EAAWC,IAG1BD,EAAWvpB,OAAOwpB,EAAQ,GAI9Bp2C,KAAKC,MAAM+nB,gBAAgB,CACzBrhB,IAAKA,EACLsD,SAAUA,EACV3H,OAAQA,EACR0F,KAAMA,EACNxF,IAAKA,EACLiI,KAAMA,EACNJ,OAAQA,EACR3H,UAAWA,EACX8F,UAAWA,EACXkC,MAAOqrC,EACPprC,gBAAiBA,qDAMrB,IAAM0rC,EAAwB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAEjFr2C,KAAK01C,8BACL,IAAK,IAAI/uC,EAAM,EAAGA,GAAO3G,KAAKC,MAAMwP,KAAKnH,WAAY3B,IAEnD,IADA,IAAMolC,EAAe/rC,KAAKC,MAAMwP,KAAKlH,gBAAgB5B,EAAM,GAClDsD,EAAW,EAAGA,GAAY8hC,EAAc9hC,IAE/C,IADA,IAAMqsC,EAAa/jB,GAAU,EAAG,GACvBjwB,EAAS,EAAGA,EAASg0C,EAAYh0C,IACxCtC,KAAK21C,gBAAgBhvC,EAAKsD,EAAUosC,EAAY/zC,qCAOtD,OACExB,EAAAC,EAAAC,cAAC+T,EAAAhU,EAAD,CAAQiU,QAAShV,KAAK41C,uBACpB90C,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,6BAnJc5D,IAAMc,WAoKjCb,eAXS,SAACC,GAAD,OAAAgL,OAAA8D,EAAA,EAAA9D,CAAA,GACnBhL,IAGsB,SAACa,GAC1B,MAAO,CACLumB,gBAAiB,SAACtX,GAAD,OAAyBjP,EAASumB,GAAgBtX,KACnEuX,mBAAoB,SAACnX,GAAD,OAAqBrP,EAASwmB,GAAmBnX,OAI1DnQ,CAA6C80C,ICjTtDc,eACJ,SAAAA,EAAYt2C,GAAc,IAAAiT,EAAA,OAAAtH,OAAAuH,EAAA,EAAAvH,CAAA5L,KAAAu2C,IACxBrjC,EAAAtH,OAAAwH,EAAA,EAAAxH,CAAA5L,KAAA4L,OAAAyH,EAAA,EAAAzH,CAAA2qC,GAAAjjC,KAAAtT,KAAMC,KAIRu2C,cAAgB,WAEd,OAAItjC,EAAKjT,MAAMwP,KAAKxG,KADH,IAER1F,KAAKuG,MAAM0oB,GAAiB,GAAI,IAAK,GAF7B,KAIR3vB,EAJQ,IAIDU,KAAKuG,MAAM0oB,GAAiB,GAAI,IAAK,GAJpC,OANOtf,EAc1BujC,kBAAoB,WAIlB,IAHA,IAAM/oC,EAAUwF,EAAKjT,MAAMwQ,aAAa/C,QAClCzE,EAAgBiK,EAAKjT,MAAMwP,KAAKxG,KAE7BlD,EAAI,EAAGA,EAAI2H,EAAQ1H,OAAQD,IAAK,CACvC,IAAM3B,EAAQsJ,EAAQ3H,GAIhB0D,EAAeR,EAAOupB,GAAiB,GAAI,IAAK,GAAK3vB,EAAO2vB,GAAiB,GAAI,IAAK,IAC5Ftf,EAAKjT,MAAMioB,mBAAmB9jB,EAAME,GAAI,CACtCmF,aAAcA,IAIhB,IAAMU,EAAMooB,GAAU,EAAG,IACzBrf,EAAKjT,MAAMioB,mBAAmB9jB,EAAME,GAAI,CACtC6F,IAAKA,IAQP,IAHA,IAAIosB,GAAW,EACXC,GAAW,EACXC,GAAc,EACTrK,EAAI,EAAGA,EAAIhoB,EAAMiG,OAAOrE,OAAQomB,IAAK,CAC5C,IAAM3a,EAAIrN,EAAMiG,OAAO+hB,GACnB3a,EAAEtE,SAAS,OACbopB,GAAW,GAET9kB,EAAEtE,SAAS,OACbqpB,GAAW,GAET/kB,EAAEtE,SAAS,OACbspB,GAAc,GAkBlB,GAZIF,GACFrjB,EAAKjT,MAAM81B,aAAa3xB,EAAME,GAAI,IAAK,EAAG4O,EAAKsjC,iBAE7ChgB,GACFtjB,EAAKjT,MAAM81B,aAAa3xB,EAAME,GAAI,IAAK,EAAG4O,EAAKsjC,iBAE7C/f,GACFvjB,EAAKjT,MAAM81B,aAAa3xB,EAAME,GAAI,IAAK,EAAG4O,EAAKsjC,iBAK7CjgB,EAAU,CACZ,IAAMmgB,EAAS5vC,OAAOyrB,GAAU,EAAG,KAC7BvJ,EAAMzlB,KAAK8uB,SAAW,GAAM,MAAQ,KAC1Cnf,EAAKjT,MAAMioB,mBAAmB9jB,EAAME,GAAI,CACtCwG,cAAe4rC,EAAS1tB,IAI5B,GAAIwN,EAAU,CACZ,IAAMkgB,EAAS5vC,OAAOyrB,GAAU,EAAG,KAC7BokB,EAAS7vC,OAAOyrB,GAAU,EAAG,IACnCrf,EAAKjT,MAAMioB,mBAAmB9jB,EAAME,GAAI,CACtCyG,cAAe2rC,EAAS,IAAMC,OA5EpCzjC,EAAKujC,kBAAoBvjC,EAAKujC,kBAAkB9iC,KAAvB/H,OAAAgI,EAAA,EAAAhI,CAAAsH,IAFDA,wEAqFxB,OACEpS,EAAAC,EAAAC,cAAC+T,EAAAhU,EAAD,CAAQiU,QAAShV,KAAKy2C,mBACpB31C,EAAAC,EAAAC,cAAC0pB,GAAD,CAAiBpmB,GAAG,0BAxFU5D,IAAMc,WAyG7Bb,eAXS,SAACC,GAAD,MAAqC,CAC3D6O,KAAM7O,EAAM6O,KACZgB,aAAc7P,EAAM6P,eAGK,SAAChP,GAAD,MAAwC,CACjEymB,mBAAoB,SAACpX,EAASJ,GAAV,OAAkBjP,EAASymB,GAAmBpX,EAASJ,KAC3EqlB,aAAc,SAACjlB,EAASjD,EAAMG,EAAmBnG,GAAnC,OACZpG,EAASs0B,GAAajlB,EAASjD,EAAMG,EAAmBnG,OAG7ClH,CAA6C41C,ICxHtDK,8MAEJC,kBAAoB,WAClBC,aAAaC,QACbr4C,OAAOC,SAASq4C,kFAIhB,OACEl2C,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACmY,EAAApY,EAAD,CAAM6T,MAAO,CAAE8B,aAAc,SAC3B5V,EAAAC,EAAAC,cAACmY,EAAApY,EAAKyU,OAAN,KACE1U,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,8BAA8BqQ,eAAe,gCAEpE7T,EAAAC,EAAAC,cAACmY,EAAApY,EAAK8U,KAAN,KACE/U,EAAAC,EAAAC,cAAC+T,EAAAhU,EAAD,CAAQ6T,MAAO,CAAE2B,YAAa,QAAUtB,QAAQ,SAASD,QAAShV,KAAK62C,mBACrE/1C,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,qBAAqBqQ,eAAe,WAE3D7T,EAAAC,EAAAC,cAACkiB,GAAAniB,EAAD,KACED,EAAAC,EAAAC,cAACi2C,GAAD,MACAn2C,EAAAC,EAAAC,cAACk2C,GAAD,MACAp2C,EAAAC,EAAAC,cAACm2C,GAAD,SAKNr2C,EAAAC,EAAAC,cAACmY,EAAApY,EAAD,KACED,EAAAC,EAAAC,cAACmY,EAAApY,EAAKyU,OAAN,KACE1U,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,0BAA0BqQ,eAAe,iBAEhE7T,EAAAC,EAAAC,cAACmY,EAAApY,EAAK8U,KAAN,KACE/U,EAAAC,EAAAC,cAAA,WAAMgX,KAAKO,UAAUvY,KAAKC,MAAO,KAAM,cA/B1BS,IAAMc,WA2ChBb,eAJS,SAACC,GAAD,OAAAgL,OAAA8D,EAAA,EAAA9D,CAAA,GACnBhL,IAGUD,CAAyBi2C,IC5CzBQ,GARQ,WACrB,OACEt2C,EAAAC,EAAAC,cAAA,OAAKO,UAAW6X,KAAOC,aACrBvY,EAAAC,EAAAC,cAACq2C,GAAD,QCmJSC,oLArIX,OACEx2C,EAAAC,EAAAC,cAAC2Y,EAAA5Y,EAAD,CAAWQ,UAAW6X,KAAOC,aAC3BvY,EAAAC,EAAAC,cAAC4Y,EAAA7Y,EAAD,KACED,EAAAC,EAAAC,cAAC6Y,EAAA9Y,EAAD,CAAKiL,GAAI,GACPlL,EAAAC,EAAAC,cAACmY,EAAApY,EAAD,KACED,EAAAC,EAAAC,cAACmY,EAAApY,EAAKyU,OAAN,KACE1U,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,uBAAuBqQ,eAAe,aAE7D7T,EAAAC,EAAAC,cAACmY,EAAApY,EAAK8U,KAAN,KACE/U,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,gBACHqQ,eAAe,yDAGnB7T,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,KAAG8Y,KAAK,mCAAmCG,IAAI,sBAAsB/B,OAAO,UAA5E,yBAIFpX,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,sBAAsBqQ,eAAe,eAC1D7T,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,uDACAF,EAAAC,EAAAC,cAAA,uDACAF,EAAAC,EAAAC,cAAA,0DACAF,EAAAC,EAAAC,cAAA,uDACAF,EAAAC,EAAAC,cAAA,mDACAF,EAAAC,EAAAC,cAAA,uCACAF,EAAAC,EAAAC,cAAA,mEACAF,EAAAC,EAAAC,cAAA,yDACAF,EAAAC,EAAAC,cAAA,+CACAF,EAAAC,EAAAC,cAAA,sDACAF,EAAAC,EAAAC,cAAA,6CACAF,EAAAC,EAAAC,cAAA,8CACAF,EAAAC,EAAAC,cAAA,wDACAF,EAAAC,EAAAC,cAAA,sDACAF,EAAAC,EAAAC,cAAA,2DACAF,EAAAC,EAAAC,cAAA,6CACAF,EAAAC,EAAAC,cAAA,uDACAF,EAAAC,EAAAC,cAAA,2CACAF,EAAAC,EAAAC,cAAA,yDACAF,EAAAC,EAAAC,cAAA,yDACAF,EAAAC,EAAAC,cAAA,sDACAF,EAAAC,EAAAC,cAAA,wDACAF,EAAAC,EAAAC,cAAA,0DACAF,EAAAC,EAAAC,cAAA,4DACAF,EAAAC,EAAAC,cAAA,+DACAF,EAAAC,EAAAC,cAAA,uEACAF,EAAAC,EAAAC,cAAA,yDACAF,EAAAC,EAAAC,cAAA,6CAOVF,EAAAC,EAAAC,cAAC6Y,EAAA9Y,EAAD,CAAKiL,GAAI,GACPlL,EAAAC,EAAAC,cAACmY,EAAApY,EAAD,KACED,EAAAC,EAAAC,cAACmY,EAAApY,EAAKyU,OAAN,KACE1U,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,uBAAuBqQ,eAAe,aAE7D7T,EAAAC,EAAAC,cAACmY,EAAApY,EAAK8U,KAAN,KACE/U,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,kBACHqQ,eAAe,yEAGnB7T,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,sBACHqQ,eAAe,mFAGnB7T,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,kBACHqQ,eAAe,kEAGnB7T,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,kBACHqQ,eAAe,4EAGnB7T,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,kBACHqQ,eAAe,gEAGnB7T,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,kBACHqQ,eAAe,4EAIrB7T,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,8BACHqQ,eAAe,uVAGnB7T,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,iCACHqQ,eAAe,8CAGnB7T,EAAAC,EAAAC,cAAA,WA7Hd,ofA8HcF,EAAAC,EAAAC,cAAA,KAAG8Y,KAAK,gDAAgDG,IAAI,sBAAsB/B,OAAO,UACvFpX,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,+BACHqQ,eAAe,mEAGnB7T,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,KAAG8Y,KAAK,4CAA4CG,IAAI,sBAAsB/B,OAAO,UACnFpX,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,qBAAqBqQ,eAAe,wCA5H9CjU,IAAMc,qFCI5B,SAAS+1C,GAAqBx3C,GACnC,IAAM4vB,EAAWtrB,GAAU,mBAAoBtE,GACzCy3C,EAAanzC,GAAU,qBAAsBtE,GAC7C03C,EAAWpzC,GAAU,mBAAoBtE,GACzC23C,EAAerzC,GAAU,uBAAwBtE,GACjD43C,EAAetzC,GAAU,uBAAwBtE,GACjD6vB,EAAUvrB,GAAU,kBAAmBtE,GACvC63C,EAAYvzC,GAAU,oBAAqBtE,GAC3C8vB,EAAgBxrB,GAAU,wBAAyBtE,GACnD83C,EAAkBxzC,GAAU,0BAA2BtE,GACvD+3C,EAAkBzzC,GAAU,0BAA2BtE,GAE7D,MAAO,CACLg4C,WAAY,CACVpoB,EACA6nB,EACAC,EACAC,EACAC,EACA/nB,EACAgoB,EACA/nB,EACAgoB,EACAC,GAEFE,iBAAkB,CAChBroB,EACA6nB,EACAG,EACA/nB,EACAgoB,EACA/nB,EACAgoB,EACAC,GAEFG,gBAAiB,CAACR,EAAUC,GAC5BQ,YAAa,CACXlwC,KAAM2nB,EACNvsB,OAAQo0C,EACRpvC,KAAMqvC,EACN94C,SAAU+4C,EACVvoC,SAAUwoC,EACVn1C,IAAKotB,EACLuoB,MAAOP,EACPl1C,UAAWmtB,EACXjrB,WAAYizC,EACZ9yC,WAAY+yC,IAKX,IAAMM,GAAwB,SAACr4C,GACpC,IAAMs4C,EAAWd,GAAqBx3C,GAChCm4C,EAAcG,EAASH,YACvBrsB,EAAM,IAAIU,GAChBV,EAAIW,KAAO,CAAC,GAAI,IAChBX,EAAIuD,cAAcipB,EAASN,YAE3B,IAAMO,EAAWzsB,EAAIW,KAAK,GAC1B8rB,EAASzsB,EAAI1b,MAAM+nC,EAAYlwC,OAAS3D,GAAU,yBAA0BtE,GAC5Eu4C,EAASzsB,EAAI1b,MAAM+nC,EAAY90C,SAAW,MAC1Ck1C,EAASzsB,EAAI1b,MAAM+nC,EAAY9vC,OAAS/D,GAAU,uBAAwBtE,GAC1Eu4C,EAASzsB,EAAI1b,MAAM+nC,EAAYv5C,WAAa0F,GAAU,2BAA4BtE,GAClFu4C,EAASzsB,EAAI1b,MAAM+nC,EAAY/oC,WAAa9K,GAAU,2BAA4BtE,GAClFu4C,EAASzsB,EAAI1b,MAAM+nC,EAAY11C,MAAQ6B,GAAU,wBAAyBtE,GAC1Eu4C,EAASzsB,EAAI1b,MAAM+nC,EAAYC,QAAU9zC,GAAU,0BAA2BtE,GAC9Eu4C,EAASzsB,EAAI1b,MAAM+nC,EAAYx1C,YAAc2B,GAAU,8BAA+BtE,GACtFu4C,EAASzsB,EAAI1b,MAAM+nC,EAAYtzC,aAAeP,GAAU,gCAAiCtE,GACzFu4C,EAASzsB,EAAI1b,MAAM+nC,EAAYnzC,aAAeV,GAAU,gCAAiCtE,GAEzF,IAAMw4C,EAAY1sB,EAAIW,KAAK,GAY3B,OAXA+rB,EAAU1sB,EAAI1b,MAAM+nC,EAAYlwC,OAAS3D,GAAU,yBAA0BtE,GAC7Ew4C,EAAU1sB,EAAI1b,MAAM+nC,EAAY90C,SAAW,MAC3Cm1C,EAAU1sB,EAAI1b,MAAM+nC,EAAY9vC,OAAS/D,GAAU,uBAAwBtE,GAC3Ew4C,EAAU1sB,EAAI1b,MAAM+nC,EAAYv5C,WAAa0F,GAAU,2BAA4BtE,GACnFw4C,EAAU1sB,EAAI1b,MAAM+nC,EAAY/oC,WAAa9K,GAAU,2BAA4BtE,GACnFw4C,EAAU1sB,EAAI1b,MAAM+nC,EAAY11C,MAAQ6B,GAAU,wBAAyBtE,GAC3Ew4C,EAAU1sB,EAAI1b,MAAM+nC,EAAYC,QAAU9zC,GAAU,0BAA2BtE,GAC/Ew4C,EAAU1sB,EAAI1b,MAAM+nC,EAAYx1C,YAAc2B,GAAU,8BAA+BtE,GACvFw4C,EAAU1sB,EAAI1b,MAAM+nC,EAAYtzC,aAAeP,GAAU,gCAAiCtE,GAC1Fw4C,EAAU1sB,EAAI1b,MAAM+nC,EAAYnzC,aAAeV,GAAU,gCAAiCtE,GAEnF8rB,EAAIlB,qCC5HA6tB,GAAsB,oGAAAt2C,OAFd,MAEc,yIAAAA,OAFd,MAEc,uCAAAA,OAFd,MAEc,ukBAAAA,OAFd,MAEc,oCAAAA,OAFd,MAEc,4RCWtBu2C,GAAb,SAAAC,GAAA,SAAAD,IAAA,OAAA7sC,OAAAuH,EAAA,EAAAvH,CAAA5L,KAAAy4C,GAAA7sC,OAAAwH,EAAA,EAAAxH,CAAA5L,KAAA4L,OAAAyH,EAAA,EAAAzH,CAAA6sC,GAAAE,MAAA34C,KAAAuP,YAAA,OAAA3D,OAAAgtC,EAAA,EAAAhtC,CAAA6sC,EAAAC,GAAA9sC,OAAA6gB,EAAA,EAAA7gB,CAAA6sC,EAAA,EAAAj4C,IAAA,SAAAS,MAAA,WACW,IAAAiS,EAAAlT,KACP,OACEc,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,4BAA4BqQ,eAAe,0BAElE7T,EAAAC,EAAAC,cAAA,aAAQw3C,KAEV13C,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,OAAKO,UAAU,eACbT,EAAAC,EAAAC,cAAA,OAAKO,UAAU,iBACbT,EAAAC,EAAAC,cAAA,OAAKyY,ICzBjB,y0rDDyBgClY,UAAU,qBAGhCT,EAAAC,EAAAC,cAAA,KAAGO,UAAU,oBACXT,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,4BAA4BqQ,eAAe,0BAEjE3U,KAAKC,MAAM44C,iBAAiBntC,IAAI,SAACiwB,EAAUxrB,GAAX,OAAqB+C,EAAK4lC,eAAend,EAAUxrB,UAnBhG,CAAA3P,IAAA,iBAAAS,MAAA,SA0BiB83C,EAAkC5oC,GAAe,IAAA0Q,EAAA7gB,KACxD27B,EAAWod,EAASpd,SACpB57B,EAAWC,KAAKC,MAAMF,SACtBi5C,EAAe5zC,GAAkBu2B,EAASn5B,IAAKzC,GAC/Ck5C,EAAqB10C,GAAkBo3B,EAASj5B,UAAW3C,GACjE,OACEe,EAAAC,EAAAC,cAAA,OAAKR,IAAK2P,EAAO5O,UAAU,kBACzBT,EAAAC,EAAAC,cAAA,KAAGO,UAAU,mBACVy3C,EADH,IACkBC,EADlB,MACyCtd,EAASxsB,SADlD,IAC6DwsB,EAASvsB,aAEtEtO,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,MAAIO,UAAU,gBACZT,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,yCAAyCqQ,eAAe,iBAE/E7T,EAAAC,EAAAC,cAAA,MAAIO,UAAU,cACZT,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,oCAAoCqQ,eAAe,YAE1E7T,EAAAC,EAAAC,cAAA,MAAIO,UAAU,cACZT,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,yCAAyCqQ,eAAe,UAE/E7T,EAAAC,EAAAC,cAAA,MAAIO,UAAU,eACZT,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,kCAAkCqQ,eAAe,UAExE7T,EAAAC,EAAAC,cAAA,MAAIO,UAAU,eACZT,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,kCAAkCqQ,eAAe,UAExE7T,EAAAC,EAAAC,cAAA,MAAIO,UAAU,eACZT,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,sCAAsCqQ,eAAe,gBAIhF7T,EAAAC,EAAAC,cAAA,aAAQ+3C,EAAShnC,QAAQrG,IAAI,SAACwD,EAAQiB,GAAT,OAAmB0Q,EAAKq4B,aAAahqC,EAAQiB,UA3DpF,CAAA3P,IAAA,eAAAS,MAAA,SAiEeiO,EAAuBiB,GAClC,OACErP,EAAAC,EAAAC,cAAA,MAAIR,IAAK2P,GACPrP,EAAAC,EAAAC,cAAA,UAAK8D,GAAmBoK,EAAOnK,WAAY/E,KAAKC,MAAMF,WACtDe,EAAAC,EAAAC,cAAA,UAAKkO,EAAO9L,QACZtC,EAAAC,EAAAC,cAAA,UAAK2D,GAAmBuK,EAAOtK,WAAY5E,KAAKC,MAAMF,WACtDe,EAAAC,EAAAC,cAAA,UAAKkO,EAAOurB,UACZ35B,EAAAC,EAAAC,cAAA,UAAKkO,EAAO9G,MACZtH,EAAAC,EAAAC,cAAA,UAAKkO,EAAOvQ,eAzEpB85C,EAAA,CAAyC/3C,IAAMc,WE2C/C,IAAM23C,GAA2B,MA0B3BC,eACJ,SAAAA,EAAYn5C,GAAc,IAAAiT,EAAA,OAAAtH,OAAAuH,EAAA,EAAAvH,CAAA5L,KAAAo5C,IACxBlmC,EAAAtH,OAAAwH,EAAA,EAAAxH,CAAA5L,KAAA4L,OAAAyH,EAAA,EAAAzH,CAAAwtC,GAAA9lC,KAAAtT,KAAMC,KAqCRkzB,+BAAiC,WAC/B,IAAM1uB,EAAO2zC,GAAsBllC,EAAKjT,MAAMF,UACxCyY,EAAO,IAAIC,KAAK,CAAChU,GAAO,CAAE9C,KAAM,mCAChC0xB,EAAWhvB,GAAU,2BAA4B6O,EAAKjT,MAAMF,UAAY,OAC9E2Y,OAAOF,EAAM6a,IAxCbngB,EAAKtS,MAAQ,CACX9C,MAAO,GACPw2B,gBAAgB,EAChB+kB,eAAgBF,GAChBG,UAAWH,GACXI,kBAAmBJ,GACnBK,gBAAiBL,GACjBM,iBAAkBN,GAClBO,iBAAkBP,IAVIjmC,iFAexBlT,KAAKwT,SAAS,CAAE1V,MAAO,oDAIvB,IAAMiC,EAAWC,KAAKC,MAAMF,SACtB0E,EC5EH,SAAwBk1C,EAA2Ble,EAAsB17B,GAC9E,IAAMs4C,EAAWd,GAAqBx3C,GAChCm4C,EAAcG,EAASH,YACvBrsB,EAAM,IAAIU,GAKVqtB,EAA0Bpe,GAHhB5vB,OAAO8B,QAAQisC,EAAY3qC,kBACxCtD,IAAI,SAACtH,GAAD,OAAWA,EAAM,KACrBuJ,OAAOxL,GACiEs5B,GAwB3E,OAtBA5P,EAAIuD,cAAcipB,EAASN,YAC3B6B,EACGC,QAAQ,SAACC,GAAD,OAAWA,EAAM/nC,UACzBE,QAAQ,SAAC/C,GACR,QAAe9M,IAAX8M,EAAsB,CACxB,IAAM+d,EAAqB,IAAIvO,MAAMmN,EAAIG,WAAWhmB,QAAQgsB,KAAK,IAEjE/E,EAAIpB,EAAI1b,MAAM+nC,EAAYlwC,OAASmjB,GAAUjc,EAAOurB,UACpDxN,EAAIpB,EAAI1b,MAAM+nC,EAAY90C,SAAW+nB,GAAUjc,EAAO9L,QACtD6pB,EAAIpB,EAAI1b,MAAM+nC,EAAY9vC,OAAS+iB,GAAUjc,EAAO9G,MACpD6kB,EAAIpB,EAAI1b,MAAM+nC,EAAYv5C,WAAawsB,GAAUjc,EAAOvQ,UACxDsuB,EAAIpB,EAAI1b,MAAM+nC,EAAY/oC,WAAagc,GAAUjc,EAAOC,UACxD8d,EAAIpB,EAAI1b,MAAM+nC,EAAY11C,MAAQ2oB,GAAU9lB,GAAY6J,EAAO1M,IAAKzC,IACpEktB,EAAIpB,EAAI1b,MAAM+nC,EAAYC,QAAUhtB,GAAUjc,EAAOE,aACrD6d,EAAIpB,EAAI1b,MAAM+nC,EAAYx1C,YAAcyoB,GAAU5mB,GAAkB2K,EAAOxM,UAAW3C,IACtFktB,EAAIpB,EAAI1b,MAAM+nC,EAAYtzC,aAAeumB,GAAUxmB,GAAmBuK,EAAOtK,WAAY7E,IACzFktB,EAAIpB,EAAI1b,MAAM+nC,EAAYnzC,aAAeomB,GAAUrmB,GAAmBoK,EAAOnK,WAAYhF,IAEzF8rB,EAAIW,KAAKje,KAAK0e,MAIbpB,EAAIlB,WD4CIovB,CAAe/5C,KAAKC,MAAM+5C,eAAgBh6C,KAAKC,MAAMwP,KAAM1P,GAClEyY,EAAO,IAAIC,KAAK,CAAChU,GAAO,CAAE9C,KAAM,mCAGhC0xB,EADWhvB,GAAU,0BAA2BrE,KAAKC,MAAMF,UACvCmD,QAAQ,aAAclD,KAAKC,MAAMwP,KAAKzH,MAAQ,OACxE0Q,OAAOF,EAAM6a,sDAIb,IAAM4mB,EEpFH,SACLD,EACAve,EACA17B,GAEA,IAIM84C,EAAmBrd,GAJT5vB,OAAO8B,QAAQssC,EAAehrC,kBAC3CtD,IAAI,SAACwuC,GAAD,OAASA,EAAI,KACjBvsC,OAAOxL,GAE0Ds5B,GAC9Dt7B,EAAYrB,EAAqBiB,GACvC,OAAOo6C,KAAeC,eACpBt5C,EAAAC,EAAAC,cAACX,EAAA,EAAD,CAAcC,OAAQP,EAAUQ,cAAc,KAAKC,IAAKT,EAAUI,SAAUA,GAC1EW,EAAAC,EAAAC,cAACq5C,GAAD,CAAqBxB,iBAAkBA,EAAkB94C,SAAUA,MFuExDu6C,CAAwBt6C,KAAKC,MAAM+5C,eAAgBh6C,KAAKC,MAAMwP,KAAMzP,KAAKC,MAAMF,UACtFyY,EAAO,IAAIC,KAAK,CAACwhC,GAAO,CAAEt4C,KAAM,mCAIhC0xB,EAFWhvB,GAAU,0BAA2BrE,KAAKC,MAAMF,UAEvCmD,QAAQ,aAAclD,KAAKC,MAAMwP,KAAKzH,MAAQ,QACxE0Q,OAAOF,EAAM6a,+CAWb,IAAMxc,EAAaC,SAASC,eAAe,cACxB,OAAfF,GACFA,EAAWG,sDAIOtV,GACpB,IAAMc,EAAMd,EAAME,cAAcX,OAC5BuB,IAAQ22C,IAAcn3C,EAAaQ,IAAQD,EAAUC,KACvDxC,KAAKwT,SAAS,CACZ8lC,UAAW92C,uDAKUd,GACzB,IAAMT,EAAQS,EAAME,cAAcX,WACpBmB,IAAVnB,GACFjB,KAAKwT,SAAS,CACZ6lC,eAAgBp4C,0DAKQS,GAC5B,IAAMT,EAAQS,EAAME,cAAcX,WACpBmB,IAAVnB,GACFjB,KAAKwT,SAAS,CACZ+lC,kBAAmBt4C,wDAKGS,GAC1B,IAAMgB,EAAYhB,EAAME,cAAcX,OAClCyB,IAAcy2C,IAAcn3C,EAAaU,IAAcD,EAAgBC,KACzE1C,KAAKwT,SAAS,CACZgmC,gBAAiB92C,yDAKMhB,GAC3B,IAAMkD,EAAalD,EAAME,cAAcX,OACnC2D,IAAeu0C,IAAcn3C,EAAa4C,IpGd3C,SAA0B3D,GAC/B,IAAM2D,EAAa3D,EACnB,OAAQ2D,GACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,QACH,OAAO,EACT,QAEE,MAAM,IAAI1E,MAAJ,mEAAAgC,OAA6EjB,EAA7E,OoGIqDs5C,CAAiB31C,KAC5E5E,KAAKwT,SAAS,CACZimC,iBAAkB70C,yDAKKlD,GAC3B,IAAMqD,EAAarD,EAAME,cAAcX,OACnC8D,IAAeo0C,IAAcn3C,EAAa+C,IpGnC3C,SAA0B9D,GAC/B,IAAM8D,EAAa9D,EACnB,OAAQ8D,GACN,IAAK,YACL,IAAK,aACH,OAAO,EACT,QAEE,MAAM,IAAI7E,MAAJ,mEAAAgC,OAA6EjB,EAA7E,OoG2BqDu5C,CAAiBz1C,KAC5E/E,KAAKwT,SAAS,CACZkmC,iBAAkB30C,kDAKF,IAAA8b,EAAA7gB,KACdsX,EAAaR,SAASC,eAAe,cAC3C,GAAmB,OAAfO,GAAyBA,aAAsBC,kBAA0C,OAArBD,EAAWE,MAAnF,CAIA,IAAMC,EAAeH,EAAWE,MAAM,GAEhCI,EAAS,IAAIC,WAEnBD,EAAOE,OAAS,WAGd,GAA6B,kBAAlBF,EAAO3V,OAAlB,CAKA,IAAM4pB,EAAM,IAAIU,GACVyH,EAAanI,EAAIoI,WAAWrc,EAAO3V,OAAOiB,QAAQ,KAAM,MAG9D,GAA0B,kBAAf8wB,EAAX,CAMA,IAAMymB,EJxFsB,SAAC5uB,EAAUpc,EAAiB1P,GAC5D,IAAMs4C,EAAWd,GAAqBx3C,GAChCm4C,EAAcG,EAASH,YAEvBwC,EAAkB9uB,GAAmBC,EAAK9rB,EAAUs4C,EAASL,iBAAkBK,EAASJ,iBAC9F,GAAwB,OAApByC,EACF,OAAOA,EAOT,IAJA,IAAMrpB,EAAqBhtB,GAAU,yBAA0BtE,GAEzDgS,EAA2B,GAExBhM,EAAI,EAAGA,EAAI8lB,EAAIW,KAAKxmB,SAAUD,EAAG,CAexC,IAbA,IAAMknB,EAAqBpB,EAAIW,KAAKzmB,GAEhC00B,EAAmB,GACnBr3B,EAAiB,EACjBgF,EAAe,GACfzJ,EAAmB,GACnBwQ,EAAmB,GACnB3M,EAAW,IACX4M,EAAsB,GACtB1M,EAAuB,UACvBkC,EAAyB,QACzBG,EAAyB,YAEpBqnB,EAAI,EAAGA,EAAIa,EAAIjnB,SAAUomB,EAAG,CACnC,IAAMkF,EAAYzF,EAAIG,WAAWI,GAC3BqB,EAAOR,EAAIb,GAIXoF,EAASvtB,GAAc8B,EAAI,EAAGhG,GAG9B0xB,EAAYJ,EACfnuB,QAAQ,aAAcouB,GACtBpuB,QAAQ,cAAeuqB,GACvBvqB,QAAQ,cAAesuB,GAE1B,GAAIF,IAAc4mB,EAAYlwC,KAAM,CAClC,GAAoB,KAAhBylB,EAAKpC,OACP,OAAOoG,EAAYptB,GAAU,oCAAqCtE,GAElE06B,EAAWhN,OAER,GAAI6D,IAAc4mB,EAAY90C,OAAQ,CAC3C,IAAMu3C,EAAc13C,OAAOwqB,GAC3B,GAAIxqB,OAAOuc,MAAMm7B,GACf,OAAOlpB,EAAYptB,GAAU,iCAAkCtE,GAC1D,GAAI46C,EAAc,EAEvB,OAAOlpB,EAAYptB,GAAU,2CAA4CtE,GAE3EqD,EAASu3C,OACJ,GAAIrpB,IAAc4mB,EAAY9vC,KACnCA,EAAOqlB,OACF,GAAI6D,IAAc4mB,EAAYv5C,SACnCA,EAAW8uB,OACN,GAAI6D,IAAc4mB,EAAY/oC,SAAU,CAC7C,IAAMyrC,EAASntB,EAAKpC,OACpB,GAAe,KAAXuvB,EACF,OAAOnpB,EAAYptB,GAAU,wCAAyCtE,GAEjE,IAAwC,IAApC0P,EAAKjH,UAAUkkB,QAAQkuB,IAA6B,gBAAXA,EAClD,OACEnpB,EACAptB,GAAU,wCAAyCtE,GAAUmD,QAC3D,cACAuM,EAAKjH,UAAU2jB,KAAK,OAIxBhd,EAAWse,OAER,GAAI6D,IAAc4mB,EAAY11C,IAAK,CACxC,IAAMovB,EAAmBpE,GAAYC,EAAM1tB,EAAU0xB,GACrD,GAAgC,OAA5BG,EAAiB3vB,OAGnB,OAAO2vB,EAAiBjE,aAFxBnrB,EAAMovB,EAAiB3vB,YAIpB,GAAIqvB,IAAc4mB,EAAYC,MACnC/oC,EAAcqe,OACT,GAAI6D,IAAc4mB,EAAYx1C,UAAW,CAC9C,IAAMkvB,EAAmB7D,GAAkBN,EAAM1tB,EAAU0xB,GAC3D,GAAgC,OAA5BG,EAAiB3vB,OAGnB,OAAO2vB,EAAiBjE,aAFxBjrB,EAAYkvB,EAAiB3vB,YAI1B,GAAIqvB,IAAc4mB,EAAYtzC,WAAY,CAC/C,IAAMgtB,EAAmBnD,GAAmBhB,EAAM1tB,EAAU0xB,GAC5D,GAAgC,OAA5BG,EAAiB3vB,OAGnB,OAAO2vB,EAAiBjE,aAFxB/oB,EAAagtB,EAAiB3vB,YAI3B,GAAIqvB,IAAc4mB,EAAYnzC,WAAY,CAC/C,IAAM6sB,EAAmBlD,GAAmBjB,EAAM1tB,EAAU0xB,GAC5D,GAAgC,OAA5BG,EAAiB3vB,OAGnB,OAAO2vB,EAAiBjE,aAFxB5oB,EAAa6sB,EAAiB3vB,QASpC8P,EAAQxD,KAAK,CACXksB,WACAr3B,SACAgF,OACAzJ,WACAwQ,WACA3M,MACA4M,cACA1M,YACAkC,aACAG,eAGJ,OAAOgN,EIrCkB8oC,CAAmBhvB,EAAKhL,EAAK5gB,MAAMwP,KAAMoR,EAAK5gB,MAAMF,UACzE,GAA4B,kBAAjB06C,EAAX,CAMA,IAAM1oC,EAA2B0oC,EACjC55B,EAAK5gB,MAAM66C,cAAc/oC,QANvB8O,EAAKrN,SAAS,CAAE1V,MAAO28C,SAPvB55B,EAAKrN,SAAS,CAAE1V,MAAOk2B,SATvBt1B,OAAO01B,MAAM,8DAyBjBxc,EAAOyc,YAAc,WACnBxT,EAAKrN,SAAS,CAAE8gB,gBAAgB,KAGlC1c,EAAO2c,UAAY,WACjB1T,EAAKrN,SAAS,CAAE8gB,gBAAgB,KAGlC1c,EAAOQ,WAAWX,GAGlBH,EAAWrW,MAAQ,qDAGI85C,GACvB,IAQIvxC,EAREiG,EAAOzP,KAAKC,MAAMwP,KAExB,GAAIsrC,GAAc5B,GAChB,OAAOn5C,KAAKg7C,yBAAyB,KAClC94C,OAAOlC,KAAKg7C,yBAAyB,MACrC94C,OAAOlC,KAAKg7C,yBAAyB,OAe1C,IAAIC,GAVFzxC,EADiB,MAAfuxC,EACQtrC,EAAKhH,mBACS,MAAfsyC,EACCtrC,EAAK/G,qBACS,OAAfqyC,EACCtrC,EAAK9G,kBAGL,IAGa+C,IAAI,SAACkU,GAAD,OAAOA,EAAE+K,aAKtC,OAHIswB,EAAWj1C,OAAS,IACtBi1C,EAAaA,EAAW/4C,OAAO,CAACsH,EAAQA,EAAQxD,OAAS,GAAK,OAEzDi1C,yDAIP,IAAKj7C,KAAKC,MAAMwP,KAAKzG,eACnB,OACElI,EAAAC,EAAAC,cAACk6C,GAAA,EAAD,CAAOjmC,QAAQ,UAAUL,MAAO,CAAEq7B,UAAW,SAC3CnvC,EAAAC,EAAAC,cAACqc,GAAA,EAAD,CAAiBzI,MAAO,CAAE2B,YAAa,OAAS+G,KAAM69B,OACtDr6C,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CACEpQ,GAAG,mCACHqQ,eAAe,oHAOhB,IAAAymC,EAAAp7C,KAgBDq7C,EAAwB7f,GAfN5vB,OAAO8B,QAAQ1N,KAAKC,MAAM+5C,eAAehrC,kBAC9DtD,IAAI,SAACwuC,GAAD,OAASA,EAAI,KACjBvsC,OAAOxL,GACPwL,OAAO,SAACuB,GACP,YACa9M,IAAX8M,IACCksC,EAAKx6C,MAAMy4C,iBAAmBF,IAAaiC,EAAKx6C,MAAMy4C,iBAAmBnqC,EAAOC,YAChFisC,EAAKx6C,MAAM04C,YAAcH,IAAaiC,EAAKx6C,MAAM04C,YAAcpqC,EAAO1M,OACtE44C,EAAKx6C,MAAM24C,oBAAsBJ,IAAaiC,EAAKx6C,MAAM24C,oBAAsBrqC,EAAOE,eACtFgsC,EAAKx6C,MAAM44C,kBAAoBL,IAAaiC,EAAKx6C,MAAM44C,kBAAoBtqC,EAAOxM,aAClF04C,EAAKx6C,MAAM64C,mBAAqBN,IAAaiC,EAAKx6C,MAAM64C,mBAAqBvqC,EAAOtK,cACpFw2C,EAAKx6C,MAAM84C,mBAAqBP,IAAaiC,EAAKx6C,MAAM84C,mBAAqBxqC,EAAOnK,cAIV/E,KAAKC,MAAMwP,MAAMoqC,QAChG,SAACyB,GAAD,OAASA,EAAIvpC,UAGf,OACEjR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACuY,GAAD,CACEzb,MAAOkC,KAAKY,MAAM9C,MAClBsY,MAAO/R,GAAU,2BAA4BrE,KAAKC,MAAMF,UACxDsV,KAA2B,KAArBrV,KAAKY,MAAM9C,MACjByX,MAAO,kBAAM6lC,EAAKhkC,qBAGnBpX,KAAKu7C,+BAENz6C,EAAAC,EAAAC,cAACw6C,GAAA,EAAD,CAAM5mC,MAAO,CAAE8B,aAAc,SAC3B5V,EAAAC,EAAAC,cAACw6C,GAAA,EAAKhmC,OAAN,KACE1U,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,kCAAkCqQ,eAAe,yBAExE7T,EAAAC,EAAAC,cAACw6C,GAAA,EAAK3lC,KAAN,KACE/U,EAAAC,EAAAC,cAACy6C,GAAA,EAAD,CAAQxmC,QAAQ,OAAOD,QAAS,kBAAMomC,EAAKjoB,mCACzCryB,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,wCAAwCqQ,eAAe,uBACpE,IACV7T,EAAAC,EAAAC,cAACy6C,GAAA,EAAD,CAAQxmC,QAAQ,SAASD,QAAS,kBAAMomC,EAAKM,qBAAqB9mC,MAAO,CAAEM,WAAY,SACpFlV,KAAKY,MAAM0zB,gBAAkBxzB,EAAAC,EAAAC,cAACqc,GAAA,EAAD,CAAiBzI,MAAO,CAAE2B,YAAa,OAAS+G,KAAMoX,KAAWC,MAAI,IACnG7zB,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,oCAAoCqQ,eAAe,gCAE1E7T,EAAAC,EAAAC,cAACy6C,GAAA,EAAD,CAAQxmC,QAAQ,UAAUD,QAAS,kBAAMomC,EAAK9nB,wBAAwB1e,MAAO,CAAEM,WAAY,SACzFpU,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,oCAAoCqQ,eAAe,mBAE1E7T,EAAAC,EAAAC,cAACy6C,GAAA,EAAD,CAAQxmC,QAAQ,UAAUD,QAAS,kBAAMomC,EAAKO,4BAA4B/mC,MAAO,CAAEM,WAAY,SAC7FpU,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,6BAA6BqQ,eAAe,qBAIvE7T,EAAAC,EAAAC,cAAA,SACEsD,GAAG,aACH3C,KAAK,OACLyY,OAAO,OACPxF,MAAO,CAAEE,QAAS,QAClBzT,SAAU,kBAAM+5C,EAAK/jC,yBAEvBvW,EAAAC,EAAAC,cAACw6C,GAAA,EAAD,CAAM5mC,MAAO,CAAE8B,aAAc,SAC3B5V,EAAAC,EAAAC,cAACw6C,GAAA,EAAKhmC,OAAN,KACE1U,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,wBAAwBqQ,eAAe,oBAE9D7T,EAAAC,EAAAC,cAACw6C,GAAA,EAAK3lC,KAAN,KACE/U,EAAAC,EAAAC,cAAC46C,GAAA,EAAD,KAEE96C,EAAAC,EAAAC,cAAC66C,GAAA,EAAD,CAAK7vC,GAAI,GACPlL,EAAAC,EAAAC,cAAC86C,GAAA,EAAK9gC,MAAN,KACEla,EAAAC,EAAAC,cAAC86C,GAAA,EAAKrnC,MAAN,KACE3T,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,0BAA0BqQ,eAAe,cAEhE7T,EAAAC,EAAAC,cAAC86C,GAAA,EAAK5gC,QAAN,CACEja,MAAOjB,KAAKY,MAAMy4C,eAClBj4C,GAAG,SACHC,SAAU,SAACK,GAAD,OAAiD05C,EAAKW,2BAA2Br6C,IAC3FH,UAAU,iBAEVT,EAAAC,EAAAC,cAAA,UAAQC,MAAOk4C,IAAY90C,GAAU,aAAcrE,KAAKC,MAAMF,WAC7DC,KAAKC,MAAMwP,KAAKjH,UAAUtG,OAAO,CAAC,gBAAgBwJ,IAAI,SAACyD,EAAUpJ,GAChE,OACEjF,EAAAC,EAAAC,cAAA,UAAQR,IAAKuF,EAAG9E,MAAOkO,GACpBA,QAQbrO,EAAAC,EAAAC,cAAC66C,GAAA,EAAD,CAAK7vC,GAAI,GACPlL,EAAAC,EAAAC,cAAC86C,GAAA,EAAK9gC,MAAN,KACEla,EAAAC,EAAAC,cAAC86C,GAAA,EAAKrnC,MAAN,KACE3T,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,yBAAyBqQ,eAAe,SAE/D7T,EAAAC,EAAAC,cAAC86C,GAAA,EAAK5gC,QAAN,CACEja,MAAOjB,KAAKY,MAAM04C,UAClBl4C,GAAG,SACHC,SAAU,SAACK,GAAD,OAAiD05C,EAAKY,sBAAsBt6C,IACtFH,UAAU,iBAEVT,EAAAC,EAAAC,cAAA,UAAQC,MAAOk4C,IAAY90C,GAAU,aAAcrE,KAAKC,MAAMF,WAC9De,EAAAC,EAAAC,cAAA,UAAQC,MAAM,KAAKoD,GAAU,QAASrE,KAAKC,MAAMF,WACjDe,EAAAC,EAAAC,cAAA,UAAQC,MAAM,KAAKoD,GAAU,QAASrE,KAAKC,MAAMF,WACjDe,EAAAC,EAAAC,cAAA,UAAQC,MAAM,MAAMoD,GAAU,SAAUrE,KAAKC,MAAMF,cAKzDe,EAAAC,EAAAC,cAAC66C,GAAA,EAAD,CAAK7vC,GAAI,GACPlL,EAAAC,EAAAC,cAAC86C,GAAA,EAAK9gC,MAAN,KACEla,EAAAC,EAAAC,cAAC86C,GAAA,EAAKrnC,MAAN,KACE3T,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,6BAA6BqQ,eAAe,WAEnE7T,EAAAC,EAAAC,cAAC86C,GAAA,EAAK5gC,QAAN,CACEja,MAAOjB,KAAKY,MAAM24C,kBAAkB5uB,WACpCvpB,GAAG,SACHC,SAAU,SAACK,GAAD,OACR05C,EAAKa,8BAA8Bv6C,IAErCH,UAAU,iBAEVT,EAAAC,EAAAC,cAAA,UAAQC,MAAOk4C,IAAY90C,GAAU,aAAcrE,KAAKC,MAAMF,WAC7DC,KAAKg7C,yBAAyBh7C,KAAKY,MAAM04C,WAAW5tC,IAAI,SAAC0D,EAAarJ,GACrE,OACEjF,EAAAC,EAAAC,cAAA,UAAQR,IAAKuF,EAAG9E,MAAOmO,GACpBA,QAQbtO,EAAAC,EAAAC,cAAC66C,GAAA,EAAD,CAAK7vC,GAAI,GACPlL,EAAAC,EAAAC,cAAC86C,GAAA,EAAK9gC,MAAN,KACEla,EAAAC,EAAAC,cAAC86C,GAAA,EAAKrnC,MAAN,KACE3T,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,+BAA+BqQ,eAAe,eAErE7T,EAAAC,EAAAC,cAAC86C,GAAA,EAAK5gC,QAAN,CACEja,MAAOjB,KAAKY,MAAM44C,gBAClBp4C,GAAG,SACHC,SAAU,SAACK,GAAD,OAAiD05C,EAAKc,4BAA4Bx6C,IAC5FH,UAAU,iBAEVT,EAAAC,EAAAC,cAAA,UAAQC,MAAOk4C,IAAY90C,GAAU,aAAcrE,KAAKC,MAAMF,WAC9De,EAAAC,EAAAC,cAAA,UAAQC,MAAM,QAAQoD,GAAU,iBAAkBrE,KAAKC,MAAMF,WAC7De,EAAAC,EAAAC,cAAA,UAAQC,MAAM,WAAWoD,GAAU,oBAAqBrE,KAAKC,MAAMF,WACnEe,EAAAC,EAAAC,cAAA,UAAQC,MAAM,SAASoD,GAAU,kBAAmBrE,KAAKC,MAAMF,WAC/De,EAAAC,EAAAC,cAAA,UAAQC,MAAM,cAAcoD,GAAU,uBAAwBrE,KAAKC,MAAMF,WACzEe,EAAAC,EAAAC,cAAA,UAAQC,MAAM,aAAaoD,GAAU,sBAAuBrE,KAAKC,MAAMF,WACvEe,EAAAC,EAAAC,cAAA,UAAQC,MAAM,aAAaoD,GAAU,sBAAuBrE,KAAKC,MAAMF,cAK7Ee,EAAAC,EAAAC,cAAC66C,GAAA,EAAD,CAAK7vC,GAAI,GACPlL,EAAAC,EAAAC,cAAC86C,GAAA,EAAK9gC,MAAN,KACEla,EAAAC,EAAAC,cAAC86C,GAAA,EAAKrnC,MAAN,KACE3T,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,qBAAqBqQ,eAAe,UAE3D7T,EAAAC,EAAAC,cAAC86C,GAAA,EAAK5gC,QAAN,CACEja,MAAOjB,KAAKY,MAAM64C,iBAClBr4C,GAAG,SACHC,SAAU,SAACK,GAAD,OAAiD05C,EAAKe,6BAA6Bz6C,IAC7FH,UAAU,iBAEVT,EAAAC,EAAAC,cAAA,UAAQC,MAAOk4C,IAAY90C,GAAU,aAAcrE,KAAKC,MAAMF,WAC9De,EAAAC,EAAAC,cAAA,UAAQC,MAAM,KAAKoD,GAAU,UAAWrE,KAAKC,MAAMF,WACnDe,EAAAC,EAAAC,cAAA,UAAQC,MAAM,KAAKoD,GAAU,UAAWrE,KAAKC,MAAMF,WACnDe,EAAAC,EAAAC,cAAA,UAAQC,MAAM,KAAKoD,GAAU,UAAWrE,KAAKC,MAAMF,WACnDe,EAAAC,EAAAC,cAAA,UAAQC,MAAM,SAASoD,GAAU,gBAAiBrE,KAAKC,MAAMF,cAKnEe,EAAAC,EAAAC,cAAC66C,GAAA,EAAD,CAAK7vC,GAAI,GACPlL,EAAAC,EAAAC,cAAC86C,GAAA,EAAK9gC,MAAN,KACEla,EAAAC,EAAAC,cAAC86C,GAAA,EAAKrnC,MAAN,KACE3T,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,4BAA4BqQ,eAAe,iBAElE7T,EAAAC,EAAAC,cAAC86C,GAAA,EAAK5gC,QAAN,CACEja,MAAOjB,KAAKY,MAAM84C,iBAClBt4C,GAAG,SACHC,SAAU,SAACK,GAAD,OAAiD05C,EAAKgB,6BAA6B16C,IAC7FH,UAAU,iBAEVT,EAAAC,EAAAC,cAAA,UAAQC,MAAOk4C,IAAY90C,GAAU,aAAcrE,KAAKC,MAAMF,WAC9De,EAAAC,EAAAC,cAAA,UAAQC,MAAM,aACXoD,GAAU,iCAAkCrE,KAAKC,MAAMF,WAE1De,EAAAC,EAAAC,cAAA,UAAQC,MAAM,cACXoD,GAAU,kCAAmCrE,KAAKC,MAAMF,eAOnEe,EAAAC,EAAAC,cAAC46C,GAAA,EAAD,KACE96C,EAAAC,EAAAC,cAACq7C,GAAA,EAAD,KACEv7C,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,iBACAF,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,wBAGJF,EAAAC,EAAAC,cAAA,aAAQq6C,EAAsB3vC,IAAI,SAACwD,EAAQiB,GAAT,OAAmBirC,EAAKkB,UAAUptC,EAAQiB,6CAShFjB,EAAuBiB,GAC/B,OACErP,EAAAC,EAAAC,cAAA,MAAIR,IAAK2P,GACPrP,EAAAC,EAAAC,cAAA,UAAKkO,EAAOC,UACZrO,EAAAC,EAAAC,cAAA,UAAKqE,GAAY6J,EAAO1M,IAAKxC,KAAKC,MAAMF,WACxCe,EAAAC,EAAAC,cAAA,UAAKuE,GAAuB2J,EAAOE,YAAapP,KAAKC,MAAMF,WAC3De,EAAAC,EAAAC,cAAA,UAAKuD,GAAkB2K,EAAOxM,UAAW1C,KAAKC,MAAMF,WACpDe,EAAAC,EAAAC,cAAA,UAAK2D,GAAmBuK,EAAOtK,WAAY5E,KAAKC,MAAMF,WACtDe,EAAAC,EAAAC,cAAA,UAAK8D,GAAmBoK,EAAOnK,WAAY/E,KAAKC,MAAMF,WACtDe,EAAAC,EAAAC,cAAA,UAAKkO,EAAOurB,UACZ35B,EAAAC,EAAAC,cAAA,UAAKiD,GAAciL,EAAO9L,OAAQpD,KAAKC,MAAMF,WAC7Ce,EAAAC,EAAAC,cAAA,UAAKkO,EAAO9G,MACZtH,EAAAC,EAAAC,cAAA,UAAKkO,EAAOvQ,kBArbM+B,IAAMc,WAwcjBb,eAbS,SAACC,GAAD,MAAqC,CAC3D6O,KAAM7O,EAAM6O,KACZuqC,eAAgB3f,GAAsBz5B,EAAMmR,QAASnR,EAAM6O,KAAM7O,EAAM6P,aAAc7P,EAAMb,UAC3F0Q,aAAc7P,EAAM6P,aACpB1Q,SAAUa,EAAMb,WAGS,SAAC0B,GAC1B,MAAO,CACLq5C,cAAe,SAAC/oC,GAAD,OAAatQ,EGlgBzB,SAAuBsQ,GAC5B,MAAO,CACLpQ,KAAM,iBACNoQ,WH+fqC+oC,CAAc/oC,OAIxCpR,CAA6Cy4C,II3f7CmD,GARU,WACvB,OACEz7C,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACw7C,GAAD,QCiDSC,oLA7BX,GAAsC,kBAA3B/9C,OAAOC,SAAS+9C,OACzB,OAAO57C,EAAAC,EAAAC,cAAC27C,GAAD,MAGT,OAAQj+C,OAAOC,SAAS+9C,QACtB,IAAK,cACH,OAAO57C,EAAAC,EAAAC,cAAC47C,GAAD,MACT,IAAK,gBACH,OAAO97C,EAAAC,EAAAC,cAAC67C,GAAD,MACT,IAAK,aACH,OAAO/7C,EAAAC,EAAAC,cAAC87C,GAAD,MACT,IAAK,gBACH,OAAOh8C,EAAAC,EAAAC,cAAC+7C,GAAD,MACT,IAAK,WACH,OAAOj8C,EAAAC,EAAAC,cAACg8C,GAAD,MACT,IAAK,WACH,OAAOl8C,EAAAC,EAAAC,cAACi8C,GAAD,MACT,IAAK,SACH,OAAOn8C,EAAAC,EAAAC,cAACk8C,GAAD,MACT,IAAK,SACH,OAAOp8C,EAAAC,EAAAC,cAACm8C,GAAD,MACT,IAAK,WACH,OAAOr8C,EAAAC,EAAAC,cAACo8C,GAAD,MACT,QACE,OAAOt8C,EAAAC,EAAAC,cAAC27C,GAAD,cA1Baj8C,IAAMc,oDCiDnB67C,GA/DI,WACjB,OACEv8C,EAAAC,EAAAC,cAACs8C,GAAAv8C,EAAD,CAAQw8C,OAAO,MAAMC,GAAG,OAAOvoC,QAAQ,OAAOwoC,OAAO,MACnD38C,EAAAC,EAAAC,cAACs8C,GAAAv8C,EAAO28C,MAAR,KACE58C,EAAAC,EAAAC,cAAA,OAAKwY,IAAI,aAAaC,IAAI,uBAAuBi9B,OAAO,QAK1D51C,EAAAC,EAAAC,cAACs8C,GAAAv8C,EAAO48C,OAAR,CAAeC,gBAAc,qBAC7B98C,EAAAC,EAAAC,cAACs8C,GAAAv8C,EAAO88C,SAAR,KACE/8C,EAAAC,EAAAC,cAAC88C,GAAA/8C,EAAD,KACED,EAAAC,EAAAC,cAAC+U,EAAA,cAAD,CAAegoC,OAAK,EAAC/nC,GAAG,KACtBlV,EAAAC,EAAAC,cAAC88C,GAAA/8C,EAAIi9C,KAAL,KACEl9C,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,WAAWqQ,eAAe,WAGnD7T,EAAAC,EAAAC,cAAC+U,EAAA,cAAD,CAAeC,GAAG,eAChBlV,EAAAC,EAAAC,cAAC88C,GAAA/8C,EAAIi9C,KAAL,KACEl9C,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,iBAAiBqQ,eAAe,iBAGzD7T,EAAAC,EAAAC,cAAC+U,EAAA,cAAD,CAAeC,GAAG,YAChBlV,EAAAC,EAAAC,cAAC88C,GAAA/8C,EAAIi9C,KAAL,KACEl9C,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,cAAcqQ,eAAe,cAGtD7T,EAAAC,EAAAC,cAAC+U,EAAA,cAAD,CAAeC,GAAG,iBAChBlV,EAAAC,EAAAC,cAAC88C,GAAA/8C,EAAIi9C,KAAL,KACEl9C,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,mBAAmBqQ,eAAe,mBAG3D7T,EAAAC,EAAAC,cAAC+U,EAAA,cAAD,CAAeC,GAAG,cAChBlV,EAAAC,EAAAC,cAAC88C,GAAA/8C,EAAIi9C,KAAL,KACEl9C,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,gBAAgBqQ,eAAe,gBAGxD7T,EAAAC,EAAAC,cAAC+U,EAAA,cAAD,CAAeC,GAAG,iBAChBlV,EAAAC,EAAAC,cAAC88C,GAAA/8C,EAAIi9C,KAAL,KACEl9C,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,mBAAmBqQ,eAAe,mBAG3D7T,EAAAC,EAAAC,cAAC+U,EAAA,cAAD,CAAeC,GAAG,YAChBlV,EAAAC,EAAAC,cAAC88C,GAAA/8C,EAAIi9C,KAAL,KACEl9C,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,cAAcqQ,eAAe,cAGtD7T,EAAAC,EAAAC,cAAC+U,EAAA,cAAD,CAAeC,GAAG,YAChBlV,EAAAC,EAAAC,cAAC88C,GAAA/8C,EAAIi9C,KAAL,KACEl9C,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,cAAcqQ,eAAe,cAGtD7T,EAAAC,EAAAC,cAAC+U,EAAA,cAAD,CAAeC,GAAG,UAChBlV,EAAAC,EAAAC,cAAC88C,GAAA/8C,EAAIi9C,KAAL,KACEl9C,EAAAC,EAAAC,cAAC0T,EAAA,EAAD,CAAkBpQ,GAAG,YAAYqQ,eAAe,mECxDxDspC,GAAgB,CACpBz9C,IAAK,OACL09C,cAGIC,GAAmBC,aAAeH,GAAe/nC,QC+CxCmoC,oLAtCJ,IAAAC,EDPI,WAAiE,IAAzCr4C,EAAyCsJ,UAAAvJ,OAAA,QAAA5D,IAAAmN,UAAA,GAAAA,UAAA,GAAJ,GACpEzN,EAAQy8C,uBAAYJ,GAAkBl4C,EAAcu4C,+BAAoBC,2BAAgBC,QAE9F,MAAO,CAAE58C,QAAO68C,UADEC,aAAa98C,ICMA+8C,CAAe,CAAE9+C,SAAU6F,OAAhD9D,EADDw8C,EACCx8C,MAAO68C,EADRL,EACQK,UAEf,OAQE79C,EAAAC,EAAAC,cAAC7B,EAAA,EAAD,CAAU2C,MAAOA,GACfhB,EAAAC,EAAAC,cAAC89C,EAAA,EAAD,CAAa7mB,QAAS,KAAM0mB,UAAWA,GACrC79C,EAAAC,EAAAC,cAAC+9C,EAAD,KACEj+C,EAAAC,EAAAC,cAACg+C,EAAA,cAAD,CAAQC,SAAU74C,qBAChBtF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACk+C,GAAD,MACAp+C,EAAAC,EAAAC,cAACm+C,EAAA,EAAD,KACEr+C,EAAAC,EAAAC,cAACm+C,EAAA,EAAD,CAAOpB,OAAK,EAACqB,KAAK,IAAIC,UAAW5C,KACjC37C,EAAAC,EAAAC,cAACm+C,EAAA,EAAD,CAAOC,KAAK,cAAcC,UAAWt4B,KACrCjmB,EAAAC,EAAAC,cAACm+C,EAAA,EAAD,CAAOC,KAAK,gBAAgBC,UAAW/pB,KACvCx0B,EAAAC,EAAAC,cAACm+C,EAAA,EAAD,CAAOC,KAAK,aAAaC,UAAW/nB,KACpCx2B,EAAAC,EAAAC,cAACm+C,EAAA,EAAD,CAAOC,KAAK,gBAAgBC,UAAWnQ,KACvCpuC,EAAAC,EAAAC,cAACm+C,EAAA,EAAD,CAAOC,KAAK,WAAWC,UAAW1R,KAClC7sC,EAAAC,EAAAC,cAACm+C,EAAA,EAAD,CAAOC,KAAK,WAAWC,UAAW5K,KAClC3zC,EAAAC,EAAAC,cAACm+C,EAAA,EAAD,CAAOC,KAAK,SAASC,UAAWjI,KAChCt2C,EAAAC,EAAAC,cAACm+C,EAAA,EAAD,CAAOC,KAAK,SAASC,UAAW/H,KAChCx2C,EAAAC,EAAAC,cAACm+C,EAAA,EAAD,CAAOC,KAAK,WAAWC,UAAW9C,kBA5BlC77C,IAAMc,WCdlB89C,kBAAcxoC,SAASC,eAAe,SACxB,OAAhBuoC,IACFC,IAASC,OAAO1+C,EAAAC,EAAAC,cAACy+C,GAAD,MAASH,InH+GrB,kBAAmBz5C,WACrBA,UAAU65C,cAAcC,MAAMC,KAAK,SAACnvC,GAClCA,EAAaovC,mCoH7InB3kD,EAAAC,QAAA,CAAkBke,YAAA,sDCAlBne,EAAAC,QAAA,CAAkBiB,UAAA,4BAAAsmC,WAAA,6BAAAL,WAAA,6BAAAqB,YAAA,8BAAAC,gBAAA,kCAAAF,kBAAA,oCAAAG,cAAA,gCAAAC,kBAAA,oCAAArB,QAAA,0BAAAF,SAAA,2BAAA1mC,KAAA,4CCAlBV,EAAAC,QAAA,CAAkBqxC,OAAA,8BAAAC,aAAA,oCAAAE,cAAA,qCAAAE,WAAA,kCAAAE,SAAA,gCAAAD,OAAA,8BAAAJ,SAAA","file":"static/js/main.2b69b2e9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"liftingView\":\"LiftingView_liftingView__W3VXA\",\"middleParentContainer\":\"LiftingView_middleParentContainer__1ysAw\",\"leftCardContainer\":\"LiftingView_leftCardContainer__2banw\",\"rightCardContainer\":\"LiftingView_rightCardContainer__1sjfd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"swatch\":\"ColorPicker_swatch__2ipyO\",\"color\":\"ColorPicker_color__cXLvH\",\"onTop\":\"ColorPicker_onTop__1HUyz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"LiftingHeader_header__3YEwh\",\"logo\":\"LiftingHeader_logo__3Urj5\",\"lifterName\":\"LiftingHeader_lifterName__2Vzfo\",\"info\":\"LiftingHeader_info__3mt5G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"controlPanel\":\"ResultsView_controlPanel__J3R0v\",\"dropdown\":\"ResultsView_dropdown__2UB4b\"};","module.exports = __webpack_public_path__ + \"static/media/gpc-nz-horizontal.43d6ff36.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"leftDivider\":\"OneFlightOrder_leftDivider__8pDMh\"};","module.exports = __webpack_public_path__ + \"static/media/gpc-nz-square.a0a4f760.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BarLoad_container__2ae8O\",\"rackInfo\":\"BarLoad_rackInfo__2RVUT\",\"bar\":\"BarLoad_bar__TP6yB\",\"kg50\":\"BarLoad_kg50__i7LXH\",\"kg25\":\"BarLoad_kg25__nlLuS\",\"kg20\":\"BarLoad_kg20__3xVPK\",\"kg15\":\"BarLoad_kg15__nFGDt\",\"kg10\":\"BarLoad_kg10__2mAso\",\"kg5\":\"BarLoad_kg5__2H1CX\",\"kg2p5\":\"BarLoad_kg2p5__hc46t\",\"kg1p25\":\"BarLoad_kg1p25__2YvAd\",\"kg1\":\"BarLoad_kg1__3JT5m\",\"kg0p75\":\"BarLoad_kg0p75__3ebq8\",\"kg0p5\":\"BarLoad_kg0p5__3ehD9\",\"kg0p25\":\"BarLoad_kg0p25__1nUX-\",\"lbs100\":\"BarLoad_lbs100__VaSr7\",\"lbs55\":\"BarLoad_lbs55__TustM\",\"lbs45\":\"BarLoad_lbs45__DubJx\",\"lbs35\":\"BarLoad_lbs35__37o3u\",\"lbs25\":\"BarLoad_lbs25__35m-j\",\"lbs10\":\"BarLoad_lbs10__162Qu\",\"lbs5\":\"BarLoad_lbs5__3B-J3\",\"lbs2p5\":\"BarLoad_lbs2p5__lnKdM\",\"lbs1p25\":\"BarLoad_lbs1p25__1yMbs\",\"lbs0p5\":\"BarLoad_lbs0p5__1LZiS\",\"collar\":\"BarLoad_collar__3IXT7\",\"error\":\"BarLoad_error__1t6Re\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"liftingtable\":\"LiftingTable_liftingtable__2-Rse\",\"textCell\":\"LiftingTable_textCell__gOmZ-\",\"smallCell\":\"LiftingTable_smallCell__vwNWg\",\"spacerCell\":\"LiftingTable_spacerCell__3EnYx\",\"activeColumn\":\"LiftingTable_activeColumn__WQ704\",\"attemptInputCell\":\"LiftingTable_attemptInputCell__1YoPG\",\"current\":\"LiftingTable_current__1v05Z\",\"goodlift\":\"LiftingTable_goodlift__1v8vY\",\"nolift\":\"LiftingTable_nolift__GDNkx\",\"attemptInput\":\"LiftingTable_attemptInput__tuKcd\"};","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\"No internet connection found. App is running in offline mode.\");\n    });\n}\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit http://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2020 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport de from \"./de.json\";\nimport el from \"./el.json\";\nimport eo from \"./eo.json\";\nimport en from \"./en.json\";\nimport es from \"./es.json\";\nimport fr from \"./fr.json\";\nimport hr from \"./hr.json\";\nimport it from \"./it.json\";\nimport lt from \"./lt.json\";\nimport nl from \"./nl.json\";\nimport pt from \"./pt.json\";\nimport ru from \"./ru.json\";\nimport tr from \"./tr.json\";\nimport uk from \"./uk.json\";\nimport zh_Hans from \"./zh-Hans.json\";\n\nexport default { de, el, eo, en, es, fr, hr, it, lt, nl, pt, ru, tr, uk, \"zh-Hans\": zh_Hans };\n","// vim: set ts=2 sts=2 sw=2 et:\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport * as React from \"react\";\nimport { connect } from \"react-redux\";\nimport { IntlProvider } from \"react-intl\";\nimport translations from \"../../translations\";\n\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { Language } from \"../../types/dataTypes\";\n\ninterface StateProps {\n  language: Language;\n}\n\ntype Props = StateProps;\n\nclass OpenLifterIntlProvider extends React.Component<Props> {\n  render() {\n    const language = this.props.language;\n    if (typeof language !== \"string\") {\n      throw new Error(\"language is not a string\");\n    }\n\n    // Load our translations from the json files\n    // TODO: This typing could be nicer, we should be able to state that es/eo = {}, en = undefined\n    const messages = (translations as any)[language];\n\n    return (\n      // This is going to wrap any children passed to this component with an IntlProvider\n      // This will put translations of all of our child components in our app\n      <IntlProvider locale={language} defaultLocale=\"en\" key={language} messages={messages}>\n        {this.props.children}\n      </IntlProvider>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  language: state.language,\n});\n\nexport default connect(mapStateToProps)(OpenLifterIntlProvider);\n","// vim: set ts=2 sts=2 sw=2 et:\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport FormControl from \"react-bootstrap/FormControl\";\n\nimport { changeLanguage } from \"../../actions/languageActions\";\nimport { Language } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\n\nimport { Dispatch } from \"redux\";\nimport { FormControlTypeHack } from \"../../types/utils\";\n\ninterface StateProps {\n  language: Language;\n}\n\ninterface DispatchProps {\n  changeLanguage: (event: React.FormEvent<FormControlTypeHack>) => any;\n}\n\ntype Props = StateProps & DispatchProps;\n\n// TODO: Can we get these from the i18n lib somehow?\nconst languageOptions = [\n  <option key=\"de\" value=\"de\">\n    Deutsch (de)\n  </option>,\n  <option key=\"el\" value=\"el\">\n     (el)\n  </option>,\n  <option key=\"en\" value=\"en\">\n    English (en)\n  </option>,\n  <option key=\"eo\" value=\"eo\">\n    Esperanto (eo)\n  </option>,\n  <option key=\"es\" value=\"es\">\n    Espaol (es)\n  </option>,\n  <option key=\"fr\" value=\"fr\">\n    Franais (fr)\n  </option>,\n  <option key=\"hr\" value=\"hr\">\n    Hrvatski (hr)\n  </option>,\n  <option key=\"it\" value=\"it\">\n    Italiano (it)\n  </option>,\n  <option key=\"lt\" value=\"lt\">\n    Lietuvi (lt)\n  </option>,\n  <option key=\"nl\" value=\"nl\">\n    Nederlands (nl)\n  </option>,\n  <option key=\"pt\" value=\"pt\">\n    Portugus (pt)\n  </option>,\n  <option key=\"ru\" value=\"ru\">\n     (ru)\n  </option>,\n  <option key=\"tr\" value=\"tr\">\n    Trke (tr)\n  </option>,\n  <option key=\"uk\" value=\"uk\">\n     (uk)\n  </option>,\n  <option key=\"zh-Hans\" value=\"zh-Hans\">\n     (zh-Hans)\n  </option>,\n];\n\nclass LanguageSelector extends React.Component<Props> {\n  render() {\n    return (\n      <FormControl\n        as=\"select\"\n        value={this.props.language}\n        onChange={this.props.changeLanguage}\n        className=\"custom-select\"\n      >\n        {languageOptions}\n      </FormControl>\n    );\n  }\n}\n\n// Allows react component to subscribe to redux state updates\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  language: state.language,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    // TODO: Can we make this more type safe and avoid the cast?\n    changeLanguage: (event: React.FormEvent<FormControlTypeHack>) =>\n      dispatch(changeLanguage(event.currentTarget.value as Language)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LanguageSelector);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { ChangeLanguageAction } from \"../types/actionTypes\";\nimport { Language } from \"../types/dataTypes\";\n\nexport const changeLanguage = (language: Language): ChangeLanguageAction => {\n  return {\n    type: \"CHANGE_LANGUAGE\",\n    language,\n  };\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { OverwriteStoreAction } from \"../types/actionTypes\";\nimport { GlobalState } from \"../types/stateTypes\";\n\n// Overwrites the entire Redux store, handled separately by each reducer.\n// This is used to implement \"Load from File\" functionality.\nexport const overwriteStore = (store: GlobalState): OverwriteStoreAction => {\n  return {\n    type: \"OVERWRITE_STORE\",\n    store: store,\n  };\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines all the project-wide shared Redux state types in a single place.\n//\n// Because the Redux store is immutable, all types are internally prefixed\n// with the \"readonly \" covariant type, which makes them immutable.\n\nimport { FormControl, FormControlProps } from \"react-bootstrap\";\nimport { AgeCoefficients, Flight, Formula, Lift, Sex, Equipment, Event, RecordLift, RecordType } from \"./dataTypes\";\n\n// This is purely used by the type system to raise a compile error when\n// we are trying to perform an exhaustive check (eg in a switch).\n// This allows us to have a compile time error, but also have graceful runtime fallback.\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function checkExhausted(value: never): void {}\n\n// A workaround for bad typing of react-bootstrap. Open to better suggestions.\n// see: https://github.com/DefinitelyTyped/DefinitelyTyped/issues/16208 for more context\nexport type FormControlTypeHack = FormControlProps & FormControl & HTMLOrSVGElement;\n\n// Convenience function to narrow a variables type down to a string\nexport function isString(value: any): value is string {\n  return typeof value === \"string\";\n}\n\n// Throws an error if value isn't a string, narrows the type if it is.\nexport function assertString(value: any): value is string {\n  const result = isString(value);\n  if (!result) {\n    throw new Error(`Expected a string, but got ${value}`);\n  }\n  return result;\n}\n\n// Throws an error if value isn't a number, narrows the type if it is.\nexport function assertNumber(value: any): value is number {\n  const result = typeof value === \"number\";\n  if (!result) {\n    throw new Error(`Expected a number, but got ${value}`);\n  }\n  return result;\n}\n\n// Useful for checking for undefined & convincing the compiler that it can safely narrow the type\nexport function isNotUndefined<T>(value: T | undefined): value is T {\n  return value !== undefined;\n}\n\n// Throws an error if value isn't a a valid flight, narrows the type if it is.\nexport function assertFlight(value: string): value is Flight {\n  const flight: Flight = value as Flight;\n  switch (flight) {\n    case \"A\":\n    case \"B\":\n    case \"C\":\n    case \"D\":\n    case \"E\":\n    case \"F\":\n    case \"G\":\n    case \"H\":\n    case \"I\":\n    case \"J\":\n    case \"K\":\n    case \"L\":\n    case \"M\":\n    case \"N\":\n    case \"O\":\n    case \"P\":\n      return true;\n    default:\n      checkExhausted(flight);\n      throw new Error(`Expected a string which corresponds to a Flight, got \"${value}\"`);\n  }\n}\n\n// Throws an error if value isn't a a valid flight, narrows the type if it is.\nexport function assertSex(value: string): value is Sex {\n  const sex = value as Sex;\n  switch (sex) {\n    case \"M\":\n    case \"F\":\n    case \"Mx\":\n      return true;\n    default:\n      checkExhausted(sex);\n      throw new Error(`Expected a string which corresponds to a Sex, got \"${value}\"`);\n  }\n}\n\nexport function assertLift(value: string): value is Lift {\n  const lift = value as Lift;\n  switch (lift) {\n    case \"S\":\n    case \"B\":\n    case \"D\":\n      return true;\n    default:\n      checkExhausted(lift);\n      throw new Error(`Expected a string which corresponds to a Lift, got \"${value}\"`);\n  }\n}\n\nexport function assertAgeCoefficients(value: string): value is AgeCoefficients {\n  const coefficient = value as AgeCoefficients;\n  switch (coefficient) {\n    case \"FosterMcCulloch\":\n    case \"None\":\n      return true;\n    default:\n      checkExhausted(coefficient);\n      throw new Error(`Expected a string which corresponds to a valid AgeCoefficients, got \"${value}\"`);\n  }\n}\n\nexport function assertEvent(value: string): value is Event {\n  const event = value as Event;\n  switch (event) {\n    case \"S\":\n    case \"B\":\n    case \"D\":\n    case \"SB\":\n    case \"SD\":\n    case \"BD\":\n    case \"SBD\":\n      return true;\n    default:\n      checkExhausted(event);\n      throw new Error(`Expected a string which corresponds to a valid Event, got \"${value}\"`);\n  }\n}\n\nexport function assertRecordType(value: string): value is RecordType {\n  const recordType = value as RecordType;\n  switch (recordType) {\n    case \"FullPower\":\n    case \"SingleLift\":\n      return true;\n    default:\n      checkExhausted(recordType);\n      throw new Error(`Expected a string which corresponds to a valid RecordType, got \"${value}\"`);\n  }\n}\n\nexport function assertRecordLift(value: string): value is RecordLift {\n  const recordLift = value as RecordLift;\n  switch (recordLift) {\n    case \"S\":\n    case \"B\":\n    case \"D\":\n    case \"Total\":\n      return true;\n    default:\n      checkExhausted(recordLift);\n      throw new Error(`Expected a string which corresponds to a valid RecordLift, got \"${value}\"`);\n  }\n}\n\nexport function assertEquipment(value: string): value is Equipment {\n  const equipment = value as Equipment;\n  switch (equipment) {\n    case \"Bare\":\n    case \"Sleeves\":\n    case \"Wraps\":\n    case \"Single-ply\":\n    case \"Multi-ply\":\n    case \"Unlimited\":\n      return true;\n    default:\n      checkExhausted(equipment);\n      throw new Error(`Expected a string which corresponds to a valid Equipment, got \"${value}\"`);\n  }\n}\n\nexport function assertFormula(value: string): value is Formula {\n  const formula = value as Formula;\n  switch (formula) {\n    case \"AH\":\n    case \"Bodyweight Multiple\":\n    case \"Dots\":\n    case \"Glossbrenner\":\n    case \"IPF GL Points\":\n    case \"IPF Points\":\n    case \"NASA Points\":\n    case \"Reshel\":\n    case \"Schwartz/Malone\":\n    case \"Total\":\n    case \"Wilks\":\n    case \"Wilks2020\":\n      return true;\n    default:\n      checkExhausted(formula);\n      throw new Error(`Expected a string which corresponds to a Formula, got \"${value}\"`);\n  }\n}\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { Entry, Language } from \"../types/dataTypes\";\n\n// Defines operations for converting between different units, usually\n// pounds and kg.\n\nexport const kg2lbs = (kg: number): number => {\n  return kg * 2.20462262;\n};\n\nexport const lbs2kg = (lbs: number): number => {\n  return lbs / 2.20462262;\n};\n\n// Converts a displayed String to a Number, even if that string is localized.\nexport const string2number = (s: string): number => {\n  return Number(s.replace(\",\", \".\"));\n};\n\n// Renders a weight (kg or lbs) for display, rounding to two decimal places,\n// hiding unnecessary zeros on the right.\n//\n// This rounding behavior eliminates all the visual inconsistencies of lbs->kg\n// conversion -- for example, how 112.5lbs isn't representable exactly in kg.\nexport const displayWeight = (weight: number, lang?: Language): string => {\n  const locale = lang === undefined ? \"en\" : lang;\n\n  // This matches the OpenPowerlifting WeightKg::as_lbs() conversion logic.\n  // First, round to the hundredth place, stored as an integer.\n  let rounded = Math.round(weight * 100);\n\n  // If the fractional part is close to another tenth, add a correction.\n  // This happens due to floating-point imprecision.\n  if (rounded % 10 === 9) {\n    // Add 0.01 (still stored as an integer).\n    rounded += 1;\n  }\n\n  // Convert back to normal floating-point without truncation.\n  rounded = rounded / 100;\n\n  return new Intl.NumberFormat(locale, { useGrouping: false, maximumFractionDigits: 2 }).format(rounded);\n};\n\n// Renders a weight (kg or lbs) for display, truncating to one decimal place.\n// hiding unnecessary zeros on the right.\nexport const displayWeightOnePlace = (weight: number, lang?: Language): string => {\n  const locale = lang === undefined ? \"en\" : lang;\n\n  // This matches the OpenPowerlifting WeightKg::as_lbs() conversion logic.\n  // First, round to the hundredth place, stored as an integer.\n  let rounded = Math.round(weight * 100);\n\n  // If the fractional part is close to another tenth, add a correction.\n  // This happens due to floating-point imprecision.\n  if (rounded % 10 === 9) {\n    // Add 0.01 (still stored as an integer).\n    rounded += 1;\n  }\n\n  // Truncate to the tenth place, then convert back to normal floating-point.\n  const truncated = Math.trunc(rounded / 10) / 10;\n\n  return new Intl.NumberFormat(locale, { useGrouping: false, maximumFractionDigits: 1 }).format(truncated);\n};\n\n// Points display with two fixed decimal places (including zeros).\nexport const displayPoints = (points: number, lang: Language): string => {\n  return new Intl.NumberFormat(lang, {\n    useGrouping: false,\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  }).format(points);\n};\n\n// Display a generic number that is neither a weight nor points.\n// This is intended for things like ages, day numbers, etc.\nexport const displayNumber = (number: number, lang: Language): string => {\n  // Grouping should not be used: otherwise ',' is ambiguous as a separator.\n  return new Intl.NumberFormat(lang, { useGrouping: false }).format(number);\n};\n\n// Display an ordinal number representing a place.\n// In Spanish, Portuguese, and Italian, the ordinal differs based on the lifter's Sex.\nexport const displayPlaceOrdinal = (number: number, entry: Entry, lang: Language): string => {\n  switch (lang) {\n    case \"es\":\n    case \"pt\":\n      return displayNumber(number, lang) + (entry.sex === \"F\" ? \"\" : \"\");\n    default:\n      return displayNumber(number, lang);\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Gets translation strings directly given the current language, without\n// having to thread the IntlContext everywhere.\n//\n// This works because we store the language in the Redux store in addition\n// to in the React context.\n\nimport translations from \"../translations\";\nimport { Equipment, Event, Flight, Language, Sex, TranslationId, RecordLift, RecordType } from \"../types/dataTypes\";\nimport { checkExhausted } from \"../types/utils\";\nimport { displayWeight } from \"./units\";\n\n// Fetches a simple string from the translations store. No formatting is performed.\nexport const getString = (id: TranslationId, lang: Language): string => {\n  return translations[lang][id];\n};\n\n// Localizes an Equipment value.\nexport const localizeEquipment = (equipment: Equipment, language: Language): string => {\n  switch (equipment) {\n    case \"Bare\":\n      return getString(\"equipment.bare\", language);\n    case \"Sleeves\":\n      return getString(\"equipment.sleeves\", language);\n    case \"Wraps\":\n      return getString(\"equipment.wraps\", language);\n    case \"Single-ply\":\n      return getString(\"equipment.single-ply\", language);\n    case \"Multi-ply\":\n      return getString(\"equipment.multi-ply\", language);\n    case \"Unlimited\":\n      return getString(\"equipment.unlimited\", language);\n    default:\n      checkExhausted(equipment);\n      return \"\";\n  }\n};\n\n// Delocalizes an Equipment value.\nexport const delocalizeEquipment = (text: string, language: Language): Equipment => {\n  if (text === getString(\"equipment.bare\", language)) return \"Bare\";\n  if (text === getString(\"equipment.sleeves\", language)) return \"Sleeves\";\n  if (text === getString(\"equipment.wraps\", language)) return \"Wraps\";\n  if (text === getString(\"equipment.single-ply\", language)) return \"Single-ply\";\n  if (text === getString(\"equipment.multi-ply\", language)) return \"Multi-ply\";\n  if (text === getString(\"equipment.unlimited\", language)) return \"Unlimited\";\n  throw new Error(\"Failed to delocalize Equipment: \" + text);\n};\n\n// Localizes an Event value.\nexport const localizeEvent = (event: Event, language: Language): string => {\n  switch (event) {\n    case \"S\":\n      return getString(\"event.s\", language);\n    case \"B\":\n      return getString(\"event.b\", language);\n    case \"D\":\n      return getString(\"event.d\", language);\n    case \"SB\":\n      return getString(\"event.sb\", language);\n    case \"SD\":\n      return getString(\"event.sd\", language);\n    case \"BD\":\n      return getString(\"event.bd\", language);\n    case \"SBD\":\n      return getString(\"event.sbd\", language);\n    default:\n      checkExhausted(event);\n      return \"\";\n  }\n};\n\nexport const localizeRecordLift = (recordLift: RecordLift, language: Language): string => {\n  switch (recordLift) {\n    case \"S\":\n      return getString(\"event.s\", language);\n    case \"B\":\n      return getString(\"event.b\", language);\n    case \"D\":\n      return getString(\"event.d\", language);\n    case \"Total\":\n      return getString(\"records.total\", language);\n    default:\n      checkExhausted(recordLift);\n      return \"\";\n  }\n};\n\nexport const delocalizeRecordLift = (text: string, language: Language): RecordLift => {\n  if (text === getString(\"event.s\", language)) return \"S\";\n  if (text === getString(\"event.b\", language)) return \"B\";\n  if (text === getString(\"event.d\", language)) return \"D\";\n  if (text === getString(\"records.total\", language)) return \"Total\";\n  throw new Error(`Failed to delocalise RecordLift ${text}`);\n};\n\nexport const localizeRecordType = (recordType: RecordType, language: Language): string => {\n  switch (recordType) {\n    case \"FullPower\":\n      return getString(\"records.record-type.full-power\", language);\n    case \"SingleLift\":\n      return getString(\"records.record-type.single-lift\", language);\n    default:\n      checkExhausted(recordType);\n      return \"\";\n  }\n};\n\nexport const delocaliseRecordType = (text: string, language: Language): RecordType => {\n  if (text === getString(\"records.record-type.full-power\", language)) return \"FullPower\";\n  if (text === getString(\"records.record-type.single-lift\", language)) return \"SingleLift\";\n  throw new Error(`Failed to delocalise RecordType ${text}`);\n};\n\n// Delocalizes an Event value.\nexport const delocalizeEvent = (text: string, language: Language): Event => {\n  if (text === getString(\"event.s\", language)) return \"S\";\n  if (text === getString(\"event.b\", language)) return \"B\";\n  if (text === getString(\"event.d\", language)) return \"D\";\n  if (text === getString(\"event.sb\", language)) return \"SB\";\n  if (text === getString(\"event.sd\", language)) return \"SD\";\n  if (text === getString(\"event.bd\", language)) return \"BD\";\n  if (text === getString(\"event.sbd\", language)) return \"SBD\";\n  throw new Error(\"Failed to delocalize Event: \" + text);\n};\n\n// Localizes a Flight value.\nexport const localizeFlight = (flight: Flight, language: Language): string => {\n  switch (flight) {\n    case \"A\":\n      return getString(\"flight.a\", language);\n    case \"B\":\n      return getString(\"flight.b\", language);\n    case \"C\":\n      return getString(\"flight.c\", language);\n    case \"D\":\n      return getString(\"flight.d\", language);\n    case \"E\":\n      return getString(\"flight.e\", language);\n    case \"F\":\n      return getString(\"flight.f\", language);\n    case \"G\":\n      return getString(\"flight.g\", language);\n    case \"H\":\n      return getString(\"flight.h\", language);\n    case \"I\":\n      return getString(\"flight.i\", language);\n    case \"J\":\n      return getString(\"flight.j\", language);\n    case \"K\":\n      return getString(\"flight.k\", language);\n    case \"L\":\n      return getString(\"flight.l\", language);\n    case \"M\":\n      return getString(\"flight.m\", language);\n    case \"N\":\n      return getString(\"flight.n\", language);\n    case \"O\":\n      return getString(\"flight.o\", language);\n    case \"P\":\n      return getString(\"flight.p\", language);\n    default:\n      checkExhausted(flight);\n      return \"\";\n  }\n};\n\n// Delocalizes a Flight value.\nexport const delocalizeFlight = (text: string, language: Language): Flight => {\n  // The \"A\" character gets special handling for the benefit of Cyrillic.\n  // Latin \"A\" and Cyrillic \"A\" are visually identical, but differ in encoding.\n  if (text === getString(\"flight.a\", language) || text === \"A\") return \"A\";\n\n  if (text === getString(\"flight.b\", language)) return \"B\";\n  if (text === getString(\"flight.c\", language)) return \"C\";\n  if (text === getString(\"flight.d\", language)) return \"D\";\n  if (text === getString(\"flight.e\", language)) return \"E\";\n  if (text === getString(\"flight.f\", language)) return \"F\";\n  if (text === getString(\"flight.g\", language)) return \"G\";\n  if (text === getString(\"flight.h\", language)) return \"H\";\n  if (text === getString(\"flight.i\", language)) return \"I\";\n  if (text === getString(\"flight.j\", language)) return \"J\";\n  if (text === getString(\"flight.k\", language)) return \"K\";\n  if (text === getString(\"flight.l\", language)) return \"L\";\n  if (text === getString(\"flight.m\", language)) return \"M\";\n  if (text === getString(\"flight.n\", language)) return \"N\";\n  if (text === getString(\"flight.o\", language)) return \"O\";\n  if (text === getString(\"flight.p\", language)) return \"P\";\n  throw new Error(\"Failed to delocalize Flight: \" + text);\n};\n\nexport const localizeSexPlural = (sex: Sex, language: Language): string => {\n  switch (sex) {\n    case \"M\":\n      return getString(\"results.mens\", language);\n    case \"F\":\n      return getString(\"results.womens\", language);\n    case \"Mx\":\n      return getString(\"results.mxs\", language);\n    default:\n      checkExhausted(sex);\n      return \"\";\n  }\n};\n\n// Localizes a Sex value.\nexport const localizeSex = (sex: Sex, language: Language): string => {\n  switch (sex) {\n    case \"M\":\n      return getString(\"sex.m\", language);\n    case \"F\":\n      return getString(\"sex.f\", language);\n    case \"Mx\":\n      return getString(\"sex.mx\", language);\n    default:\n      checkExhausted(sex);\n      return \"\";\n  }\n};\n\n// Delocalizes a Sex value.\nexport const delocalizeSex = (text: string, language: Language): Sex => {\n  if (text === getString(\"sex.m\", language)) return \"M\";\n  if (text === getString(\"sex.f\", language)) return \"F\";\n  if (text === getString(\"sex.mx\", language)) return \"Mx\";\n  throw new Error(\"Failed to delocalize Sex: \" + text);\n};\n\n// Localizes a Category weightclass string.\n// This is used by the Flight Order, Results and Records pages.\nexport const localizeWeightClassStr = (wtcls: string, language: Language): string => {\n  const isSHW = wtcls.endsWith(\"+\");\n  const asNumber = Number(wtcls.replace(\"+\", \"\"));\n  if (asNumber === 0) return \"\";\n  return displayWeight(asNumber, language) + (isSHW ? \"+\" : \"\");\n};\n\n// Negotiates the default language with the navigator, if possible.\nexport const getDefaultLanguage = (): Language => {\n  const defaultLanguage: Language = \"en\";\n\n  // Make sure that we're in a modern browser.\n  if (typeof navigator !== \"object\" || typeof navigator.languages !== \"object\") {\n    return defaultLanguage;\n  }\n\n  // Iterate over the available languages looking for the first match.\n  const languages: ReadonlyArray<string> = navigator.languages;\n  for (let i = 0; i < languages.length; ++i) {\n    const language = languages[i];\n    if (language in translations) {\n      return language as Language;\n    }\n  }\n\n  return defaultLanguage;\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// See comments in src/versions.js.\n\nimport { stateVersion, releaseVersion } from \"../versions\";\nimport { OverwriteStoreAction } from \"../types/actionTypes\";\nimport { VersionsState } from \"../types/stateTypes\";\n\nconst initialState: VersionsState = {\n  stateVersion,\n  releaseVersion,\n};\n\ntype Action = OverwriteStoreAction;\n\nexport default (state: VersionsState = initialState, action: Action): VersionsState => {\n  switch (action.type) {\n    case \"OVERWRITE_STORE\":\n      return action.store.versions;\n\n    default:\n      return state;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Versioning for the global State object.\n//\n// Incrementing the version string breaks compatibility between implementations,\n// with the expectation that a converter will be automatically applied if possible,\n// such that a version of OpenLifter that internally uses version \"B\" can still\n// load files written in version \"A\", by means of auto-upgrading.\n//\n// This string is stored on the GlobalState as the property \"versions.stateVersion\".\n// Each save file thereby reports its own version.\nexport const stateVersion: string = \"0\";\n\n// Versioning for the OpenLifter project as a whole.\n//\n// This is safely incrementable on *releases*. Its function is exclusively to alert\n// users to \"automatic\" upgrades of the software, and it is reported explicitly\n// on the Home page.\n//\n// Changing this version does *not* represent data incompatibilities; for that,\n// please use the \"stateVersion\".\n//\n// This string is stored on the GlobalState as the property \"versions.releaseVersion\".\n//\n// It's defined by the '.env' file in the project root, which references\n// the package.json variable 'version'.\nexport const releaseVersion: string =\n  typeof process.env.REACT_APP_VERSION === \"string\" ? process.env.REACT_APP_VERSION : \"[undefined REACT_APP_VERSION]\";\n\n// Strictly-presentational representation of when the releaseVersion was changed.\n// Update this concurrently with modifying the releaseVersion.\n// This value is not stored in the state: it's purely informational.\nexport const releaseDate: string = \"2021-05-16\";\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines logic for working with Dates, which is trickier than you might expect:\n// the global state wants strings in YYYY-MM-DD, date objects get created from\n// strings in UTC time, and React widgets create Dates in local time.\n\nexport const iso8601ToLocalDate = (s: string): Date => {\n  const [yearStr, monthStr, dayStr] = s.split(\"-\");\n\n  const year = parseInt(yearStr, 10);\n  const month = parseInt(monthStr, 10);\n  const day = parseInt(dayStr, 10);\n\n  const d = new Date();\n  d.setFullYear(year, month - 1, day);\n  return d;\n};\n\nexport const localDateToIso8601 = (d: Date): string => {\n  const year: number = d.getFullYear();\n  const month: number = d.getMonth() + 1;\n  const day: number = d.getDate();\n\n  const yearStr = String(year);\n  let monthStr = String(month);\n  if (monthStr.length === 1) {\n    monthStr = \"0\" + monthStr;\n  }\n  let dayStr = String(day);\n  if (dayStr.length === 1) {\n    dayStr = \"0\" + dayStr;\n  }\n\n  return yearStr + \"-\" + monthStr + \"-\" + dayStr;\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Color codes must be in upper-case to match the ColorPicker output.\nexport const PlateColors = {\n  PLATE_DEFAULT_BLACK: \"#000000\",\n  PLATE_DEFAULT_WHITE: \"#FFFFFF\",\n  PLATE_DEFAULT_BLUE: \"#4990E2\",\n  PLATE_DEFAULT_GREEN: \"#2AB003\",\n  PLATE_DEFAULT_GRAY: \"#575757\",\n  PLATE_DEFAULT_RED: \"#FF0000\",\n  PLATE_DEFAULT_YELLOW: \"#FFEF2A\",\n  PLATE_DEFAULT_ORANGE: \"#F25A1D\",\n  PLATE_DEFAULT_PINK: \"#E81FA5\",\n  PLATE_DEFAULT_PURPLE: \"#9B16F2\",\n};\n\nexport type PlateColorsType = keyof typeof PlateColors;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { localDateToIso8601 } from \"../logic/date\";\nimport { kg2lbs, lbs2kg, displayWeight } from \"../logic/units\";\nimport { PlateColors } from \"../constants/plateColors\";\n\nimport { MeetSetupAction, OverwriteStoreAction } from \"../types/actionTypes\";\nimport { Language, Plate } from \"../types/dataTypes\";\nimport { MeetState } from \"../types/stateTypes\";\nimport { checkExhausted } from \"../types/utils\";\n\nconst defaultPlatformsOnDay = 1;\n\nconst defaultBarAndCollarsWeightKg = 25; // Assuming metal 2.5kg collars.\nconst defaultBarAndCollarsWeightLbs = 45; // Assuming plastic collars.\n\n// Default kg plates, allowing for increments of 0.5kg.\nconst defaultPlatesKg: ReadonlyArray<Plate> = [\n  { weightKg: 50, pairCount: 0, color: PlateColors.PLATE_DEFAULT_GREEN },\n  { weightKg: 25, pairCount: 8, color: PlateColors.PLATE_DEFAULT_RED },\n  { weightKg: 20, pairCount: 1, color: PlateColors.PLATE_DEFAULT_BLUE },\n  { weightKg: 15, pairCount: 1, color: PlateColors.PLATE_DEFAULT_YELLOW },\n  { weightKg: 10, pairCount: 1, color: PlateColors.PLATE_DEFAULT_GREEN },\n  { weightKg: 5, pairCount: 1, color: PlateColors.PLATE_DEFAULT_BLACK },\n  { weightKg: 2.5, pairCount: 1, color: PlateColors.PLATE_DEFAULT_BLACK },\n  { weightKg: 2, pairCount: 0, color: PlateColors.PLATE_DEFAULT_BLUE },\n  { weightKg: 1.5, pairCount: 0, color: PlateColors.PLATE_DEFAULT_YELLOW },\n  { weightKg: 1.25, pairCount: 1, color: PlateColors.PLATE_DEFAULT_BLACK },\n  { weightKg: 1, pairCount: 1, color: PlateColors.PLATE_DEFAULT_BLUE },\n  { weightKg: 0.75, pairCount: 1, color: PlateColors.PLATE_DEFAULT_RED },\n  { weightKg: 0.5, pairCount: 1, color: PlateColors.PLATE_DEFAULT_GREEN },\n  { weightKg: 0.25, pairCount: 1, color: PlateColors.PLATE_DEFAULT_BLUE },\n];\n\n// Default lbs plates, allowing for increments of 1lb.\nconst defaultPlatesLbs: ReadonlyArray<Plate> = [\n  { weightKg: lbs2kg(100), pairCount: 0, color: PlateColors.PLATE_DEFAULT_GREEN },\n  { weightKg: lbs2kg(55), pairCount: 0, color: PlateColors.PLATE_DEFAULT_RED },\n  { weightKg: lbs2kg(45), pairCount: 8, color: PlateColors.PLATE_DEFAULT_GRAY },\n  { weightKg: lbs2kg(35), pairCount: 0, color: PlateColors.PLATE_DEFAULT_GRAY },\n  { weightKg: lbs2kg(25), pairCount: 1, color: PlateColors.PLATE_DEFAULT_GRAY },\n  { weightKg: lbs2kg(10), pairCount: 2, color: PlateColors.PLATE_DEFAULT_GRAY },\n  { weightKg: lbs2kg(5), pairCount: 1, color: PlateColors.PLATE_DEFAULT_GRAY },\n  { weightKg: lbs2kg(2.5), pairCount: 1, color: PlateColors.PLATE_DEFAULT_GRAY },\n  { weightKg: lbs2kg(1.25), pairCount: 1, color: PlateColors.PLATE_DEFAULT_GRAY },\n  { weightKg: lbs2kg(0.5), pairCount: 2, color: PlateColors.PLATE_DEFAULT_GRAY },\n];\n\nconst initialState: MeetState = {\n  // Sanction information.\n  name: \"\",\n  country: \"\",\n  state: \"\",\n  city: \"\",\n  federation: \"\",\n  date: localDateToIso8601(new Date()),\n  lengthDays: 1,\n  platformsOnDays: [defaultPlatformsOnDay],\n\n  // Competition Rules.\n  divisions: [],\n  weightClassesKgMen: [],\n  weightClassesKgWomen: [],\n  weightClassesKgMx: [],\n  formula: \"Wilks\",\n  ageCoefficients: \"FosterMcCulloch\",\n  combineSleevesAndWraps: false,\n  allow4thAttempts: true,\n  recordsEnabled: true,\n\n  // Weights and Loading Setup.\n  inKg: true,\n  showAlternateUnits: true,\n  squatBarAndCollarsWeightKg: defaultBarAndCollarsWeightKg,\n  benchBarAndCollarsWeightKg: defaultBarAndCollarsWeightKg,\n  deadliftBarAndCollarsWeightKg: defaultBarAndCollarsWeightKg,\n  plates: defaultPlatesKg,\n};\n\n// Given a sorted list of weight classes (in kg) and a bodyweight (in kg),\n// return a string describing the weight class.\nexport const getWeightClassStr = (\n  classes: ReadonlyArray<number>,\n  bodyweightKg: number,\n  language?: Language\n): string => {\n  if (bodyweightKg === 0) return \"\";\n  if (classes.length === 0) return \"\";\n\n  for (let i = 0; i < classes.length; i++) {\n    if (bodyweightKg <= classes[i]) {\n      return displayWeight(classes[i], language);\n    }\n  }\n  return displayWeight(classes[classes.length - 1], language) + \"+\";\n};\n\n// Converts a kg weightclass to pounds.\n//\n// For example, the 90kg class is technically 198.41lbs,\n// but this will return \"198\".\nexport const wtclsStrKg2Lbs = (kgcls: string): string => {\n  const shw: boolean = kgcls.endsWith(\"+\");\n  const asNumber = Number(kgcls.replace(\"+\", \"\"));\n\n  // Convert to pounds and round down.\n  let truncated = Math.floor(kg2lbs(asNumber));\n\n  // This works for everything but the 183 class, which\n  // rounds down to 182.\n  if (truncated === 182) {\n    truncated = 183;\n  }\n\n  return shw ? String(truncated) + \"+\" : String(truncated);\n};\n\n// Given a sorted list of weight classes (in kg) and a bodyweight (in kg),\n// return a string describing the weight class.\n//\n// This is a separate method because it turns out that many exact translations\n// of kilo values are not what the audience expects for traditionally-reported\n// pounds classes. So a bunch of rounding must occur.\nexport const getWeightClassLbsStr = (classes: ReadonlyArray<number>, bodyweightKg: number): string => {\n  if (bodyweightKg === 0) return \"\";\n  if (classes.length === 0) return \"\";\n\n  for (let i = 0; i < classes.length; i++) {\n    if (bodyweightKg <= classes[i]) {\n      return wtclsStrKg2Lbs(String(classes[i]));\n    }\n  }\n  return wtclsStrKg2Lbs(String(classes[classes.length - 1])) + \"+\";\n};\n\ntype Action = MeetSetupAction | OverwriteStoreAction;\n\nexport default (state: MeetState = initialState, action: Action): MeetState => {\n  switch (action.type) {\n    case \"SET_MEET_NAME\":\n      return { ...state, name: action.name };\n\n    case \"SET_FORMULA\":\n      return { ...state, formula: action.formula };\n\n    case \"SET_FEDERATION\":\n      return { ...state, federation: action.federation };\n\n    case \"SET_DIVISIONS\":\n      return { ...state, divisions: action.divisions };\n\n    case \"SET_MEET_DATE\":\n      return { ...state, date: action.date };\n\n    case \"SET_LENGTH_DAYS\": {\n      const numDays = Number(action.length);\n\n      if (numDays >= state.platformsOnDays.length) {\n        const diff = numDays - state.platformsOnDays.length;\n\n        const newPlatformsOnDays: Array<number> = state.platformsOnDays.slice();\n        for (let i = 0; i < diff; i++) {\n          newPlatformsOnDays.push(defaultPlatformsOnDay);\n        }\n\n        return { ...state, lengthDays: numDays, platformsOnDays: newPlatformsOnDays };\n      }\n      return { ...state, lengthDays: numDays };\n    }\n\n    case \"SET_PLATFORM_COUNT\": {\n      const day = Number(action.day);\n      const count = Number(action.count);\n\n      const newPlatformsOnDays: Array<number> = state.platformsOnDays.slice();\n      newPlatformsOnDays[day - 1] = count;\n      return { ...state, platformsOnDays: newPlatformsOnDays };\n    }\n\n    case \"SET_IN_KG\": {\n      // Changing the units also changes the loading, so re-initialize from defaults.\n      const defaultPlates = action.inKg ? defaultPlatesKg : defaultPlatesLbs;\n      const defaultBar = action.inKg ? defaultBarAndCollarsWeightKg : lbs2kg(defaultBarAndCollarsWeightLbs);\n      return {\n        ...state,\n        inKg: action.inKg,\n        plates: defaultPlates,\n        squatBarAndCollarsWeightKg: defaultBar,\n        benchBarAndCollarsWeightKg: defaultBar,\n        deadliftBarAndCollarsWeightKg: defaultBar,\n      };\n    }\n\n    case \"SET_WEIGHTCLASSES\": {\n      const sex = action.sex;\n      const classesKg = action.classesKg;\n      switch (sex) {\n        case \"M\":\n          return { ...state, weightClassesKgMen: classesKg };\n        case \"F\":\n          return { ...state, weightClassesKgWomen: classesKg };\n        case \"Mx\":\n          return { ...state, weightClassesKgMx: classesKg };\n        default:\n          checkExhausted(sex);\n          return state;\n      }\n    }\n\n    case \"SET_BAR_AND_COLLARS_WEIGHT_KG\": {\n      switch (action.lift) {\n        case \"S\":\n          return { ...state, squatBarAndCollarsWeightKg: action.weightKg };\n        case \"B\":\n          return { ...state, benchBarAndCollarsWeightKg: action.weightKg };\n        case \"D\":\n          return { ...state, deadliftBarAndCollarsWeightKg: action.weightKg };\n        default:\n          checkExhausted(action.lift);\n          return state;\n      }\n    }\n\n    case \"SET_PLATE_CONFIG\": {\n      const { weightKg, pairCount, color } = action;\n\n      // Find the index of the object in the platesOnSide array by comparing weights.\n      const index = state.plates.findIndex((p) => p.weightKg === weightKg);\n\n      // Clone the array.\n      const newPlates: Array<Plate> = state.plates.slice();\n\n      // Replace with a new object in the new array.\n      newPlates[index] = { weightKg, pairCount, color };\n\n      return { ...state, plates: newPlates };\n    }\n\n    case \"UPDATE_MEET\": {\n      const changes = action.changes;\n\n      // Make a new MeetState with just the changes overwritten.\n      const newState = Object.assign({}, state);\n      return Object.assign(newState, changes);\n    }\n\n    case \"OVERWRITE_STORE\":\n      return action.store.meet;\n\n    default:\n      checkExhausted(action);\n      return state;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines logic for creating and working with Entry objects.\n\nimport { Entry, Lift, Event, FieldKg, FieldStatus, Language, Sex } from \"../types/dataTypes\";\nimport { checkExhausted } from \"../types/utils\";\nimport { getWeightClassStr } from \"../reducers/meetReducer\";\n\n// Length of {squat,bench,deadlift}{Kg,Status} in each Entry.\nexport const MAX_ATTEMPTS = 5;\n\nexport const newDefaultEntry = (id: number): Entry => {\n  return {\n    // Bookkeeping internal information for OpenLifter.\n    id: id, // The global unique ID of this registration.\n\n    // Information about when the lifter is scheduled to lift.\n    day: 1, // The day on which the lifter is lifting.\n    platform: 1, // The platform on which the lifter is lifting.\n    flight: \"A\", // The flight in which the lifter is lifting.\n\n    // Information about the lifter themselves.\n    name: \"\", // The lifter's name.\n    sex: \"M\", // The lifter's sex.\n    birthDate: \"\", // The lifter's birthdate (YYYY-MM-DD).\n    age: 0, // The lifter's age in years\n    country: \"\", // Lifter's home country, or blank.\n    state: \"\", // Lifter's home state, or blank.\n    intendedWeightClassKg: \"\", // The weightclass for which the lifter registered.\n    equipment: \"Sleeves\", // The equipment category for which the lifter registered.\n    divisions: [], // A list of divisions the lifter entered.\n    events: [], // A list of events the lifter entered.\n\n    // Metadata about the lifter, assigned by the meet director.\n    lot: 0, // The lifter's lot number, for breaking ties in lifting order.\n    memberId: \"\", // Optional federation MemberID, for reporting in results.\n    paid: false, // Used by the meet director for tracking whether the lifter paid.\n    team: \"\", // Optional. Only used in the final results export.\n    guest: false, // Optional. Marks the lifter as a guest, who cannot place in rankings.\n    canBreakRecords: true, // Optional. Allows the lifter to break records,\n    novice: false, // Optional. Novices are ranked against other novices. This is basically another form of division.\n    notes: \"\", // Free-form text for the meet director to use as a scratchpad.\n\n    // Information added on the \"Weigh-ins\" page.\n    // But we might as well track it in this object.\n    bodyweightKg: 0.0,\n    squatRackInfo: \"\", // A freeform string for the benefit of the loaders.\n    benchRackInfo: \"\", // A freeform string for the benefit of the loaders.\n\n    // Lifting information. Weights always stored internally in kg.\n    squatKg: [0.0, 0.0, 0.0, 0.0, 0.0],\n    benchKg: [0.0, 0.0, 0.0, 0.0, 0.0],\n    deadliftKg: [0.0, 0.0, 0.0, 0.0, 0.0],\n\n    // Lifting information, success state:\n    //  -1 => No Lift.\n    //   0 => Not Yet Done.\n    //   1 => Good Lift.\n    //\n    // Note that this system has the property where corresponding (kg*status)\n    // produces the SquatXKg as expected by the main OpenPowerlifting CSV format.\n    squatStatus: [0, 0, 0, 0, 0],\n    benchStatus: [0, 0, 0, 0, 0],\n    deadliftStatus: [0, 0, 0, 0, 0],\n  };\n};\n\n// Gets the lifter's age, possibly by inferring it from birthDate.\n// If the age couldn't be determined, returns 0.\nexport const getAge = (entry: Entry, meetDate: string): number => {\n  // If the user overrode the Age manually, just take that.\n  if (entry.age > 0) return entry.age;\n\n  // If no birthDate is provided, nothing more can be done.\n  if (entry.birthDate === \"\") return 0;\n\n  // Infer the age given {meetDate, birthDate, day}.\n  let [my, mm, md] = meetDate.split(\"-\").map((s) => Number(s));\n  const [by, bm, bd] = entry.birthDate.split(\"-\").map((s) => Number(s));\n\n  // Advance the day counter if necessary.\n  // FIXME: This logic assumes that each month has exactly 31 days.\n  if (entry.day > 1) {\n    md += entry.day - 1;\n    if (md > 31) {\n      md -= 31;\n      mm += 1;\n    }\n    if (mm > 12) {\n      md -= 12;\n      my += 1;\n    }\n  }\n\n  const years = my - by;\n  if (years <= 0) return 0;\n\n  // If their birthday occurred in the most recent year, just diff years.\n  if (bm < mm || (bm === mm && bd <= md)) {\n    return years;\n  }\n\n  // Otherwise, their birthday did not occur yet, so this year doesn't count.\n  return years - 1;\n};\n\n// Gets the best squat, including extra attempts that don't count for the total.\nexport const getBest5SquatKg = (entry: Entry): number => {\n  let best3SquatKg = 0.0;\n  for (let i = 0; i < MAX_ATTEMPTS; i++) {\n    if (entry.squatStatus[i] === 1) {\n      best3SquatKg = Math.max(best3SquatKg, entry.squatKg[i]);\n    }\n  }\n  return best3SquatKg;\n};\n\n// Gets the best bench, including extra attempts that don't count for the total.\nexport const getBest5BenchKg = (entry: Entry): number => {\n  let best3BenchKg = 0.0;\n  for (let i = 0; i < MAX_ATTEMPTS; i++) {\n    if (entry.benchStatus[i] === 1) {\n      best3BenchKg = Math.max(best3BenchKg, entry.benchKg[i]);\n    }\n  }\n  return best3BenchKg;\n};\n\n// Gets the best deadlift, including extra attempts that don't count for the total.\nexport const getBest5DeadliftKg = (entry: Entry): number => {\n  let best3DeadliftKg = 0.0;\n  for (let i = 0; i < MAX_ATTEMPTS; i++) {\n    if (entry.deadliftStatus[i] === 1) {\n      best3DeadliftKg = Math.max(best3DeadliftKg, entry.deadliftKg[i]);\n    }\n  }\n  return best3DeadliftKg;\n};\n\n// The ProjectedTotal optimistically assumes that lifters will get *first* attempts\n// that have not yet been taken. It is used for calculating a total while lifters\n// are still squatting and benching.\n//\n// 2nd and 3rd attempts are treated normally, where they only count toward the\n// total if they have been successful.\nexport const getProjectedTotalKg = (entry: Entry): number => {\n  let best3Squat = 0.0;\n  if (entry.squatStatus[0] >= 0) best3Squat = Math.max(best3Squat, entry.squatKg[0]);\n  if (entry.squatStatus[1] > 0) best3Squat = Math.max(best3Squat, entry.squatKg[1]);\n  if (entry.squatStatus[2] > 0) best3Squat = Math.max(best3Squat, entry.squatKg[2]);\n\n  let best3Bench = 0.0;\n  if (entry.benchStatus[0] >= 0) best3Bench = Math.max(best3Bench, entry.benchKg[0]);\n  if (entry.benchStatus[1] > 0) best3Bench = Math.max(best3Bench, entry.benchKg[1]);\n  if (entry.benchStatus[2] > 0) best3Bench = Math.max(best3Bench, entry.benchKg[2]);\n\n  let best3Dead = 0.0;\n  if (entry.deadliftStatus[0] >= 0) best3Dead = Math.max(best3Dead, entry.deadliftKg[0]);\n  if (entry.deadliftStatus[1] > 0) best3Dead = Math.max(best3Dead, entry.deadliftKg[1]);\n  if (entry.deadliftStatus[2] > 0) best3Dead = Math.max(best3Dead, entry.deadliftKg[2]);\n\n  // If there was no attempted success for a single lift, return zero.\n  if (best3Squat === 0 && entry.squatStatus[0] === -1) return 0.0;\n  if (best3Bench === 0 && entry.benchStatus[0] === -1) return 0.0;\n  if (best3Dead === 0 && entry.deadliftStatus[0] === -1) return 0.0;\n\n  return best3Squat + best3Bench + best3Dead;\n};\n\nexport const getProjectedEventTotalKg = (entry: Entry, event: Event): number => {\n  let best3Squat = 0.0;\n  if (event.includes(\"S\")) {\n    if (entry.squatStatus[0] >= 0) best3Squat = Math.max(best3Squat, entry.squatKg[0]);\n    if (entry.squatStatus[1] > 0) best3Squat = Math.max(best3Squat, entry.squatKg[1]);\n    if (entry.squatStatus[2] > 0) best3Squat = Math.max(best3Squat, entry.squatKg[2]);\n  }\n\n  let best3Bench = 0.0;\n  if (event.includes(\"B\")) {\n    if (entry.benchStatus[0] >= 0) best3Bench = Math.max(best3Bench, entry.benchKg[0]);\n    if (entry.benchStatus[1] > 0) best3Bench = Math.max(best3Bench, entry.benchKg[1]);\n    if (entry.benchStatus[2] > 0) best3Bench = Math.max(best3Bench, entry.benchKg[2]);\n  }\n\n  let best3Dead = 0.0;\n  if (event.includes(\"D\")) {\n    if (entry.deadliftStatus[0] >= 0) best3Dead = Math.max(best3Dead, entry.deadliftKg[0]);\n    if (entry.deadliftStatus[1] > 0) best3Dead = Math.max(best3Dead, entry.deadliftKg[1]);\n    if (entry.deadliftStatus[2] > 0) best3Dead = Math.max(best3Dead, entry.deadliftKg[2]);\n  }\n\n  // If there was no attempted success for a single lift, return zero.\n  if (best3Squat === 0 && entry.squatStatus[0] === -1) return 0.0;\n  if (best3Bench === 0 && entry.benchStatus[0] === -1) return 0.0;\n  if (best3Dead === 0 && entry.deadliftStatus[0] === -1) return 0.0;\n\n  return best3Squat + best3Bench + best3Dead;\n};\n\nexport const getBest3SquatKg = (entry: Entry): number => {\n  let best3Squat = 0.0;\n  if (entry.squatStatus[0] > 0) best3Squat = Math.max(best3Squat, entry.squatKg[0]);\n  if (entry.squatStatus[1] > 0) best3Squat = Math.max(best3Squat, entry.squatKg[1]);\n  if (entry.squatStatus[2] > 0) best3Squat = Math.max(best3Squat, entry.squatKg[2]);\n  return best3Squat;\n};\n\nexport const getBest3BenchKg = (entry: Entry): number => {\n  let best3Bench = 0.0;\n  if (entry.benchStatus[0] > 0) best3Bench = Math.max(best3Bench, entry.benchKg[0]);\n  if (entry.benchStatus[1] > 0) best3Bench = Math.max(best3Bench, entry.benchKg[1]);\n  if (entry.benchStatus[2] > 0) best3Bench = Math.max(best3Bench, entry.benchKg[2]);\n  return best3Bench;\n};\n\nexport const getBest3DeadliftKg = (entry: Entry): number => {\n  let best3Dead = 0.0;\n  if (entry.deadliftStatus[0] > 0) best3Dead = Math.max(best3Dead, entry.deadliftKg[0]);\n  if (entry.deadliftStatus[1] > 0) best3Dead = Math.max(best3Dead, entry.deadliftKg[1]);\n  if (entry.deadliftStatus[2] > 0) best3Dead = Math.max(best3Dead, entry.deadliftKg[2]);\n  return best3Dead;\n};\n\n// The Total is the sum of best of the first 3 attempts of each lift.\nexport const getFinalTotalKg = (entry: Entry): number => {\n  const best3Squat = getBest3SquatKg(entry);\n  const best3Bench = getBest3BenchKg(entry);\n  const best3Dead = getBest3DeadliftKg(entry);\n\n  // If there was no attempted success for a single lift, return zero.\n  if (best3Squat === 0 && entry.squatStatus[0] === -1) return 0.0;\n  if (best3Bench === 0 && entry.benchStatus[0] === -1) return 0.0;\n  if (best3Dead === 0 && entry.deadliftStatus[0] === -1) return 0.0;\n\n  return best3Squat + best3Bench + best3Dead;\n};\n\n// Restricts the total calculation to just for the specified Event.\nexport const getFinalEventTotalKg = (entry: Entry, event: Event): number => {\n  let best3Squat = 0.0;\n  if (event.includes(\"S\")) {\n    best3Squat = getBest3SquatKg(entry);\n    if (best3Squat === 0) return 0.0;\n  }\n\n  let best3Bench = 0.0;\n  if (event.includes(\"B\")) {\n    best3Bench = getBest3BenchKg(entry);\n    if (best3Bench === 0) return 0.0;\n  }\n\n  let best3Dead = 0.0;\n  if (event.includes(\"D\")) {\n    best3Dead = getBest3DeadliftKg(entry);\n    if (best3Dead === 0) return 0.0;\n  }\n\n  return best3Squat + best3Bench + best3Dead;\n};\n\n// Filter entries to only get lifters that are lifting on a given day\nexport const getLiftersOnDay = (entries: ReadonlyArray<Entry>, day: number): Array<Entry> => {\n  if (!entries) {\n    return [];\n  }\n  return entries.filter((entry) => {\n    return entry.day === day;\n  });\n};\n\n// Convert a lift like \"S\" to the kg array field name, like \"squatKg\".\nexport const liftToAttemptFieldName = (lift: Lift): FieldKg => {\n  switch (lift) {\n    case \"S\":\n      return \"squatKg\";\n    case \"B\":\n      return \"benchKg\";\n    case \"D\":\n      return \"deadliftKg\";\n    default:\n      checkExhausted(lift);\n      return \"squatKg\";\n  }\n};\n\n// Convert a lift like \"S\" to the status array field name, like \"squatStatus\".\nexport const liftToStatusFieldName = (lift: Lift): FieldStatus => {\n  switch (lift) {\n    case \"S\":\n      return \"squatStatus\";\n    case \"B\":\n      return \"benchStatus\";\n    case \"D\":\n      return \"deadliftStatus\";\n    default:\n      checkExhausted(lift);\n      return \"squatStatus\";\n  }\n};\n\nexport const getAttemptWeight = (entry: Entry, lift: Lift, attemptOneIndexed: number): number => {\n  const attemptWeightField = liftToAttemptFieldName(lift);\n  return entry[attemptWeightField][attemptOneIndexed - 1];\n};\n\n// Whether the Entry has taken any attempts.\nexport const entryHasLifted = (entry: Entry): boolean => {\n  if (entry.squatStatus[0] !== 0) return true;\n  if (entry.benchStatus[0] !== 0) return true;\n  if (entry.deadliftStatus[0] !== 0) return true;\n  return false;\n};\n\n// Whether any Entry has taken any attempts on the given (day, platform). O(n).\nexport const liftingPresentOnPlatform = (entries: ReadonlyArray<Entry>, day: number, platform: number): boolean => {\n  for (let i = 0; i < entries.length; i++) {\n    const entry = entries[i];\n    if (entry.day !== day || entry.platform !== platform) continue;\n    if (entryHasLifted(entry)) return true;\n  }\n  return false;\n};\n\n// Given an array of how many platforms are on each day and the Entries,\n// returns an array of arrays of booleans, such that array[day-1][platform-1] is\n// true iff at least one Entry corresponding to that (day, platform) has\n// taken an attempt.\nexport const getWhetherPlatformsHaveLifted = (\n  platformsOnDays: ReadonlyArray<number>,\n  entries: ReadonlyArray<Entry>\n): Array<Array<boolean>> => {\n  const ret = [];\n  for (let day = 1; day <= platformsOnDays.length; day++) {\n    const platformsOnDay = platformsOnDays[day - 1];\n    const acc = [];\n    for (let platform = 1; platform <= platformsOnDay; platform++) {\n      acc.push(liftingPresentOnPlatform(entries, day, platform));\n    }\n    ret.push(acc);\n  }\n  return ret;\n};\n\nexport function mapSexToClasses(\n  sex: Sex,\n  weightClassesKgMen: readonly number[],\n  weightClassesKgWomen: readonly number[],\n  weightClassesKgMx: readonly number[]\n): ReadonlyArray<number> {\n  switch (sex) {\n    case \"M\":\n      return weightClassesKgMen;\n    case \"F\":\n      return weightClassesKgWomen;\n    case \"Mx\":\n      return weightClassesKgMx;\n    default:\n      checkExhausted(sex);\n      return weightClassesKgMen;\n  }\n}\n\nexport const getWeightClassForEntry = (\n  entry: Readonly<Entry>,\n  weightClassesKgMen: readonly number[],\n  weightClassesKgWomen: readonly number[],\n  weightClassesKgMx: readonly number[],\n  language: Language\n) => {\n  const weightClassesForSex = mapSexToClasses(entry.sex, weightClassesKgMen, weightClassesKgWomen, weightClassesKgMx);\n\n  const weightClass = getWeightClassStr(weightClassesForSex, entry.bodyweightKg, language);\n  return weightClass;\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { newDefaultEntry, liftToAttemptFieldName, liftToStatusFieldName } from \"../logic/entry\";\nimport { RegistrationAction, OverwriteStoreAction, EnterAttemptAction, MarkLiftAction } from \"../types/actionTypes\";\nimport { Entry, Lift, FieldKg } from \"../types/dataTypes\";\nimport { RegistrationState } from \"../types/stateTypes\";\nimport { checkExhausted } from \"../types/utils\";\n\nconst initialState: RegistrationState = {\n  // The next unique ID to assign.\n  //\n  // This is stored in global state to handle the case of deleting registration\n  // rows during the course of lifting.\n  //\n  // A large number is used as the initial value to make it clear that this is\n  // specifically not an index into the `entries` array.\n  nextEntryId: 5000,\n\n  // Entry objects in the order they appear on the Registration page.\n  // This array owns all registration information.\n  entries: [],\n\n  // Hash from unique ID to `entries` array index.\n  //\n  // This is for the benefit of pages other than the Registration page.\n  // Because the sort order of the `entries` array can change arbitrarily,\n  // the other pages remember globally-unique identifiers for each registration,\n  // instead of a simple array index.\n  //\n  // This lookup table allows mapping those identifiers to whatever\n  // the current location of that data is in the canonical `entries` store.\n  lookup: {},\n};\n\ntype Action = RegistrationAction | EnterAttemptAction | MarkLiftAction | OverwriteStoreAction;\n\ntype NumberLookup = {\n  [id: number]: number;\n};\n\nexport default (state: RegistrationState = initialState, action: Action): RegistrationState => {\n  switch (action.type) {\n    case \"NEW_REGISTRATION\": {\n      // The object provides optional properties that can overwrite the default.\n      // Although the UI doesn't pass properties this way, debugging code does.\n      const obj = action.overwriteDefaults;\n\n      // Generate an entries array with one more item (without modifying the orginal).\n      // Object.assign() allows `obj` to overwrite defaults if present.\n      const entries: Array<Entry> = state.entries.slice();\n      const newEntry = newDefaultEntry(state.nextEntryId);\n\n      // If a previous entry exists, pre-populate some information from it.\n      if (entries.length > 0) {\n        const previousEntry = entries[entries.length - 1];\n        newEntry.day = previousEntry.day;\n        newEntry.platform = previousEntry.platform;\n        newEntry.flight = previousEntry.flight;\n      }\n\n      // Overwrite any newEntry properties with those given in obj.\n      entries.push(Object.assign(newEntry, obj));\n\n      // Since a new entry was added, generate a new 'lookup' object,\n      // mapping from the globally-unique EntryId to the array index.\n      // Specify type explicitly here so that we can mutate it\n      const lookup: NumberLookup = Object.assign({}, state.lookup);\n      lookup[state.nextEntryId] = entries.length - 1;\n\n      return {\n        ...state,\n        nextEntryId: state.nextEntryId + 1,\n        entries: entries,\n        lookup: lookup,\n      };\n    }\n\n    case \"DELETE_REGISTRATION\": {\n      const entryId = action.entryId;\n\n      // Generate an entries array without the given item.\n      const entries: Array<Entry> = state.entries.filter((item) => item.id !== entryId);\n\n      // Since the entry was deleted from anywhere in the array,\n      // construct a new lookup table from scratch.\n      const lookup: NumberLookup = {};\n\n      for (let i = 0; i < entries.length; i++) {\n        const entry = entries[i];\n        lookup[entry.id] = i;\n      }\n\n      return {\n        ...state,\n        entries: entries,\n        lookup: lookup,\n      };\n    }\n\n    case \"UPDATE_REGISTRATION\": {\n      const entryId = action.entryId;\n      const changes = action.changes;\n\n      // Clone the entries array, since one entry will reference a new object.\n      const entries: Array<Entry> = state.entries.slice();\n\n      // Make a new object with just the changes overwritten,\n      // and reference that object from the new array.\n      const index = entries.findIndex((obj) => obj.id === entryId);\n      const newEntry = Object.assign({}, entries[index]);\n      entries[index] = Object.assign(newEntry, changes);\n\n      return {\n        ...state,\n        entries: entries,\n      };\n    }\n\n    case \"ENTER_ATTEMPT\": {\n      // Action parameters, with expected types.\n      const entryId = Number(action.entryId);\n      const lift: Lift = action.lift;\n      const attemptOneIndexed = Number(action.attemptOneIndexed);\n      const weightKg = Number(action.weightKg);\n\n      const field: FieldKg = liftToAttemptFieldName(lift);\n\n      // Clone the entries array, since one slot will reference a new object.\n      const newEntries: Array<Entry> = state.entries.slice();\n      const index = newEntries.findIndex((obj) => obj.id === entryId);\n      const oldEntry = newEntries[index];\n\n      // Make a copy of the attempts array containing the new attempt.\n      const newarray = oldEntry[field].slice();\n      newarray[attemptOneIndexed - 1] = weightKg;\n\n      // Put that new attempts array into an object so we can use Object.assign().\n      const newfields: Partial<Entry> = {};\n      newfields[field] = newarray;\n\n      // Make a new entry from the old entry, with the attempts field overwritten.\n      newEntries[index] = Object.assign(oldEntry, newfields);\n\n      return {\n        ...state,\n        entries: newEntries,\n      };\n    }\n\n    case \"MARK_LIFT\": {\n      const entryId = action.entryId;\n      const lift: Lift = action.lift;\n      const attemptOneIndexed = Number(action.attemptOneIndexed);\n      const success = Boolean(action.success);\n\n      // Map true to '1' and false to '-1'.\n      const status = success === true ? 1 : -1;\n\n      const fieldStatus = liftToStatusFieldName(lift);\n\n      // Clone the entries array, since one slot will reference a new object.\n      const newEntries: Array<Entry> = state.entries.slice();\n      const index = newEntries.findIndex((obj) => obj.id === entryId);\n      const oldEntry = newEntries[index];\n\n      // Make a copy of the status array containing the new status.\n      const newarray = oldEntry[fieldStatus].slice();\n      newarray[attemptOneIndexed - 1] = status;\n\n      // Put that new array into an object so we can use Object.assign().\n      const newfields: Partial<Entry> = {};\n      newfields[fieldStatus] = newarray;\n\n      // Make a new entry from the old entry, with the status field overwritten.\n      const newEntry = Object.assign({}, oldEntry);\n      newEntries[index] = Object.assign(newEntry, newfields);\n\n      return {\n        ...state,\n        entries: newEntries,\n      };\n    }\n\n    // Caused by clicking a \"Merge\" button on the Results page.\n    case \"MERGE_PLATFORM\": {\n      const day: number = action.day;\n      const platform: number = action.platform;\n      const platformEntries: ReadonlyArray<Entry> = action.platformEntries;\n\n      // Filter out state entries assigned to the merged (day, platform).\n      const newEntries = state.entries.filter((e) => {\n        return !(e.day === day && e.platform === platform);\n      });\n\n      // Get the nextEntryId: the merged entries will be reassigned IDs.\n      let nextEntryId: number = state.nextEntryId;\n\n      // For each incoming Entry, copy the object, assign a new ID,\n      // and place it in the newEntries array.\n      for (let i = 0; i < platformEntries.length; i++) {\n        const entry: Entry = Object.assign({}, platformEntries[i]);\n        entry.id = nextEntryId++;\n        newEntries.push(entry);\n      }\n\n      // Generate an entirely new lookup table.\n      const lookup: NumberLookup = {};\n      for (let i = 0; i < newEntries.length; i++) {\n        lookup[newEntries[i].id] = i;\n      }\n\n      // Return a new object with the new components replaced.\n      return {\n        ...state,\n        nextEntryId: nextEntryId,\n        entries: newEntries,\n        lookup: lookup,\n      };\n    }\n\n    case \"OVERWRITE_STORE\":\n      return action.store.registration;\n\n    case \"ASSIGN_LOT_NUMBERS\":\n      // Clone & assign entry with its new lot number.\n      const updatedEntries = state.entries.map((entry, index) => ({ ...entry, lot: action.lotNumbers[index] }));\n\n      return {\n        ...state,\n        entries: updatedEntries,\n      };\n\n    default:\n      checkExhausted(action);\n      return state;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Lifting state only tracks manual overrides.\n//\n// Outside of overrides, the state of the meet is fully-calculated by the LiftingView.\n//\n// For safety, correctness, and ease of understanding, the state of the meet is\n// intentionally *not* stored in the global state. It is continuously recalculated.\n//\n// Please do not attempt to store meet state in the Redux store!\n\nimport {\n  MarkLiftAction,\n  SetLiftingGroupAction,\n  OverrideAttemptAction,\n  OverrideEntryIdAction,\n  OverwriteStoreAction,\n  SetTableInfoAction,\n} from \"../types/actionTypes\";\nimport { LiftingState } from \"../types/stateTypes\";\nimport { checkExhausted } from \"../types/utils\";\n\nconst initialState: LiftingState = {\n  // Specifies the initial settings for the control widgets on the lifting page.\n  // The intention is that the score table sets these manually.\n  day: 1,\n  platform: 1,\n  flight: \"A\",\n  lift: \"S\",\n\n  // These properties are normally calculated, but exist here as a mechanism\n  // for a one-shot override of the normal logic. After being handled,\n  // they are unset.\n  overrideAttempt: null, // Allows selecting an attempt, even if it's completed.\n  overrideEntryId: null, // Allows selecting a lifter, even if they've already gone.\n\n  // Presentational configuration.\n  columnDivisionWidthPx: 110,\n};\n\ntype Action =\n  | MarkLiftAction\n  | SetLiftingGroupAction\n  | OverrideAttemptAction\n  | OverrideEntryIdAction\n  | OverwriteStoreAction\n  | SetTableInfoAction;\n\nexport default (state: LiftingState = initialState, action: Action): LiftingState => {\n  switch (action.type) {\n    case \"MARK_LIFT\": {\n      // Unset any overrides, returning to normal lifting flow.\n      return { ...state, overrideAttempt: null, overrideEntryId: null };\n    }\n\n    case \"SET_LIFTING_GROUP\":\n      return {\n        // Keep all the UI customization stuff.\n        ...state,\n\n        // Change all the real state stuff.\n        day: action.day,\n        platform: action.platform,\n        flight: action.flight,\n        lift: action.lift,\n\n        // If the group changes, unset any overrides.\n        overrideAttempt: null,\n        overrideEntryId: null,\n      };\n\n    case \"OVERRIDE_ATTEMPT\":\n      return { ...state, overrideAttempt: action.attempt };\n\n    case \"OVERRIDE_ENTRY_ID\":\n      return { ...state, overrideEntryId: action.entryId };\n\n    case \"OVERWRITE_STORE\":\n      return action.store.lifting;\n\n    case \"SET_TABLE_INFO\": {\n      const changes = action.changes;\n\n      // As a safeguard, ensure that fields unrelated to customization\n      // are not overwritten by this action.\n\n      // Make a new object that's state + changes, with changes taking priority.\n      const combined = Object.assign({}, state);\n      Object.assign(combined, changes);\n\n      // Source from this new combined object, with fields unrelated to customization\n      // deferring to the original state.\n      //\n      // So that means:\n      //  - Fields unrelated to customization will be the same as in 'state'.\n      //  - Customization fields will be from 'combined', which includes all fields\n      //    and allowed the 'changes' object to overwrite any of them.\n      return {\n        ...combined,\n\n        day: state.day,\n        platform: state.platform,\n        flight: state.flight,\n        lift: state.lift,\n\n        overrideAttempt: state.overrideAttempt,\n        overrideEntryId: state.overrideEntryId,\n      };\n    }\n\n    default:\n      checkExhausted(action);\n      return state;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { ImportRecordsAction, OverwriteStoreAction } from \"../types/actionTypes\";\nimport { RecordsState } from \"../types/stateTypes\";\nimport { LiftingRecord, RecordKeyComponents } from \"../types/dataTypes\";\nimport { checkExhausted } from \"../types/utils\";\n\ntype Action = ImportRecordsAction | OverwriteStoreAction;\n\nconst initialState: RecordsState = {\n  confirmedRecords: {},\n};\n\nexport function calculateRecordKey(record: RecordKeyComponents): string {\n  return `${record.division}|${record.sex}|${record.weightClass}|${record.equipment}|${record.recordLift}|${record.recordType}`;\n}\n\n// Add or replace a record in the state and return the updated state. Used for unifying the imported records with new records in the meet\nexport function upsertRecord(record: LiftingRecord, state: RecordsState): RecordsState {\n  const recordKey = calculateRecordKey(record);\n  const newLookup = { ...state.confirmedRecords };\n  newLookup[recordKey] = record;\n\n  return {\n    ...state,\n    confirmedRecords: newLookup,\n  };\n}\n\nexport default (state: RecordsState = initialState, action: Action): RecordsState => {\n  switch (action.type) {\n    case \"IMPORT_RECORDS\": {\n      const recordLookup: { [recordKey: string]: LiftingRecord } = {};\n      action.records.forEach((record) => {\n        recordLookup[calculateRecordKey(record)] = record;\n      });\n\n      return { ...state, confirmedRecords: recordLookup };\n    }\n\n    case \"OVERWRITE_STORE\": {\n      return action.store.records || state;\n    }\n\n    default:\n      checkExhausted(action);\n      return state;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { combineReducers } from \"redux\";\n\nimport versionsReducer from \"./versionsReducer\";\nimport languageReducer from \"./languageReducer\";\nimport meetReducer from \"./meetReducer\";\nimport registrationReducer from \"./registrationReducer\";\nimport liftingReducer from \"./liftingReducer\";\nimport recordsReducer from \"./recordsReducer\";\n\n// Using combineReducers() guarantees that each part of the state object\n// fully bears the responsibility of managing itself by only sending a\n// subset of the state to the reducer.\n//\n// For example, the meetReducer() receives a new 'state' object\n// equal to 'state.meet' from the root. Because there is no way to access\n// the root state object from a child state object, the meetReducer() is\n// fully-encapsulated, allowing for sane reasoning about effects on global state.\nexport default combineReducers({\n  versions: versionsReducer,\n  language: languageReducer,\n  meet: meetReducer,\n  registration: registrationReducer,\n  lifting: liftingReducer,\n  records: recordsReducer,\n});\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { ChangeLanguageAction, OverwriteStoreAction } from \"../types/actionTypes\";\nimport { Language } from \"../types/dataTypes\";\nimport { checkExhausted } from \"../types/utils\";\n\ntype Action = ChangeLanguageAction | OverwriteStoreAction;\n\nexport default (state: Language = \"en\", action: Action): Language => {\n  switch (action.type) {\n    case \"CHANGE_LANGUAGE\":\n      return action.language;\n\n    case \"OVERWRITE_STORE\":\n      return action.store.language;\n\n    default:\n      checkExhausted(action);\n      return state;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport {\n  SetMeetNameAction,\n  SetFormulaAction,\n  SetFederationAction,\n  SetDivisionsAction,\n  SetMeetDateAction,\n  SetLengthDaysAction,\n  SetPlatformsOnDaysAction,\n  SetInKgAction,\n  SetWeightClassesAction,\n  SetBarAndCollarsWeightKgAction,\n  SetPlateConfigAction,\n  UpdateMeetAction,\n} from \"../types/actionTypes\";\nimport { Formula, Lift, Sex } from \"../types/dataTypes\";\nimport { MeetState } from \"../types/stateTypes\";\n\nexport const setMeetName = (name: string): SetMeetNameAction => {\n  return {\n    type: \"SET_MEET_NAME\",\n    name,\n  };\n};\n\nexport const setFormula = (formula: Formula): SetFormulaAction => {\n  return {\n    type: \"SET_FORMULA\",\n    formula,\n  };\n};\n\nexport const setFederation = (federation: string): SetFederationAction => {\n  return {\n    type: \"SET_FEDERATION\",\n    federation,\n  };\n};\n\nexport const setDivisions = (divisions: ReadonlyArray<string>): SetDivisionsAction => {\n  return {\n    type: \"SET_DIVISIONS\",\n    divisions,\n  };\n};\n\nexport const setMeetDate = (date: string): SetMeetDateAction => {\n  return {\n    type: \"SET_MEET_DATE\",\n    date,\n  };\n};\n\nexport const setLengthDays = (length: number): SetLengthDaysAction => {\n  return {\n    type: \"SET_LENGTH_DAYS\",\n    length,\n  };\n};\n\nexport const setPlatformsOnDays = (day: number, count: number): SetPlatformsOnDaysAction => {\n  return {\n    type: \"SET_PLATFORM_COUNT\",\n    day: day,\n    count: count,\n  };\n};\n\nexport const setInKg = (inKg: boolean): SetInKgAction => {\n  return {\n    type: \"SET_IN_KG\",\n    inKg,\n  };\n};\n\nexport const setWeightClasses = (sex: Sex, classesKg: ReadonlyArray<number>): SetWeightClassesAction => {\n  return {\n    type: \"SET_WEIGHTCLASSES\",\n    sex: sex,\n    classesKg: classesKg,\n  };\n};\n\nexport const setBarAndCollarsWeightKg = (lift: Lift, weightKg: number): SetBarAndCollarsWeightKgAction => {\n  return {\n    type: \"SET_BAR_AND_COLLARS_WEIGHT_KG\",\n    lift: lift,\n    weightKg: weightKg,\n  };\n};\n\nexport const setPlateConfig = (weightKg: number, pairCount: number, color: string): SetPlateConfigAction => {\n  return {\n    type: \"SET_PLATE_CONFIG\",\n    weightKg,\n    pairCount,\n    color,\n  };\n};\n\nexport const updateMeet = (obj: Partial<MeetState>): UpdateMeetAction => {\n  return {\n    type: \"UPDATE_MEET\",\n    changes: obj,\n  };\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Provides widgets that overwrite rules with federation defaults.\n\nimport React, { FormEvent } from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport FormGroup from \"react-bootstrap/FormGroup\";\n\nimport { getString } from \"../../logic/strings\";\n\nimport { updateMeet } from \"../../actions/meetSetupActions\";\n\nimport { GlobalState, MeetState } from \"../../types/stateTypes\";\nimport { Language } from \"../../types/dataTypes\";\nimport { checkExhausted, FormControlTypeHack } from \"../../types/utils\";\nimport { Dispatch } from \"redux\";\n\ninterface StateProps {\n  federation: string;\n  language: Language;\n}\n\ninterface DispatchProps {\n  updateMeet: (changes: Partial<MeetState>) => void;\n}\n\ninterface OwnProps {\n  // Used by the MeetSetup component to cause component updates.\n  onChange: () => void;\n}\n\ntype Props = StateProps & DispatchProps & OwnProps;\n\ntype AutoFillOption = \"Traditional\" | \"BP\" | \"GPC\" | \"SPF\" | \"UPA\" | \"USAPL\" | \"USPA\" | \"WABDL\" | \"WPC\" | \"WRPF\";\n\ninterface InternalState {\n  selectedOption: AutoFillOption;\n}\n\nconst traditionalDefaults: Partial<MeetState> = {\n  divisions: [\n    \"Open\",\n    \"Youth\",\n    \"T13-15\",\n    \"T16-17\",\n    \"T18-19\",\n    \"J20-23\",\n    \"S35-39\",\n    \"M40-44\",\n    \"M45-49\",\n    \"M50-54\",\n    \"M55-59\",\n    \"M60-64\",\n    \"M65-69\",\n    \"M70-74\",\n    \"M75-79\",\n    \"M80+\",\n  ],\n  weightClassesKgMen: [52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 125, 140],\n  weightClassesKgWomen: [44, 48, 52, 56, 60, 67.5, 75, 82.5, 90],\n  weightClassesKgMx: [52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 125, 140],\n  formula: \"Wilks\",\n  ageCoefficients: \"FosterMcCulloch\",\n  combineSleevesAndWraps: false,\n  allow4thAttempts: true,\n};\n\nconst bpDefaults: Partial<MeetState> = {\n  divisions: [\n    \"MR-O\",\n    \"MR-Sj\",\n    \"MR-Jr\",\n    \"MR-M1\",\n    \"MR-M2\",\n    \"MR-M3\",\n    \"MR-M4\",\n    \"MR-M5\",\n    \"MR-G\",\n    \"FR-O\",\n    \"FR-Sj\",\n    \"FR-Jr\",\n    \"FR-M1\",\n    \"FR-M2\",\n    \"FR-M3\",\n    \"FR-M4\",\n    \"FR-M5\",\n    \"FR-G\",\n    \"M-O\",\n    \"M-Sj\",\n    \"M-Jr\",\n    \"M-M1\",\n    \"M-M2\",\n    \"M-M3\",\n    \"M-M4\",\n    \"M-M5\",\n    \"M-G\",\n    \"F-O\",\n    \"F-Sj\",\n    \"F-Jr\",\n    \"F-M1\",\n    \"F-M2\",\n    \"F-M3\",\n    \"F-M4\",\n    \"F-M5\",\n    \"F-G\",\n  ],\n  weightClassesKgMen: [53, 59, 66, 74, 83, 93, 105, 120],\n  weightClassesKgWomen: [43, 47, 52, 57, 63, 72, 84],\n  weightClassesKgMx: [53, 59, 66, 74, 83, 93, 105, 120],\n  formula: \"IPF GL Points\",\n  ageCoefficients: \"FosterMcCulloch\",\n  combineSleevesAndWraps: false,\n  allow4thAttempts: false,\n};\n\nexport const gpcDefaults: Partial<MeetState> = {\n  divisions: [\n    \"Teen-1\",\n    \"Teen-2\",\n    \"Teen-3\",\n    \"Junior\",\n    \"Open\",\n    \"Masters-1\",\n    \"Masters-2\",\n    \"Masters-3\",\n    \"Masters-4\",\n    \"Masters-5\",\n    \"Masters-6\",\n    \"Masters-7\",\n    \"Masters-8\",\n    \"Masters-9\",\n  ],\n  weightClassesKgMen: [56, 60, 67.5, 75, 82.5, 90, 100, 110, 125, 140],\n  weightClassesKgWomen: [44, 48, 52, 56, 60, 67.5, 75, 82.5, 90, 110],\n  weightClassesKgMx: [56, 60, 67.5, 75, 82.5, 90, 100, 110, 125, 140],\n  formula: \"Glossbrenner\",\n  ageCoefficients: \"FosterMcCulloch\",\n  combineSleevesAndWraps: true,\n  allow4thAttempts: true,\n};\n\nconst spfDefaults: Partial<MeetState> = {\n  divisions: [\n    \"Open\",\n    \"Pre-Teen\",\n    \"T13-15\",\n    \"T16-17\",\n    \"T18-19\",\n    \"J20-23\",\n    \"S33-39\",\n    \"M40-44\",\n    \"M45-49\",\n    \"M50-54\",\n    \"M55-59\",\n    \"M60-64\",\n    \"M65-69\",\n    \"M70-74\",\n    \"M75-79\",\n    \"G80+\",\n    \"FPM\",\n    \"Crossfit\",\n  ],\n  weightClassesKgMen: [44, 48, 52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 118, 125, 140],\n  weightClassesKgWomen: [44, 48, 52, 56, 60, 67.5, 75, 82.5, 90, 100, 110],\n  weightClassesKgMx: [44, 48, 52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 118, 125, 140],\n  formula: \"Schwartz/Malone\",\n  ageCoefficients: \"FosterMcCulloch\",\n  combineSleevesAndWraps: false,\n  allow4thAttempts: true,\n};\n\nconst upaDefaults: Partial<MeetState> = {\n  divisions: [\n    \"FG\",\n    \"FG-AD\",\n    \"FGR\",\n    \"FGR-AD\",\n    \"FJ\",\n    \"FJ-AD\",\n    \"FJR\",\n    \"FJR-AD\",\n    \"FJRE\",\n    \"FJRE-AD\",\n    \"FM1\",\n    \"FM1-AD\",\n    \"FM1R\",\n    \"FM1R-AD\",\n    \"FM1RE\",\n    \"FM1RE-AD\",\n    \"FM2\",\n    \"FM2-AD\",\n    \"FM2R\",\n    \"FM2R-AD\",\n    \"FM2RE\",\n    \"FM2RE-AD\",\n    \"FM3\",\n    \"FM3-AD\",\n    \"FM3R\",\n    \"FM3R-AD\",\n    \"FM3RE\",\n    \"FM3RE-AD\",\n    \"FM4\",\n    \"FM4-AD\",\n    \"FM4R\",\n    \"FM4R-AD\",\n    \"FM4RE\",\n    \"FM4RE-AD\",\n    \"FM5\",\n    \"FM5-AD\",\n    \"FM5R\",\n    \"FM5R-AD\",\n    \"FM5RE\",\n    \"FM5RE-AD\",\n    \"FM6\",\n    \"FM6-AD\",\n    \"FM6R\",\n    \"FM6R-AD\",\n    \"FM6RE\",\n    \"FM6RE-AD\",\n    \"FM7\",\n    \"FM7-AD\",\n    \"FM7R\",\n    \"FM7R-AD\",\n    \"FM7RE\",\n    \"FM7RE-AD\",\n    \"FM8\",\n    \"FM8-AD\",\n    \"FM8R\",\n    \"FM8R-AD\",\n    \"FM8RE\",\n    \"FM8RE-AD\",\n    \"FM9\",\n    \"FM9-AD\",\n    \"FM9R\",\n    \"FM9R-AD\",\n    \"FM9RE\",\n    \"FM9RE-AD\",\n    \"FMX\",\n    \"FMX-AD\",\n    \"FMXR\",\n    \"FMXR-AD\",\n    \"FMXRE\",\n    \"FMXRE-AD\",\n    \"FO\",\n    \"FO-AD\",\n    \"FOR\",\n    \"FOR-AD\",\n    \"FORE\",\n    \"FORE-AD\",\n    \"FPFR\",\n    \"FPFR-AD\",\n    \"FS\",\n    \"FS-AD\",\n    \"FSR\",\n    \"FSR-AD\",\n    \"FSRE\",\n    \"FSRE-AD\",\n    \"FT1\",\n    \"FT1-AD\",\n    \"FT1R\",\n    \"FT1R-AD\",\n    \"FT1RE\",\n    \"FT1RE-AD\",\n    \"FT2\",\n    \"FT2-AD\",\n    \"FT2R\",\n    \"FT2R-AD\",\n    \"FT2RE\",\n    \"FT2RE-AD\",\n    \"FT3\",\n    \"FT3-AD\",\n    \"FT3R\",\n    \"FT3R-AD\",\n    \"FT3RE\",\n    \"FT3RE-AD\",\n    \"FTX\",\n    \"FTX-AD\",\n    \"FTXR\",\n    \"FTXR-AD\",\n    \"FTXRE\",\n    \"FTXRE-AD\",\n    \"MG\",\n    \"MG-AD\",\n    \"MGR\",\n    \"MGR-AD\",\n    \"MJ\",\n    \"MJ-AD\",\n    \"MJR\",\n    \"MJR-AD\",\n    \"MJRE\",\n    \"MJRE-AD\",\n    \"MM1\",\n    \"MM1-AD\",\n    \"MM1R\",\n    \"MM1R-AD\",\n    \"MM1RE\",\n    \"MM1RE-AD\",\n    \"MM2\",\n    \"MM2-AD\",\n    \"MM2R\",\n    \"MM2R-AD\",\n    \"MM2RE\",\n    \"MM2RE-AD\",\n    \"MM3\",\n    \"MM3-AD\",\n    \"MM3R\",\n    \"MM3R-AD\",\n    \"MM3RE\",\n    \"MM3RE-AD\",\n    \"MM4\",\n    \"MM4-AD\",\n    \"MM4R\",\n    \"MM4R-AD\",\n    \"MM4RE\",\n    \"MM4RE-AD\",\n    \"MM5\",\n    \"MM5-AD\",\n    \"MM5R\",\n    \"MM5R-AD\",\n    \"MM5RE\",\n    \"MM5RE-AD\",\n    \"MM6\",\n    \"MM6-AD\",\n    \"MM6R\",\n    \"MM6R-AD\",\n    \"MM6RE\",\n    \"MM6RE-AD\",\n    \"MM7\",\n    \"MM7-AD\",\n    \"MM7R\",\n    \"MM7R-AD\",\n    \"MM7RE\",\n    \"MM7RE-AD\",\n    \"MM8\",\n    \"MM8-AD\",\n    \"MM8R\",\n    \"MM8R-AD\",\n    \"MM8RE\",\n    \"MM8RE-AD\",\n    \"MM9\",\n    \"MM9-AD\",\n    \"MM9R\",\n    \"MM9R-AD\",\n    \"MM9RE\",\n    \"MM9RE-AD\",\n    \"MMX\",\n    \"MMX-AD\",\n    \"MMXR\",\n    \"MMXR-AD\",\n    \"MMXRE\",\n    \"MMXRE-AD\",\n    \"MO\",\n    \"MO-AD\",\n    \"MOR\",\n    \"MOR-AD\",\n    \"MORE\",\n    \"MORE-AD\",\n    \"MPFR\",\n    \"MPFR-AD\",\n    \"MS\",\n    \"MS-AD\",\n    \"MSR\",\n    \"MSR-AD\",\n    \"MSRE\",\n    \"MSRE-AD\",\n    \"MT1\",\n    \"MT1-AD\",\n    \"MT1R\",\n    \"MT1R-AD\",\n    \"MT1RE\",\n    \"MT1RE-AD\",\n    \"MT2\",\n    \"MT2-AD\",\n    \"MT2R\",\n    \"MT2R-AD\",\n    \"MT2RE\",\n    \"MT2RE-AD\",\n    \"MT3\",\n    \"MT3-AD\",\n    \"MT3R\",\n    \"MT3R-AD\",\n    \"MT3RE\",\n    \"MT3RE-AD\",\n    \"MTX\",\n    \"MTX-AD\",\n    \"MTXR\",\n    \"MTXR-AD\",\n    \"MTXRE\",\n    \"MTXRE-AD\",\n  ],\n  weightClassesKgMen: [52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 125, 140],\n  weightClassesKgWomen: [44, 48, 52, 56, 60, 67.5, 75, 82.5, 90],\n  weightClassesKgMx: [52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 125, 140],\n  formula: \"Schwartz/Malone\",\n  ageCoefficients: \"FosterMcCulloch\",\n  combineSleevesAndWraps: true,\n  allow4thAttempts: true,\n};\n\nconst usaplDefaults: Partial<MeetState> = {\n  divisions: [\n    \"MR-O\",\n    \"MR-Y\",\n    \"MR-Y1\",\n    \"MR-Y2\",\n    \"MR-Y3\",\n    \"MR-T1\",\n    \"MR-T2\",\n    \"MR-T3\",\n    \"MR-Jr\",\n    \"MR-M1a\",\n    \"MR-M1b\",\n    \"MR-M2a\",\n    \"MR-M2b\",\n    \"MR-M3a\",\n    \"MR-M3b\",\n    \"MR-M4a\",\n    \"MR-M4b\",\n    \"MR-M5a\",\n    \"MR-M5b\",\n    \"MR-M6a\",\n    \"MR-M6b\",\n    \"MR-G\",\n    \"M-O\",\n    \"M-Y\",\n    \"M-Y1\",\n    \"M-Y2\",\n    \"M-Y3\",\n    \"M-T1\",\n    \"M-T2\",\n    \"M-T3\",\n    \"M-Jr\",\n    \"M-M1a\",\n    \"M-M1b\",\n    \"M-M2a\",\n    \"M-M2b\",\n    \"M-M3a\",\n    \"M-M3b\",\n    \"M-M4a\",\n    \"M-M4b\",\n    \"M-M5a\",\n    \"M-M5b\",\n    \"M-M6a\",\n    \"M-M6b\",\n    \"M-G\",\n    \"FR-O\",\n    \"FR-Y\",\n    \"FR-Y1\",\n    \"FR-Y2\",\n    \"FR-Y3\",\n    \"FR-T1\",\n    \"FR-T2\",\n    \"FR-T3\",\n    \"FR-Jr\",\n    \"FR-M1a\",\n    \"FR-M1b\",\n    \"FR-M2a\",\n    \"FR-M2b\",\n    \"FR-M3a\",\n    \"FR-M3b\",\n    \"FR-M4a\",\n    \"FR-M4b\",\n    \"FR-M5a\",\n    \"FR-M5b\",\n    \"FR-M6a\",\n    \"FR-M6b\",\n    \"FR-G\",\n    \"F-O\",\n    \"F-Y\",\n    \"F-Y1\",\n    \"F-Y2\",\n    \"F-Y3\",\n    \"F-T1\",\n    \"F-T2\",\n    \"F-T3\",\n    \"F-Jr\",\n    \"F-M1a\",\n    \"F-M1b\",\n    \"F-M2a\",\n    \"F-M2b\",\n    \"F-M3a\",\n    \"F-M3b\",\n    \"F-M4a\",\n    \"F-M4b\",\n    \"F-M5a\",\n    \"F-M5b\",\n    \"F-M6a\",\n    \"F-M6b\",\n    \"F-G\",\n  ],\n  weightClassesKgMen: [53, 59, 66, 74, 83, 93, 105, 120],\n  weightClassesKgWomen: [43, 47, 52, 57, 63, 72, 84],\n  weightClassesKgMx: [53, 59, 66, 74, 83, 93, 105, 120],\n  formula: \"IPF GL Points\",\n  ageCoefficients: \"FosterMcCulloch\",\n  combineSleevesAndWraps: false,\n  allow4thAttempts: false,\n};\n\nconst uspaDefaults: Partial<MeetState> = {\n  divisions: [\n    \"Open\",\n    \"Y4-12\",\n    \"J13-15\",\n    \"J16-17\",\n    \"J18-19\",\n    \"J20-23\",\n    \"S35-39\",\n    \"M40-44\",\n    \"M45-49\",\n    \"M50-54\",\n    \"M55-59\",\n    \"M60-64\",\n    \"M65-69\",\n    \"M70-74\",\n    \"M75-79\",\n    \"M80+\",\n  ],\n  weightClassesKgMen: [52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 125, 140],\n  weightClassesKgWomen: [44, 48, 52, 56, 60, 67.5, 75, 82.5, 90],\n  weightClassesKgMx: [52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 125, 140],\n  formula: \"Wilks2020\",\n  ageCoefficients: \"FosterMcCulloch\",\n  combineSleevesAndWraps: false,\n  allow4thAttempts: true,\n};\n\nconst wabdlDefaults: Partial<MeetState> = {\n  divisions: [\n    \"Open\",\n    \"T12-13\",\n    \"T14-15\",\n    \"T16-17\",\n    \"T18-19\",\n    \"J20-25\",\n    \"S33-39\",\n    \"M40-46\",\n    \"M47-53\",\n    \"M54-60\",\n    \"M61-67\",\n    \"M68-74\",\n    \"M75-79\",\n    \"M80-84\",\n    \"M85-89\",\n    \"M90+\",\n  ],\n  weightClassesKgMen: [44, 48, 52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 117.5, 125, 140],\n  weightClassesKgWomen: [44, 48, 52, 56, 60, 67.5, 75, 82.5, 90, 100],\n  weightClassesKgMx: [44, 48, 52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 117.5, 125, 140],\n  formula: \"Schwartz/Malone\",\n  ageCoefficients: \"FosterMcCulloch\",\n  combineSleevesAndWraps: false,\n  allow4thAttempts: true,\n};\n\nconst wpcDefaults: Partial<MeetState> = {\n  divisions: [\n    \"F_GCR\",\n    \"F_GCR_A\",\n    \"F_GEM\",\n    \"F_GEM_A\",\n    \"F_GES\",\n    \"F_GES_A\",\n    \"F_GR\",\n    \"F_GR_A\",\n    \"F_JCR\",\n    \"F_JCR_A\",\n    \"F_JEM\",\n    \"F_JEM_A\",\n    \"F_JES\",\n    \"F_JES_A\",\n    \"F_JR\",\n    \"F_JR_A\",\n    \"F_MCR_1\",\n    \"F_MCR_1_A\",\n    \"F_MCR_2\",\n    \"F_MCR_2_A\",\n    \"F_MCR_3\",\n    \"F_MCR_3_A\",\n    \"F_MCR_4\",\n    \"F_MCR_4_A\",\n    \"F_MCR_5\",\n    \"F_MCR_5_A\",\n    \"F_MCR_6\",\n    \"F_MCR_6_A\",\n    \"F_MCR_7\",\n    \"F_MCR_7_A\",\n    \"F_MCR_8\",\n    \"F_MCR_8_A\",\n    \"F_MCR_9\",\n    \"F_MCR_9_A\",\n    \"F_MCR_X\",\n    \"F_MCR_X_A\",\n    \"F_MEM_1\",\n    \"F_MEM_1_A\",\n    \"F_MEM_2\",\n    \"F_MEM_2_A\",\n    \"F_MEM_3\",\n    \"F_MEM_3_A\",\n    \"F_MEM_4\",\n    \"F_MEM_4_A\",\n    \"F_MEM_5\",\n    \"F_MEM_5_A\",\n    \"F_MEM_6\",\n    \"F_MEM_6_A\",\n    \"F_MEM_7\",\n    \"F_MEM_7_A\",\n    \"F_MEM_8\",\n    \"F_MEM_8_A\",\n    \"F_MEM_9\",\n    \"F_MEM_9_A\",\n    \"F_MEM_X\",\n    \"F_MEM_X_A\",\n    \"F_MES_1\",\n    \"F_MES_1_A\",\n    \"F_MES_2\",\n    \"F_MES_2_A\",\n    \"F_MES_3\",\n    \"F_MES_3_A\",\n    \"F_MES_4\",\n    \"F_MES_4_A\",\n    \"F_MES_5\",\n    \"F_MES_5_A\",\n    \"F_MES_6\",\n    \"F_MES_6_A\",\n    \"F_MES_7\",\n    \"F_MES_7_A\",\n    \"F_MES_8\",\n    \"F_MES_8_A\",\n    \"F_MES_9\",\n    \"F_MES_9_A\",\n    \"F_MES_X\",\n    \"F_MES_X_A\",\n    \"F_MR_1\",\n    \"F_MR_1_A\",\n    \"F_MR_2\",\n    \"F_MR_2_A\",\n    \"F_MR_3\",\n    \"F_MR_3_A\",\n    \"F_MR_4\",\n    \"F_MR_4_A\",\n    \"F_MR_5\",\n    \"F_MR_5_A\",\n    \"F_MR_6\",\n    \"F_MR_6_A\",\n    \"F_MR_7\",\n    \"F_MR_7_A\",\n    \"F_MR_8\",\n    \"F_MR_8_A\",\n    \"F_MR_9\",\n    \"F_MR_9_A\",\n    \"F_MR_X\",\n    \"F_MR_X_A\",\n    \"F_NEM\",\n    \"F_NR\",\n    \"F_OCR\",\n    \"F_OCR_A\",\n    \"F_OEM\",\n    \"F_OEM_A\",\n    \"F_OES\",\n    \"F_OES_A\",\n    \"F_OR\",\n    \"F_OR_A\",\n    \"F_SCR\",\n    \"F_SCR_A\",\n    \"F_SEM\",\n    \"F_SEM_A\",\n    \"F_SES\",\n    \"F_SES_A\",\n    \"F_SOR\",\n    \"F_SOR_A\",\n    \"F_SR\",\n    \"F_SR_A\",\n    \"F_TCR_1\",\n    \"F_TCR_1_A\",\n    \"F_TCR_2\",\n    \"F_TCR_2_A\",\n    \"F_TCR_3\",\n    \"F_TCR_3_A\",\n    \"F_TCR_X\",\n    \"F_TCR_X_A\",\n    \"F_TEM_1\",\n    \"F_TEM_1_A\",\n    \"F_TEM_2\",\n    \"F_TEM_2_A\",\n    \"F_TEM_3\",\n    \"F_TEM_3_A\",\n    \"F_TEM_X\",\n    \"F_TEM_X_A\",\n    \"F_TES_1\",\n    \"F_TES_1_A\",\n    \"F_TES_2\",\n    \"F_TES_2_A\",\n    \"F_TES_3\",\n    \"F_TES_3_A\",\n    \"F_TES_X\",\n    \"F_TES_X_A\",\n    \"F_TR_1\",\n    \"F_TR_1_A\",\n    \"F_TR_2\",\n    \"F_TR_2_A\",\n    \"F_TR_3\",\n    \"F_TR_3_A\",\n    \"F_TR_X\",\n    \"F_TR_X_A\",\n    \"F_YCR\",\n    \"F_YCR_A\",\n    \"F_YEM\",\n    \"F_YEM_A\",\n    \"F_YES\",\n    \"F_YES_A\",\n    \"F_YR\",\n    \"F_YR_A\",\n    \"M_GCR\",\n    \"M_GCR_A\",\n    \"M_GEM\",\n    \"M_GEM_A\",\n    \"M_GES\",\n    \"M_GES_A\",\n    \"M_GR\",\n    \"M_GR_A\",\n    \"M_JCR\",\n    \"M_JCR_A\",\n    \"M_JEM\",\n    \"M_JEM_A\",\n    \"M_JES\",\n    \"M_JES_A\",\n    \"M_JR\",\n    \"M_JR_A\",\n    \"M_MCR_1\",\n    \"M_MCR_1_A\",\n    \"M_MCR_2\",\n    \"M_MCR_2_A\",\n    \"M_MCR_3\",\n    \"M_MCR_3_A\",\n    \"M_MCR_4\",\n    \"M_MCR_4_A\",\n    \"M_MCR_5\",\n    \"M_MCR_5_A\",\n    \"M_MCR_6\",\n    \"M_MCR_6_A\",\n    \"M_MCR_7\",\n    \"M_MCR_7_A\",\n    \"M_MCR_8\",\n    \"M_MCR_8_A\",\n    \"M_MCR_9\",\n    \"M_MCR_9_A\",\n    \"M_MCR_X\",\n    \"M_MCR_X_A\",\n    \"M_MEM_1\",\n    \"M_MEM_1_A\",\n    \"M_MEM_2\",\n    \"M_MEM_2_A\",\n    \"M_MEM_3\",\n    \"M_MEM_3_A\",\n    \"M_MEM_4\",\n    \"M_MEM_4_A\",\n    \"M_MEM_5\",\n    \"M_MEM_5_A\",\n    \"M_MEM_6\",\n    \"M_MEM_6_A\",\n    \"M_MEM_7\",\n    \"M_MEM_7_A\",\n    \"M_MEM_8\",\n    \"M_MEM_8_A\",\n    \"M_MEM_9\",\n    \"M_MEM_9_A\",\n    \"M_MEM_X\",\n    \"M_MEM_X_A\",\n    \"M_MES_1\",\n    \"M_MES_1_A\",\n    \"M_MES_2\",\n    \"M_MES_2_A\",\n    \"M_MES_3\",\n    \"M_MES_3_A\",\n    \"M_MES_4\",\n    \"M_MES_4_A\",\n    \"M_MES_5\",\n    \"M_MES_5_A\",\n    \"M_MES_6\",\n    \"M_MES_6_A\",\n    \"M_MES_7\",\n    \"M_MES_7_A\",\n    \"M_MES_8\",\n    \"M_MES_8_A\",\n    \"M_MES_9\",\n    \"M_MES_9_A\",\n    \"M_MES_X\",\n    \"M_MES_X_A\",\n    \"M_MR_1\",\n    \"M_MR_1_A\",\n    \"M_MR_2\",\n    \"M_MR_2_A\",\n    \"M_MR_3\",\n    \"M_MR_3_A\",\n    \"M_MR_4\",\n    \"M_MR_4_A\",\n    \"M_MR_5\",\n    \"M_MR_5_A\",\n    \"M_MR_6\",\n    \"M_MR_6_A\",\n    \"M_MR_7\",\n    \"M_MR_7_A\",\n    \"M_MR_8\",\n    \"M_MR_8_A\",\n    \"M_MR_9\",\n    \"M_MR_9_A\",\n    \"M_MR_X\",\n    \"M_MR_X_A\",\n    \"M_NEM\",\n    \"M_NEM_A\",\n    \"M_NR\",\n    \"M_NR_A\",\n    \"M_OCR\",\n    \"M_OCR_A\",\n    \"M_OEM\",\n    \"M_OEM_A\",\n    \"M_OES\",\n    \"M_OES_A\",\n    \"M_OR\",\n    \"M_OR_A\",\n    \"M_PFEM\",\n    \"M_PFEM_A\",\n    \"M_PFR_A\",\n    \"M_SCR\",\n    \"M_SCR_A\",\n    \"M_SEM\",\n    \"M_SEM_A\",\n    \"M_SES\",\n    \"M_SES_A\",\n    \"M_SOEM\",\n    \"M_SOEM_A\",\n    \"M_SOR\",\n    \"M_SOR_A\",\n    \"M_SR\",\n    \"M_SR_A\",\n    \"M_TCR_1\",\n    \"M_TCR_1_A\",\n    \"M_TCR_2\",\n    \"M_TCR_2_A\",\n    \"M_TCR_3\",\n    \"M_TCR_3_A\",\n    \"M_TCR_X\",\n    \"M_TCR_X_A\",\n    \"M_TEM_1\",\n    \"M_TEM_1_A\",\n    \"M_TEM_2\",\n    \"M_TEM_2_A\",\n    \"M_TEM_3\",\n    \"M_TEM_3_A\",\n    \"M_TEM_X\",\n    \"M_TEM_X_A\",\n    \"M_TES_1\",\n    \"M_TES_1_A\",\n    \"M_TES_2\",\n    \"M_TES_2_A\",\n    \"M_TES_3\",\n    \"M_TES_3_A\",\n    \"M_TES_X\",\n    \"M_TES_X_A\",\n    \"M_TR_1\",\n    \"M_TR_1_A\",\n    \"M_TR_2\",\n    \"M_TR_2_A\",\n    \"M_TR_3\",\n    \"M_TR_3_A\",\n    \"M_TR_X\",\n    \"M_TR_X_A\",\n    \"M_YCR\",\n    \"M_YCR_A\",\n    \"M_YEM\",\n    \"M_YEM_A\",\n    \"M_YR\",\n    \"M_YR_A\",\n  ],\n  weightClassesKgMen: [52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 125, 140],\n  weightClassesKgWomen: [44, 48, 52, 56, 60, 67.5, 75, 82.5, 90],\n  weightClassesKgMx: [52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 125, 140],\n  formula: \"Glossbrenner\",\n  ageCoefficients: \"FosterMcCulloch\",\n  combineSleevesAndWraps: true,\n  allow4thAttempts: true,\n};\n\nconst wrpfDefaults: Partial<MeetState> = {\n  divisions: [\n    \"Open\",\n    \"Y5-13\",\n    \"T14-16\",\n    \"S17-19\",\n    \"J20-23\",\n    \"M40-44\",\n    \"M45-49\",\n    \"M50-54\",\n    \"M55-59\",\n    \"M60-64\",\n    \"M65-69\",\n    \"M70-74\",\n    \"M75-79\",\n    \"M80+\",\n  ],\n  weightClassesKgMen: [52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 125, 140],\n  weightClassesKgWomen: [44, 48, 52, 56, 60, 67.5, 75, 82.5, 90],\n  weightClassesKgMx: [52, 56, 60, 67.5, 75, 82.5, 90, 100, 110, 125, 140],\n  formula: \"Wilks\",\n  ageCoefficients: \"FosterMcCulloch\",\n  combineSleevesAndWraps: false,\n  allow4thAttempts: true,\n};\n\nclass AutoFillRules extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.handleSelectChange = this.handleSelectChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n\n    this.state = {\n      selectedOption: \"GPC\",\n    };\n  }\n\n  handleSelectChange = (event: FormEvent<FormControlTypeHack>) => {\n    const value = event.currentTarget.value as AutoFillOption;\n    // Only handle any valid values & assist the compiler in giving us a compile error if AutoFillOption has more values added\n    switch (value) {\n      case \"Traditional\":\n      case \"BP\":\n      case \"GPC\":\n      case \"SPF\":\n      case \"UPA\":\n      case \"USPA\":\n      case \"USAPL\":\n      case \"WABDL\":\n      case \"WPC\":\n      case \"WRPF\":\n        this.setState({ selectedOption: value });\n        break;\n\n      default:\n        checkExhausted(value);\n        throw new Error(`Expected a value that corresponds to an AutoFillOption, instead got \"${value}\"`);\n    }\n  };\n\n  handleClick = () => {\n    switch (this.state.selectedOption) {\n      case \"Traditional\":\n        this.props.updateMeet(traditionalDefaults);\n        this.props.onChange();\n        return;\n      case \"BP\":\n        this.props.updateMeet(bpDefaults);\n        this.props.onChange();\n        return;\n      case \"GPC\":\n        this.props.updateMeet(gpcDefaults);\n        this.props.onChange();\n        return;\n      case \"SPF\":\n        this.props.updateMeet(spfDefaults);\n        this.props.onChange();\n        return;\n      case \"UPA\":\n        this.props.updateMeet(upaDefaults);\n        this.props.onChange();\n        return;\n      case \"USAPL\":\n        this.props.updateMeet(usaplDefaults);\n        this.props.onChange();\n        return;\n      case \"USPA\":\n        this.props.updateMeet(uspaDefaults);\n        this.props.onChange();\n        return;\n      case \"WABDL\":\n        this.props.updateMeet(wabdlDefaults);\n        this.props.onChange();\n        return;\n      case \"WPC\":\n        this.props.updateMeet(wpcDefaults);\n        this.props.onChange();\n        return;\n      case \"WRPF\":\n        this.props.updateMeet(wrpfDefaults);\n        this.props.onChange();\n        return;\n      default:\n        checkExhausted(this.state.selectedOption);\n        return;\n    }\n  };\n\n  render() {\n    const lang = this.props.language;\n\n    const stringTraditional = getString(\"meet-setup.rules-traditional\", lang);\n    const stringBP = getString(\"meet-setup.rules-bp\", lang);\n    const stringGPC = getString(\"meet-setup.rules-gpc\", lang);\n    const stringSPF = getString(\"meet-setup.rules-spf\", lang);\n    const stringUPA = getString(\"meet-setup.rules-upa\", lang);\n    const stringUSAPL = getString(\"meet-setup.rules-usapl\", lang);\n    const stringUSPA = getString(\"meet-setup.rules-uspa\", lang);\n    const stringWABDL = getString(\"meet-setup.rules-wabdl\", lang);\n    const stringWPC = getString(\"meet-setup.rules-wpc\", lang);\n    const stringWRPF = getString(\"meet-setup.rules-wrpf\", lang);\n\n    return (\n      <div>\n        <FormGroup>\n          <Form.Label>\n            <FormattedMessage id=\"meet-setup.label-auto-fill-rules\" defaultMessage=\"Auto-Fill Rules\" />\n          </Form.Label>\n          <div>\n            <FormControl\n              as=\"select\"\n              onChange={this.handleSelectChange}\n              value={this.state.selectedOption}\n              style={{ width: \"70%\", display: \"inline-block\" }}\n              className=\"custom-select\"\n            >\n              <option key=\"Traditional\" value=\"Traditional\">\n                {stringTraditional}\n              </option>\n              <option key=\"BP\" value=\"BP\">\n                {stringBP}\n              </option>\n              <option key=\"GPC\" value=\"GPC\">\n                {stringGPC}\n              </option>\n              <option key=\"SPF\" value=\"SPF\">\n                {stringSPF}\n              </option>\n              <option key=\"UPA\" value=\"UPA\">\n                {stringUPA}\n              </option>\n              <option key=\"USAPL\" value=\"USAPL\">\n                {stringUSAPL}\n              </option>\n              <option key=\"USPA\" value=\"USPA\">\n                {stringUSPA}\n              </option>\n              <option key=\"WABDL\" value=\"WABDL\">\n                {stringWABDL}\n              </option>\n              <option key=\"WPC\" value=\"WPC\">\n                {stringWPC}\n              </option>\n              <option key=\"WRPF\" value=\"WRPF\">\n                {stringWRPF}\n              </option>\n            </FormControl>\n\n            <Button onClick={this.handleClick} variant=\"primary\" style={{ width: \"25%\", marginLeft: \"5%\" }}>\n              <FormattedMessage id=\"meet-setup.button-autofill\" defaultMessage=\"Auto-Fill\" />\n            </Button>\n          </div>\n        </FormGroup>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  federation: state.meet.federation,\n  language: state.language,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    updateMeet: (changes) => dispatch(updateMeet(changes)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AutoFillRules);\n","// vim: set ts=2 sts=2 sw=2 et:\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// The confirmation modal that pops up when the \"New Meet\" button is clicked.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Modal from \"react-bootstrap/Modal\";\nimport Button from \"react-bootstrap/Button\";\n\nimport { LinkContainer } from \"react-router-bootstrap\";\n\nimport { getString } from \"../../logic/strings\";\n\nimport { overwriteStore } from \"../../actions/globalActions\";\nimport rootReducer from \"../../reducers/rootReducer\";\n\nimport { Language } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { Dispatch } from \"redux\";\nimport { updateMeet } from \"../../actions/meetSetupActions\";\nimport { gpcDefaults } from \"../meet-setup/AutoFillRules\";\n\ninterface OwnProps {\n  show: boolean;\n  close: () => void;\n}\n\ninterface StateProps {\n  name: string;\n  language: Language;\n}\n\ninterface DispatchProps {\n  overwriteStore: (language: Language) => void;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nclass NewMeetModal extends React.Component<Props> {\n  render() {\n    return (\n      <Modal show={this.props.show} onHide={this.props.close}>\n        <Modal.Header closeButton>\n          <Modal.Title>\n            <FormattedMessage\n              id=\"home.new-meet-popup-title\"\n              defaultMessage=\"OK to clear {meetName}?\"\n              values={{ meetName: this.props.name }}\n            />\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <p>\n            <FormattedMessage\n              id=\"home.new-meet-popup-message-clear\"\n              defaultMessage=\"Starting a new meet will clear all unsaved data from {meetName}.\"\n              values={{ meetName: this.props.name }}\n            />\n          </p>\n          <p>\n            <FormattedMessage\n              id=\"home.new-meet-popup-message-sure\"\n              defaultMessage=\"Are you sure you want to continue?\"\n            />\n          </p>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button onClick={this.props.close} variant=\"light\">\n            {getString(\"common.button-close\", this.props.language)}\n          </Button>\n          <LinkContainer to=\"/meet-setup\">\n            <Button onClick={() => this.props.overwriteStore(this.props.language)} variant=\"primary\">\n              {getString(\"common.button-continue\", this.props.language)}\n            </Button>\n          </LinkContainer>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => {\n  return {\n    name: state.meet.name,\n    language: state.language,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    overwriteStore: (language: Language) => {\n      // Calling the combined root reducer with an empty object results in the child reducers\n      // being invoked with no argument, so they return their default states.\n      // We cast here since this is not how the reducer is really intended to work\n      const defaultStore = rootReducer({ language: language } as GlobalState, \"OVERWRITE_STORE\" as any);\n      dispatch(overwriteStore(defaultStore));\n      // GPC-NZ - Load the GPC defaults for all new meets.\n      dispatch(updateMeet(gpcDefaults));\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewMeetModal);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Shows a popup with an error message.\n// This exists because Chrome only allows window.alert() to execute once,\n// because Chrome is bad and Google should feel bad.\n//\n// This is intended only for use with buttons that load external resources,\n// like save files and CSV registration importation files.\n//\n// Regular old errors in widgets should be reported by setting their\n// validationState.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\n\ninterface OwnProps {\n  error: string;\n  title: string;\n  show: boolean;\n  close: () => void;\n}\n\ntype Props = OwnProps;\n\nclass ErrorModal extends React.Component<Props> {\n  render() {\n    return (\n      <Modal show={this.props.show} onHide={this.props.close}>\n        <Modal.Header closeButton>\n          <Modal.Title>{this.props.title}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <p>{this.props.error}</p>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"info\" onClick={this.props.close}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default connect(null, null)(ErrorModal);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Button from \"react-bootstrap/Button\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport { LinkContainer } from \"react-router-bootstrap\";\n\nimport { saveAs } from \"file-saver\";\n\nimport Logo from \"../components/lifting/gpc-nz-horizontal.png\";\n\nimport { FormattedMessage } from \"react-intl\";\nimport LanguageSelector from \"../components/translations/LanguageSelector\";\nimport { overwriteStore } from \"../actions/globalActions\";\n\nimport NewMeetModal from \"../components/home/NewMeetModal\";\nimport ErrorModal from \"../components/ErrorModal\";\n\nimport { getString } from \"../logic/strings\";\n\nimport { stateVersion, releaseVersion, releaseDate } from \"../versions\";\n\nimport styles from \"../components/common/ContentArea.module.scss\";\n\nimport { GlobalState } from \"../types/stateTypes\";\nimport { Dispatch } from \"redux\";\n\n// Temporary CSS, just for prototyping.\nconst centerConsole = {\n  maxWidth: 700,\n  marginRight: \"auto\",\n  marginLeft: \"auto\",\n  backgroundColor: \"black\",\n  color: \"gray\",\n};\n\ninterface StateProps {\n  redux: GlobalState;\n}\n\ninterface DispatchProps {\n  overwriteStore: (store: GlobalState) => void;\n}\n\ninterface InternalState {\n  showNewMeetModal: boolean;\n  // Controls the ErrorModal popup. Shown when error !== \"\".\n  error: string;\n}\n\ntype Props = StateProps & DispatchProps;\n\n// Gets links and buttons to have the same vertical spacing.\nconst buttonMargin = { marginBottom: \"8px\" };\n\nclass HomeContainer extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n    this.handleLoadClick = this.handleLoadClick.bind(this);\n    this.handleNewClick = this.handleNewClick.bind(this);\n    this.closeConfirmModal = this.closeConfirmModal.bind(this);\n    this.closeErrorModal = this.closeErrorModal.bind(this);\n    this.handleLoadFileInput = this.handleLoadFileInput.bind(this);\n    this.handleSaveClick = this.handleSaveClick.bind(this);\n    this.renderContinueButton = this.renderContinueButton.bind(this);\n\n    this.state = { showNewMeetModal: false, error: \"\" };\n  }\n\n  // The file input is hidden, and we want to use a button to activate it.\n  // This event handler is just a proxy to call the *real* event handler.\n  handleLoadClick = () => {\n    const loadhelper = document.getElementById(\"loadhelper\");\n    if (loadhelper !== null) {\n      loadhelper.click();\n    }\n  };\n\n  // When we click the new meet button\n  // Open the popover modal to confirm the user is willing to delete any current progress\n  handleNewClick = () => {\n    this.setState({ showNewMeetModal: true });\n  };\n\n  // Close the new meet confirmation modal\n  closeConfirmModal = () => {\n    this.setState({ showNewMeetModal: false });\n  };\n\n  closeErrorModal = () => {\n    this.setState({ error: \"\" });\n  };\n\n  // Called when a file is selected.\n  handleLoadFileInput = () => {\n    // Load the element and make sure it's an HTMLInputElement.\n    const loadHelper = document.getElementById(\"loadhelper\");\n    if (loadHelper === null || !(loadHelper instanceof HTMLInputElement) || loadHelper.files === null) {\n      return;\n    }\n\n    const selectedFile = loadHelper.files[0];\n    const language = this.props.redux.language;\n    const rememberThis = this;\n\n    const reader = new FileReader();\n    reader.onload = function (event: any) {\n      let errored = false;\n      try {\n        const obj = JSON.parse(event.target.result);\n\n        // Basic error checking, make sure it's the right format.\n        if (\n          obj.language === undefined ||\n          obj.meet === undefined ||\n          obj.registration === undefined ||\n          obj.lifting === undefined\n        ) {\n          errored = true;\n        } else {\n          rememberThis.props.overwriteStore(obj);\n        }\n      } catch (err) {\n        errored = true;\n      }\n\n      if (errored) {\n        const error = getString(\"error.invalid-openlifter\", language);\n        rememberThis.setState({ error: error });\n      }\n    };\n    reader.readAsText(selectedFile);\n\n    // this will reset the input field so the same file can be selected again. Without this picking the same file for import silently does nothing\n    loadHelper.value = \"\";\n  };\n\n  handleSaveClick = () => {\n    let meetname = this.props.redux.meet.name;\n    if (meetname === \"\") {\n      meetname = getString(\"common.unnamed-filename\", this.props.redux.language);\n    }\n    meetname = meetname.replace(/ /g, \"-\");\n\n    const state = JSON.stringify(this.props.redux);\n    const blob = new Blob([state], { type: \"application/json;charset=utf-8\" });\n    saveAs(blob, meetname + \".openlifter\");\n  };\n\n  renderContinueButton = () => {\n    const meetname = this.props.redux.meet.name;\n    if (meetname === \"\") {\n      // Unnamed or unstarted meet, so don't render a continue button\n      return;\n    }\n    return (\n      <LinkContainer to=\"/meet-setup\">\n        <Button variant=\"primary\" block style={buttonMargin}>\n          <FormattedMessage\n            id=\"home.button-continue\"\n            defaultMessage=\"Continue {meetName}\"\n            values={{ meetName: meetname }}\n          />\n        </Button>\n      </LinkContainer>\n    );\n  };\n\n  render() {\n    let newMeetButton = (\n      <Button variant=\"primary\" block onClick={this.handleNewClick} style={buttonMargin}>\n        <FormattedMessage id=\"home.button-new-meet\" defaultMessage=\"New Meet\" />\n      </Button>\n    );\n\n    // If no meet is active, make the button just a LinkContainer.\n    if (!this.props.redux.meet.name) {\n      newMeetButton = <LinkContainer to=\"/meet-setup\">{newMeetButton}</LinkContainer>;\n    }\n\n    const wrongVersion: boolean = this.props.redux.versions.stateVersion !== stateVersion;\n    const dataReleaseVersion = this.props.redux.versions.releaseVersion;\n\n    const language = this.props.redux.language;\n\n    let warning = null;\n    if (wrongVersion === true) {\n      warning = (\n        <h3>\n          <p>\n            <b>{getString(\"common.danger-allcaps\", language)}</b>\n          </p>\n          <p>\n            <FormattedMessage\n              id=\"home.wrong-version-warning\"\n              defaultMessage=\"The loaded meet was made in OpenLifter {oldVersion}. That format is incompatible with OpenLifter {thisVersion}.\"\n              values={{ oldVersion: dataReleaseVersion, thisVersion: releaseVersion }}\n            />\n          </p>\n        </h3>\n      );\n    }\n\n    return (\n      <Card style={centerConsole} className={styles.contentArea}>\n        <NewMeetModal show={this.state.showNewMeetModal} close={this.closeConfirmModal} />\n        <ErrorModal\n          error={this.state.error}\n          title={getString(\"home.error-load-popup-title\", language)}\n          show={this.state.error !== \"\"}\n          close={this.closeErrorModal}\n        />\n\n        <Card.Header>\n          <img alt=\"GPC-NZ\" src={Logo} style={{ width: \"100%\", backgroundColor: \"black\" }} />\n        </Card.Header>\n\n        <Card.Body>\n          <Container>\n            <Row>{warning}</Row>\n            <Row style={buttonMargin}>\n              <Col md={8}>\n                {wrongVersion === false ? (\n                  this.renderContinueButton()\n                ) : (\n                  <a href={\"https://www.openlifter.com/releases/\" + dataReleaseVersion}>\n                    <Button variant=\"success\" block>\n                      <FormattedMessage\n                        id=\"home.button-switch-version\"\n                        defaultMessage=\"Switch to OpenLifter {otherVersion}\"\n                        values={{ otherVersion: dataReleaseVersion }}\n                      />\n                    </Button>\n                  </a>\n                )}\n              </Col>\n              <Col md={4}>\n                <LanguageSelector />\n              </Col>\n            </Row>\n\n            <Row>\n              <Col md={8}>\n                <div>\n                  {newMeetButton}\n\n                  <Button variant=\"warning\" block onClick={this.handleLoadClick} style={buttonMargin}>\n                    <FormattedMessage id=\"home.button-load-from-file\" defaultMessage=\"Load from File\" />\n                  </Button>\n                  <Button variant=\"success\" block onClick={this.handleSaveClick} style={buttonMargin}>\n                    <FormattedMessage id=\"home.button-save-tofile\" defaultMessage=\"Save to File\" />\n                  </Button>\n                </div>\n              </Col>\n\n              <Col md={4}>\n                <a\n                  href=\"https://gitlab.com/openpowerlifting/openlifter/issues/new\"\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                >\n                  <Button variant=\"outline-secondary\" block style={buttonMargin}>\n                    <FormattedMessage id=\"home.button-report-issue\" defaultMessage=\"Report an Issue\" />\n                  </Button>\n                </a>\n                <a href=\"https://www.openlifter.com/support\" rel=\"noopener noreferrer\" target=\"_blank\">\n                  <Button variant=\"outline-secondary\" block style={buttonMargin}>\n                    <FormattedMessage id=\"home.button-support\" defaultMessage=\"Official Support\" />\n                  </Button>\n                </a>\n                <a href=\"https://gitlab.com/openpowerlifting/openlifter\" rel=\"noopener noreferrer\" target=\"_blank\">\n                  <Button variant=\"outline-secondary\" block style={buttonMargin}>\n                    <FormattedMessage id=\"home.button-source\" defaultMessage=\"Full Source Code\" />\n                  </Button>\n                </a>\n                <LinkContainer to=\"/about\">\n                  <Button variant=\"outline-secondary\" block style={buttonMargin}>\n                    <FormattedMessage id=\"home.button-credits\" defaultMessage=\"Credits and License\" />\n                  </Button>\n                </LinkContainer>\n              </Col>\n            </Row>\n          </Container>\n        </Card.Body>\n\n        <Card.Footer>\n          <h4 style={{ textAlign: \"center\" }}>\n            <FormattedMessage\n              id=\"home.version-date\"\n              defaultMessage=\"Version {releaseVersion}, {releaseDate}.\"\n              values={{\n                releaseVersion: releaseVersion,\n                releaseDate: releaseDate,\n              }}\n            />\n          </h4>\n        </Card.Footer>\n\n        <input\n          id=\"loadhelper\"\n          type=\"file\"\n          accept=\".openlifter,.openlifter.txt\"\n          style={{ display: \"none\" }}\n          onChange={this.handleLoadFileInput}\n        />\n      </Card>\n    );\n  }\n}\n\n// Because we want to save the state, separate it out specifically\n// into a \"redux\" prop. Otherwise it gets contaminated by other props.\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  redux: {\n    ...state,\n  },\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    overwriteStore: (store) => dispatch(overwriteStore(store)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomeContainer);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// This defines a generic text input that colors itself based upon a validation\n// function passed in OwnProps. On blur, an onSuccess() callback is called\n// if validation passes; otherwise, the text input reverts to the initial state.\n\nimport React from \"react\";\n\nimport Form from \"react-bootstrap/Form\";\n\nimport { Validation } from \"../types/dataTypes\";\nimport { FormControlTypeHack, assertString } from \"../types/utils\";\n\ninterface OwnProps {\n  type?: string; // The type of input, such as \"text\" or \"number\". Defaults to \"text\".\n  label?: string; // Form label text, shown above the input.\n  initialValue: string;\n  placeholder?: string;\n  disabled?: boolean;\n  validate: (value?: string) => Validation;\n  onSuccess: (value: string) => void;\n\n  // By default, the bottom margin is removed so that this can be used in tables.\n  // Setting this to true adds the margin back. Defaults to false.\n  keepMargin?: boolean;\n}\n\ntype Props = Readonly<OwnProps>;\n\ninterface InternalState {\n  value: string;\n}\n\nclass BirthDateInput extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.validate = this.validate.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n\n    this.state = {\n      value: props.initialValue,\n    };\n  }\n\n  validate = (): Validation => {\n    return this.props.validate(this.state.value);\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === \"Enter\") {\n      event.currentTarget.blur();\n    }\n  };\n\n  handleChange = (event: React.FormEvent<FormControlTypeHack>) => {\n    if (assertString(event.currentTarget.value)) {\n      this.setState({ value: event.currentTarget.value });\n    }\n  };\n\n  handleBlur = () => {\n    if (this.validate() === \"error\") {\n      this.setState({ value: this.props.initialValue });\n      return;\n    }\n\n    if (this.props.initialValue !== this.state.value) {\n      this.props.onSuccess(this.state.value);\n    }\n  };\n\n  render() {\n    const validation: Validation = this.validate();\n    const maybeLabel = this.props.label ? <Form.Label>{this.props.label}</Form.Label> : undefined;\n\n    return (\n      <Form.Group style={this.props.keepMargin === true ? undefined : { marginBottom: 0 }}>\n        {maybeLabel}\n        <Form.Control\n          type={this.props.type ? this.props.type : \"text\"}\n          placeholder={this.props.placeholder}\n          disabled={this.props.disabled === true ? true : undefined}\n          value={this.state.value}\n          onKeyDown={this.handleKeyDown}\n          onChange={this.handleChange}\n          onBlur={this.handleBlur}\n          isValid={validation === \"success\"}\n          isInvalid={validation === \"error\"}\n          className={validation === \"warning\" ? \"is-warning\" : undefined}\n        />\n      </Form.Group>\n    );\n  }\n}\n\nexport default BirthDateInput;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the MeetDate date picker.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport DatePicker from \"react-datepicker\";\nimport { registerLocale } from \"react-datepicker\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Form from \"react-bootstrap/Form\";\nimport FormGroup from \"react-bootstrap/FormGroup\";\n\nimport { setMeetDate } from \"../../actions/meetSetupActions\";\nimport { iso8601ToLocalDate, localDateToIso8601 } from \"../../logic/date\";\n\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { Language } from \"../../types/dataTypes\";\nimport { Dispatch } from \"redux\";\n\n// The react-datepicker gets locale information from the \"date-fns\" package.\n// In order for it to understand what our Languages are, we have to register\n// those locales. The react-datepicker provides a helper function to do this.\nimport de from \"date-fns/locale/de\";\nimport el from \"date-fns/locale/el\";\nimport eo from \"date-fns/locale/eo\";\nimport es from \"date-fns/locale/es\";\nimport fr from \"date-fns/locale/fr\";\nimport hr from \"date-fns/locale/hr\";\nimport it from \"date-fns/locale/it\";\nimport lt from \"date-fns/locale/lt\";\nimport nl from \"date-fns/locale/nl\";\nimport pt from \"date-fns/locale/pt\";\nimport ru from \"date-fns/locale/ru\";\nimport tr from \"date-fns/locale/tr\";\nimport uk from \"date-fns/locale/uk\";\nimport zh_CN from \"date-fns/locale/zh-CN\";\n\n// Register the date-fns/locales with the DatePicker.\nregisterLocale(\"de\", de);\nregisterLocale(\"el\", el);\nregisterLocale(\"eo\", eo);\nregisterLocale(\"es\", es);\nregisterLocale(\"fr\", fr);\nregisterLocale(\"hr\", hr);\nregisterLocale(\"it\", it);\nregisterLocale(\"lt\", lt);\nregisterLocale(\"nl\", nl);\nregisterLocale(\"pt\", pt);\nregisterLocale(\"ru\", ru);\nregisterLocale(\"tr\", tr);\nregisterLocale(\"uk\", uk);\nregisterLocale(\"zh-Hans\", zh_CN);\n\ninterface StateProps {\n  date: string;\n  language: Language;\n}\n\ninterface DispatchProps {\n  setMeetDate: (date: Date) => void;\n}\n\ntype Props = StateProps & DispatchProps;\n\nclass MeetDate extends React.Component<Props> {\n  render() {\n    // The DatePicker manipulates a Date object in local time.\n    const initialDate: Date = iso8601ToLocalDate(this.props.date);\n\n    return (\n      <FormGroup>\n        <Form.Label>\n          <FormattedMessage id=\"meet-setup.start-date\" defaultMessage=\"Start Date\" />\n        </Form.Label>\n        <div style={{ textAlign: \"center\" }}>\n          <DatePicker\n            dateFormat=\"yyyy-MM-dd\"\n            selected={initialDate}\n            onChange={this.props.setMeetDate}\n            inline\n            locale={this.props.language}\n          />\n        </div>\n      </FormGroup>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  date: state.meet.date,\n  language: state.language,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    setMeetDate: (date) => {\n      dispatch(setMeetDate(localDateToIso8601(date)));\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MeetDate);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// This is a generic number input with a minus and a plus surrounding it.\n\nimport React, { FormEvent } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMinus, faPlus } from \"@fortawesome/free-solid-svg-icons\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport InputGroup from \"react-bootstrap/InputGroup\";\n\nimport { string2number, displayNumber } from \"../../logic/units\";\n\nimport { FormControlTypeHack, assertString } from \"../../types/utils\";\nimport { Language, Validation } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\n\ninterface OwnProps {\n  initialValue: number; // Starting value when rendering the widget.\n\n  // Properties related to validation.\n  step: number; // Amount with which +/- buttons should increment or decrement.\n  validate: (n: number) => Validation; // Verifies that the number is valid.\n  onChange: (n: number) => void; // Callback. Only validated numbers are reported.\n\n  // Properties related to display.\n  label?: JSX.Element | string; // A label to display on the element.\n  marginBottom?: string; // Allows overriding margin (Forms by default have margins).\n}\n\ninterface StateProps {\n  language: Language;\n}\n\ntype Props = OwnProps & StateProps;\n\ninterface InternalState {\n  value: string;\n}\n\nclass NumberInput extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    // Handles manual text entry.\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n\n    // Handles the +/- buttons on the side of the input.\n    this.handleDecrement = this.handleDecrement.bind(this);\n    this.handleIncrement = this.handleIncrement.bind(this);\n    this.handleStep = this.handleStep.bind(this);\n\n    // Internal state, for purposes of validation.\n    // To avoid confusion (auto-rounding) when typing, just store a string.\n    this.state = {\n      value: displayNumber(props.initialValue, props.language),\n    };\n  }\n\n  // Used when the user manually types into the input box.\n  handleChange = (event: FormEvent<FormControlTypeHack>): void => {\n    const value = event.currentTarget.value;\n    if (assertString(value)) {\n      this.setState({ value: value });\n    }\n  };\n\n  // Used when the user removes focus from the input box.\n  handleBlur = (event: React.FocusEvent<HTMLInputElement>) => {\n    const num: number = string2number(event.currentTarget.value);\n    if (this.props.validate(num) !== \"error\") {\n      this.props.onChange(num);\n    }\n  };\n\n  handleDecrement = (): void => {\n    this.handleStep(this.props.step * -1);\n  };\n\n  handleIncrement = (): void => {\n    this.handleStep(this.props.step);\n  };\n\n  handleStep = (step: number): void => {\n    let n: number = string2number(this.state.value) + step;\n\n    // Make sure that the new value is a multiple of the step.\n    const multiple = Math.abs(step);\n    if (step > 0) {\n      n = Math.floor(n / multiple) * multiple;\n    } else {\n      n = Math.ceil(n / multiple) * multiple;\n    }\n\n    if (this.props.validate(n) !== \"error\") {\n      this.setState({ value: displayNumber(n, this.props.language) });\n      this.props.onChange(n);\n    }\n  };\n\n  render() {\n    const validation: Validation = this.props.validate(string2number(this.state.value));\n\n    return (\n      <Form.Group style={{ marginBottom: `${this.props.marginBottom || undefined}` }}>\n        {this.props.label && <Form.Label>{this.props.label}</Form.Label>}\n        <InputGroup>\n          <InputGroup.Prepend>\n            <Button variant=\"outline-secondary\" style={{ borderRight: \"0px\" }} onMouseDown={this.handleDecrement}>\n              <FontAwesomeIcon icon={faMinus} />\n            </Button>\n          </InputGroup.Prepend>\n          <Form.Control\n            value={this.state.value}\n            onChange={this.handleChange}\n            onBlur={this.handleBlur}\n            isValid={validation === \"success\"}\n            isInvalid={validation === \"error\"}\n            className={validation === \"warning\" ? \"is-warning\" : undefined}\n          />\n          <InputGroup.Append>\n            <Button variant=\"outline-secondary\" style={{ borderLeft: \"0px\" }} onMouseDown={this.handleIncrement}>\n              <FontAwesomeIcon icon={faPlus} />\n            </Button>\n          </InputGroup.Append>\n        </InputGroup>\n      </Form.Group>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => {\n  return {\n    language: state.language,\n  };\n};\n\nexport default connect(mapStateToProps)(NumberInput);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Dispatch } from \"redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport NumberInput from \"../common/NumberInput\";\n\nimport { setLengthDays } from \"../../actions/meetSetupActions\";\n\nimport { Validation } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\n\ninterface StateProps {\n  lengthDays: number;\n}\n\ninterface DispatchProps {\n  setLengthDays: (days: number) => any;\n}\n\ntype Props = StateProps & DispatchProps;\n\ninterface InternalState {\n  initialValue: number;\n}\n\nclass MeetLength extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.validate = this.validate.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n\n    this.state = {\n      initialValue: this.props.lengthDays,\n    };\n  }\n\n  validate = (n: number): Validation => {\n    if (!Number.isInteger(n) || n <= 0 || n > 14) {\n      return \"error\";\n    }\n    return \"success\";\n  };\n\n  handleChange = (n: number): void => {\n    if (this.validate(n)) {\n      this.props.setLengthDays(n);\n    }\n  };\n\n  render() {\n    return (\n      <NumberInput\n        initialValue={this.state.initialValue}\n        step={1}\n        validate={this.validate}\n        onChange={this.handleChange}\n        label={<FormattedMessage id=\"meet-setup.length-days\" defaultMessage=\"Days of Lifting\" />}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  lengthDays: state.meet.lengthDays,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    setLengthDays: (days) => dispatch(setLengthDays(days)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MeetLength);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport { setPlatformsOnDays } from \"../../actions/meetSetupActions\";\n\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { Validation } from \"../../types/dataTypes\";\nimport { Dispatch } from \"redux\";\nimport NumberInput from \"../common/NumberInput\";\n\ninterface OwnProps {\n  day: number;\n}\n\ninterface StateProps {\n  platformsOnDays: ReadonlyArray<number>;\n}\n\ninterface DispatchProps {\n  setPlatformsOnDays: (day: number, count: number) => void;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\ninterface InternalState {\n  initialValue: number;\n}\n\nclass PlatformCount extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.validate = this.validate.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n\n    this.state = {\n      initialValue: this.props.platformsOnDays[this.props.day - 1],\n    };\n  }\n\n  validate = (n: number): Validation => {\n    if (!Number.isInteger(n) || n <= 0 || n > 20) {\n      return \"error\";\n    }\n    return \"success\";\n  };\n\n  handleChange = (n: number): void => {\n    if (this.validate(n) === \"success\") {\n      this.props.setPlatformsOnDays(this.props.day, n);\n    }\n  };\n\n  render() {\n    return (\n      <NumberInput\n        initialValue={this.state.initialValue}\n        step={1}\n        validate={this.validate}\n        onChange={this.handleChange}\n        label={\n          <FormattedMessage\n            id=\"meet-setup.platforms-on-day\"\n            defaultMessage=\"Platforms on Day {number}\"\n            values={{\n              number: this.props.day,\n            }}\n          />\n        }\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  platformsOnDays: state.meet.platformsOnDays,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    setPlatformsOnDays: (day, count) => dispatch(setPlatformsOnDays(day, count)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlatformCount);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport PlatformCount from \"./PlatformCount\";\n\nimport { GlobalState } from \"../../types/stateTypes\";\n\ninterface StateProps {\n  lengthDays: number;\n}\n\ntype Props = StateProps;\n\nclass PlatformCounts extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n    this.createPlatformInputs = this.createPlatformInputs.bind(this);\n  }\n\n  createPlatformInputs = () => {\n    const inputs = [];\n    const lengthDays = this.props.lengthDays;\n    for (let i = 1; i <= lengthDays; ++i) {\n      inputs.push(<PlatformCount key={i} day={i} />);\n    }\n    return inputs;\n  };\n\n  render() {\n    return <div>{this.createPlatformInputs()}</div>;\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  lengthDays: state.meet.lengthDays,\n});\n\nexport default connect(mapStateToProps)(PlatformCounts);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Form from \"react-bootstrap/Form\";\n\nimport CreatableSelect from \"react-select/creatable\";\n\nimport { getString } from \"../../logic/strings\";\n\nimport { setDivisions } from \"../../actions/meetSetupActions\";\n\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { Language } from \"../../types/dataTypes\";\nimport { Dispatch } from \"redux\";\nimport { ValueType } from \"react-select\";\n\nconst components = {\n  DropdownIndicator: null,\n};\n\ninterface OptionType {\n  label: string;\n  value: string;\n}\n\nconst createOption = (label: string): OptionType => ({\n  label,\n  value: label,\n});\n\ninterface StateProps {\n  divisions: ReadonlyArray<string>;\n  language: Language;\n}\n\ninterface DispatchProps {\n  setDivisions: (divisions: ReadonlyArray<string>) => void;\n}\n\ntype Props = StateProps & DispatchProps;\n\ninterface InternalState {\n  inputValue: string;\n  value: Array<OptionType>;\n}\n\nclass DivisionSelect extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    const objarray = [];\n    for (let i = 0; i < props.divisions.length; i++) {\n      const division = props.divisions[i];\n      objarray.push({ value: division, label: division });\n    }\n\n    this.state = {\n      inputValue: \"\",\n      value: objarray,\n    };\n\n    this.maybeUpdateRedux = this.maybeUpdateRedux.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  // Updates the Redux store if a division was added or removed.\n  // Since updates are synchronous, we can simply check length.\n  maybeUpdateRedux = (objarray: Array<OptionType>): void => {\n    // objarray is a list of {value: \"foo\", label: \"foo\"} objects.\n    if (objarray.length === this.props.divisions.length) {\n      return;\n    }\n\n    // The divisions changed: save to Redux.\n    const divisions = [];\n    for (let i = 0; i < objarray.length; i++) {\n      divisions.push(objarray[i].label);\n    }\n    this.props.setDivisions(divisions);\n  };\n\n  // Handles the case of deleting an existing division.\n  handleChange = (value: ValueType<OptionType> | null): void => {\n    if (value instanceof Array) {\n      this.setState({ value: value });\n      this.maybeUpdateRedux(value);\n    } else if (value === null) {\n      this.setState({ value: [] });\n      this.maybeUpdateRedux([]);\n    }\n  };\n\n  // Reflects the current typing status in the state.\n  handleInputChange = (inputValue: string): void => {\n    this.setState({ inputValue: inputValue });\n  };\n\n  // Handles the case of creating a new division.\n  handleKeyDown = (event: React.KeyboardEvent<HTMLElement>): void => {\n    const { inputValue, value } = this.state;\n    if (!inputValue) return;\n    if (event.key === \"Enter\" || event.key === \"Tab\") {\n      // Disallow creating redundant divisions.\n      for (let i = 0; i < value.length; i++) {\n        if (value[i].label === inputValue) {\n          // Silently drop the redundant division.\n          this.setState({ inputValue: \"\" });\n          event.preventDefault();\n          return;\n        }\n      }\n\n      const newValue = [...value, createOption(inputValue)];\n      this.setState({\n        inputValue: \"\",\n        value: newValue,\n      });\n      this.maybeUpdateRedux(newValue);\n      event.preventDefault();\n    }\n  };\n\n  render() {\n    const { inputValue, value } = this.state;\n    const placeholder = getString(\"meet-setup.divisions-placeholder\", this.props.language);\n    return (\n      <Form.Group>\n        <Form.Label>\n          <FormattedMessage id=\"meet-setup.divisions-label\" defaultMessage=\"Divisions (prefer short codes!)\" />\n        </Form.Label>\n        <CreatableSelect\n          /* Lock this control, this version will use hardcoded divisions so that the records logic around divisions works */\n          isDisabled={true}\n          components={components}\n          inputValue={inputValue}\n          isMulti\n          menuIsOpen={false}\n          onChange={this.handleChange}\n          onInputChange={this.handleInputChange}\n          onKeyDown={this.handleKeyDown}\n          placeholder={placeholder}\n          value={value}\n        />\n      </Form.Group>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  divisions: state.meet.divisions,\n  language: state.language,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    setDivisions: (divisions) => dispatch(setDivisions(divisions)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DivisionSelect);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Form from \"react-bootstrap/Form\";\n\nimport CreatableSelect from \"react-select/creatable\";\n\nimport { getString } from \"../../logic/strings\";\nimport { string2number, displayWeight } from \"../../logic/units\";\n\nimport { setWeightClasses } from \"../../actions/meetSetupActions\";\n\nimport { Language, Sex } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { checkExhausted } from \"../../types/utils\";\nimport { Dispatch } from \"redux\";\nimport { ValueType } from \"react-select\";\n\nconst components = {\n  DropdownIndicator: null,\n};\n\ntype OptionType = {\n  label: string;\n  value: string;\n};\n\nconst createOption = (label: string): OptionType => ({\n  label,\n  value: label.replace(\",\", \".\"),\n});\n\ninterface OwnProps {\n  label: string;\n  sex: Sex;\n}\n\ninterface StateProps {\n  classes: ReadonlyArray<number>;\n  language: Language;\n}\n\ninterface DispatchProps {\n  setWeightClasses: (sex: Sex, classesKg: ReadonlyArray<number>) => void;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\ninterface InternalState {\n  inputValue: string;\n  value: Array<OptionType>;\n}\n\nclass WeightClassesSelect extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    const objarray: Array<OptionType> = [];\n    for (let i = 0; i < props.classes.length; i++) {\n      const c = displayWeight(props.classes[i], props.language);\n      objarray.push(createOption(c));\n    }\n\n    this.state = {\n      inputValue: \"\",\n      value: objarray,\n    };\n\n    this.maybeUpdateRedux = this.maybeUpdateRedux.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  // Updates the Redux store if a weightclass was added or removed.\n  // Since updates are synchronous, we can simply check length.\n  maybeUpdateRedux = (objarray: Array<OptionType>): void => {\n    if (objarray.length === this.props.classes.length) {\n      return;\n    }\n\n    // The classes changed: save to Redux.\n    const classes = [];\n    for (let i = 0; i < objarray.length; i++) {\n      classes.push(Number(objarray[i].value));\n    }\n    this.props.setWeightClasses(this.props.sex, classes);\n  };\n\n  handleChange = (value: ValueType<OptionType> | null): void => {\n    if (value instanceof Array) {\n      this.setState({ value: value });\n      this.maybeUpdateRedux(value);\n    } else if (value === null) {\n      this.setState({ value: [] });\n      this.maybeUpdateRedux([]);\n    }\n  };\n\n  // Reflects the current typing status in the state.\n  handleInputChange = (inputValue: string): void => {\n    this.setState({ inputValue: inputValue });\n  };\n\n  // Handles the case of creating a new weightclass.\n  handleKeyDown = (event: React.KeyboardEvent<HTMLElement>): void => {\n    const { inputValue, value } = this.state;\n    if (!inputValue) return;\n    if (event.key === \"Enter\" || event.key === \"Tab\") {\n      const asNumber = string2number(inputValue);\n\n      // Disallow creating non-numeric inputs.\n      if (isNaN(asNumber) || !isFinite(asNumber)) {\n        this.setState({ inputValue: \"\" });\n        event.preventDefault();\n        return;\n      }\n\n      // Disallow negative inputs.\n      // The string check is for negative zero.\n      if (asNumber < 0 || inputValue.includes(\"-\")) {\n        this.setState({ inputValue: \"\" });\n        event.preventDefault();\n        return;\n      }\n\n      // Disallow creating redundant classes.\n      for (let i = 0; i < value.length; i++) {\n        if (string2number(value[i].label) === asNumber) {\n          // Silently drop the redundant weightclass.\n          this.setState({ inputValue: \"\" });\n          event.preventDefault();\n          return;\n        }\n      }\n\n      // Sort the new value into the array.\n      let newValue = [...value, createOption(inputValue)];\n      newValue = newValue.sort((a, b) => Number(a.value) - Number(b.value));\n\n      this.setState({\n        inputValue: \"\",\n        value: newValue,\n      });\n      this.maybeUpdateRedux(newValue);\n      event.preventDefault();\n    }\n  };\n\n  render() {\n    const { inputValue, value } = this.state;\n    const placeholder = getString(\"meet-setup.placeholder-classes\", this.props.language);\n\n    return (\n      <Form.Group>\n        <Form.Label>{this.props.label}</Form.Label>\n        <CreatableSelect\n          components={components}\n          inputValue={inputValue}\n          isMulti\n          menuIsOpen={false}\n          onChange={this.handleChange}\n          onInputChange={this.handleInputChange}\n          onKeyDown={this.handleKeyDown}\n          placeholder={placeholder}\n          value={value}\n        />\n      </Form.Group>\n    );\n  }\n}\n\nconst selectClassesBySex = (sex: Sex, state: GlobalState): ReadonlyArray<number> => {\n  switch (sex) {\n    case \"M\":\n      return state.meet.weightClassesKgMen;\n    case \"F\":\n      return state.meet.weightClassesKgWomen;\n    case \"Mx\":\n      return state.meet.weightClassesKgMx;\n    default:\n      checkExhausted(sex);\n      return state.meet.weightClassesKgMen;\n  }\n};\n\nconst mapStateToProps = (state: GlobalState, ownProps: OwnProps): StateProps => {\n  return {\n    classes: selectClassesBySex(ownProps.sex, state),\n    language: state.language,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    setWeightClasses: (sex, classesKg) => dispatch(setWeightClasses(sex, classesKg)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WeightClassesSelect);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { setBarAndCollarsWeightKg } from \"../../actions/meetSetupActions\";\nimport { getString } from \"../../logic/strings\";\nimport { kg2lbs, lbs2kg } from \"../../logic/units\";\n\nimport { Language, Lift, Validation } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { checkExhausted } from \"../../types/utils\";\nimport { Dispatch } from \"redux\";\nimport { SetBarAndCollarsWeightKgAction } from \"../../types/actionTypes\";\nimport NumberInput from \"../common/NumberInput\";\n\ninterface OwnProps {\n  lift: Lift;\n}\n\ninterface StateProps {\n  inKg: boolean;\n  squatBarAndCollarsWeightKg: number;\n  benchBarAndCollarsWeightKg: number;\n  deadliftBarAndCollarsWeightKg: number;\n  language: Language;\n}\n\ninterface DispatchProps {\n  setBarAndCollarsWeightKg: (lift: Lift, weight: number) => SetBarAndCollarsWeightKgAction;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\ninterface InternalState {\n  initialValue: number;\n}\n\nclass BarAndCollarsWeightKg extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.validate = this.validate.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n\n    const weight = this.getInitialBarAndCollarsWeightKg(this.props.lift);\n\n    this.state = {\n      initialValue: this.props.inKg ? weight : kg2lbs(weight),\n    };\n  }\n\n  getInitialBarAndCollarsWeightKg = (lift: Lift): number => {\n    switch (lift) {\n      case \"S\":\n        return this.props.squatBarAndCollarsWeightKg;\n      case \"B\":\n        return this.props.benchBarAndCollarsWeightKg;\n      case \"D\":\n        return this.props.deadliftBarAndCollarsWeightKg;\n      default:\n        checkExhausted(lift);\n        return 0;\n    }\n  };\n\n  validate = (n: number): Validation => {\n    // Don't use isInteger() since decimals are allowed.\n    if (isNaN(n) || !isFinite(n) || n < 5 || n > 1000) {\n      return \"error\";\n    }\n    return \"success\";\n  };\n\n  handleChange = (n: number) => {\n    if (this.validate(n) === \"success\") {\n      const weight = this.props.inKg ? n : lbs2kg(n);\n      this.props.setBarAndCollarsWeightKg(this.props.lift, weight);\n    }\n  };\n\n  getLiftLabel = (lift: Lift, inKg: boolean, language: Language): string => {\n    switch (lift) {\n      case \"S\":\n        if (inKg) {\n          return getString(\"meet-setup.bar-weight-squat-kg\", language);\n        } else {\n          return getString(\"meet-setup.bar-weight-squat-lbs\", language);\n        }\n      case \"B\":\n        if (inKg) {\n          return getString(\"meet-setup.bar-weight-bench-kg\", language);\n        } else {\n          return getString(\"meet-setup.bar-weight-bench-lbs\", language);\n        }\n      case \"D\":\n        if (inKg) {\n          return getString(\"meet-setup.bar-weight-deadlift-kg\", language);\n        } else {\n          return getString(\"meet-setup.bar-weight-deadlift-lbs\", language);\n        }\n      default:\n        checkExhausted(lift);\n        return \"\";\n    }\n  };\n\n  render() {\n    return (\n      <NumberInput\n        initialValue={this.state.initialValue}\n        step={2.5}\n        validate={this.validate}\n        onChange={this.handleChange}\n        label={this.getLiftLabel(this.props.lift, this.props.inKg, this.props.language)}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  inKg: state.meet.inKg,\n  squatBarAndCollarsWeightKg: state.meet.squatBarAndCollarsWeightKg,\n  benchBarAndCollarsWeightKg: state.meet.benchBarAndCollarsWeightKg,\n  deadliftBarAndCollarsWeightKg: state.meet.deadliftBarAndCollarsWeightKg,\n  language: state.language,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    setBarAndCollarsWeightKg: (lift: Lift, weightKg: number) => dispatch(setBarAndCollarsWeightKg(lift, weightKg)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BarAndCollarsWeightKg);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines a widget for selecting a plate color.\n\nimport React from \"react\";\nimport { ColorResult, TwitterPicker } from \"react-color\";\n\nimport { PlateColors } from \"../../constants/plateColors\";\n\nimport styles from \"./ColorPicker.module.scss\";\nimport * as Popper from \"react-popper\";\n\ninterface OwnProps {\n  color: string;\n  onChange: (color: string) => void;\n}\n\ntype Props = OwnProps;\n\ninterface InternalState {\n  displayColorPicker: boolean;\n  color: string;\n\n  // Handle returned by setTimeout() for the timeout that closes the color\n  // selector popup after the mouse leaves and time has elapsed.\n  timeoutId: any;\n}\n\nclass ColorPicker extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      displayColorPicker: false,\n      color: props.color,\n      timeoutId: null,\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.handleMouseEnter = this.handleMouseEnter.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleClick = () => {\n    clearTimeout(this.state.timeoutId);\n    this.setState({ displayColorPicker: !this.state.displayColorPicker, timeoutId: null });\n  };\n\n  handleMouseLeave = () => {\n    // Close the popup after a second has elapsed.\n    // This gives the user a chance to bring the mouse back into the popup.\n    const timeoutId = setTimeout(() => {\n      this.setState({ displayColorPicker: false, timeoutId: null });\n    }, 1000);\n    this.setState({ timeoutId: timeoutId });\n  };\n\n  handleMouseEnter = () => {\n    // Prevent any close-popup timeout from executing.\n    if (this.state.timeoutId !== null) {\n      clearTimeout(this.state.timeoutId);\n      this.setState({ timeoutId: null });\n    }\n  };\n\n  handleChange = (color: ColorResult, event: any) => {\n    // @types/react-color doesn't define an event for onChange but it is published in\n    // their documentation: https://casesandberg.github.io/react-color/#api-onChange\n    // If the event was a MouseEvent|TouchEvent (i.e they clicked a swatch) we assume\n    // that the user wants the panel to close immediately.\n    const displayColorPicker = event.clientX === undefined;\n    const hex = color.hex.toUpperCase();\n    this.setState({ displayColorPicker, color: hex });\n    this.props.onChange(hex);\n  };\n\n  render() {\n    const colors = Object.values(PlateColors);\n    let picker = null;\n    if (this.state.displayColorPicker) {\n      picker = (\n        <Popper.Popper placement=\"bottom-end\">\n          {({ ref, style, placement }) => (\n            <div ref={ref} style={style} className={styles.onTop} data-placement={placement}>\n              <TwitterPicker\n                color={this.state.color}\n                colors={colors}\n                triangle=\"hide\"\n                onChange={this.handleChange as any}\n              />\n            </div>\n          )}\n        </Popper.Popper>\n      );\n    }\n\n    return (\n      <Popper.Manager>\n        <div onMouseLeave={this.handleMouseLeave} onMouseEnter={this.handleMouseEnter}>\n          <Popper.Reference>\n            {({ ref }) => (\n              <div ref={ref} className={styles.swatch} onClick={this.handleClick}>\n                <div className={styles.color} style={{ background: this.state.color }} />\n              </div>\n            )}\n          </Popper.Reference>\n          {picker}\n        </div>\n      </Popper.Manager>\n    );\n  }\n}\n\nexport default ColorPicker;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Displays the selector for determining how many plates are available\n// to loaders on one side, and what color it is, for a single plate weight.\n\nimport React, { FunctionComponent } from \"react\";\n\nimport NumberInput from \"../common/NumberInput\";\nimport ColorPicker from \"./ColorPicker\";\n\nimport { Validation } from \"../../types/dataTypes\";\n\ninterface Props {\n  id: string;\n  weightKg: number;\n  displayWeight: string; // What kind of a plate this is.\n  pairCount: number;\n  color: string;\n  onChange: (weightKg: number, id: string, amount: number, color: string) => void;\n}\n\nconst validate = (n: number): Validation => {\n  if (!Number.isInteger(n) || n < 0 || n > 50) {\n    return \"error\";\n  }\n  return \"success\";\n};\n\nconst PlateInput: FunctionComponent<Props> = (props) => {\n  return (\n    <tr key={props.id}>\n      <td>{props.displayWeight}</td>\n      <td>\n        <div style={{ maxWidth: \"130px\" }}>\n          <NumberInput\n            initialValue={props.pairCount}\n            step={1}\n            validate={validate}\n            onChange={(count) => props.onChange(props.weightKg, props.id, count, props.color)}\n            marginBottom=\"0px\"\n          />\n        </div>\n      </td>\n      <td>\n        <ColorPicker\n          color={props.color}\n          onChange={(color) => props.onChange(props.weightKg, props.id, props.pairCount, color)}\n        />\n      </td>\n    </tr>\n  );\n};\n\nexport default PlateInput;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Displays the selector for determining how many plates are available\n// to loaders on one side.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Table from \"react-bootstrap/Table\";\n\nimport { setPlateConfig } from \"../../actions/meetSetupActions\";\n\nimport { getString } from \"../../logic/strings\";\nimport { displayWeight, kg2lbs } from \"../../logic/units\";\n\nimport { Language, Plate } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { Dispatch } from \"redux\";\nimport { isString } from \"../../types/utils\";\nimport { isNumber } from \"util\";\nimport PlateInput from \"./PlateInput\";\n\ninterface StateProps {\n  inKg: boolean;\n  plates: ReadonlyArray<Plate>;\n  language: Language;\n}\n\ninterface DispatchProps {\n  setPlateConfig: (weight: number, amount: number, color: string) => void;\n}\n\ntype Props = StateProps & DispatchProps;\n\nclass Plates extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    this.validateAmountInput = this.validateAmountInput.bind(this);\n    this.updateHandler = this.updateHandler.bind(this);\n  }\n\n  validateAmountInput: (id: string) => \"error\" | null | undefined = (id) => {\n    const widget: any = document.getElementById(id);\n\n    // This can happen because the FormGroup is created before the widget exists.\n    if (widget === null) return;\n    const value = widget.value;\n\n    if (value === undefined) return \"error\";\n\n    // Ensure that the value is an integer in a reasonable range.\n    const asNum = Number(value);\n    if (Math.floor(asNum) !== asNum) return \"error\";\n    if (asNum < 0 || asNum > 20) return \"error\";\n    if (String(asNum) !== value) return \"error\";\n\n    return null;\n  };\n\n  updateHandler = (weightKg: number, id: string, amount: string | number | string[] | undefined, color: string) => {\n    if (!isString(amount) && !isNumber(amount)) {\n      throw new Error(`Expected either a string or a number, but got ${amount}`);\n    }\n\n    if (this.validateAmountInput(id) === \"error\") {\n      // Although no state is set, this is used to trigger the FormGroup\n      // to re-query the validationState on change.\n      return this.setState({});\n    }\n\n    this.props.setPlateConfig(weightKg, Number(amount), color);\n  };\n\n  renderWeightRow = (weightKg: number, amount: number, color: string) => {\n    // The input event value isn't passed by the event, so we assign a unique ID\n    // and then just search the whole document for it.\n    const id = \"weight\" + String(weightKg);\n    const weight = this.props.inKg ? weightKg : kg2lbs(weightKg);\n\n    return (\n      <PlateInput\n        id={id}\n        key={id}\n        weightKg={weightKg}\n        displayWeight={displayWeight(weight, this.props.language)}\n        pairCount={amount}\n        color={color}\n        onChange={this.updateHandler}\n      />\n    );\n  };\n\n  render() {\n    const plateRows = this.props.plates.map((obj: Plate) =>\n      this.renderWeightRow(obj.weightKg, obj.pairCount, obj.color)\n    );\n    const unitId = this.props.inKg ? \"meet-setup.plates-kg\" : \"meet-setup.plates-lbs\";\n    const stringPlate = getString(unitId, this.props.language);\n\n    return (\n      <div>\n        <Table striped size=\"sm\" hover style={{ margin: \"0px\" }}>\n          <thead>\n            <tr>\n              <th>{stringPlate}</th>\n              <th>\n                <FormattedMessage id=\"meet-setup.plates-num-pairs\" defaultMessage=\"Pairs of Plates\" />\n              </th>\n              <th>\n                <FormattedMessage id=\"meet-setup.plates-color\" defaultMessage=\"Color\" />\n              </th>\n            </tr>\n          </thead>\n          <tbody>{plateRows}</tbody>\n        </Table>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  inKg: state.meet.inKg,\n  plates: state.meet.plates,\n  language: state.language,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    setPlateConfig: (weightKg, amount, color) => dispatch(setPlateConfig(weightKg, amount, color)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Plates);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n//\n// This is a split Yes/No button\n\nimport React, { FunctionComponent } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport Button from \"react-bootstrap/Button\";\n\ninterface Props {\n  value: boolean;\n  setValue: (bool: boolean) => void;\n  label: JSX.Element | string;\n  yes: string;\n  no: string;\n}\n\nconst YesNoButton: FunctionComponent<Props> = (props) => {\n  return (\n    <Form.Group>\n      <Form.Label>{props.label}</Form.Label>\n      <ButtonGroup style={{ width: \"100%\" }}>\n        <Button active={!props.value} variant=\"outline-secondary\" onClick={() => props.setValue(false)}>\n          {props.no}\n        </Button>\n        <Button active={props.value} variant=\"outline-secondary\" onClick={() => props.setValue(true)}>\n          {props.yes}\n        </Button>\n      </ButtonGroup>\n    </Form.Group>\n  );\n};\n\nexport default YesNoButton;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React, { FormEvent } from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\nimport Container from \"react-bootstrap/Container\";\nimport Form from \"react-bootstrap/Form\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport FormGroup from \"react-bootstrap/FormGroup\";\nimport Row from \"react-bootstrap/Row\";\n\nimport ValidatedInput from \"../ValidatedInput\";\n\nimport MeetDate from \"./MeetDate\";\nimport MeetLength from \"./MeetLength\";\nimport PlatformCounts from \"./PlatformCounts\";\nimport AutoFillRules from \"./AutoFillRules\";\nimport DivisionSelect from \"./DivisionSelect\";\nimport WeightClassesSelect from \"./WeightClassesSelect\";\nimport BarAndCollarsWeightKg from \"./BarAndCollarsWeightKg\";\nimport Plates from \"./Plates\";\nimport YesNoButton from \"../common/YesNoButton\";\n\nimport { getString } from \"../../logic/strings\";\nimport { updateMeet, setInKg } from \"../../actions/meetSetupActions\";\n\nimport { GlobalState, MeetState } from \"../../types/stateTypes\";\nimport { Dispatch } from \"redux\";\nimport { FormControlTypeHack, assertString, assertFormula, assertAgeCoefficients } from \"../../types/utils\";\nimport { Language, Validation } from \"../../types/dataTypes\";\n\ninterface StateProps {\n  meet: MeetState;\n  language: Language;\n}\n\ninterface DispatchProps {\n  setMeetName: (name: string) => void;\n  setCountry: (country: string) => void;\n  setState: (state: string) => void;\n  setCity: (city: string) => void;\n  setFederation: (fed: string) => void;\n  setCombineSleevesAndWraps: (bool: boolean) => void;\n  setAllow4thAttempts: (bool: boolean) => void;\n  setRecordsEnabled: (bool: boolean) => void;\n  setInKg: (bool: boolean) => void;\n  setShowAlternateUnits: (bool: boolean) => void;\n  setFormula: (event: FormEvent<FormControlTypeHack>) => void;\n  setAgeCoefficients: (event: FormEvent<FormControlTypeHack>) => void;\n}\n\ntype Props = StateProps & DispatchProps;\n\ninterface InternalState {\n  // This is a number used to derive a `key` for many widgets.\n  // Incrementing the ticker can be used to force a re-render.\n  // This is used to re-render things after the \"Auto-Fill\" button is pressed.\n  ticker: number;\n}\n\nclass MeetSetup extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      ticker: 0,\n    };\n  }\n\n  validateRequiredText = (value?: string): Validation => {\n    if (!value) return \"warning\";\n    if (value.includes('\"')) return \"error\";\n    return \"success\";\n  };\n\n  render() {\n    // This is used as a key to force unit-dependent components to re-initialize state.\n    const inKg = String(this.props.meet.inKg);\n    const language = this.props.language;\n\n    const stringMeetName = getString(\"meet-setup.meet-name\", language);\n    const stringFederation = getString(\"common.federation\", language);\n    const stringCountry = getString(\"common.country\", language);\n    const stringStateProvince = getString(\"meet-setup.state-province\", language);\n    const stringCityTown = getString(\"meet-setup.city-town\", language);\n\n    const stringKilograms = getString(\"common.kilograms\", language);\n    const stringPounds = getString(\"common.pounds\", language);\n\n    const stringMensClasses = getString(\"meet-setup.label-classes-men\", language);\n    const stringWomensClasses = getString(\"meet-setup.label-classes-women\", language);\n    const stringMxClasses = getString(\"meet-setup.label-classes-mx\", language);\n\n    const stringAH = getString(\"formula.ah\", language);\n    const stringBodyweightMultiple = getString(\"formula.bodyweight-multiple\", language);\n    const stringDots = getString(\"formula.dots\", language);\n    const stringGlossbrenner = getString(\"formula.glossbrenner\", language);\n    const stringIPFGLPoints = getString(\"formula.ipf-gl-points\", language);\n    const stringIPFPoints = getString(\"formula.ipf-points\", language);\n    const stringNASAPoints = getString(\"formula.nasa-points\", language);\n    // const stringReshel = getString(\"formula.reshel\", language);\n    const stringSchwartzMalone = getString(\"formula.schwartz-malone\", language);\n    const stringTotal = getString(\"formula.total\", language);\n    const stringWilks = getString(\"formula.wilks\", language);\n    const stringWilks2020 = getString(\"formula.wilks2020\", language);\n    const stringNone = getString(\"age-coefficients.none\", language);\n    const stringFosterMcCulloch = getString(\"age-coefficients.foster-mcculloch\", language);\n    const stringNo = getString(\"common.response-no\", language);\n    const stringYes = getString(\"common.response-yes\", language);\n\n    const stringAlsoKilograms = getString(\"meet-setup.label-also-show-kilograms\", language);\n    const stringAlsoPounds = getString(\"meet-setup.label-also-show-pounds\", language);\n\n    return (\n      <Container>\n        <Row>\n          <Col md={4}>\n            <Card>\n              <Card.Header>\n                <FormattedMessage id=\"meet-setup.header-sanction-info\" defaultMessage=\"Sanction Information\" />\n              </Card.Header>\n              <Card.Body>\n                <ValidatedInput\n                  label={stringMeetName}\n                  placeholder={stringMeetName}\n                  initialValue={this.props.meet.name}\n                  validate={this.validateRequiredText}\n                  onSuccess={this.props.setMeetName}\n                  keepMargin={true}\n                />\n                <ValidatedInput\n                  label={stringFederation}\n                  placeholder={stringFederation}\n                  initialValue={this.props.meet.federation}\n                  validate={this.validateRequiredText}\n                  onSuccess={this.props.setFederation}\n                  keepMargin={true}\n                />\n                <ValidatedInput\n                  label={stringCountry}\n                  placeholder={stringCountry}\n                  initialValue={this.props.meet.country}\n                  validate={this.validateRequiredText}\n                  onSuccess={this.props.setCountry}\n                  keepMargin={true}\n                />\n                <ValidatedInput\n                  label={stringStateProvince}\n                  placeholder={stringStateProvince}\n                  initialValue={this.props.meet.state}\n                  validate={this.validateRequiredText}\n                  onSuccess={this.props.setState}\n                  keepMargin={true}\n                />\n                <ValidatedInput\n                  label={stringCityTown}\n                  placeholder={stringCityTown}\n                  initialValue={this.props.meet.city}\n                  validate={this.validateRequiredText}\n                  onSuccess={this.props.setCity}\n                  keepMargin={true}\n                />\n                <MeetDate />\n                <MeetLength />\n                <PlatformCounts />\n              </Card.Body>\n            </Card>\n          </Col>\n\n          <Col md={4}>\n            <Card>\n              <Card.Header>\n                <FormattedMessage id=\"meet-setup.header-rules\" defaultMessage=\"Competition Rules\" />\n              </Card.Header>\n              <Card.Body>\n                <AutoFillRules onChange={() => this.setState({ ticker: this.state.ticker + 1 })} />\n                <DivisionSelect key={this.state.ticker + \"-divselect\"} />\n                <WeightClassesSelect sex=\"M\" label={stringMensClasses} key={this.state.ticker + \"-M\"} />\n                <WeightClassesSelect sex=\"F\" label={stringWomensClasses} key={this.state.ticker + \"-F\"} />\n                <WeightClassesSelect sex=\"Mx\" label={stringMxClasses} key={this.state.ticker + \"-Mx\"} />\n\n                <FormGroup key={this.state.ticker + \"-formula\"}>\n                  <Form.Label>\n                    <FormattedMessage id=\"meet-setup.formula\" defaultMessage=\"Best Lifter Formula\" />\n                  </Form.Label>\n                  <FormControl\n                    as=\"select\"\n                    value={this.props.meet.formula}\n                    onChange={this.props.setFormula}\n                    className=\"custom-select\"\n                  >\n                    <option value=\"AH\">{stringAH}</option>\n                    <option value=\"Bodyweight Multiple\">{stringBodyweightMultiple}</option>\n                    <option value=\"Dots\">{stringDots}</option>\n                    <option value=\"Glossbrenner\">{stringGlossbrenner}</option>\n                    <option value=\"IPF GL Points\">{stringIPFGLPoints}</option>\n                    <option value=\"IPF Points\">{stringIPFPoints}</option>\n                    <option value=\"NASA Points\">{stringNASAPoints}</option>\n                    <option value=\"Schwartz/Malone\">{stringSchwartzMalone}</option>\n                    <option value=\"Total\">{stringTotal}</option>\n                    <option value=\"Wilks\">{stringWilks}</option>\n                    <option value=\"Wilks2020\">{stringWilks2020}</option>\n                  </FormControl>\n                </FormGroup>\n\n                <FormGroup key={this.state.ticker + \"-ageCoefficients\"}>\n                  <Form.Label>\n                    <FormattedMessage\n                      id=\"meet-setup.age-coefficients\"\n                      defaultMessage=\"Age Coefficients for Best Juniors/Masters Lifter\"\n                    />\n                  </Form.Label>\n                  <FormControl\n                    as=\"select\"\n                    value={this.props.meet.ageCoefficients}\n                    onChange={this.props.setAgeCoefficients}\n                    className=\"custom-select\"\n                  >\n                    <option key=\"None\" value=\"None\">\n                      {stringNone}\n                    </option>\n                    <option key=\"FosterMcCulloch\" value=\"FosterMcCulloch\">\n                      {stringFosterMcCulloch}\n                    </option>\n                  </FormControl>\n                </FormGroup>\n\n                <FormGroup key={this.state.ticker + \"-sleeves-wraps\"}>\n                  <YesNoButton\n                    label={\n                      <FormattedMessage\n                        id=\"meet-setup.combine-sleeves-wraps\"\n                        defaultMessage=\"Combine Sleeves and Wraps for placing and records?\"\n                      />\n                    }\n                    value={this.props.meet.combineSleevesAndWraps}\n                    setValue={this.props.setCombineSleevesAndWraps}\n                    yes={stringYes}\n                    no={stringNo}\n                  />\n                </FormGroup>\n\n                <FormGroup key={this.state.ticker + \"-4th-attempts\"}>\n                  <YesNoButton\n                    label={\n                      <FormattedMessage\n                        id=\"meet-setup.allow-4th-attempts\"\n                        defaultMessage=\"Can lifters take 4th attempts for records?\"\n                      />\n                    }\n                    value={this.props.meet.allow4thAttempts}\n                    setValue={this.props.setAllow4thAttempts}\n                    yes={stringYes}\n                    no={stringNo}\n                  />\n                </FormGroup>\n\n                <FormGroup key={this.state.ticker + \"-records-enabled\"}>\n                  <YesNoButton\n                    label={\n                      <FormattedMessage\n                        id=\"meet-setup.can-lifters-set-records\"\n                        defaultMessage=\"Allows records to be set at the meet\"\n                      />\n                    }\n                    value={this.props.meet.recordsEnabled || false}\n                    setValue={this.props.setRecordsEnabled}\n                    yes={stringYes}\n                    no={stringNo}\n                  />\n                </FormGroup>\n              </Card.Body>\n            </Card>\n          </Col>\n\n          <Col md={4}>\n            <Card>\n              <Card.Header>\n                <FormattedMessage id=\"meet-setup.header-loading\" defaultMessage=\"Weights and Loading\" />\n              </Card.Header>\n              <Card.Body>\n                <FormGroup>\n                  <YesNoButton\n                    label={\n                      <FormattedMessage\n                        id=\"meet-setup.units\"\n                        defaultMessage=\"In what units are attempts and bodyweights?\"\n                      />\n                    }\n                    value={this.props.meet.inKg}\n                    setValue={this.props.setInKg}\n                    yes={stringKilograms}\n                    no={stringPounds}\n                  />\n                </FormGroup>\n\n                <FormGroup>\n                  <YesNoButton\n                    label={this.props.meet.inKg ? stringAlsoPounds : stringAlsoKilograms}\n                    value={this.props.meet.showAlternateUnits}\n                    setValue={this.props.setShowAlternateUnits}\n                    yes={stringYes}\n                    no={stringNo}\n                  />\n                </FormGroup>\n\n                <BarAndCollarsWeightKg key={\"S\" + inKg} lift=\"S\" />\n                <BarAndCollarsWeightKg key={\"B\" + inKg} lift=\"B\" />\n                <BarAndCollarsWeightKg key={\"D\" + inKg} lift=\"D\" />\n                <Plates />\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n      </Container>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  meet: state.meet,\n  language: state.language,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => ({\n  setMeetName: (name: string) => dispatch(updateMeet({ name: name })),\n  setCountry: (country: string) => dispatch(updateMeet({ country: country })),\n  setState: (state: string) => dispatch(updateMeet({ state: state })),\n  setCity: (city: string) => dispatch(updateMeet({ city: city })),\n  setFederation: (fed: string) => dispatch(updateMeet({ federation: fed })),\n  setCombineSleevesAndWraps: (bool) => dispatch(updateMeet({ combineSleevesAndWraps: bool })),\n  setAllow4thAttempts: (bool) => dispatch(updateMeet({ allow4thAttempts: bool })),\n  setRecordsEnabled: (bool) => dispatch(updateMeet({ recordsEnabled: bool })),\n  setInKg: (bool) => dispatch(setInKg(bool)),\n  setShowAlternateUnits: (bool) => dispatch(updateMeet({ showAlternateUnits: bool })),\n  setFormula: (event) =>\n    assertString(event.currentTarget.value) &&\n    assertFormula(event.currentTarget.value) &&\n    dispatch(updateMeet({ formula: event.currentTarget.value })),\n  setAgeCoefficients: (event) =>\n    assertString(event.currentTarget.value) &&\n    assertAgeCoefficients(event.currentTarget.value) &&\n    dispatch(updateMeet({ ageCoefficients: event.currentTarget.value })),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MeetSetup);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\n\nimport MeetSetup from \"../components/meet-setup/MeetSetup\";\nimport styles from \"../components/common/ContentArea.module.scss\";\n\nclass MeetSetupContainer extends React.Component<{}> {\n  render() {\n    return (\n      <div className={styles.contentArea}>\n        <MeetSetup />\n      </div>\n    );\n  }\n}\n\nexport default MeetSetupContainer;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the table of LifterRows\n// Generalized to accept a rowRenderer component, so that different pages\n// can render different row level items, while re-using the logic in this component\n// to handle rendering one row per lifter\n// This is the parent component that determines how many rows to render,\n// what data each row should see, etc.\n\nimport React from \"react\";\n\nimport { Entry } from \"../../types/dataTypes\";\n\ninterface OwnProps {\n  entries: ReadonlyArray<Entry>;\n  rowRenderer: any;\n}\n\ntype Props = OwnProps;\n\nconst LifterTable: React.FC<Props> = (props) => {\n  const renderRows = () => {\n    const LifterRow = props.rowRenderer;\n    const { entries } = props;\n    return entries.map((entry) => <LifterRow key={entry.id} id={entry.id} />);\n  };\n\n  return <div>{renderRows()}</div>;\n};\n\nexport default LifterTable;\n","// vim: set ts=2 sts=2 sw=2 et:\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// This provides an alternative interface to react-intl's <FormattedMessage/>.\n//\n// FormattedMessage defines a *new* internationalizable message.\n// In contrast, LocalizedString fetches an *existing* message from the same store\n// and reports it as a simple string (with no formatting or parsing).\n//\n// This enables reuse of translations, so long as the IDs are stable.\n\nimport React from \"react\";\nimport { IntlContext } from \"react-intl\";\n\nimport { TranslationId } from \"../../types/dataTypes\";\n\ninterface OwnProps {\n  id: TranslationId; // As listed in 'src/translations/en.json'.\n}\n\ntype Props = OwnProps;\n\nclass LocalizedString extends React.Component<Props> {\n  render() {\n    return (\n      <IntlContext.Consumer>\n        {(intl) => {\n          return intl.messages[this.props.id];\n        }}\n      </IntlContext.Consumer>\n    );\n  }\n}\n\nexport default LocalizedString;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { Validation } from \"../types/dataTypes\";\n\n// Validates a string date in the ISO8601 \"YYYY-MM-DD\" format.\nexport const validateIso8601Date = (s?: string): Validation => {\n  if (typeof s !== \"string\") return \"error\";\n\n  if (s === \"\") return null;\n  if (s.length !== \"YYYY-MM-DD\".length) return \"error\";\n\n  const pieces: Array<string> = s.split(\"-\");\n  if (pieces.length !== 3) return \"error\";\n\n  const [yearStr, monthStr, dayStr] = pieces;\n\n  // Ensure that the strings only contain numbers, because the Number() constructor\n  // will ignore whitespace.\n  const onlyNumbers = /^[0-9]+$/;\n\n  if (!yearStr.match(onlyNumbers)) return \"error\";\n  if (!monthStr.match(onlyNumbers)) return \"error\";\n  if (!dayStr.match(onlyNumbers)) return \"error\";\n\n  const year = Number(yearStr);\n  const month = Number(monthStr);\n  const day = Number(dayStr);\n\n  if (isNaN(year) || isNaN(month) || isNaN(day)) return \"error\";\n  if (year <= 0 || month <= 0 || month > 12 || day <= 0 || day > 31) return \"error\";\n\n  // Disallow dates that are out of the plausible range for powerlifting.\n  if (year < 1880 || year >= new Date().getFullYear() + 2) return \"error\";\n\n  return \"success\";\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { Validation } from \"../types/dataTypes\";\n\n// Validates a simple positive integer.\nexport const validatePositiveInteger = (s?: string, inclusiveMax?: number): Validation => {\n  if (typeof s !== \"string\") return \"error\";\n\n  if (s === \"\") return null;\n\n  // Ensure that the string only contains numbers, because the Number() constructor\n  // will ignore whitespace.\n  const onlyNumbers = /^[0-9]+$/;\n  if (!s.match(onlyNumbers)) return \"error\";\n\n  // The number shouldn't start with an unnecessary zero.\n  if (s.startsWith(\"0\")) return \"error\";\n\n  const n = Number(s);\n\n  // Ensure the number is a positive integer.\n  if (isNaN(n)) return \"error\";\n  if (!Number.isInteger(n)) return \"error\";\n  if (n <= 0) return \"error\";\n\n  // Allow an optional inclusive upper bound check.\n  if (typeof inclusiveMax === \"number\") {\n    if (n > inclusiveMax) return \"error\";\n  }\n\n  return \"success\";\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport {\n  NewRegistrationAction,\n  DeleteRegistrationAction,\n  UpdateRegistrationAction,\n  MergePlatformAction,\n  AssignLotNumbersAction,\n} from \"../types/actionTypes\";\nimport { Entry } from \"../types/dataTypes\";\n\n// Adds a blank (or default-initalized) row to the registrations table.\nexport const newRegistration = (obj: Partial<Entry>): NewRegistrationAction => {\n  return {\n    type: \"NEW_REGISTRATION\",\n    overwriteDefaults: obj,\n  };\n};\n\n// Deletes an existing entry from the registrations table.\n//\n// Corresponding data from the registration is *not* deleted, for example\n// from the lifting page, but because the state.registrations.lookups map\n// will no longer find an associated entry given a global unique EntryId,\n// the data will simply stop being displayed.\n//\n// The global ID from the deleted entry is not recycled.\nexport const deleteRegistration = (entryId: number): DeleteRegistrationAction => {\n  return {\n    type: \"DELETE_REGISTRATION\",\n    entryId: entryId,\n  };\n};\n\n// Updates an existing entry in the registrations table.\n//\n// Because there are a lot of fields in a single entry, for the sake of\n// simplicity, this is a general method that knows how to update the\n// existing entry object with whatever has changed, as passed\n// through object properties.\nexport const updateRegistration = (entryId: number, obj: Partial<Entry>): UpdateRegistrationAction => {\n  return {\n    type: \"UPDATE_REGISTRATION\",\n    entryId: entryId,\n    changes: obj,\n  };\n};\n\n// Deletes all entries assigned to a given (day, platform), and then adds entries\n// assigned to that (day, platform) from a foreign save state.\nexport const mergePlatform = (day: number, platform: number, platformEntries: Array<Entry>): MergePlatformAction => {\n  return {\n    type: \"MERGE_PLATFORM\",\n    day: day,\n    platform: platform,\n    platformEntries: platformEntries,\n  };\n};\n\nexport const assignLotNumbers = (lotNumbers: number[]): AssignLotNumbersAction => {\n  return {\n    type: \"ASSIGN_LOT_NUMBERS\",\n    lotNumbers,\n  };\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines a row in the LifterTable on the Registration page.\n// This provides a bunch of widgets, each of which correspond to\n// the state of a single entry.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Button from \"react-bootstrap/Button\";\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\nimport Container from \"react-bootstrap/Container\";\nimport Form from \"react-bootstrap/Form\";\nimport InputGroup from \"react-bootstrap/InputGroup\";\nimport Row from \"react-bootstrap/Row\";\n\nimport Select, { ValueType } from \"react-select\";\n\nimport { getString, localizeEvent } from \"../../logic/strings\";\nimport { displayNumber, string2number } from \"../../logic/units\";\nimport LocalizedString from \"../translations/LocalizedString\";\nimport ValidatedInput from \"../ValidatedInput\";\n\nimport { validateIso8601Date } from \"../../validation/iso8601Date\";\nimport { validatePositiveInteger } from \"../../validation/positiveInteger\";\n\nimport { deleteRegistration, updateRegistration } from \"../../actions/registrationActions\";\nimport { FormControlTypeHack, assertString, assertFlight, assertSex, assertEquipment } from \"../../types/utils\";\nimport { Entry, Equipment, Language, Validation } from \"../../types/dataTypes\";\nimport { Dispatch } from \"redux\";\nimport { GlobalState, MeetState } from \"../../types/stateTypes\";\n\ntype OptionType = {\n  label: string;\n  value: string;\n};\n\ninterface OwnProps {\n  id: number;\n}\n\ninterface StateProps {\n  meet: MeetState;\n  entry: Entry;\n  language: Language;\n}\n\ninterface DispatchProps {\n  deleteRegistration: (entryId: number) => void;\n  updateRegistration: (entryId: number, obj: Partial<Entry>) => void;\n}\n\ninterface InternalState {\n  selectedDay: number;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nclass LifterRow extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    // Store the Day in state to update the Platform options when the Day changes.\n    // Store the Birth Date in state to re-render when a new date is selected\n    this.state = {\n      selectedDay: props.entry.day,\n    };\n\n    this.deleteRegistrationClick = this.deleteRegistrationClick.bind(this);\n    this.updateRegistrationDay = this.updateRegistrationDay.bind(this);\n    this.updateRegistrationPlatform = this.updateRegistrationPlatform.bind(this);\n    this.updateRegistrationFlight = this.updateRegistrationFlight.bind(this);\n    this.updateRegistrationName = this.updateRegistrationName.bind(this);\n    this.updateRegistrationSex = this.updateRegistrationSex.bind(this);\n    this.updateRegistrationLot = this.updateRegistrationLot.bind(this);\n    this.updateRegistrationMemberId = this.updateRegistrationMemberId.bind(this);\n    this.updateRegistrationBirthDate = this.updateRegistrationBirthDate.bind(this);\n    this.updateRegistrationAge = this.updateRegistrationAge.bind(this);\n    this.updateRegistrationCountry = this.updateRegistrationCountry.bind(this);\n    this.updateRegistrationState = this.updateRegistrationState.bind(this);\n    this.updateRegistrationDivisions = this.updateRegistrationDivisions.bind(this);\n    this.updateRegistrationEvents = this.updateRegistrationEvents.bind(this);\n    this.updateRegistrationEquipment = this.updateRegistrationEquipment.bind(this);\n    this.updateRegistrationGuest = this.updateRegistrationGuest.bind(this);\n    this.updateRegistrationNovice = this.updateRegistrationNovice.bind(this);\n    this.updateRegistrationCanBreakRecords = this.updateRegistrationCanBreakRecords.bind(this);\n    this.updateRegistrationTeam = this.updateRegistrationTeam.bind(this);\n    this.updateRegistrationInstagram = this.updateRegistrationInstagram.bind(this);\n    this.updateRegistrationNotes = this.updateRegistrationNotes.bind(this);\n  }\n\n  deleteRegistrationClick() {\n    this.props.deleteRegistration(this.props.id);\n  }\n\n  updateRegistrationDay(event: React.FormEvent<FormControlTypeHack>) {\n    const day = Number(event.currentTarget.value);\n    const entry = this.props.entry;\n\n    // Also check whether the platform is now impossible.\n    let platform = entry.platform;\n    if (platform > this.props.meet.platformsOnDays[day - 1]) {\n      platform = 1; // This matches the default behavior of the select element.\n    }\n\n    if (entry.day !== day) {\n      this.setState({ selectedDay: day });\n      this.props.updateRegistration(this.props.id, { day: day, platform: platform });\n    }\n  }\n\n  updateRegistrationPlatform(event: React.FormEvent<FormControlTypeHack>) {\n    const platform = Number(event.currentTarget.value);\n    if (this.props.entry.platform !== platform) {\n      this.props.updateRegistration(this.props.id, { platform: platform });\n    }\n  }\n\n  updateRegistrationFlight(event: React.FormEvent<FormControlTypeHack>) {\n    const value = event.currentTarget.value;\n    if (this.props.entry.flight !== value && assertString(value) && assertFlight(value)) {\n      this.props.updateRegistration(this.props.id, { flight: value });\n    }\n  }\n\n  updateRegistrationName(event: React.FocusEvent<FormControlTypeHack>) {\n    const name = event.currentTarget.value;\n    if (this.props.entry.name !== name && assertString(name)) {\n      this.props.updateRegistration(this.props.id, { name: name });\n    }\n  }\n\n  updateRegistrationSex(event: React.FormEvent<FormControlTypeHack>) {\n    const sex = event.currentTarget.value;\n    if (this.props.entry.sex !== sex && assertString(sex) && assertSex(sex)) {\n      this.props.updateRegistration(this.props.id, { sex: sex });\n    }\n  }\n\n  updateRegistrationLot(event: React.FormEvent<FormControlTypeHack> & { currentTarget: { value: string } }) {\n    const asNumber = string2number(event.currentTarget.value);\n    if (asNumber >= 0 && asNumber !== this.props.entry.lot) {\n      this.props.updateRegistration(this.props.id, { lot: asNumber });\n    }\n  }\n\n  updateRegistrationMemberId = (event: React.FormEvent<FormControlTypeHack>) => {\n    const memberId = event.currentTarget.value;\n    if (this.props.entry.memberId !== memberId && typeof memberId === \"string\") {\n      this.props.updateRegistration(this.props.id, { memberId: memberId });\n    }\n  };\n\n  updateRegistrationBirthDate = (birthDate: string) => {\n    if (this.props.entry.birthDate !== birthDate) {\n      this.props.updateRegistration(this.props.id, { birthDate: birthDate });\n    }\n  };\n\n  updateRegistrationAge = (age: string) => {\n    const num = string2number(age);\n    if (this.props.entry.age !== num) {\n      this.props.updateRegistration(this.props.id, { age: num });\n    }\n  };\n\n  updateRegistrationCountry = (country: string) => {\n    if (this.props.entry.country !== country) {\n      this.props.updateRegistration(this.props.id, { country: country });\n    }\n  };\n\n  updateRegistrationState = (state: string) => {\n    if (this.props.entry.state !== state) {\n      this.props.updateRegistration(this.props.id, { state: state });\n    }\n  };\n\n  updateRegistrationDivisions(value: ValueType<OptionType> | null) {\n    if (value instanceof Array) {\n      // Since updates are synchronous, we can just compare lengths.\n      if (value.length !== this.props.entry.divisions.length) {\n        const divisions = [];\n        for (let i = 0; i < value.length; i++) {\n          divisions.push(value[i].value);\n        }\n        this.props.updateRegistration(this.props.id, { divisions: divisions });\n      }\n    } else if (value === null) {\n      // Null happens when the list has been cleared fully.\n      if (this.props.entry.divisions.length > 0) {\n        this.props.updateRegistration(this.props.id, { divisions: [] });\n      }\n    }\n  }\n\n  updateRegistrationEvents(value: ValueType<OptionType> | null) {\n    if (value instanceof Array) {\n      // Since updates are synchronous, we can just compare lengths.\n      if (value.length !== this.props.entry.events.length) {\n        const events = [];\n        for (let i = 0; i < value.length; i++) {\n          events.push(value[i].value);\n        }\n        this.props.updateRegistration(this.props.id, { events: events });\n      }\n    } else if (value === null) {\n      // Null happens when the list has been cleared fully.\n      if (this.props.entry.events.length > 0) {\n        this.props.updateRegistration(this.props.id, { events: [] });\n      }\n    }\n  }\n\n  updateRegistrationEquipment(event: React.FormEvent<FormControlTypeHack>) {\n    const equipment = event.currentTarget.value as Equipment;\n    if (this.props.entry.equipment !== equipment && assertEquipment(equipment)) {\n      this.props.updateRegistration(this.props.id, { equipment: equipment });\n    }\n  }\n\n  updateRegistrationGuest = (event: React.FocusEvent<FormControlTypeHack>) => {\n    if (event.currentTarget.value === \"true\") {\n      this.props.updateRegistration(this.props.id, { guest: true });\n    } else {\n      this.props.updateRegistration(this.props.id, { guest: false });\n    }\n  };\n\n  updateRegistrationNovice = (event: React.FocusEvent<FormControlTypeHack>) => {\n    if (event.currentTarget.value === \"true\") {\n      this.props.updateRegistration(this.props.id, { novice: true });\n    } else {\n      this.props.updateRegistration(this.props.id, { novice: false });\n    }\n  };\n\n  updateRegistrationCanBreakRecords = (event: React.FocusEvent<FormControlTypeHack>) => {\n    if (event.currentTarget.value === \"true\") {\n      this.props.updateRegistration(this.props.id, { canBreakRecords: true });\n    } else {\n      this.props.updateRegistration(this.props.id, { canBreakRecords: false });\n    }\n  };\n\n  updateRegistrationTeam = (event: React.FocusEvent<FormControlTypeHack>) => {\n    if (assertString(event.currentTarget.value)) {\n      this.props.updateRegistration(this.props.id, { team: event.currentTarget.value });\n    }\n  };\n\n  updateRegistrationInstagram = (event: React.FocusEvent<FormControlTypeHack>) => {\n    if (assertString(event.currentTarget.value)) {\n      this.props.updateRegistration(this.props.id, { instagram: event.currentTarget.value });\n    }\n  };\n\n  updateRegistrationNotes = (event: React.FocusEvent<FormControlTypeHack>) => {\n    if (assertString(event.currentTarget.value)) {\n      this.props.updateRegistration(this.props.id, { notes: event.currentTarget.value });\n    }\n  };\n\n  // FIXME: Could be shared with weighins logic.\n  validateAge = (value?: string): Validation => {\n    if (value === \"\") return null;\n\n    const pos: Validation = validatePositiveInteger(value);\n    if (pos === \"success\") {\n      // Complain a little if the age is implausible.\n      const n = Number(value);\n      if (n <= 4 || n > 100) return \"warning\";\n    }\n    return pos;\n  };\n\n  render() {\n    const entry = this.props.entry;\n    const language = this.props.language;\n\n    const dayOptions = [];\n    for (let i = 1; i <= this.props.meet.lengthDays; i++) {\n      dayOptions.push(\n        <option value={i} key={i}>\n          {i}\n        </option>\n      );\n    }\n\n    const platformOptions = [];\n    for (let i = 1; i <= this.props.meet.platformsOnDays[entry.day - 1]; i++) {\n      platformOptions.push(\n        <option value={i} key={i}>\n          {i}\n        </option>\n      );\n    }\n\n    const divisionOptions = this.props.meet.divisions.map((division) => ({ value: division, label: division }));\n    const selectedDivisions = entry.divisions.map((division) => ({ value: division, label: division }));\n    const selectedEvents = entry.events.map((event) => ({ value: event, label: localizeEvent(event, language) }));\n\n    const gridStyle = { padding: \"0px\", margin: \"0px\" };\n\n    const stringCountry = getString(\"common.country\", language);\n    const stringState = getString(\"registration.state-province\", language);\n    const stringBirthDatePlaceholder = getString(\"registration.birthdate-placeholder\", language);\n    const stringMemberIdPlaceholder = getString(\"registration.member-id-placeholder\", language);\n    const stringSelectPlaceholder = getString(\"common.select-placeholder\", language);\n\n    const eventOptions = [\n      { value: \"S\", label: getString(\"event.s\", language) },\n      { value: \"B\", label: getString(\"event.b\", language) },\n      { value: \"D\", label: getString(\"event.d\", language) },\n      { value: \"BD\", label: getString(\"event.bd\", language) },\n      { value: \"SBD\", label: getString(\"event.sbd\", language) },\n      { value: \"SB\", label: getString(\"event.sb\", language) },\n      { value: \"SD\", label: getString(\"event.sd\", language) },\n    ];\n\n    return (\n      <Card style={{ overflow: \"visible\", marginBottom: \"17px\" }}>\n        <Card.Header style={{ display: \"flex\" }}>\n          <Form.Control type=\"text\" placeholder=\"\" value={entry.name} onChange={this.updateRegistrationName} />\n          <Button\n            onClick={this.deleteRegistrationClick}\n            variant=\"danger\"\n            style={{ marginLeft: \"15px\", minWidth: \"100px\" }}\n          >\n            <LocalizedString id=\"registration.button-delete\" />\n          </Button>\n        </Card.Header>\n        <Card.Body>\n          <Container style={gridStyle}>\n            <Row>\n              {/* Day */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.day-label\" defaultMessage=\"Day\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={this.state.selectedDay.toString()}\n                    as=\"select\"\n                    onChange={this.updateRegistrationDay}\n                    className=\"custom-select\"\n                  >\n                    {dayOptions}\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n\n              {/* Platform */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.platform-label\" defaultMessage=\"Platform\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={entry.platform.toString()}\n                    as=\"select\"\n                    onChange={this.updateRegistrationPlatform}\n                    className=\"custom-select\"\n                  >\n                    {platformOptions}\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n\n              {/* Flight */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.flight-label\" defaultMessage=\"Flight\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={entry.flight}\n                    as=\"select\"\n                    onChange={this.updateRegistrationFlight}\n                    className=\"custom-select\"\n                  >\n                    <option value=\"A\">{getString(\"flight.a\", language)}</option>\n                    <option value=\"B\">{getString(\"flight.b\", language)}</option>\n                    <option value=\"C\">{getString(\"flight.c\", language)}</option>\n                    <option value=\"D\">{getString(\"flight.d\", language)}</option>\n                    <option value=\"E\">{getString(\"flight.e\", language)}</option>\n                    <option value=\"F\">{getString(\"flight.f\", language)}</option>\n                    <option value=\"G\">{getString(\"flight.g\", language)}</option>\n                    <option value=\"H\">{getString(\"flight.h\", language)}</option>\n                    <option value=\"I\">{getString(\"flight.i\", language)}</option>\n                    <option value=\"J\">{getString(\"flight.j\", language)}</option>\n                    <option value=\"K\">{getString(\"flight.k\", language)}</option>\n                    <option value=\"L\">{getString(\"flight.l\", language)}</option>\n                    <option value=\"M\">{getString(\"flight.m\", language)}</option>\n                    <option value=\"N\">{getString(\"flight.n\", language)}</option>\n                    <option value=\"O\">{getString(\"flight.o\", language)}</option>\n                    <option value=\"P\">{getString(\"flight.p\", language)}</option>\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n\n              {/* Sex */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.sex-label\" defaultMessage=\"Sex\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={entry.sex}\n                    as=\"select\"\n                    onChange={this.updateRegistrationSex}\n                    className=\"custom-select\"\n                  >\n                    <option value=\"M\">{getString(\"sex.m\", language)}</option>\n                    <option value=\"F\">{getString(\"sex.f\", language)}</option>\n                    <option value=\"Mx\">{getString(\"sex.mx\", language)}</option>\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n\n              {/* Equipment */}\n              <Col md={2}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.equipment-label\" defaultMessage=\"Equipment\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={entry.equipment}\n                    as=\"select\"\n                    onChange={this.updateRegistrationEquipment}\n                    className=\"custom-select\"\n                  >\n                    <option value=\"Bare\">{getString(\"equipment.bare\", language)}</option>\n                    <option value=\"Sleeves\">{getString(\"equipment.sleeves\", language)}</option>\n                    <option value=\"Wraps\">{getString(\"equipment.wraps\", language)}</option>\n                    <option value=\"Single-ply\">{getString(\"equipment.single-ply\", language)}</option>\n                    <option value=\"Multi-ply\">{getString(\"equipment.multi-ply\", language)}</option>\n                    <option value=\"Unlimited\">{getString(\"equipment.unlimited\", language)}</option>\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n\n              {/* Divisions */}\n              <Col md={4}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.divisions-label\" defaultMessage=\"Divisions\" />\n                  </Form.Label>\n                  <Select\n                    menuPlacement=\"auto\"\n                    placeholder={stringSelectPlaceholder}\n                    options={divisionOptions}\n                    isClearable={false}\n                    isMulti={true}\n                    onChange={this.updateRegistrationDivisions}\n                    value={selectedDivisions}\n                  />\n                </Form.Group>\n              </Col>\n\n              {/* Events */}\n              <Col md={2}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.events-label\" defaultMessage=\"Events\" />\n                  </Form.Label>\n                  <Select\n                    menuPlacement=\"auto\"\n                    placeholder={stringSelectPlaceholder}\n                    options={eventOptions}\n                    isClearable={false}\n                    isMulti={true}\n                    onChange={this.updateRegistrationEvents}\n                    value={selectedEvents}\n                  />\n                </Form.Group>\n              </Col>\n            </Row>\n          </Container>\n\n          <Container style={gridStyle}>\n            <Row>\n              {/* Date of Birth */}\n              <Col md={2}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.birthdate-label\" defaultMessage=\"Date of Birth\" />\n                  </Form.Label>\n                  <ValidatedInput\n                    initialValue={entry.birthDate}\n                    placeholder={stringBirthDatePlaceholder}\n                    validate={validateIso8601Date}\n                    onSuccess={this.updateRegistrationBirthDate}\n                  />\n                </Form.Group>\n              </Col>\n\n              {/* Age */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>{getString(\"common.age\", language)}</Form.Label>\n                  <ValidatedInput\n                    initialValue={entry.age === 0 ? \"\" : displayNumber(entry.age, language)}\n                    placeholder={getString(\"common.age\", language)}\n                    validate={this.validateAge}\n                    onSuccess={this.updateRegistrationAge}\n                  />\n                </Form.Group>\n              </Col>\n\n              {/* Member ID */}\n              <Col md={2}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.member-id-label\" defaultMessage=\"Member ID\" />\n                  </Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    placeholder={stringMemberIdPlaceholder}\n                    value={entry.memberId}\n                    onChange={this.updateRegistrationMemberId}\n                  />\n                </Form.Group>\n              </Col>\n\n              {/* Country */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>{stringCountry}</Form.Label>\n                  <ValidatedInput\n                    initialValue={entry.country}\n                    placeholder={stringCountry}\n                    validate={(s) => (s === \"\" ? null : \"success\")}\n                    onSuccess={this.updateRegistrationCountry}\n                  />\n                </Form.Group>\n              </Col>\n\n              {/* State */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>{stringState}</Form.Label>\n                  <ValidatedInput\n                    initialValue={entry.state}\n                    placeholder={stringState}\n                    validate={(s) => (s === \"\" ? null : \"success\")}\n                    onSuccess={this.updateRegistrationState}\n                  />\n                </Form.Group>\n              </Col>\n\n              {/* Lot Number */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.lot-label\" defaultMessage=\"Lot #\" />\n                  </Form.Label>\n                  <Form.Control\n                    type=\"number\"\n                    min=\"0\"\n                    value={entry.lot === 0 ? \"\" : entry.lot.toString()}\n                    onChange={this.updateRegistrationLot}\n                  />\n                </Form.Group>\n              </Col>\n\n              {/* Guest */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.guest-label\" defaultMessage=\"Guest\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={entry.guest ? entry.guest.toString() : \"false\"}\n                    as=\"select\"\n                    onChange={this.updateRegistrationGuest}\n                    className=\"custom-select\"\n                  >\n                    <option value=\"false\">{getString(\"common.response-no\", language)}</option>\n                    <option value=\"true\">{getString(\"common.response-yes\", language)}</option>\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n\n              {/* Novice */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.novice-label\" defaultMessage=\"Novice\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={entry.novice ? entry.novice.toString() : \"false\"}\n                    as=\"select\"\n                    onChange={this.updateRegistrationNovice}\n                    className=\"custom-select\"\n                  >\n                    <option value=\"false\">{getString(\"common.response-no\", language)}</option>\n                    <option value=\"true\">{getString(\"common.response-yes\", language)}</option>\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n\n              {/* Can Break Records */}\n              <Col md={2}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.record-eligible-label\" defaultMessage=\"Can Break Records\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={entry.canBreakRecords ? entry.canBreakRecords.toString() : \"false\"}\n                    as=\"select\"\n                    onChange={this.updateRegistrationCanBreakRecords}\n                    className=\"custom-select\"\n                  >\n                    <option value=\"false\">{getString(\"common.response-no\", language)}</option>\n                    <option value=\"true\">{getString(\"common.response-yes\", language)}</option>\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n            </Row>\n          </Container>\n\n          <Container style={gridStyle}>\n            <Row>\n              {/* Instagram */}\n              <Col md={2}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.instagram-label\" defaultMessage=\"Instagram\" />\n                  </Form.Label>\n                  <InputGroup>\n                    <InputGroup.Prepend>\n                      <InputGroup.Text>@</InputGroup.Text>\n                    </InputGroup.Prepend>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"\"\n                      value={entry.instagram}\n                      onChange={this.updateRegistrationInstagram}\n                    />\n                  </InputGroup>\n                </Form.Group>\n              </Col>\n\n              {/* Team */}\n              <Col md={2}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.team-label\" defaultMessage=\"Team\" />\n                  </Form.Label>\n                  <Form.Control type=\"text\" placeholder=\"\" value={entry.team} onChange={this.updateRegistrationTeam} />\n                </Form.Group>\n              </Col>\n\n              {/* Notes */}\n              <Col md={8}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.notes-label\" defaultMessage=\"Notes (for your personal use)\" />\n                  </Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    placeholder=\"\"\n                    value={entry.notes}\n                    onChange={this.updateRegistrationNotes}\n                  />\n                </Form.Group>\n              </Col>\n            </Row>\n          </Container>\n        </Card.Body>\n      </Card>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState, ownProps: OwnProps): StateProps => {\n  // Only have props for the entry corresponding to this one row.\n  const lookup = state.registration.lookup;\n  const entry = state.registration.entries[lookup[ownProps.id]];\n\n  return {\n    meet: state.meet,\n    entry: entry,\n    language: state.language,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    deleteRegistration: (entryId: number) => dispatch(deleteRegistration(entryId)),\n    updateRegistration: (entryId: number, obj: Partial<Entry>) => dispatch(updateRegistration(entryId, obj)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LifterRow);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the button that adds a new entry to the registrations table.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Button from \"react-bootstrap/Button\";\n\nimport { newRegistration } from \"../../actions/registrationActions\";\n\nimport { Entry } from \"../../types/dataTypes\";\nimport { Dispatch } from \"redux\";\n\ninterface DispatchProps {\n  newRegistration: (obj: Partial<Entry>) => void;\n}\n\ntype Props = DispatchProps;\n\nclass NewButton extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick = () => {\n    this.props.newRegistration({});\n  };\n\n  render() {\n    return (\n      <Button onClick={this.handleClick} variant=\"primary\" size=\"lg\" block>\n        <FormattedMessage id=\"registration.button-new-lifter\" defaultMessage=\"New Lifter\" />\n      </Button>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    newRegistration: (obj: Partial<Entry>) => dispatch(newRegistration(obj)),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(NewButton);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { Language } from \"../../types/dataTypes\";\nimport { getString } from \"../strings\";\n\n// Defines a general CSV manipulation class.\n// This is a JS port of the Python \"oplcsv.py\" library used by the OpenPowerlifting\n// main data project.\n\n// Makes a string suitable for inclusion in a simple CSV file,\n// by deleting all commas and double quotes.\nexport const csvString = (x?: number | string): string => {\n  if (x === undefined) return \"\";\n  let s = String(x);\n\n  // The OpenPowerlifting format uses commas and disallow double-quotes.\n  s = s.replace(/,/g, \" \");\n  s = s.replace(/\"/g, \" \");\n\n  // The number \"0\" is also never written out explicitly; the empty string is preferred.\n  if (s === \"0\") return \"\";\n\n  // Clean up some formatting.\n  s = s.replace(/ {2}/g, \" \").trim();\n  return s;\n};\n\n// Makes a string of a Date object.\n//\n// By default, Excel will reformat our pretty ISO8601 dates (2019-11-30) into\n// a localized, ambiguous variant (11/30/2019). This happens sufficiently often\n// in submitted meet results that it's worth a workaround.\n//\n// Prepending a single-quote character to the date string stops the reformatting.\nexport const csvDate = (iso8601?: string): string => {\n  if (iso8601 === undefined || iso8601 === \"\") return \"\";\n  return csvString(\"'\" + iso8601);\n};\n\n// Returns the in-spreadsheet name of a column. In standard spreadsheet software,\n// rows are numeric (1, 2, 3, ...) and columns are alphabetic (A, B, C, ...).\n// For errors, we'd like to report the column that's wrong.\n//\n// The 'index' input is zero-indexed.\nexport const getSpreadsheetColumnName = (index: number): string => {\n  const alphabet: string = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\n  // Column name accumulator.\n  // It's built by taking repeated mods in base 26: therefore new characters\n  // are appended to the left of the accumulator.\n  let acc: string = \"\";\n  let n: number = index;\n\n  while (n >= alphabet.length) {\n    const mod = n % alphabet.length;\n    const remainder = Math.floor(n / alphabet.length);\n\n    acc = alphabet[mod] + acc;\n\n    // The subtraction is because this isn't a pure modulus operator:\n    // by analogy to base-10, \"AA\" is equivalent to \"00\", and we want to render\n    // that.\n    n = remainder - 1;\n  }\n\n  return alphabet[n] + acc;\n};\n\n// Performs basic column level validate\n// - Ensure all mandatory columns are present\n// - Ensure there are no unrecognized/invalid columns\n// - Ensure there are no duplicate columns\nexport function validateCsvColumns(\n  csv: Csv,\n  language: Language,\n  MANDATORY_FIELDNAMES: string[],\n  OPTIONAL_FIELDNAMES: string[]\n): string | null {\n  // Check the existent fieldnames for sanity.\n  for (let i = 0; i < csv.fieldnames.length; ++i) {\n    const name: string = csv.fieldnames[i];\n\n    // Every fieldname that appears must be known.\n    if (!MANDATORY_FIELDNAMES.includes(name) && !OPTIONAL_FIELDNAMES.includes(name)) {\n      const colname = getSpreadsheetColumnName(i);\n      const allfields: string = MANDATORY_FIELDNAMES.join(\", \") + \", \" + OPTIONAL_FIELDNAMES.join(\", \");\n\n      const e = getString(\"error.csv-unknown-header\", language);\n      return e.replace(\"{name}\", name).replace(\"{ABC}\", colname).replace(\"{validList}\", allfields);\n    }\n\n    // Fieldnames cannot be repeated.\n    for (let j = i + 1; j < csv.fieldnames.length; ++j) {\n      if (csv.fieldnames[j] === csv.fieldnames[i]) {\n        const iname = getSpreadsheetColumnName(i);\n        const jname = getSpreadsheetColumnName(j);\n\n        const e = getString(\"error.csv-duplicate-header\", language);\n        return e.replace(\"{name}\", csv.fieldnames[i]).replace(\"{firstABC}\", iname).replace(\"{secondABC}\", jname);\n      }\n    }\n  }\n\n  // Check that all of the MANDATORY_FIELDNAMES are included.\n  for (let i = 0; i < MANDATORY_FIELDNAMES.length; ++i) {\n    if (!csv.fieldnames.includes(MANDATORY_FIELDNAMES[i])) {\n      const e = getString(\"error.csv-missing-header\", language);\n      return e.replace(\"{name}\", MANDATORY_FIELDNAMES[i]);\n    }\n  }\n\n  return null;\n}\n\n// A class for managing simple CSV files. Double-quotes and commas are disallowed.\nexport class Csv {\n  fieldnames: Array<string>; // Column names.\n  rows: Array<Array<string>>; // Individual rows.\n\n  constructor() {\n    this.fieldnames = [];\n    this.rows = [];\n  }\n\n  length(): number {\n    return this.rows.length;\n  }\n\n  index(name: string): number {\n    return this.fieldnames.indexOf(name);\n  }\n\n  appendColumn(name: string): void {\n    this.fieldnames.push(name);\n    for (let i = 0; i < this.rows.length; i++) {\n      this.rows[i].push(\"\");\n    }\n  }\n\n  appendColumns(namelist: Array<string>): void {\n    this.fieldnames = this.fieldnames.concat(namelist);\n    for (let i = 0; i < this.rows.length; i++) {\n      for (let j = 0; j < namelist.length; j++) {\n        this.rows[i].push(\"\");\n      }\n    }\n  }\n\n  insertColumn(index: number, name: string): void {\n    this.fieldnames.splice(index, 0, name);\n    for (let i = 0; i < this.rows.length; i++) {\n      this.rows[i].splice(index, 0, \"\");\n    }\n  }\n\n  removeColumnByIndex(index: number): void {\n    this.fieldnames.splice(index, 1);\n    for (let i = 0; i < this.rows.length; i++) {\n      this.rows[i].splice(index, 1);\n    }\n  }\n\n  removeColumnByName(name: string): void {\n    for (let i = 0; i < this.fieldnames.length; i++) {\n      if (this.fieldnames[i] === name) {\n        this.removeColumnByIndex(i);\n        return;\n      }\n    }\n  }\n\n  removeEmptyColumns(): void {\n    for (let i = 0; i < this.fieldnames.length; i++) {\n      let empty = true;\n      for (let j = 0; j < this.rows.length; j++) {\n        if (this.rows[j][i] !== \"\") {\n          empty = false;\n          break;\n        }\n      }\n      if (empty === true) {\n        this.removeColumnByIndex(i);\n        this.removeEmptyColumns();\n        return;\n      }\n    }\n  }\n\n  // Attempts to fill in this CSV object from a string.\n  // On success, returns the `this` Csv object.\n  // On failure, returns an error string with a user-presentable message.\n  fromString(s: string): Csv | string {\n    // The string cannot contain double-quotes: programs use those to allow\n    // in-field commas, which we disallow.\n    if (s.includes('\"')) {\n      let e = 'Double-quotes (\") are disallowed.';\n      e += \" Double-quotes can be automatically inserted by spreadsheet software\";\n      e += \" when a field contains a comma. Make sure to delete all in-field commas.\";\n      return e;\n    }\n\n    // Split by newline. It's OK for \\r to remain: we'll strip each field later.\n    // This always produces an array of length at least 1.\n    //\n    // Trim the string first: it's OK if files end with \"\\n\".\n    const lines = s.trim().split(\"\\n\");\n\n    // The first row contains fieldnames.\n    const fieldnames = lines[0].split(\",\").map((x) => x.trim());\n\n    // Any rows after the first contain data.\n    const rows = [];\n    for (let i = 1; i < lines.length; ++i) {\n      const row = lines[i].split(\",\").map((x) => x.trim());\n      rows.push(row);\n    }\n\n    // Sanity checking time!\n    // Every column must be named.\n    for (let i = 0; i < fieldnames.length; ++i) {\n      if (fieldnames[i] === \"\") {\n        const colname = getSpreadsheetColumnName(i);\n        return \"Column \" + colname + \" is missing a column name.\";\n      }\n    }\n\n    // Every row must have the same length as the fieldnames row.\n    for (let i = 0; i < rows.length; ++i) {\n      if (rows[i].length !== fieldnames.length) {\n        const rownum = i + 2; // 1-indexed, and the first row is fieldnames.\n        let e = \"Row \" + rownum + \" has \" + rows[i].length + \" columns,\";\n        e += \" but the first row has \" + fieldnames.length + \" columns.\";\n        return e;\n      }\n    }\n\n    this.fieldnames = fieldnames;\n    this.rows = rows;\n    return this;\n  }\n\n  toString(): string {\n    const headers = this.fieldnames.join(\",\");\n    const strRows: Array<string> = [];\n    for (let i = 0; i < this.rows.length; i++) {\n      strRows.push(this.rows[i].join(\",\"));\n    }\n    return headers + \"\\n\" + strRows.join(\"\\n\") + \"\\n\";\n  }\n}\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines logic for parsing strings into OpenLifter datatypes.\n// The strings can come from the user and are therefore untrusted.\n\nimport { Equipment, Event, Sex } from \"../types/dataTypes\";\n\n// Strictly parse a string to an integer. Negatives are allowed.\nexport const parseInteger = (s: string): number | undefined => {\n  // Characters will be compared to ASCII charcodes.\n  const ascii_0 = 0x30;\n  const ascii_9 = 0x39;\n  const ascii_minus = 0x2d;\n\n  // Disallow the empty string.\n  if (s.length === 0) {\n    return;\n  }\n\n  // Check the string character-by-character.\n  for (let i = 0; i < s.length; ++i) {\n    const charcode = s.charCodeAt(i);\n\n    // A single negative is allowed at the front.\n    if (i === 0 && charcode === ascii_minus) {\n      continue;\n    } else if (charcode < ascii_0 || charcode > ascii_9) {\n      return;\n    }\n  }\n\n  return parseInt(s, 10);\n};\n\n// Loosely parse a string to a Sex.\nexport const parseSex = (s: string): Sex | undefined => {\n  const lower = s.toLowerCase();\n  if (lower === \"m\") return \"M\";\n  if (lower === \"f\") return \"F\";\n  if (lower === \"mx\") return \"Mx\";\n  return;\n};\n\n// Loosely parse a string to an Equipment.\nexport const parseEquipment = (s: string): Equipment | undefined => {\n  const lower = s.toLowerCase();\n  if (lower === \"bare\") return \"Bare\";\n  if (lower === \"sleeves\") return \"Sleeves\";\n  if (lower === \"wraps\") return \"Wraps\";\n  if (lower === \"unlimited\") return \"Unlimited\";\n\n  // Be more forgiving on these ones: nobody remembers the dash.\n  if (lower.startsWith(\"single\")) return \"Single-ply\";\n  if (lower.startsWith(\"multi\")) return \"Multi-ply\";\n  return;\n};\n\n// Parse a string to an Event.\n// Valid characters are \"SBD\", which must occur in that order.\nexport const parseEvent = (s: string): Event | undefined => {\n  if (s === \"\") {\n    return;\n  }\n\n  // Allow lowercase variants like \"sbd\".\n  const lower = s.toLowerCase();\n  const has_squat = lower.includes(\"s\");\n  const has_bench = lower.includes(\"b\");\n  const has_deadlift = lower.includes(\"d\");\n\n  let acc = \"\";\n  if (has_squat) acc += \"S\";\n  if (has_bench) acc += \"B\";\n  if (has_deadlift) acc += \"D\";\n\n  // Having reconstructed the string in the right order, check whether it matches.\n  if (acc !== s) {\n    return;\n  }\n\n  return s as Event;\n};\n\n// Strictly parse a YYYY-MM-DD date.\nexport const parseDate = (s: string): string | undefined => {\n  // Allow a prepended single-quote, inserted for purposes of preventing\n  // Excel auto-localization.\n  s = s.replace(\"'\", \"\");\n\n  // \"YYYY-MM-DD\".length === 10.\n  if (s.length !== 10) {\n    return;\n  }\n\n  const pieces = s.split(\"-\");\n  if (pieces.length !== 3) {\n    return;\n  }\n\n  if (pieces[0].length !== 4 || pieces[1].length !== 2 || pieces[2].length !== 2) {\n    return;\n  }\n\n  const year = parseInteger(pieces[0]);\n  const month = parseInteger(pieces[1]);\n  const day = parseInteger(pieces[2]);\n\n  if (typeof year !== \"number\" || year < 1920) return;\n  if (typeof month !== \"number\" || month < 1 || month > 12) return;\n  if (typeof day !== \"number\" || day < 1 || day > 31) return;\n\n  return s;\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2020 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { Language, Sex, Equipment, Event, RecordLift, RecordType } from \"../../types/dataTypes\";\nimport {\n  delocalizeSex,\n  getString,\n  delocalizeEquipment,\n  delocalizeEvent,\n  delocalizeRecordLift,\n  delocaliseRecordType,\n} from \"../strings\";\n\nexport interface ValidationResult<T> {\n  errorMessage: string;\n  result: T | null;\n}\n\nexport function validateSex(cell: string, language: Language, errorPrefix: string): ValidationResult<Sex> {\n  let result: Sex | null = null;\n  let errorMessage: string = \"\";\n\n  try {\n    result = delocalizeSex(cell, language);\n  } catch (err) {\n    const e = getString(\"error.csv-field-suffix-sex-invalid\", language);\n    const m = getString(\"sex.m\", language);\n    const f = getString(\"sex.f\", language);\n    const mx = getString(\"sex.mx\", language);\n    errorMessage = errorPrefix + e.replace(\"{M}\", m).replace(\"{F}\", f).replace(\"{Mx}\", mx);\n  }\n\n  return {\n    errorMessage,\n    result,\n  };\n}\n\nexport function validateEquipment(cell: string, language: Language, errorPrefix: string): ValidationResult<Equipment> {\n  let result: Equipment | null = null;\n  let errorMessage: string = \"\";\n\n  try {\n    result = delocalizeEquipment(cell, language);\n  } catch (err) {\n    const e = getString(\"error.csv-field-suffix-equipment-invalid\", language);\n    const bare = getString(\"equipment.bare\", language);\n    const sleeves = getString(\"equipment.sleeves\", language);\n    const wraps = getString(\"equipment.wraps\", language);\n    const single = getString(\"equipment.single-ply\", language);\n    const multi = getString(\"equipment.multi-ply\", language);\n\n    errorMessage =\n      errorPrefix +\n      e\n        .replace(\"{bare}\", bare)\n        .replace(\"{sleeves}\", sleeves)\n        .replace(\"{wraps}\", wraps)\n        .replace(\"{single}\", single)\n        .replace(\"{multi}\", multi);\n  }\n\n  return {\n    errorMessage,\n    result,\n  };\n}\n\nexport function validateEvent(cell: string, language: Language, errorPrefix: string): ValidationResult<Event> {\n  let result: Event | null = null;\n  let errorMessage: string = \"\";\n\n  try {\n    result = delocalizeEvent(cell, language);\n  } catch (err) {\n    const e = getString(\"error.csv-field-suffix-event-invalid\", language);\n    const sbd = getString(\"event.sbd\", language);\n    const bd = getString(\"event.bd\", language);\n    const sb = getString(\"event.sb\", language);\n    const sd = getString(\"event.sd\", language);\n    const s = getString(\"event.s\", language);\n    const b = getString(\"event.b\", language);\n    const d = getString(\"event.d\", language);\n    errorMessage =\n      errorPrefix +\n      e\n        .replace(\"{SBD}\", sbd)\n        .replace(\"{BD}\", bd)\n        .replace(\"{SB}\", sb)\n        .replace(\"{SD}\", sd)\n        .replace(\"{S}\", s)\n        .replace(\"{B}\", b)\n        .replace(\"{D}\", d);\n  }\n\n  return {\n    result,\n    errorMessage,\n  };\n}\n\nexport function validateRecordLift(\n  cell: string,\n  language: Language,\n  errorPrefix: string\n): ValidationResult<RecordLift> {\n  let result: RecordLift | null = null;\n  let errorMessage: string = \"\";\n\n  try {\n    result = delocalizeRecordLift(cell, language);\n  } catch (err) {\n    // localise this\n    errorMessage = errorPrefix + \"record lift parsing failed\";\n  }\n\n  return {\n    result,\n    errorMessage,\n  };\n}\n\nexport function validateRecordType(\n  cell: string,\n  language: Language,\n  errorPrefix: string\n): ValidationResult<RecordType> {\n  let result: RecordType | null = null;\n  let errorMessage: string = \"\";\n\n  try {\n    result = delocaliseRecordType(cell, language);\n  } catch (err) {\n    // localise this\n    errorMessage = errorPrefix + \"record type parsing failed\";\n  }\n\n  return {\n    result,\n    errorMessage,\n  };\n}\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines logic for importing Registration data from a CSV file.\n// The CSV format is very strict: no double-quotes allowed, commas are always\n// separators, and the format of each field must exactly match our internal format.\n\nimport { csvDate, Csv, validateCsvColumns } from \"../export/csv\";\nimport { newDefaultEntry } from \"../entry\";\n\nimport { parseInteger, parseDate } from \"../parsers\";\nimport { getString, delocalizeFlight } from \"../strings\";\nimport { displayNumber } from \"../units\";\n\nimport { Entry, Language } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { validateSex, validateEquipment, validateEvent } from \"./validation\";\n\n// Generates a string representing a downloadable CSV file, for use as an example\n// of the registration format.\n//\n// This is in code so that it can live right next to loadRegistrations()\n// for easier long-term maintenance.\nexport const makeExampleRegistrationsCsv = (language: Language): string => {\n  const csv = new Csv();\n  csv.rows = [[]]; // appendColumns() will resize the dummy row correctly.\n\n  const day = getString(\"import.column-day\", language);\n  const platform = getString(\"import.column-platform\", language);\n  const flight = getString(\"import.column-flight\", language);\n  const name = getString(\"import.column-name\", language);\n  const sex = getString(\"import.column-sex\", language);\n  const equipment = getString(\"import.column-equipment\", language);\n  const division1 = getString(\"import.column-division-n\", language).replace(\"{N}\", \"1\");\n  const division2 = getString(\"import.column-division-n\", language).replace(\"{N}\", \"2\");\n  const division3 = getString(\"import.column-division-n\", language).replace(\"{N}\", \"3\");\n  const event1 = getString(\"import.column-event-n\", language).replace(\"{N}\", \"1\");\n  const event2 = getString(\"import.column-event-n\", language).replace(\"{N}\", \"2\");\n  const event3 = getString(\"import.column-event-n\", language).replace(\"{N}\", \"3\");\n  const birthdate = getString(\"import.column-birthdate\", language);\n  const age = getString(\"import.column-age\", language);\n  const memberid = getString(\"import.column-memberid\", language);\n  const country = getString(\"import.column-country\", language);\n  const state = getString(\"import.column-state\", language);\n  const lot = getString(\"import.column-lot\", language);\n  const guest = getString(\"import.column-guest\", language);\n  const canBreakRecords = getString(\"import.column-can-break-records\", language);\n  const team = getString(\"import.column-team\", language);\n  const instagram = getString(\"import.column-instagram\", language);\n  const notes = getString(\"import.column-notes\", language);\n\n  csv.appendColumns([day, platform, flight, name, sex, equipment]);\n  csv.appendColumns([division1, division2, division3, event1, event2, event3]);\n  csv.appendColumns([birthdate, age, memberid, country, state]);\n  csv.appendColumns([lot, team, guest, canBreakRecords, instagram, notes]);\n\n  csv.rows[0][csv.index(day)] = \"1\";\n  csv.rows[0][csv.index(platform)] = \"1\";\n  csv.rows[0][csv.index(flight)] = getString(\"flight.a\", language);\n  csv.rows[0][csv.index(name)] = getString(\"import.example-name\", language);\n  csv.rows[0][csv.index(sex)] = getString(\"import.example-sex\", language);\n  csv.rows[0][csv.index(equipment)] = getString(\"equipment.sleeves\", language);\n  csv.rows[0][csv.index(division1)] = getString(\"import.example-division1\", language);\n  csv.rows[0][csv.index(division2)] = getString(\"import.example-division2\", language);\n  // Intentionally blank: csv.rows[0][csv.index(division3)]\n  csv.rows[0][csv.index(event1)] = getString(\"event.sbd\", language);\n  csv.rows[0][csv.index(event2)] = getString(\"event.bd\", language);\n  // Intentionally blank: csv.rows[0][csv.index(event3)]\n  csv.rows[0][csv.index(birthdate)] = csvDate(getString(\"import.example-birthdate\", language));\n  // Intentionally blank: csv.rows[0][csv.index(age)]\n  // Intentionally blank: csv.rows[0][csv.index(memberid)]\n  csv.rows[0][csv.index(country)] = getString(\"import.example-country\", language);\n  csv.rows[0][csv.index(state)] = getString(\"import.example-state\", language);\n  // Intentionally blank: csv.rows[0][csv.index(lot)]\n  csv.rows[0][csv.index(guest)] = getString(\"common.response-yes\", language);\n  csv.rows[0][csv.index(canBreakRecords)] = getString(\"common.response-yes\", language);\n  // Intentionally blank: csv.rows[0][csv.index(team)]\n  // Intentionally blank: csv.rows[0][csv.index(team)]\n  csv.rows[0][csv.index(instagram)] = getString(\"import.example-instagram\", language);\n  csv.rows[0][csv.index(notes)] = getString(\"import.example-notes\", language);\n\n  return csv.toString();\n};\n\n// Attempts to load registration information from a CSV object.\n//\n// On success, returns an array of Entry objects.\n//   NOTE CAREFULLY that the global state is not updated by this function.\n//   The caller must integrate the Entry objects, updating EntryID Tracking.\n// On failure, returns an error string with a user-presentable message.\nexport const loadRegistrations = (state: GlobalState, csv: Csv, language: Language): Array<Entry> | string => {\n  const division_template = getString(\"import.column-division-n\", language);\n  const event_template = getString(\"import.column-event-n\", language);\n\n  const col_day = getString(\"import.column-day\", language);\n  const col_platform = getString(\"import.column-platform\", language);\n  const col_flight = getString(\"import.column-flight\", language);\n  const col_name = getString(\"import.column-name\", language);\n  const col_sex = getString(\"import.column-sex\", language);\n  const col_equipment = getString(\"import.column-equipment\", language);\n  const col_division1 = division_template.replace(\"{N}\", \"1\");\n  const col_division2 = division_template.replace(\"{N}\", \"2\");\n  const col_division3 = division_template.replace(\"{N}\", \"3\");\n  const col_division4 = division_template.replace(\"{N}\", \"4\");\n  const col_division5 = division_template.replace(\"{N}\", \"5\");\n  const col_event1 = event_template.replace(\"{N}\", \"1\");\n  const col_event2 = event_template.replace(\"{N}\", \"2\");\n  const col_event3 = event_template.replace(\"{N}\", \"3\");\n  const col_event4 = event_template.replace(\"{N}\", \"4\");\n  const col_event5 = event_template.replace(\"{N}\", \"5\");\n  const col_birthdate = getString(\"import.column-birthdate\", language);\n  const col_age = getString(\"import.column-age\", language);\n  const col_memberid = getString(\"import.column-memberid\", language);\n  const col_country = getString(\"import.column-country\", language);\n  const col_state = getString(\"import.column-state\", language);\n  const col_lot = getString(\"import.column-lot\", language);\n  const col_guest = getString(\"import.column-guest\", language);\n  const col_novice = getString(\"import.column-novice\", language);\n  const col_canBreakRecords = getString(\"import.column-can-break-records\", language);\n  const col_team = getString(\"import.column-team\", language);\n  const col_instagram = getString(\"import.column-instagram\", language);\n  const col_notes = getString(\"import.column-notes\", language);\n\n  // Every fieldname must be either mandatory or optional.\n  const MANDATORY_FIELDNAMES = [\n    col_day,\n    col_platform,\n    col_flight,\n    col_name,\n    col_sex,\n    col_equipment,\n    col_division1,\n    col_event1,\n  ];\n  const OPTIONAL_FIELDNAMES = [\n    col_division2,\n    col_division3,\n    col_division4,\n    col_division5,\n    col_event2,\n    col_event3,\n    col_event4,\n    col_event5,\n    col_birthdate,\n    col_age,\n    col_memberid,\n    col_country,\n    col_state,\n    col_lot,\n    col_guest,\n    col_novice,\n    col_canBreakRecords,\n    col_team,\n    col_instagram,\n    col_notes,\n  ];\n\n  const csvValidationError = validateCsvColumns(csv, language, MANDATORY_FIELDNAMES, OPTIONAL_FIELDNAMES);\n  if (csvValidationError !== null) {\n    return csvValidationError;\n  }\n\n  // The \"Platform\" column\" must occur after the \"Day\" column: the parsing\n  // below is stateful, and needs to know how many platforms are on that day\n  // when it reads in the platform value.\n  if (csv.fieldnames.indexOf(col_platform) <= csv.fieldnames.indexOf(col_day)) {\n    const e = getString(\"error.csv-day-platform-order\", language);\n    return e.replace(\"{day}\", col_day).replace(\"{platform}\", col_platform);\n  }\n\n  // The caller needs to update this field on the state later, if successful.\n  let nextEntryId = state.registration.nextEntryId;\n  const entries: Array<Entry> = [];\n\n  const errprefix_template = getString(\"error.csv-field-prefix\", language);\n\n  // The fieldnames are valid! Now we can start building Entries.\n  for (let i = 0; i < csv.rows.length; ++i) {\n    const entry: Entry = newDefaultEntry(nextEntryId++);\n    entries.push(entry);\n\n    // Iterate over each field and integrate it into the Entry object.\n    const row: Array<string> = csv.rows[i];\n    for (let j = 0; j < row.length; ++j) {\n      const fieldname = csv.fieldnames[j];\n      const val = row[j];\n\n      // User-visible row number, for error messages.\n      // The first row is for the fieldnames, and spreadsheet programs are 1-indexed.\n      const rowstr = displayNumber(i + 2, language);\n\n      // Start building the error string early, since it's repeated a lot.\n      const errprefix = errprefix_template\n        .replace(\"{cellType}\", fieldname)\n        .replace(\"{cellValue}\", val)\n        .replace(\"{rowNumber}\", rowstr);\n\n      if (fieldname === col_day) {\n        // Default to 1.\n        if (val === \"\") {\n          entry.day = 1;\n        } else {\n          const integer = parseInteger(val);\n\n          // Must be an integer.\n          if (typeof integer !== \"number\") {\n            return errprefix + getString(\"error.csv-field-suffix-integer\", language);\n          }\n\n          // Can't be less than one: there's always at least one day.\n          if (integer < 1) {\n            return errprefix + getString(\"error.csv-field-suffix-positive\", language);\n          }\n\n          // Can't be greater than the number of days specified in the GlobalState.\n          const numDays = state.meet.lengthDays;\n          if (integer > numDays) {\n            const e = getString(\"error.csv-field-suffix-day-overflow\", language);\n            return errprefix + e.replace(\"{numDays}\", String(numDays));\n          }\n\n          // All checks passed!\n          entry.day = integer;\n        }\n      } else if (fieldname === col_platform) {\n        // Default to 1.\n        if (val === \"\") {\n          entry.platform = 1;\n        } else {\n          const integer = parseInteger(val);\n\n          // Must be an integer.\n          if (typeof integer !== \"number\") {\n            return errprefix + getString(\"error.csv-field-suffix-integer\", language);\n          }\n\n          // Can't be less than one: there's always at least one platform.\n          if (integer < 1) {\n            return errprefix + getString(\"error.csv-field-suffix-positive\", language);\n          }\n\n          // Can't be greater than the number of platforms specified in the GlobalState.\n          // The \"Day\" column is guaranteed to already have been parsed: code above\n          // makes sure the \"Day\" column is before the \"Platform\" column.\n          const day = entry.day;\n          const platforms = state.meet.platformsOnDays[day];\n          if (integer > platforms) {\n            const e = getString(\"error.csv-field-suffix-platform-overflow\", language);\n            return errprefix + e.replace(\"{dayNumber}\", String(day)).replace(\"{numPlatforms}\", String(platforms));\n          }\n\n          // All checks passed!\n          entry.platform = integer;\n        }\n      } else if (fieldname === col_flight) {\n        // Default to A.\n        if (val === \"\") {\n          entry.flight = \"A\";\n        } else {\n          try {\n            entry.flight = delocalizeFlight(val, language);\n          } catch (err) {\n            return errprefix + getString(\"error.csv-field-suffix-flight-invalid\", language);\n          }\n        }\n      } else if (fieldname === col_name) {\n        if (val === \"\") {\n          return errprefix + getString(\"error.csv-field-suffix-name-blank\", language);\n        }\n        entry.name = val;\n      } else if (fieldname === col_sex) {\n        const validationResult = validateSex(val, language, errprefix);\n        if (validationResult.result !== null) {\n          entry.sex = validationResult.result;\n        } else {\n          return validationResult.errorMessage;\n        }\n      } else if (fieldname === col_equipment) {\n        const validationResult = validateEquipment(val, language, errprefix);\n        if (validationResult.result !== null) {\n          entry.equipment = validationResult.result;\n        } else {\n          return validationResult.errorMessage;\n        }\n      } else if (\n        fieldname === col_division1 ||\n        fieldname === col_division2 ||\n        fieldname === col_division3 ||\n        fieldname === col_division4 ||\n        fieldname === col_division5\n      ) {\n        if (val === \"\") {\n          // Only the first Division is mandatory.\n          if (fieldname === col_division1) {\n            return errprefix + getString(\"error.csv-field-suffix-division-blank\", language);\n          }\n        } else {\n          // Check that it appears as a valid division.\n          if (!state.meet.divisions.includes(val)) {\n            return errprefix + getString(\"error.csv-field-suffix-division-invalid\", language);\n          }\n\n          // Check that it wasn't already added.\n          if (entry.divisions.includes(val)) {\n            return errprefix + getString(\"error.csv-field-suffix-division-duplicate\", language);\n          }\n\n          entry.divisions.push(val);\n        }\n      } else if (\n        fieldname === col_event1 ||\n        fieldname === col_event2 ||\n        fieldname === col_event3 ||\n        fieldname === col_event4 ||\n        fieldname === col_event5\n      ) {\n        if (val === \"\") {\n          // Only the first Event is mandatory.\n          if (fieldname === col_event1) {\n            return errprefix + getString(\"error.csv-field-suffix-event-blank\", language);\n          }\n        } else {\n          const validationResult = validateEvent(val, language, errprefix);\n          if (validationResult.result !== null) {\n            const evt = validationResult.result;\n\n            if (entry.events.includes(evt)) {\n              return errprefix + getString(\"error.csv-field-suffix-event-duplicate\", language);\n            }\n            entry.events.push(evt);\n          } else {\n            return validationResult.errorMessage;\n          }\n        }\n      } else if (fieldname === col_birthdate) {\n        // BirthDate is optional.\n        if (val !== \"\") {\n          const bd = parseDate(val);\n          if (typeof bd !== \"string\") {\n            return errprefix + getString(\"error.csv-field-suffix-date-format\", language);\n          }\n\n          entry.birthDate = bd;\n        }\n      } else if (fieldname === col_age) {\n        // Age is optional.\n        if (val !== \"\") {\n          const integer = parseInteger(val);\n          if (typeof integer !== \"number\" || integer < 1) {\n            return errprefix + getString(\"error.csv-field-empty-or-positive\", language);\n          }\n\n          // All checks passed!\n          entry.age = integer;\n        }\n      } else if (fieldname === col_memberid) {\n        entry.memberId = val;\n      } else if (fieldname === col_country) {\n        entry.country = val;\n      } else if (fieldname === col_state) {\n        entry.state = val;\n      } else if (fieldname === col_lot) {\n        // Empty strings are allowed: just doesn't use lots.\n        if (val !== \"\") {\n          const integer = parseInteger(val);\n          if (typeof integer !== \"number\" || integer < 1) {\n            return errprefix + getString(\"error.csv-field-empty-or-positive\", language);\n          }\n\n          // All checks passed!\n          entry.lot = integer;\n        }\n      } else if (fieldname === col_guest) {\n        if (val === getString(\"common.response-yes\", language)) {\n          entry.guest = true;\n        } else if (val === getString(\"common.response-no\", language)) {\n          entry.guest = false;\n        } else if (val === \"\") {\n          entry.guest = false;\n        } else {\n          const e = getString(\"error.csv-field-unknown-boolean\", language);\n          const yes = getString(\"common.response-yes\", language);\n          const no = getString(\"common.response-no\", language);\n          return errprefix + e.replace(\"{Yes}\", yes).replace(\"{No}\", no);\n        }\n      } else if (fieldname === col_canBreakRecords) {\n        if (val === getString(\"common.response-yes\", language)) {\n          entry.canBreakRecords = true;\n        } else if (val === getString(\"common.response-no\", language)) {\n          entry.canBreakRecords = false;\n        } else if (val === \"\") {\n          entry.canBreakRecords = true; // Default to true\n        } else {\n          const e = getString(\"error.csv-field-unknown-boolean\", language);\n          const yes = getString(\"common.response-yes\", language);\n          const no = getString(\"common.response-no\", language);\n          return errprefix + e.replace(\"{Yes}\", yes).replace(\"{No}\", no);\n        }\n      } else if (fieldname === col_novice) {\n        if (val === getString(\"common.response-yes\", language)) {\n          entry.novice = true;\n        } else if (val === getString(\"common.response-no\", language)) {\n          entry.novice = false;\n        } else if (val === \"\") {\n          entry.guest = false;\n        } else {\n          const e = getString(\"error.csv-field-unknown-boolean\", language);\n          const yes = getString(\"common.response-yes\", language);\n          const no = getString(\"common.response-no\", language);\n          return errprefix + e.replace(\"{Yes}\", yes).replace(\"{No}\", no);\n        }\n      } else if (fieldname === col_team) {\n        entry.team = val;\n      } else if (fieldname === col_instagram) {\n        entry.instagram = val;\n      } else if (fieldname === col_notes) {\n        entry.notes = val;\n      } else {\n        return 'Missing handler for the \"' + fieldname + '\" column';\n      }\n    }\n  }\n\n  return entries;\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Exports registration data to a CSV file.\n\nimport { csvDate, csvString, Csv } from \"./csv\";\nimport { getString, localizeEquipment, localizeEvent, localizeFlight, localizeSex } from \"../strings\";\n\nimport { Language } from \"../../types/dataTypes\";\nimport { RegistrationState } from \"../../types/stateTypes\";\n\nconst boolToYesNo = (b: boolean, language: Language): string => {\n  if (b === true) {\n    return getString(\"common.response-yes\", language);\n  }\n  return getString(\"common.response-no\", language);\n};\n\nexport const makeRegistrationsCsv = (registration: RegistrationState, language: Language): string => {\n  const csv = new Csv();\n\n  const division_template = getString(\"import.column-division-n\", language);\n  const event_template = getString(\"import.column-event-n\", language);\n\n  const col_day = getString(\"import.column-day\", language);\n  const col_platform = getString(\"import.column-platform\", language);\n  const col_flight = getString(\"import.column-flight\", language);\n  const col_name = getString(\"import.column-name\", language);\n  const col_sex = getString(\"import.column-sex\", language);\n  const col_equipment = getString(\"import.column-equipment\", language);\n  const col_division1 = division_template.replace(\"{N}\", \"1\");\n  const col_event1 = event_template.replace(\"{N}\", \"1\");\n  const col_birthdate = getString(\"import.column-birthdate\", language);\n  const col_age = getString(\"import.column-age\", language);\n  const col_memberid = getString(\"import.column-memberid\", language);\n  const col_country = getString(\"import.column-country\", language);\n  const col_state = getString(\"import.column-state\", language);\n  const col_lot = getString(\"import.column-lot\", language);\n  const col_guest = getString(\"import.column-guest\", language);\n  const col_novice = getString(\"import.column-novice\", language);\n  const col_canBreakRecords = getString(\"import.column-can-break-records\", language);\n  const col_team = getString(\"import.column-team\", language);\n  const col_instagram = getString(\"import.column-instagram\", language);\n  const col_notes = getString(\"import.column-notes\", language);\n\n  csv.appendColumns([col_day, col_platform, col_flight, col_name, col_sex, col_equipment]);\n  csv.appendColumns([col_division1, col_event1]); // Base cases. Others inserted by need.\n  csv.appendColumns([col_birthdate, col_age, col_memberid, col_country, col_state]);\n  csv.appendColumns([col_lot, col_guest, col_canBreakRecords, col_novice, col_team, col_instagram, col_notes]);\n\n  for (let i = 0; i < registration.entries.length; ++i) {\n    const entry = registration.entries[i];\n\n    const row: Array<string> = new Array(csv.fieldnames.length).fill(\"\");\n    row[csv.index(col_day)] = csvString(entry.day);\n    row[csv.index(col_platform)] = csvString(entry.platform);\n    row[csv.index(col_flight)] = csvString(localizeFlight(entry.flight, language));\n    row[csv.index(col_name)] = csvString(entry.name);\n    row[csv.index(col_sex)] = csvString(localizeSex(entry.sex, language));\n    row[csv.index(col_equipment)] = csvString(localizeEquipment(entry.equipment, language));\n    row[csv.index(col_birthdate)] = csvDate(entry.birthDate);\n    row[csv.index(col_age)] = csvString(entry.age);\n    row[csv.index(col_memberid)] = csvString(entry.memberId);\n    row[csv.index(col_country)] = csvString(entry.country);\n    row[csv.index(col_state)] = csvString(entry.state);\n    row[csv.index(col_lot)] = csvString(entry.lot);\n    row[csv.index(col_guest)] = csvString(boolToYesNo(entry.guest, language));\n    row[csv.index(col_novice)] = csvString(boolToYesNo(entry.novice || false, language));\n    row[csv.index(col_canBreakRecords)] = csvString(boolToYesNo(entry.canBreakRecords || false, language));\n    row[csv.index(col_team)] = csvString(entry.team);\n    row[csv.index(col_instagram)] = csvString(entry.instagram);\n    row[csv.index(col_notes)] = csvString(entry.notes);\n\n    // Divisions.\n    for (let j = 0; j < entry.divisions.length; ++j) {\n      const division: string = entry.divisions[j];\n      const column: string = division_template.replace(\"{N}\", String(j + 1));\n\n      // Create the column if necessary. The previously numbered column exists.\n      if (csv.index(column) === -1) {\n        const prevIndex = csv.index(division_template.replace(\"{N}\", String(j)));\n        csv.insertColumn(prevIndex + 1, column); // Make space in other rows.\n        row.splice(prevIndex + 1, 0, \"\"); // Make space in this row.\n      }\n      row[csv.index(column)] = csvString(division);\n    }\n\n    // Events.\n    for (let j = 0; j < entry.events.length; ++j) {\n      const event = entry.events[j];\n      const column: string = event_template.replace(\"{N}\", String(j + 1));\n\n      // Create the column if necessary. The previously numbered column exists.\n      if (csv.index(column) === -1) {\n        const prevIndex = csv.index(event_template.replace(\"{N}\", String(j)));\n        csv.insertColumn(prevIndex + 1, column); // Make space in other rows.\n        row.splice(prevIndex + 1, 0, \"\"); // Make space in this row.\n      }\n      row[csv.index(column)] = csvString(localizeEvent(event, language));\n    }\n\n    csv.rows.push(row);\n  }\n\n  return csv.toString();\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Common functions shared by the Randomize feature.\n\n// Generate a gibberish string, between 0-11 characters.\nexport const randomString = (): string => {\n  // Converts each digit to a value in base 36.\n  return Math.random().toString(36).substr(2);\n};\n\n// Generate a random integer between max and min, inclusive.\nexport const randomInt = (min: number, max: number) => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n// Generate a random floating-point number with a set number of fractional digits.\nexport const randomFixedPoint = (min: number, max: number, fixedPoints: number) => {\n  const power = Math.pow(10, fixedPoints);\n\n  // Construct an integer from [0, (max - min + 1) * 10^fixedPoints].\n  const k = Math.floor(Math.random() * (max - min + 1) * power);\n\n  // Translate it back to normal space.\n  return k / power + min;\n};\n\n// Randomly shuffle an array in-place using the Fisher-Yates algorithm.\n//\n// For each element, swap it with a randomly-chosen element of greater or equal index.\nexport const shuffle = <T>(array: Array<Readonly<T>>): void => {\n  const numElements = array.length;\n\n  for (let i = 0; i < numElements - 1; i++) {\n    // Randomly select an element of greater or equal index.\n    const switchIndex = randomInt(i, numElements - 1);\n\n    // Swap the two elements.\n    const temp = array[i];\n    array[i] = array[switchIndex];\n    array[switchIndex] = temp;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// The parent component of the Registration page, contained by the RegistrationContainer.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Button from \"react-bootstrap/Button\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport Card from \"react-bootstrap/Card\";\n\nimport { faSpinner, faTimes, faRandom, faSort } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport LifterTable from \"./LifterTable\";\nimport LifterRow from \"./LifterRow\";\nimport NewButton from \"./NewButton\";\nimport ErrorModal from \"../ErrorModal\";\n\nimport { Csv } from \"../../logic/export/csv\";\nimport { makeExampleRegistrationsCsv, loadRegistrations } from \"../../logic/import/registration-csv\";\nimport { makeRegistrationsCsv } from \"../../logic/export/registrations\";\nimport { getString } from \"../../logic/strings\";\n\nimport { newRegistration, deleteRegistration, assignLotNumbers } from \"../../actions/registrationActions\";\n\nimport { saveAs } from \"file-saver\";\n\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { Entry } from \"../../types/dataTypes\";\nimport { Dispatch } from \"redux\";\nimport { DropdownButton, Dropdown } from \"react-bootstrap\";\nimport { shuffle } from \"../debug/RandomizeHelpers\";\n\ninterface StateProps {\n  global: GlobalState;\n}\n\ninterface DispatchProps {\n  newRegistration: (obj: Partial<Entry>) => void;\n  deleteRegistration: (id: number) => void;\n  assignLotNumbers: (lotNumbers: number[]) => void;\n}\n\ntype Props = StateProps & DispatchProps;\n\ninterface InternalState {\n  // Controls the ErrorModal popup. Shown when error !== \"\".\n  error: string;\n  // Used for showing spinning indicators when loading files\n  isLoadingFiles: boolean;\n}\n\n// Used to distinguish between the Overwrite and Append modes.\nlet globalImportKind: string = \"Overwrite\";\n\nclass RegistrationView extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n    this.handleDownloadCsvTemplateClick = this.handleDownloadCsvTemplateClick.bind(this);\n    this.handleExportCsvClick = this.handleExportCsvClick.bind(this);\n    this.handleOverwriteClick = this.handleOverwriteClick.bind(this);\n    this.handleAppendClick = this.handleAppendClick.bind(this);\n    this.handleLoadFileInput = this.handleLoadFileInput.bind(this);\n    this.handleSequentialLotNumbersClick = this.handleSequentialLotNumbersClick.bind(this);\n    this.handleRandomLotNumbersClick = this.handleRandomLotNumbersClick.bind(this);\n    this.handleRemoveLotNumbersClick = this.handleRemoveLotNumbersClick.bind(this);\n    this.closeErrorModal = this.closeErrorModal.bind(this);\n\n    this.state = { error: \"\", isLoadingFiles: false };\n  }\n\n  handleDownloadCsvTemplateClick = () => {\n    const text = makeExampleRegistrationsCsv(this.props.global.language);\n    const blob = new Blob([text], { type: \"application/text;charset=utf-8\" });\n    const filename = getString(\"import.template-filename\", this.props.global.language) + \".csv\";\n    saveAs(blob, filename);\n  };\n\n  handleExportCsvClick = () => {\n    let meetname = this.props.global.meet.name;\n    if (meetname === \"\") {\n      meetname = getString(\"common.unnamed-filename\", this.props.global.language);\n    }\n    meetname = meetname.replace(/ /g, \"-\");\n\n    const language = this.props.global.language;\n    const text = makeRegistrationsCsv(this.props.global.registration, language);\n    const blob = new Blob([text], { type: \"application/text;charset=utf-8\" });\n\n    const basename = getString(\"import.export-filename\", this.props.global.language);\n    const filename = basename.replace(\"{MeetName}\", meetname) + \".csv\";\n    saveAs(blob, filename);\n  };\n\n  handleOverwriteClick = () => {\n    globalImportKind = \"Overwrite\";\n    const loadhelper = document.getElementById(\"loadhelper\");\n    if (loadhelper !== null) {\n      loadhelper.click();\n    }\n  };\n\n  handleSequentialLotNumbersClick = () => {\n    this.updateLotNumbers(\"AssignSequentially\");\n  };\n\n  handleRandomLotNumbersClick = () => {\n    this.updateLotNumbers(\"AssignRandomly\");\n  };\n\n  handleRemoveLotNumbersClick = () => {\n    this.updateLotNumbers(\"RemoveAll\");\n  };\n\n  updateLotNumbers = (manipulation: \"AssignSequentially\" | \"AssignRandomly\" | \"RemoveAll\"): void => {\n    const entries = this.props.global.registration.entries;\n    let lotNumbers: number[];\n\n    // Removing lot numbers is as simple as setting the number to 0\n    if (manipulation === \"RemoveAll\") {\n      lotNumbers = entries.map(() => 0);\n    } else {\n      // If not removing, generate a set of sequential lot numbers for all lifters.\n      lotNumbers = entries.map((_entry, index) => index + 1);\n    }\n\n    // If randomization was requested, shuffle the lot number array in-place.\n    if (manipulation === \"AssignRandomly\") {\n      shuffle(lotNumbers);\n    }\n\n    // Finally, update the lot numbers in the state\n    this.props.assignLotNumbers(lotNumbers);\n  };\n\n  handleAppendClick = () => {\n    globalImportKind = \"Append\";\n    const loadhelper = document.getElementById(\"loadhelper\");\n    if (loadhelper !== null) {\n      loadhelper.click();\n    }\n  };\n\n  handleLoadFileInput = () => {\n    const loadHelper = document.getElementById(\"loadhelper\");\n    if (loadHelper === null || !(loadHelper instanceof HTMLInputElement) || loadHelper.files === null) {\n      return;\n    }\n\n    const selectedFile = loadHelper.files[0];\n    const rememberThis = this;\n\n    const reader = new FileReader();\n\n    reader.onload = function () {\n      // If this occurs, we've introduced a bug when initiating the file reader, or the read failed.\n      // Add this check as a guard so the typing is narrowed\n      if (typeof reader.result !== \"string\") {\n        window.alert(\"Unable to load file: an unexpected internal error occured\");\n        return;\n      }\n\n      const csv = new Csv();\n      const maybeError = csv.fromString(reader.result.replace(/;/g, \",\"));\n\n      // Check if an error message occurred.\n      if (typeof maybeError === \"string\") {\n        rememberThis.setState({ error: maybeError });\n        return;\n      }\n\n      // Convert the Csv to an Array<Entry>.\n      const language = rememberThis.props.global.language;\n      const maybeEntries = loadRegistrations(rememberThis.props.global, csv, language);\n      if (typeof maybeEntries === \"string\") {\n        rememberThis.setState({ error: maybeEntries });\n        return;\n      }\n\n      // Successfully parsed and loaded!\n      const entries: Array<Entry> = maybeEntries;\n\n      // If the mode is \"Overwrite\", delete all existing Entries.\n      if (globalImportKind === \"Overwrite\") {\n        const entryIds = rememberThis.props.global.registration.entries.map((e) => e.id);\n        for (let i = 0; i < entryIds.length; ++i) {\n          rememberThis.props.deleteRegistration(entryIds[i]);\n        }\n      }\n\n      // Add all the new Entries.\n      for (let i = 0; i < entries.length; ++i) {\n        // Deleting the 'id' field causes newRegistration() to assign a valid one.\n        delete entries[i].id;\n        rememberThis.props.newRegistration(entries[i]);\n      }\n    };\n\n    reader.onloadstart = function () {\n      rememberThis.setState({ isLoadingFiles: true });\n    };\n\n    reader.onloadend = function () {\n      rememberThis.setState({ isLoadingFiles: false });\n    };\n\n    reader.readAsText(selectedFile);\n    // this will reset the input field so the same file can be selected again. Without this picking the same file for import silently does nothing\n    loadHelper.value = \"\";\n  };\n\n  closeErrorModal = () => {\n    this.setState({ error: \"\" });\n  };\n\n  render() {\n    const numEntries = this.props.global.registration.entries.length;\n    const dropdownIconStyle = { width: \"16px\", marginRight: \"6px\" };\n\n    return (\n      <div>\n        <ErrorModal\n          error={this.state.error}\n          title={getString(\"common.importation-error\", this.props.global.language)}\n          show={this.state.error !== \"\"}\n          close={this.closeErrorModal}\n        />\n\n        <Card style={{ marginBottom: \"17px\" }}>\n          <Card.Header>\n            <FormattedMessage id=\"registration.auto-import-card-header\" defaultMessage=\"Auto-Import Registrations\" />\n          </Card.Header>\n          <Card.Body>\n            <Button variant=\"info\" onClick={this.handleDownloadCsvTemplateClick}>\n              <FormattedMessage id=\"registration.button-download-template\" defaultMessage=\"Download Template\" />\n            </Button>\n\n            <Button\n              variant=\"success\"\n              disabled={numEntries === 0}\n              onClick={this.handleExportCsvClick}\n              style={{ marginLeft: \"14px\" }}\n            >\n              <FormattedMessage id=\"registration.button-export-to-csv\" defaultMessage=\"Export to CSV\" />\n            </Button>\n\n            <ButtonGroup style={{ marginLeft: \"14px\" }}>\n              <Button variant=\"danger\" onClick={this.handleOverwriteClick}>\n                {this.state.isLoadingFiles && <FontAwesomeIcon style={{ marginRight: \"5px\" }} icon={faSpinner} spin />}\n                <FormattedMessage\n                  id=\"registration.button-overwrite-from-csv\"\n                  defaultMessage=\"Overwrite Registrations from CSV\"\n                />\n              </Button>\n              <Button variant=\"warning\" onClick={this.handleAppendClick}>\n                <FormattedMessage\n                  id=\"registration.button-append-from-csv\"\n                  defaultMessage=\"Append Registrations from CSV\"\n                />\n              </Button>\n            </ButtonGroup>\n          </Card.Body>\n        </Card>\n\n        <Card style={{ marginBottom: \"17px\" }}>\n          <Card.Header>\n            <FormattedMessage id=\"registration.tools-header\" defaultMessage=\"Tools\" />\n          </Card.Header>\n          <Card.Body>\n            <ButtonGroup vertical>\n              <DropdownButton\n                as={ButtonGroup}\n                title={\n                  <FormattedMessage id=\"registration.dropdown-manage-lot-numbers\" defaultMessage=\"Manage Lot Numbers\" />\n                }\n                id=\"registration.button-assign-lot-numbers\"\n              >\n                <Dropdown.Item onClick={this.handleSequentialLotNumbersClick}>\n                  <FontAwesomeIcon icon={faSort} style={dropdownIconStyle} />\n                  <FormattedMessage\n                    id=\"registration.button-assign-lot-numbers-sequentially\"\n                    defaultMessage=\"Assign Sequentially\"\n                  />\n                </Dropdown.Item>\n                <Dropdown.Item onClick={this.handleRandomLotNumbersClick}>\n                  <FontAwesomeIcon icon={faRandom} style={dropdownIconStyle} />\n                  <FormattedMessage\n                    id=\"registration.button-assign-lot-numbers-randomly\"\n                    defaultMessage=\"Assign Randomly\"\n                  />\n                </Dropdown.Item>\n                <Dropdown.Item onClick={this.handleRemoveLotNumbersClick}>\n                  <FontAwesomeIcon icon={faTimes} style={dropdownIconStyle} />\n                  <FormattedMessage id=\"registration.button-remove-lot-numbers\" defaultMessage=\"Remove Lot Numbers\" />\n                </Dropdown.Item>\n              </DropdownButton>\n            </ButtonGroup>\n          </Card.Body>\n        </Card>\n\n        <LifterTable entries={this.props.global.registration.entries} rowRenderer={LifterRow} />\n        <NewButton />\n\n        <input\n          id=\"loadhelper\"\n          type=\"file\"\n          accept=\".csv\"\n          style={{ display: \"none\" }}\n          onChange={this.handleLoadFileInput}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  global: state,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    newRegistration: (obj: Partial<Entry>) => dispatch(newRegistration(obj)),\n    deleteRegistration: (id: number) => dispatch(deleteRegistration(id)),\n    assignLotNumbers: (lotNumbers: number[]) => dispatch(assignLotNumbers(lotNumbers)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RegistrationView);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Container for the Registration page.\n\nimport React from \"react\";\n\nimport RegistrationView from \"../components/registration/RegistrationView\";\nimport styles from \"../components/common/ContentArea.module.scss\";\n\nclass RegistrationContainer extends React.Component<{}> {\n  render() {\n    return (\n      <div className={styles.contentArea}>\n        <RegistrationView />\n      </div>\n    );\n  }\n}\n\nexport default RegistrationContainer;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Table from \"react-bootstrap/Table\";\n\nimport { getString } from \"../../logic/strings\";\n\nimport { Entry, Language } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\n\ninterface OwnProps {\n  entries: Array<Entry>;\n  rowRenderer: any;\n  inLiftingPage?: boolean;\n}\n\ninterface StateProps {\n  inKg: boolean;\n  language: Language;\n}\n\ntype Props = OwnProps & StateProps;\n\nclass LifterTable extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n    this.renderRows = this.renderRows.bind(this);\n    this.renderHeader = this.renderHeader.bind(this);\n  }\n\n  renderRows = () => {\n    const LifterRow = this.props.rowRenderer;\n    const { entries } = this.props;\n    const inLiftingPage = this.props.inLiftingPage === true;\n\n    return entries.map((entry) => <LifterRow key={entry.id} id={entry.id} inLiftingPage={inLiftingPage} />);\n  };\n\n  renderHeader = () => {\n    // Styling for small, single-character selector columns.\n    const shortStyle = { width: \"85px\" };\n\n    const inKg = this.props.inKg;\n\n    const bodyweightId = inKg ? \"weigh-ins.bodyweight-header-kg\" : \"weigh-ins.bodyweight-header-lbs\";\n    const squatId = inKg ? \"weigh-ins.squat-header-kg\" : \"weigh-ins.squat-header-lbs\";\n    const benchId = inKg ? \"weigh-ins.bench-header-kg\" : \"weigh-ins.bench-header-lbs\";\n    const deadliftId = inKg ? \"weigh-ins.deadlift-header-kg\" : \"weigh-ins.deadlift-header-lbs\";\n\n    return (\n      <tr>\n        <th style={shortStyle}>\n          <FormattedMessage id=\"weigh-ins.platform-header\" defaultMessage=\"Platform\" />\n        </th>\n        <th style={shortStyle}>\n          <FormattedMessage id=\"weigh-ins.platform-flight\" defaultMessage=\"Flight\" />\n        </th>\n        <th>{getString(\"lifting.column-lifter\", this.props.language)}</th>\n\n        <th style={shortStyle}>{getString(\"common.age\", this.props.language)}</th>\n        <th style={shortStyle}>{getString(bodyweightId, this.props.language)}</th>\n        <th style={shortStyle}>\n          <FormattedMessage id=\"weigh-ins.squat-rack-header\" defaultMessage=\"Squat Rack\" />\n        </th>\n        <th style={shortStyle}>{getString(squatId, this.props.language)}</th>\n        <th style={shortStyle}>\n          <FormattedMessage id=\"weigh-ins.bench-rack-header\" defaultMessage=\"Bench Rack\" />\n        </th>\n        <th style={shortStyle}>{getString(benchId, this.props.language)}</th>\n        <th style={shortStyle}>{getString(deadliftId, this.props.language)}</th>\n      </tr>\n    );\n  };\n\n  render() {\n    return (\n      <Table hover size=\"sm\" style={{ margin: \"0px\" }}>\n        <thead>{this.renderHeader()}</thead>\n        <tbody>{this.renderRows()}</tbody>\n      </Table>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  inKg: state.meet.inKg,\n  language: state.language,\n});\n\nexport default connect(mapStateToProps)(LifterTable);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport {\n  EnterAttemptAction,\n  MarkLiftAction,\n  SetLiftingGroupAction,\n  OverrideAttemptAction,\n  OverrideEntryIdAction,\n  SetTableInfoAction,\n} from \"../types/actionTypes\";\nimport { Flight, Lift } from \"../types/dataTypes\";\nimport { LiftingState } from \"../types/stateTypes\";\n\n// Sets a weightKg that doesn't have a good/failed value, for entering in attempts.\nexport const enterAttempt = (\n  entryId: number,\n  lift: Lift,\n  attemptOneIndexed: number,\n  weightKg: number\n): EnterAttemptAction => {\n  return {\n    type: \"ENTER_ATTEMPT\",\n    entryId: entryId,\n    lift: lift,\n    attemptOneIndexed: attemptOneIndexed,\n    weightKg: weightKg,\n  };\n};\n\n// Marks a lift \"good\" or \"failed\".\n//\n// entry is the lifter who performed the lift\n// lift is \"S\", \"B\", or \"D\".\n// attempt is 1,2,3, etc., up to MAX_ATTEMPTS.\n// success is a bool for whether to mark the lift as a success or as a failure.\nexport const markLift = (entryId: number, lift: Lift, attemptOneIndexed: number, success: boolean): MarkLiftAction => {\n  return {\n    type: \"MARK_LIFT\",\n    entryId,\n    lift,\n    attemptOneIndexed,\n    success,\n  };\n};\n\n// Sets the current group of lifters.\n// This is always manually set by the score table.\nexport const setLiftingGroup = (day: number, platform: number, flight: Flight, lift: Lift): SetLiftingGroupAction => {\n  return {\n    type: \"SET_LIFTING_GROUP\",\n    day: day,\n    platform: platform,\n    flight: flight,\n    lift: lift,\n  };\n};\n\n// Overrides the calculated meet progress logic by forcing display of an attempt,\n// even if it has already been marked \"good lift\" or \"no lift\".\nexport const overrideAttempt = (attempt: number): OverrideAttemptAction => {\n  return {\n    type: \"OVERRIDE_ATTEMPT\",\n    attempt: attempt,\n  };\n};\n\n// Overrides the calculated meet progress logic by forcing display of a specific lifter,\n// even if they have already had their attempt entered.\nexport const overrideEntryId = (entryId: number): OverrideEntryIdAction => {\n  return {\n    type: \"OVERRIDE_ENTRY_ID\",\n    entryId: entryId,\n  };\n};\n\n// Updates arbitrary fields in the LiftingState.\n//\n// The intention is to use action just for table customization: things like\n// column widths, column visibility, and other such options.\n//\n// Having this interface lets us keep the number of actions low: separate\n// actions for each kind of modification is not really useful.\nexport const setTableInfo = (obj: Partial<LiftingState>): SetTableInfoAction => {\n  return {\n    type: \"SET_TABLE_INFO\",\n    changes: obj,\n  };\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines an input of a single weight, during configuration.\n// Since it's for configuration, it doesn't have an associated success/failure value.\n//\n// For consistency purposes, weights are always stored in kg.\n\nimport React, { FormEvent } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport FormControl from \"react-bootstrap/FormControl\";\nimport FormGroup from \"react-bootstrap/FormGroup\";\n\nimport { updateRegistration } from \"../../actions/registrationActions\";\nimport { enterAttempt } from \"../../actions/liftingActions\";\n\nimport { liftToAttemptFieldName } from \"../../logic/entry\";\nimport { kg2lbs, lbs2kg, string2number, displayWeight } from \"../../logic/units\";\n\nimport { Entry, Language, Lift, Validation } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { FormControlTypeHack, assertString } from \"../../types/utils\";\nimport { Dispatch } from \"redux\";\n\ninterface OwnProps {\n  id: number; // The EntryID.\n\n  // The valid type here should be all keys of Entry where the value is a number\n  // Something like keyof<Partial> where (key,value) => typeof value === Number - if that is possible in typescript?\n  // Otherwise manually specifying all the valid keys of Entry is a fair approach too!\n  field?: \"bodyweightKg\";\n  disabled: boolean;\n\n  // Optional attributes used only for lifts (as opposed to for bodyweights).\n  placeholder?: string;\n  lift?: Lift;\n  attemptOneIndexed?: number;\n  multipleOf?: number;\n}\n\ninterface StateProps {\n  inKg: boolean;\n  weightKg: number;\n  language: Language;\n}\n\ninterface DispatchProps {\n  updateRegistration: (entryId: number, obj: Partial<Entry>) => void;\n  enterAttempt: (entryId: number, lift: Lift, attemptOneIndexed: number, weightKg: number) => void;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\ninterface InternalState {\n  weightStr: string;\n}\n\nclass WeightInput extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n    this.validate = this.validate.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n\n    let weight = this.props.weightKg;\n    if (!this.props.inKg) {\n      weight = kg2lbs(weight);\n    }\n\n    // Internal state, for purposes of validation.\n    // To avoid confusion (auto-rounding) when typing, just store a String.\n    this.state = {\n      // Prefer displaying an empty string to 0.0.\n      weightStr: weight === 0.0 ? \"\" : displayWeight(weight, props.language),\n    };\n  }\n\n  validate = (): Validation => {\n    const weightNum = string2number(this.state.weightStr);\n    if (isNaN(weightNum) || weightNum < 0) return \"error\";\n    if (this.props.multipleOf !== undefined && weightNum % this.props.multipleOf !== 0.0) {\n      return \"warning\";\n    }\n    if (this.state.weightStr.length > 0) return \"success\";\n    return null;\n  };\n\n  // Update the internal state, used for validation.\n  handleChange = (event: FormEvent<FormControlTypeHack>) => {\n    const weightStr = event.currentTarget.value;\n    if (assertString(weightStr)) {\n      this.setState({ weightStr: weightStr });\n    }\n  };\n\n  // Update the Redux store.\n  handleBlur = (event: React.FocusEvent<HTMLInputElement>) => {\n    const weightNum = string2number(event.currentTarget.value);\n\n    if (this.validate() === \"error\") {\n      return;\n    }\n\n    const weightKg = this.props.inKg ? weightNum : lbs2kg(weightNum);\n    if (this.props.weightKg === weightKg) {\n      return;\n    }\n\n    // If \"attempt\" is set, a specific attempt is selected.\n    if (this.props.attemptOneIndexed !== undefined && this.props.lift !== undefined) {\n      const attemptOneIndexed = this.props.attemptOneIndexed;\n      const lift = this.props.lift;\n      this.props.enterAttempt(this.props.id, lift, attemptOneIndexed, weightKg);\n    } else if (this.props.field !== undefined) {\n      // Otherwise, the field is a Number.\n      const newfields: Partial<Entry> = {};\n      newfields[this.props.field] = weightKg;\n      this.props.updateRegistration(this.props.id, newfields);\n    }\n  };\n\n  render() {\n    // FormGroup provides a default padding of 15, but FormGroup is only being\n    // used here to accept a validationState. It's not really a group.\n    const undoDefaultPadding = { marginBottom: \"0\" };\n    const validation: Validation = this.validate();\n\n    return (\n      <FormGroup style={undoDefaultPadding}>\n        <FormControl\n          disabled={this.props.disabled}\n          placeholder={this.props.placeholder}\n          type=\"text\"\n          value={this.state.weightStr}\n          onChange={this.handleChange}\n          onBlur={this.handleBlur}\n          isValid={validation === \"success\"}\n          isInvalid={validation === \"error\"}\n          className={validation === \"warning\" ? \"is-warning\" : undefined}\n        />\n      </FormGroup>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState, ownProps: OwnProps): StateProps => {\n  // Only have props for the entry corresponding to this one row.\n  const lookup = state.registration.lookup;\n  const entry = state.registration.entries[lookup[ownProps.id]];\n\n  // If `field` is set, then read the Number from the given field name.\n  let weightKg = 0.0;\n  if (ownProps.field !== undefined) {\n    weightKg = entry[ownProps.field];\n  } else if (ownProps.lift !== undefined && ownProps.attemptOneIndexed !== undefined) {\n    // Otherwise, refer to a specific lift and attempt.\n    const lift = ownProps.lift;\n    const attemptOneIndexed = ownProps.attemptOneIndexed;\n    const field = liftToAttemptFieldName(lift);\n    weightKg = entry[field][attemptOneIndexed - 1];\n  }\n\n  return {\n    inKg: state.meet.inKg,\n    weightKg: weightKg,\n    language: state.language,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    updateRegistration: (entryId, obj) => dispatch(updateRegistration(entryId, obj)),\n    enterAttempt: (entryId, lift, attemptOneIndexed, weightKg) =>\n      dispatch(enterAttempt(entryId, lift, attemptOneIndexed, weightKg)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WeightInput);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines a row in the LifterTable on the Weigh-ins page.\n// This provides a bunch of widgets, each of which correspond to\n// the state of a single entry.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport FormControl from \"react-bootstrap/FormControl\";\n\nimport ValidatedInput from \"../ValidatedInput\";\nimport WeightInput from \"./WeightInput\";\n\nimport { getAge } from \"../../logic/entry\";\nimport { getString, localizeFlight } from \"../../logic/strings\";\nimport { displayNumber } from \"../../logic/units\";\nimport { validatePositiveInteger } from \"../../validation/positiveInteger\";\n\nimport { updateRegistration } from \"../../actions/registrationActions\";\n\nimport { Entry, Language, Validation } from \"../../types/dataTypes\";\nimport { GlobalState, MeetState } from \"../../types/stateTypes\";\nimport { Dispatch } from \"redux\";\nimport { FormControlTypeHack, assertFlight, assertString } from \"../../types/utils\";\n\ninterface OwnProps {\n  id: number;\n  inLiftingPage?: boolean;\n}\n\ninterface StateProps {\n  meet: MeetState;\n  entry: Entry;\n  language: Language;\n}\n\ninterface DispatchProps {\n  updateRegistration: (entryId: number, obj: Partial<Entry>) => void;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nclass LifterRow extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n    this.updateRegistrationFlight = this.updateRegistrationFlight.bind(this);\n    this.updateRegistrationSquatRackInfo = this.updateRegistrationSquatRackInfo.bind(this);\n    this.updateRegistrationBenchRackInfo = this.updateRegistrationBenchRackInfo.bind(this);\n    this.updateRegistrationAge = this.updateRegistrationAge.bind(this);\n  }\n\n  updateRegistrationFlight = (event: React.FormEvent<FormControlTypeHack>) => {\n    const flight = event.currentTarget.value;\n    if (this.props.entry.flight !== flight && assertString(flight) && assertFlight(flight)) {\n      this.props.updateRegistration(this.props.id, { flight: flight });\n    }\n  };\n\n  updateRegistrationSquatRackInfo = (value: string) => {\n    if (this.props.entry.squatRackInfo !== value) {\n      this.props.updateRegistration(this.props.id, { squatRackInfo: value });\n    }\n  };\n\n  updateRegistrationBenchRackInfo = (value: string) => {\n    if (this.props.entry.benchRackInfo !== value) {\n      this.props.updateRegistration(this.props.id, { benchRackInfo: value });\n    }\n  };\n\n  updateRegistrationAge = (value: string) => {\n    const age: number = value === \"\" ? 0 : Number(value);\n    if (this.props.entry.age !== age) {\n      this.props.updateRegistration(this.props.id, { age: age });\n    }\n  };\n\n  validateAge = (value?: string): Validation => {\n    if (value === \"\") return null;\n\n    const pos: Validation = validatePositiveInteger(value);\n    if (pos === \"success\") {\n      // Complain a little if the age is implausible.\n      const n = Number(value);\n      if (n <= 4 || n > 100) return \"warning\";\n    }\n    return pos;\n  };\n\n  validateRack = (value?: string): Validation => {\n    if (value === \"\") return null;\n    return \"success\";\n  };\n\n  render() {\n    const language = this.props.language;\n    const entry = this.props.entry;\n\n    // Check whether the event(s) include a given lift.\n    let hasSquat = false;\n    let hasBench = false;\n    let hasDeadlift = false;\n    for (let i = 0; i < entry.events.length; i++) {\n      const event = entry.events[i];\n      if (event.includes(\"S\")) {\n        hasSquat = true;\n      }\n      if (event.includes(\"B\")) {\n        hasBench = true;\n      }\n      if (event.includes(\"D\")) {\n        hasDeadlift = true;\n      }\n    }\n\n    // Check whether the first attempt already occurred.\n    const disableSquatWeight = !hasSquat || entry.squatStatus[0] !== 0;\n    const disableBenchWeight = !hasBench || entry.benchStatus[0] !== 0;\n    const disableDeadliftWeight = !hasDeadlift || entry.deadliftStatus[0] !== 0;\n\n    // Only show the Flight selector if the Weigh-ins page is non-embedded.\n    let flight: string | JSX.Element = localizeFlight(entry.flight, language);\n    if (this.props.inLiftingPage !== true) {\n      // Can be undefined.\n      flight = (\n        <FormControl\n          value={entry.flight}\n          as=\"select\"\n          onChange={this.updateRegistrationFlight}\n          className=\"custom-select\"\n        >\n          <option value=\"A\">{getString(\"flight.a\", language)}</option>\n          <option value=\"B\">{getString(\"flight.b\", language)}</option>\n          <option value=\"C\">{getString(\"flight.c\", language)}</option>\n          <option value=\"D\">{getString(\"flight.d\", language)}</option>\n          <option value=\"E\">{getString(\"flight.e\", language)}</option>\n          <option value=\"F\">{getString(\"flight.f\", language)}</option>\n          <option value=\"G\">{getString(\"flight.g\", language)}</option>\n          <option value=\"H\">{getString(\"flight.h\", language)}</option>\n          <option value=\"I\">{getString(\"flight.i\", language)}</option>\n          <option value=\"J\">{getString(\"flight.j\", language)}</option>\n          <option value=\"K\">{getString(\"flight.k\", language)}</option>\n          <option value=\"L\">{getString(\"flight.l\", language)}</option>\n          <option value=\"M\">{getString(\"flight.m\", language)}</option>\n          <option value=\"N\">{getString(\"flight.n\", language)}</option>\n          <option value=\"O\">{getString(\"flight.o\", language)}</option>\n          <option value=\"P\">{getString(\"flight.p\", language)}</option>\n        </FormControl>\n      );\n    }\n\n    const age = getAge(entry, this.props.meet.date);\n    const ageStr = age === 0 ? getString(\"common.age\", language) : displayNumber(age, language);\n\n    return (\n      <tr>\n        <td>{entry.platform}</td>\n        <td>{flight}</td>\n        <td>{entry.name}</td>\n\n        <td>\n          <ValidatedInput\n            initialValue={entry.age === 0 ? \"\" : displayNumber(entry.age, language)}\n            placeholder={ageStr}\n            validate={this.validateAge}\n            onSuccess={this.updateRegistrationAge}\n          />\n        </td>\n\n        <td>\n          <WeightInput\n            id={this.props.id}\n            field=\"bodyweightKg\"\n            placeholder={getString(\"weigh-ins.bodyweight-placeholder\", language)}\n            disabled={false}\n          />\n        </td>\n\n        <td>\n          <ValidatedInput\n            initialValue={entry.squatRackInfo}\n            placeholder={hasSquat ? getString(\"weigh-ins.squat-rack-placeholder\", language) : undefined}\n            disabled={!hasSquat}\n            validate={this.validateRack}\n            onSuccess={this.updateRegistrationSquatRackInfo}\n          />\n        </td>\n\n        <td>\n          <WeightInput\n            id={this.props.id}\n            lift=\"S\"\n            multipleOf={2.5}\n            attemptOneIndexed={1}\n            placeholder={hasSquat ? getString(\"weigh-ins.squat-placeholder\", language) : undefined}\n            disabled={disableSquatWeight}\n          />\n        </td>\n\n        <td>\n          <ValidatedInput\n            initialValue={entry.benchRackInfo}\n            placeholder={hasBench ? getString(\"weigh-ins.bench-rack-placeholder\", language) : undefined}\n            disabled={!hasBench}\n            validate={this.validateRack}\n            onSuccess={this.updateRegistrationBenchRackInfo}\n          />\n        </td>\n\n        <td>\n          <WeightInput\n            id={this.props.id}\n            lift=\"B\"\n            multipleOf={2.5}\n            attemptOneIndexed={1}\n            placeholder={hasBench ? getString(\"weigh-ins.bench-placeholder\", language) : undefined}\n            disabled={disableBenchWeight}\n          />\n        </td>\n\n        <td>\n          <WeightInput\n            id={this.props.id}\n            lift=\"D\"\n            multipleOf={2.5}\n            attemptOneIndexed={1}\n            placeholder={hasDeadlift ? getString(\"weigh-ins.deadlift-placeholder\", language) : undefined}\n            disabled={disableDeadliftWeight}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState, ownProps: OwnProps): StateProps => {\n  // Only have props for the entry corresponding to this one row.\n  const lookup = state.registration.lookup;\n  const entry = state.registration.entries[lookup[ownProps.id]];\n\n  return {\n    meet: state.meet,\n    entry: entry,\n    language: state.language,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    updateRegistration: (entryId: number, obj: Partial<Entry>) => dispatch(updateRegistration(entryId, obj)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LifterRow);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// The parent component of the Weigh-ins page, contained by the WeighinsContainer.\n// The Weigh-ins page updates more information in the Registration state.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Card from \"react-bootstrap/Card\";\n\nimport { getLiftersOnDay } from \"../../logic/entry\";\nimport LifterTable from \"./LifterTable\";\nimport LifterRow from \"./LifterRow\";\n\nimport { Entry } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\n\n// For use when embedded inside the Lifting page.\ninterface OwnProps {\n  day?: number;\n  platform?: number;\n  inLiftingPage?: boolean; // The weigh-ins page can be embedded.\n}\n\ninterface StateProps {\n  entries: ReadonlyArray<Entry>;\n}\n\ntype Props = Readonly<OwnProps> & Readonly<StateProps>;\n\nclass WeighinsView extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n    this.getNumDaysFromEntries = this.getNumDaysFromEntries.bind(this);\n  }\n\n  // Figure out how many days there are by looking at the entries themselves.\n  //\n  // The meet page information may be unreliable: someone might have created\n  // a second day, added a lifter to it, then removed the second day without\n  // yet updating that lifter.\n  //\n  // This is an attempt to make that error more obvious, so it can be corrected.\n  getNumDaysFromEntries = () => {\n    let max_day = 0;\n    const entries = this.props.entries;\n    for (let i = 0; i < entries.length; i++) {\n      const entry = entries[i];\n      if (entry.day > max_day) {\n        max_day = entry.day;\n      }\n    }\n    return max_day;\n  };\n\n  render() {\n    // Determine whether this is being shown embedded in the Lifting page.\n    const inLiftingPage = this.props.inLiftingPage === true;\n\n    // Make a separate panel for each day.\n    const numDays = this.getNumDaysFromEntries();\n    const dayCards = [];\n    for (let i = 1; i <= numDays; i++) {\n      const lifters = getLiftersOnDay(this.props.entries, i);\n\n      // Skip if the OwnProps excluded this selection.\n      if (lifters.length === 0) {\n        continue;\n      }\n\n      // Present the lifters in sorted order.\n      lifters.sort((a, b) => {\n        if (a.platform !== b.platform) return a.platform - b.platform;\n        if (a.flight !== b.flight) return a.flight < b.flight ? -1 : 1;\n        if (a.name < b.name) return -1;\n        if (a.name > b.name) return 1;\n        return 0;\n      });\n\n      dayCards.push(\n        <Card key={i} style={{ marginBottom: \"17px\" }}>\n          <Card.Header>\n            <FormattedMessage\n              id=\"weigh-ins.day-header\"\n              defaultMessage=\"Day {dayNumber} Weigh-ins\"\n              values={{ dayNumber: i }}\n            />\n          </Card.Header>\n          <Card.Body>\n            <LifterTable entries={lifters} rowRenderer={LifterRow} inLiftingPage={inLiftingPage} />\n          </Card.Body>\n        </Card>\n      );\n    }\n\n    // If there are no days thus far, show a default warning panel.\n    if (dayCards.length === 0) {\n      dayCards.push(\n        <Card key={0}>\n          <Card.Header>\n            <FormattedMessage id=\"weigh-ins.empty-header\" defaultMessage=\"Waiting for Registration\" />\n          </Card.Header>\n          <Card.Body>\n            <FormattedMessage\n              id=\"weigh-ins.empty-body\"\n              defaultMessage=\"Add lifters on the Registration page before weighing them in.\"\n            />\n          </Card.Body>\n        </Card>\n      );\n    }\n\n    return <div>{dayCards}</div>;\n  }\n}\n\nconst mapStateToProps = (state: GlobalState, ownProps: OwnProps): StateProps => {\n  const { day, platform } = ownProps;\n  let entries = state.registration.entries;\n\n  // Filter if requested by the OwnProps.\n  if (typeof day === \"number\" && typeof platform === \"number\") {\n    entries = entries.filter((e) => e.day === day && e.platform === platform);\n  }\n\n  return { entries };\n};\n\nexport default connect(mapStateToProps)(WeighinsView);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Container for the Weighins page.\n\nimport React from \"react\";\n\nimport WeighinsView from \"../components/weighins/WeighinsView\";\nimport styles from \"../components/common/ContentArea.module.scss\";\n\nclass WeighinsContainer extends React.Component<{}> {\n  render() {\n    return (\n      <div className={styles.contentArea}>\n        <WeighinsView />\n      </div>\n    );\n  }\n}\n\nexport default WeighinsContainer;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { kg2lbs, displayWeight } from \"../logic/units\";\n\nimport { PlateColors } from \"../constants/plateColors\";\n\nimport { Plate, LoadedPlate } from \"../types/dataTypes\";\n\n// Convert from kg to lbs with rounding to 2 decimal places.\n// It's OK that this is slow, since it rarely executes.\nconst safeKg2Lbs = (kg: number): number => {\n  return Number(displayWeight(kg2lbs(kg)));\n};\n\n// Returns a list of plate weights in loading order.\n// Any unloadable remainder is reported as a final number with a negative value.\nexport const selectPlates = (\n  loadingKg: number,\n  barAndCollarsWeightKg: number,\n  plates: ReadonlyArray<Plate>,\n  inKg: boolean\n): Array<LoadedPlate> => {\n  // Flow doesn't like it when arguments get redefined.\n  let loadingAny = loadingKg;\n  let barAndCollarsWeightAny = barAndCollarsWeightKg;\n  let platesAny = plates;\n\n  // Convert to pounds, avoiding floating point errors.\n  if (inKg === false) {\n    loadingAny = safeKg2Lbs(loadingKg);\n    barAndCollarsWeightAny = safeKg2Lbs(barAndCollarsWeightKg);\n    platesAny = plates.map((x) => ({ ...x, weightKg: safeKg2Lbs(x.weightKg) }));\n  }\n\n  // Sort a copy of the platesAny array by descending weight.\n  const sortedPlates = platesAny.slice().sort((a, b) => {\n    return b.weightKg - a.weightKg;\n  });\n\n  let sideWeightKg = (loadingAny - barAndCollarsWeightAny) / 2;\n  const loading: Array<LoadedPlate> = [];\n\n  // Run through each plate in order, applying as many of that plate as will fit.\n  for (let i = 0; i < sortedPlates.length; i++) {\n    const weightKg = sortedPlates[i].weightKg;\n    const color = sortedPlates[i].color;\n    let pairCount = sortedPlates[i].pairCount;\n    while (pairCount > 0 && weightKg <= sideWeightKg) {\n      pairCount--;\n      sideWeightKg -= weightKg;\n      loading.push({ weightAny: weightKg, isAlreadyLoaded: false, color: color });\n    }\n  }\n\n  // Report any remainder as a negative number.\n  if (sideWeightKg > 0) {\n    loading.push({ weightAny: -sideWeightKg, isAlreadyLoaded: false, color: PlateColors.PLATE_DEFAULT_RED });\n  }\n  return loading;\n};\n\n// Helper function: like Array.findIndex(), but starting from a specific index.\nconst findWeightFrom = (loading: Array<LoadedPlate>, startFrom: number, weight: number): number => {\n  for (let i = startFrom; i < loading.length; i++) {\n    if (loading[i].weightAny === weight) return i;\n  }\n  return -1;\n};\n\n// Sets the 'isAlreadyLoaded' property of each LoadedPlate relative to another loading.\n//\n// Both 'loading' and 'relativeTo' are sorted in non-ascending order of weight.\nexport const makeLoadingRelative = (loading: Array<LoadedPlate>, relativeTo: Array<LoadedPlate>): void => {\n  let finger = 0; // Increasing index into the relativeTo array.\n\n  // For each plate in the loading, look for a matching plate in relativeTo[finger..].\n  // When found, move the finger past that point.\n  for (let i = 0; i < loading.length; i++) {\n    const loadedPlate = loading[i];\n    const index = findWeightFrom(relativeTo, finger, loadedPlate.weightAny);\n    if (index >= 0) {\n      finger = index + 1;\n      loadedPlate.isAlreadyLoaded = true;\n    }\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// This is the widget that gives a visual display of the weights on the bar,\n// used by the loading crew.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport { displayWeight } from \"../../logic/units\";\nimport { PlateColors } from \"../../constants/plateColors\";\n\nimport { Language, Lift, LoadedPlate } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\n\nimport styles from \"./BarLoad.module.scss\";\n\nconst kgToStyleMap = new Map<number, string>([\n  [50, styles.kg50],\n  [25, styles.kg25],\n  [20, styles.kg20],\n  [15, styles.kg15],\n  [10, styles.kg10],\n  [5, styles.kg5],\n  [2.5, styles.kg2p5],\n  [1.25, styles.kg1p25],\n  [1, styles.kg1],\n  [0.75, styles.kg0p75],\n  [0.5, styles.kg0p5],\n  [0.25, styles.kg0p25],\n]);\n\nconst weightKgToStyle = (weightKg: number): string => kgToStyleMap.get(weightKg) || styles.error;\n\nconst lbsToStyleMap = new Map<number, string>([\n  [100, styles.lbs100],\n  [55, styles.lbs55],\n  [45, styles.lbs45],\n  [35, styles.lbs35],\n  [25, styles.lbs25],\n  [10, styles.lbs10],\n  [5, styles.lbs5],\n  [2.5, styles.lbs2p5],\n  [1.25, styles.lbs1p25],\n  [0.5, styles.lbs0p5],\n]);\n\nconst weightLbsToStyle = (weightLbs: number): string => lbsToStyleMap.get(weightLbs) || styles.error;\n\nconst weightTextMap = new Map<number, string>([\n  [1.25, \"1\"],\n  [0.75, \"\"],\n  [0.5, \"\"],\n  [0.25, \"\"],\n]);\n\nconst weightAnyToText = (weightAny: number, language: Language): string =>\n  weightTextMap.get(weightAny) || displayWeight(weightAny, language);\n\ninterface PlateInfoProps {\n  loading: LoadedPlate[];\n  inKg: boolean;\n  language: Language;\n}\n\n// Turns the selectPlates() array into divs.\nconst PlatesDiv: React.FC<PlateInfoProps> = ({ loading, inKg, language }) => {\n  const divs = [];\n  let i = 0;\n\n  // Iterate on a group of plates of the same weight at a time.\n  while (i < loading.length) {\n    const weightAny = loading[i].weightAny;\n\n    // If the weight is negative, it's an error report.\n    if (weightAny < 0) {\n      divs.push(\n        <div key={\"error\"} className={styles.error}>\n          ?{displayWeight(-1 * weightAny, language)}\n        </div>\n      );\n      break;\n    }\n\n    // Count how many times this same plate kind appears consecutively.\n    let plateCount = 1;\n    for (let j = i + 1; j < loading.length && loading[j].weightAny === weightAny; j++) {\n      plateCount++;\n    }\n\n    // If that plate is large and occurs a bunch, show a counter.\n    const showCounter = plateCount >= 3;\n\n    // Push each of the plates individually.\n    for (let j = 0; j < plateCount; j++) {\n      const plate = loading[i + j];\n      const counter = String(j + 1);\n\n      // Light backgrounds need dark text.\n      const is_light =\n        plate.color === PlateColors.PLATE_DEFAULT_WHITE || plate.color === PlateColors.PLATE_DEFAULT_YELLOW;\n\n      const style = {\n        backgroundColor: plate.color,\n        opacity: plate.isAlreadyLoaded ? 0.25 : undefined,\n        color: is_light ? \"#232323\" : \"#FFFFFF\",\n        // White plates need a border.\n        border: plate.color === PlateColors.PLATE_DEFAULT_WHITE ? \"1.5px solid #232323\" : undefined,\n      };\n\n      divs.push(\n        <div\n          key={weightAny + \"-\" + counter}\n          className={inKg ? weightKgToStyle(weightAny) : weightLbsToStyle(weightAny)}\n          style={style}\n        >\n          <div>{weightAnyToText(weightAny, language)}</div>\n          {showCounter ? <div>{counter}</div> : null}\n        </div>\n      );\n    }\n\n    i += plateCount;\n  }\n\n  return <>{divs}</>;\n};\n\ninterface RackInfoProps {\n  lift: Lift;\n  rackInfo: string;\n}\n\nconst RackInfoDiv: React.FC<RackInfoProps> = ({ lift, rackInfo }) => {\n  // Only show rack info for lifts that use a rack.\n  if (lift === \"D\") return null;\n\n  return (\n    <div key={rackInfo} className={styles.rackInfo}>\n      <FormattedMessage\n        id=\"lifting.rack-info\"\n        defaultMessage=\"Rack {rackInfo}\"\n        values={{\n          rackInfo: rackInfo,\n        }}\n      />\n    </div>\n  );\n};\n\ninterface OwnProps {\n  loading: Array<LoadedPlate>;\n  rackInfo: string;\n  inKg: boolean;\n}\n\ninterface StateProps {\n  lift: Lift;\n  language: Language;\n}\n\ntype Props = OwnProps & StateProps;\n\nconst BarLoad: React.FC<Props> = ({ lift, loading, inKg, language, rackInfo }) => (\n  <div className={styles.container}>\n    <div className={styles.bar} />\n    <PlatesDiv loading={loading} inKg={inKg} language={language} />\n    <div className={styles.collar} />\n    <div className={styles.bar} />\n    <RackInfoDiv lift={lift} rackInfo={rackInfo} />\n  </div>\n);\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  lift: state.lifting.lift,\n  language: state.language,\n});\n\nexport default connect(mapStateToProps)(BarLoad);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2020 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { RecordsState, RegistrationState, MeetState } from \"../../types/stateTypes\";\nimport {\n  Sex,\n  Equipment,\n  RecordLift,\n  RecordType,\n  Entry,\n  Language,\n  LiftingRecord,\n  PotentialLiftingRecord,\n} from \"../../types/dataTypes\";\nimport { calculateRecordKey, upsertRecord } from \"../../reducers/recordsReducer\";\nimport {\n  getFinalTotalKg,\n  getBest3SquatKg,\n  getBest3BenchKg,\n  getWeightClassForEntry,\n  getAttemptWeight,\n  getAge,\n  getBest5BenchKg,\n  getBest5SquatKg,\n  getBest5DeadliftKg,\n} from \"../entry\";\nimport { checkExhausted } from \"../../types/utils\";\n\n// Determines if the attempt would break the current record in the state.\nexport function wouldBreakConfirmedRecord(state: RecordsState, potentialRecord: PotentialLiftingRecord): boolean {\n  const key = calculateRecordKey(potentialRecord);\n  const confirmedRecord = state.confirmedRecords[key];\n  // If there is a confirmed record for this type, return true if our attempt is larger\n  if (confirmedRecord !== undefined) {\n    return potentialRecord.weight > confirmedRecord.weight;\n  } else {\n    // Otherwise, there is no record for this class. Turns out this most likely means someone has messed up and there isn't meant to be a record in this category.\n    // So, we do nothing and state it isn't a record.\n    return false;\n  }\n}\n\nexport function getRecordTypeForEntry(entry: Readonly<Entry>): RecordType {\n  return entry.events[0] === \"SBD\" ? \"FullPower\" : \"SingleLift\";\n}\n\nexport function getWeightForUnconfirmedRecord(recordLift: RecordLift, entry: Entry): number {\n  switch (recordLift) {\n    case \"S\":\n      return getBest5SquatKg(entry);\n    case \"B\":\n      return getBest5BenchKg(entry);\n    case \"D\":\n      return getBest5DeadliftKg(entry);\n    case \"Total\":\n      return getFinalTotalKg(entry);\n    default:\n      checkExhausted(recordLift);\n      return -1;\n  }\n}\n\n// If they're lifting in sleeves, but wraps & sleeves are combined, upgrade the record to wraps as there won't be a seperate category\nfunction getEquipmentForEntry(entry: Entry, meet: MeetState): Equipment {\n  return meet.combineSleevesAndWraps && entry.equipment === \"Sleeves\" ? \"Wraps\" : entry.equipment;\n}\n\n// Determines if the attempt is higher then any other successful attempt for the record type\n// This is used to determine if we should display the record attempt notification\n// NOTE: Does not consider if the entry is eligible to break records. This is useful so we can display official/unoffocial attempt info\n// NOTE: This assume that the RecordState being passed in is the most up to date version.\n// - Ensure you call getUpdatedState first.\nexport function isRecordAttempt(\n  updatedRecordState: RecordsState,\n  meet: MeetState,\n  entry: Entry,\n  recordLift: RecordLift,\n  attemptOneIndexed: number,\n  language: Language\n): boolean {\n  const weightClass = getWeightClassForEntry(\n    entry,\n    meet.weightClassesKgMen,\n    meet.weightClassesKgWomen,\n    meet.weightClassesKgMx,\n    language\n  );\n\n  if (!meet.recordsEnabled) {\n    return false;\n  }\n\n  // If they have no divisions, it cannot be a record attempt\n  if (entry.divisions.length === 0) {\n    return false;\n  }\n\n  // Work out if they're competing in a full power event, or single lift, wrt to records\n  const recordType = getRecordTypeForEntry(entry);\n\n  // Calculate the weight for the type of record requested\n  let weight: number;\n  if (recordLift === \"Total\") {\n    // Total records only get announced during deadlifts, take the sum of the best S + B and the current attempted deadlift\n    weight = getBest3SquatKg(entry) + getBest3BenchKg(entry) + getAttemptWeight(entry, \"D\", attemptOneIndexed);\n  } else {\n    weight = getAttemptWeight(entry, recordLift, attemptOneIndexed);\n  }\n\n  const potentialRecord: PotentialLiftingRecord = {\n    division: entry.divisions[0],\n    sex: entry.sex,\n    weightClass,\n    equipment: getEquipmentForEntry(entry, meet),\n    recordLift,\n    recordType,\n    weight,\n  };\n\n  if (wouldBreakConfirmedRecord(updatedRecordState, potentialRecord)) {\n    // Check to see if they've already bombed out. This prevents falsely advertising a bench/deadlift record if the participant has bombed out.\n    // This assumes normal SBD order of lifts. If things are done out of order, the official records will still end up correct, but the on-screen notices won't work\n    if (recordType === \"FullPower\") {\n      // Cannot set a bench, deadlift or total record if you've bombed on squats\n      if (recordLift !== \"S\" && getBest3SquatKg(entry) === 0) {\n        return false;\n      }\n\n      // Cannot set a deadlift or total record if you've bombed on bench.\n      if ((recordLift === \"D\" || recordLift === \"Total\") && getBest3BenchKg(entry) === 0) {\n        return false;\n      }\n    }\n\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction addPotentialRecordIfRelevant(\n  event: RecordLift,\n  potentialRecords: LiftingRecord[],\n  basePotentialRecord: {\n    date: string;\n    fullName: string;\n    location: string;\n    division: string;\n    equipment: Equipment;\n    recordType: RecordType;\n    sex: Sex;\n    weightClass: string;\n  },\n  entry: Readonly<Entry>\n) {\n  if (event === \"Total\" || (entry.events.length > 0 && entry.events[0].indexOf(event) !== -1)) {\n    const weightLifted = getWeightForUnconfirmedRecord(event, entry);\n    // Ensure they've actually lifted something in this event\n    if (weightLifted > 0) {\n      potentialRecords.push({\n        ...basePotentialRecord,\n        recordLift: event,\n        weight: weightLifted,\n      });\n    }\n  }\n}\n\n// GPC-NZ specific records logic\nfunction addCustomPotentialRecords(\n  potentialRecords: LiftingRecord[],\n  basePotentialRecord: {\n    date: string;\n    fullName: string;\n    location: string;\n    division: string;\n    equipment: Equipment;\n    recordType: RecordType;\n    sex: Sex;\n    weightClass: string;\n  },\n  entry: Readonly<Entry>,\n  meetDate: string\n) {\n  let candidateDiv: string | null = null;\n  const age = getAge(entry, meetDate);\n  // If age is 0, it means no data is available. In which case we won't try do any division smarts\n  if (age > 0) {\n    if (age < 16) {\n      candidateDiv = \"Teen-1\";\n    } else if (age < 18) {\n      candidateDiv = \"Teen-2\";\n    } else if (age < 20) {\n      candidateDiv = \"Teen-3\";\n    } else if (age < 24) {\n      candidateDiv = \"Junior\";\n      // Older then 32 - Eligible for masters divisions\n    } else if (age > 32) {\n      if (age < 40) {\n        candidateDiv = \"Sub Masters\";\n      } else if (age < 45) {\n        candidateDiv = \"Masters-1\";\n      } else if (age < 50) {\n        candidateDiv = \"Masters-2\";\n      } else if (age < 55) {\n        candidateDiv = \"Masters-3\";\n      } else if (age < 60) {\n        candidateDiv = \"Masters-4\";\n      } else if (age < 65) {\n        candidateDiv = \"Masters-5\";\n      } else if (age < 70) {\n        candidateDiv = \"Masters-6\";\n      } else if (age < 75) {\n        candidateDiv = \"Masters-7\";\n      } else if (age < 80) {\n        candidateDiv = \"Masters-8\";\n      } else if (age > 80) {\n        candidateDiv = \"Masters-9\";\n      }\n    }\n  }\n\n  // If you're already entered into an age division, then you can also set open records\n  if (entry.divisions[0] !== \"Open\") {\n    candidateDiv = \"Open\";\n  }\n\n  if (candidateDiv !== null) {\n    const updatedPotentialRecord = {\n      ...basePotentialRecord,\n      division: candidateDiv,\n    };\n\n    addPotentialRecordIfRelevant(\"S\", potentialRecords, updatedPotentialRecord, entry);\n    addPotentialRecordIfRelevant(\"B\", potentialRecords, updatedPotentialRecord, entry);\n    addPotentialRecordIfRelevant(\"D\", potentialRecords, updatedPotentialRecord, entry);\n    if (getRecordTypeForEntry(entry) === \"FullPower\") {\n      addPotentialRecordIfRelevant(\"Total\", potentialRecords, updatedPotentialRecord, entry);\n    }\n  }\n}\n\n// Go over every entry & all their lifts and see if they break any records.\n// If they do, update the records state with the new values\n// Finally, return the updated state of the records.\n// This is used to view the current pending records, and to confirm them prior to export\nexport function getUpdatedRecordState(\n  initialRecordState: RecordsState,\n  meet: MeetState,\n  registrationState: RegistrationState,\n  language: Language\n): RecordsState {\n  // If records aren't enabled, theres no work to be done. Return early\n  if (!meet.recordsEnabled) {\n    return initialRecordState;\n  }\n  let newRecordState: RecordsState = { ...initialRecordState };\n  registrationState.entries.forEach((entry) => {\n    const weightClass = getWeightClassForEntry(\n      entry,\n      meet.weightClassesKgMen,\n      meet.weightClassesKgWomen,\n      meet.weightClassesKgMx,\n      language\n    );\n\n    const recordType: RecordType = getRecordTypeForEntry(entry);\n\n    // Can only set a record in a fullpower meet if you've set a total, or are on track to set one\n    const canSetRecords = entry.canBreakRecords && (recordType !== \"FullPower\" || getFinalTotalKg(entry) > 0);\n\n    if (canSetRecords && entry.divisions.length > 0) {\n      const potentialRecords: LiftingRecord[] = [];\n      const basePotentialRecord = {\n        date: meet.date,\n        fullName: entry.name,\n        location: meet.name,\n        division: entry.divisions[0],\n        equipment: getEquipmentForEntry(entry, meet),\n        recordType: recordType,\n        sex: entry.sex,\n        weightClass,\n      };\n\n      // Iterate through the various events and create a potential record if they've lifted in them\n      addPotentialRecordIfRelevant(\"S\", potentialRecords, basePotentialRecord, entry);\n      addPotentialRecordIfRelevant(\"B\", potentialRecords, basePotentialRecord, entry);\n      addPotentialRecordIfRelevant(\"D\", potentialRecords, basePotentialRecord, entry);\n      if (recordType === \"FullPower\") {\n        addPotentialRecordIfRelevant(\"Total\", potentialRecords, basePotentialRecord, entry);\n      }\n\n      // This is where any custom logic for cross division/equipment/record type logic would go\n      addCustomPotentialRecords(potentialRecords, basePotentialRecord, entry, meet.date);\n\n      // For all potential records, check if they break the existing imported record. If so, update the state with them\n      // NOTE: This should be expanded to consider who achieved the record first.\n      // To do that we probably need to do a two pass loop, firstly identifying lifts which break existing records and adding them to a list.\n      // Then looping over the list and sorting out ties based on who achieved it first.\n      // For now, I can just live with this limitation and sort it out later\n      potentialRecords.forEach((potentialRecord) => {\n        if (wouldBreakConfirmedRecord(newRecordState, potentialRecord)) {\n          newRecordState = upsertRecord(potentialRecord, newRecordState);\n        }\n      });\n    }\n  });\n\n  return newRecordState;\n}\n\nexport interface RecordCategory {\n  sex: Sex;\n  division: string;\n  weightClass: string;\n  equipment: Equipment;\n}\n\nexport interface RecordCategoryGrouping {\n  category: RecordCategory;\n  records: LiftingRecord[];\n}\n\nfunction makeCategory(record: LiftingRecord): RecordCategory {\n  const category: RecordCategory = {\n    sex: record.sex,\n    division: record.division,\n    weightClass: record.weightClass,\n    equipment: record.equipment,\n  };\n  return category;\n}\n\nfunction makeKey(category: RecordCategory): string {\n  return `${category.sex}-${category.division}-${category.weightClass}-${category.equipment}`;\n}\n\nfunction getLiftSortOrder(lift: RecordLift): number {\n  if (lift === \"S\") return 0;\n  if (lift === \"B\") return 1;\n  if (lift === \"D\") return 2;\n  if (lift === \"Total\") return 3;\n  checkExhausted(lift);\n  return -1;\n}\n\nfunction getSexSortOrder(sex: Sex): number {\n  if (sex === \"M\") return 0;\n  if (sex === \"F\") return 1;\n  if (sex === \"Mx\") return 2;\n  checkExhausted(sex);\n  return -1;\n}\n\nfunction getRecordTypeSortOrder(recordType: RecordType): number {\n  if (recordType === \"FullPower\") return 0;\n  if (recordType === \"SingleLift\") return 1;\n  checkExhausted(recordType);\n  return -1;\n}\n\nfunction getEquipmentSortOrder(equipment: Equipment): number {\n  if (equipment === \"Bare\") return 0;\n  if (equipment === \"Sleeves\") return 1;\n  if (equipment === \"Wraps\") return 2;\n  if (equipment === \"Single-ply\") return 3;\n  if (equipment === \"Multi-ply\") return 4;\n  if (equipment === \"Unlimited\") return 5;\n  checkExhausted(equipment);\n  return -1;\n}\n\nfunction getWeightClassSortOrder(weightClassString: string): number {\n  const isSHW = weightClassString.endsWith(\"+\");\n  if (isSHW) {\n    return Number.POSITIVE_INFINITY;\n  }\n\n  const asNumber = Number(weightClassString.replace(\"+\", \"\"));\n  return asNumber;\n}\n\nfunction compareCategory(a: RecordCategory, b: RecordCategory, divisions: readonly string[]): number {\n  if (a.sex !== b.sex) {\n    return getSexSortOrder(a.sex) - getSexSortOrder(b.sex);\n  }\n  if (a.equipment !== b.equipment) {\n    return getEquipmentSortOrder(a.equipment) - getEquipmentSortOrder(b.equipment);\n  }\n  if (a.division !== b.division) {\n    return divisions.indexOf(a.division) - divisions.indexOf(b.division);\n  }\n  if (a.weightClass !== b.weightClass) {\n    return getWeightClassSortOrder(a.weightClass) - getWeightClassSortOrder(b.weightClass);\n  }\n\n  return 0;\n}\n\nfunction compareRecords(a: LiftingRecord, b: LiftingRecord): number {\n  if (a.recordType !== b.recordType) {\n    return getRecordTypeSortOrder(a.recordType) - getRecordTypeSortOrder(b.recordType);\n  }\n\n  if (a.recordLift !== b.recordLift) {\n    return getLiftSortOrder(a.recordLift) - getLiftSortOrder(b.recordLift);\n  }\n\n  return 0;\n}\n\n// Takes all records, groups them into categories and then sorts the categories. This effectively controls the order the records are rendered\nexport function groupAndSortRecordsIntoCategories(\n  records: LiftingRecord[],\n  meetState: MeetState\n): RecordCategoryGrouping[] {\n  // Group all records into categories of sex, division, class, equipment, recordType\n  const unSortedCategories = new Map<string, LiftingRecord[]>();\n  records.forEach((record) => {\n    const key = makeKey(record);\n    let recordsInCategory = unSortedCategories.get(key);\n    if (recordsInCategory === undefined) {\n      recordsInCategory = [];\n      unSortedCategories.set(key, recordsInCategory);\n    }\n    recordsInCategory.push(record);\n  });\n\n  // Now that all categories have records, within each category sort the records based on their lift & Type (S,B,D,T order), Full Power first\n  for (const records of unSortedCategories.values()) {\n    records.sort((a, b) => compareRecords(a, b));\n  }\n\n  // Ditch the map. Flatten it out into an array, which we'll sort\n  const categories: RecordCategoryGrouping[] = [];\n  unSortedCategories.forEach((records) => {\n    const category = makeCategory(records[0]);\n    categories.push({\n      category,\n      records,\n    });\n  });\n\n  //GPC-NZ - Sort the synthetic sub-master div after Open\n  const openIndex = Math.max(0, meetState.divisions.indexOf(\"Open\") + 1);\n  const gpcDivisions = [\n    ...meetState.divisions.slice(0, openIndex),\n    \"Sub Masters\",\n    ...meetState.divisions.slice(openIndex),\n  ];\n\n  // Now sort the categories\n  categories.sort((a, b) => compareCategory(a.category, b.category, gpcDivisions));\n\n  return categories;\n}\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { liftToAttemptFieldName, liftToStatusFieldName, MAX_ATTEMPTS } from \"./entry\";\n\nimport { LiftingOrder, Entry, FieldKg, FieldStatus } from \"../types/dataTypes\";\nimport { LiftingState } from \"../types/stateTypes\";\n\n// Helper function: for a given entry, see what attempt number would be next.\n//\n// Returns a number >= 1 if the entry is still lifting, representing the next attempt.\n// Returns zero if the entry does not have any pending attempts.\nconst getNextAttemptNumberForEntry = (entry: Entry, fieldKg: FieldKg, fieldStatus: FieldStatus): number => {\n  const weightsKg = entry[fieldKg];\n  const statuses = entry[fieldStatus];\n\n  // Lifters only set the next attempt, so loop backwards,\n  // looking for the first attempt that meets the criteria.\n  for (let i = MAX_ATTEMPTS - 1; i >= 0; i--) {\n    if (weightsKg[i] !== 0 && statuses[i] === 0) {\n      return i + 1;\n    }\n  }\n  return 0;\n};\n\n// Helper function: for a given entry, see the maximum attempt number made.\n//\n// Returns a number >= 1 representing the highest-numbered attempt attempted.\n// Returns zero if the entry has not attempted any attempts.\nconst getMaxAttemptNumberForEntry = (entry: Entry, fieldKg: FieldKg, fieldStatus: FieldStatus): number => {\n  const weightsKg = entry[fieldKg];\n  const statuses = entry[fieldStatus];\n\n  for (let i = MAX_ATTEMPTS - 1; i >= 0; i--) {\n    if (weightsKg[i] !== 0 && statuses[i] !== 0) {\n      return i + 1;\n    }\n  }\n  return 0;\n};\n\n// Determine the current active attempt for the current lift.\n//\n// An attempt is active if either:\n// 1. It has been overridden by the Attempt selector.\n// 2. There exists an attempt of that number with no success/failure value,\n//    and there is no lower attempt number with that property.\n//\n// Returns a number in the (inclusive) range of [1, MAX_ATTEMPTS].\n// If there is not enough data to make a decision, returns 1.\nconst getActiveAttemptNumber = (entriesInFlight: Array<Entry>, lifting: LiftingState): number => {\n  const lift = lifting.lift;\n  const fieldKg = liftToAttemptFieldName(lift);\n  const fieldStatus = liftToStatusFieldName(lift);\n\n  // Allow manual override.\n  if (lifting.overrideAttempt !== null) {\n    return Number(lifting.overrideAttempt);\n  }\n\n  // Iterate in reverse, looking for the earliest attempt that hasn't been lifted.\n  let earliestAttemptOneIndexed = MAX_ATTEMPTS + 1;\n  for (let i = 0; i < entriesInFlight.length; i++) {\n    const entry = entriesInFlight[i];\n    const next = getNextAttemptNumberForEntry(entry, fieldKg, fieldStatus);\n    // Zero return value means \"no pending attempts for this entry.\"\n    if (next > 0 && next < earliestAttemptOneIndexed) {\n      earliestAttemptOneIndexed = next;\n    }\n  }\n\n  // The lowest pending attempt number is the current one.\n  if (earliestAttemptOneIndexed < MAX_ATTEMPTS + 1) {\n    return earliestAttemptOneIndexed;\n  }\n\n  // In the case of no pending lifts, try to helpfully infer the next attempt.\n  let latestAttemptOneIndexed = 0;\n  for (let i = 0; i < entriesInFlight.length; i++) {\n    const entry = entriesInFlight[i];\n    const max = getMaxAttemptNumberForEntry(entry, fieldKg, fieldStatus);\n    // Zero return value means \"no attempted attempts for this entry.\"\n    if (max > latestAttemptOneIndexed) {\n      latestAttemptOneIndexed = max;\n    }\n  }\n\n  // If >0, we know there are no pending attempts, and we know that everyone\n  // has taken all of the Nth attempt. So we should display the (N+1)th attempt.\n  if (latestAttemptOneIndexed > 0) {\n    // Don't auto-advance from 3rd to 4th attempts.\n    // However, if we're already on 4th attempts, stay there.\n    if (latestAttemptOneIndexed + 1 >= 4) {\n      return latestAttemptOneIndexed;\n    }\n\n    // Roll-over to the next attempt (with no pending entries).\n    return latestAttemptOneIndexed + 1;\n  }\n\n  // Otherwise, just default to the first attempt.\n  return 1;\n};\n\n// Helper function for recursive comparison.\nexport const compareEntriesByAttempt = (a: Entry, b: Entry, fieldKg: FieldKg, attemptOneIndexed: number): number => {\n  const aKg = a[fieldKg][attemptOneIndexed - 1];\n  const bKg = b[fieldKg][attemptOneIndexed - 1];\n\n  // If non-equal, sort by weight, ascending.\n  if (aKg !== bKg) return aKg - bKg;\n\n  // If the federation uses lot numbers, break ties using lot.\n  if (a.lot !== 0 && b.lot !== 0) return a.lot - b.lot;\n\n  // If this is not the first attempt, preserve the order from the last attempt.\n  if (attemptOneIndexed > 1) {\n    return compareEntriesByAttempt(a, b, fieldKg, attemptOneIndexed - 1);\n  }\n\n  // Try to break ties using bodyweight, with the lighter lifter going first.\n  if (a.bodyweightKg !== b.bodyweightKg) return a.bodyweightKg - b.bodyweightKg;\n\n  // If we've run out of properties by which to compare them, resort to Name.\n  if (a.name < b.name) return -1;\n  if (a.name > b.name) return 1;\n  return 0;\n};\n\n// Helper function: performs an in-place sort on an array of entries.\n// Assumes that zero entries are not mixed in with non-zero entries.\nexport const orderEntriesByAttempt = (\n  entries: Array<Entry>,\n  fieldKg: FieldKg,\n  attemptOneIndexed: number\n): Array<Entry> => {\n  return entries.sort((a, b) => {\n    return compareEntriesByAttempt(a, b, fieldKg, attemptOneIndexed);\n  });\n};\n\n// Returns a copy of the entries in lifting order for the current attempt.\nconst orderEntriesForAttempt = (\n  entriesInFlight: Array<Entry>,\n  lifting: LiftingState,\n  attemptOneIndexed: number\n): Array<Entry> => {\n  const lift = lifting.lift;\n  const fieldKg = liftToAttemptFieldName(lift);\n\n  const attemptZeroIndexed = attemptOneIndexed - 1;\n  const existsNextAttempt = attemptOneIndexed + 1 <= MAX_ATTEMPTS;\n  const existsPrevAttempt = attemptOneIndexed > 1;\n\n  // Divide the entries into disjoint groups:\n  const byNextAttempt: Array<Entry> = []; // Entries sorted by their next attempt.\n  const byThisAttempt: Array<Entry> = []; // Entries sorted by this attempt.\n  const byPrevAttempt: Array<Entry> = []; // Entries sorted by previous attempt.\n  const notLifting: Array<Entry> = []; // Entries that don't have this or next attempts in.\n\n  for (let i = 0; i < entriesInFlight.length; i++) {\n    const entry = entriesInFlight[i];\n\n    if (existsNextAttempt && entry[fieldKg][attemptZeroIndexed + 1] !== 0) {\n      byNextAttempt.push(entry);\n    } else if (entry[fieldKg][attemptZeroIndexed] !== 0) {\n      byThisAttempt.push(entry);\n    } else if (existsPrevAttempt && entry[fieldKg][attemptZeroIndexed - 1] !== 0) {\n      byPrevAttempt.push(entry);\n    } else {\n      notLifting.push(entry);\n    }\n  }\n\n  // Perform sorting on the relative groups.\n  if (existsNextAttempt) {\n    orderEntriesByAttempt(byNextAttempt, fieldKg, attemptOneIndexed + 1);\n  }\n  orderEntriesByAttempt(byThisAttempt, fieldKg, attemptOneIndexed);\n  if (existsPrevAttempt) {\n    orderEntriesByAttempt(byPrevAttempt, fieldKg, attemptOneIndexed - 1);\n  }\n  orderEntriesByAttempt(notLifting, fieldKg, attemptOneIndexed);\n\n  // Arrange these three groups consecutively.\n  return Array.prototype.concat(byNextAttempt, byThisAttempt, byPrevAttempt, notLifting);\n};\n\n// Returns either the current entry ID or null if no active entry.\n//\n// In the ordered entries, the earliest lifter that hasn't gone yet is going.\n// This can be manually overridden by UI controls.\nconst getCurrentEntryId = (\n  lifting: LiftingState,\n  orderedEntries: Array<Entry>,\n  attemptOneIndexed: number\n): number | null => {\n  const lift = lifting.lift;\n  const fieldKg = liftToAttemptFieldName(lift);\n  const fieldStatus = liftToStatusFieldName(lift);\n\n  if (lifting.overrideEntryId !== null) {\n    return Number(lifting.overrideEntryId);\n  }\n\n  for (let i = 0; i < orderedEntries.length; i++) {\n    const entry = orderedEntries[i];\n    const idx = attemptOneIndexed - 1;\n    if (entry[fieldKg][idx] !== 0 && entry[fieldStatus][idx] === 0) {\n      return entry.id;\n    }\n  }\n  return null;\n};\n\ntype NextEntryInfo = {\n  entryId: number;\n  attemptOneIndexed: number;\n};\n\n// Returns either an Object of {entryId, attemptOneIndexed}, or null.\nconst getNextEntryInfo = (\n  lifting: LiftingState,\n  currentEntryId: number | null,\n  orderedEntries: Array<Entry>,\n  attemptOneIndexed: number\n): NextEntryInfo | null => {\n  const lift = lifting.lift;\n  const fieldKg = liftToAttemptFieldName(lift);\n  const fieldStatus = liftToStatusFieldName(lift);\n\n  if (currentEntryId === null) {\n    return null;\n  }\n\n  // Find the index of the currentEntryId in the orderedEntries.\n  const currentEntryIndex = orderedEntries.findIndex((e) => e.id === currentEntryId);\n  if (currentEntryIndex === -1) {\n    return null;\n  }\n\n  // Walk forward, looking for additional valid attempts.\n  for (let i = currentEntryIndex + 1; i < orderedEntries.length; i++) {\n    const hasAttempt = orderedEntries[i][fieldKg][attemptOneIndexed - 1] !== 0;\n    const notTaken = orderedEntries[i][fieldStatus][attemptOneIndexed - 1] === 0;\n\n    if (hasAttempt && notTaken) {\n      return {\n        entryId: orderedEntries[i].id,\n        attemptOneIndexed: attemptOneIndexed,\n      };\n    }\n  }\n\n  // If none were found walking forward, check the next attempt by wrapping around.\n  if (attemptOneIndexed + 1 > MAX_ATTEMPTS) {\n    return null;\n  }\n  const nextAttemptOneIndexed = attemptOneIndexed + 1;\n\n  for (let i = 0; i < currentEntryIndex; i++) {\n    const hasAttempt = orderedEntries[i][fieldKg][nextAttemptOneIndexed - 1] !== 0;\n    const notTaken = orderedEntries[i][fieldStatus][nextAttemptOneIndexed - 1] === 0;\n\n    if (hasAttempt && notTaken) {\n      return {\n        entryId: orderedEntries[i].id,\n        attemptOneIndexed: nextAttemptOneIndexed,\n      };\n    }\n  }\n\n  return null;\n};\n\n// Main application logic. Resolves the LiftingState to a LiftingOrder.\nexport const getLiftingOrder = (entriesInFlight: Array<Entry>, lifting: LiftingState): LiftingOrder => {\n  const attemptOneIndexed = getActiveAttemptNumber(entriesInFlight, lifting);\n  const orderedEntries = orderEntriesForAttempt(entriesInFlight, lifting, attemptOneIndexed);\n  const currentEntryId = getCurrentEntryId(lifting, orderedEntries, attemptOneIndexed);\n  const nextEntryInfo = getNextEntryInfo(lifting, currentEntryId, orderedEntries, attemptOneIndexed);\n\n  return {\n    orderedEntries: orderedEntries,\n    attemptOneIndexed: attemptOneIndexed,\n    currentEntryId: currentEntryId,\n    nextAttemptOneIndexed: nextEntryInfo ? nextEntryInfo.attemptOneIndexed : null,\n    nextEntryId: nextEntryInfo ? nextEntryInfo.entryId : null,\n  };\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the logic for calculating the division Place of a lifter, shared between\n// the Lifting page, the Rankings page, and data export code.\n//\n// The algorithm used is particularly bad -- the foremost goal was to make an interface\n// that allowed for maximum code reuse between the Rankings and Lifting pages,\n// which have slightly different needs.\n\nimport { getProjectedEventTotalKg, getFinalEventTotalKg, liftToAttemptFieldName } from \"./entry\";\nimport { compareEntriesByAttempt } from \"./liftingOrder\";\nimport { getWeightClassStr } from \"../reducers/meetReducer\";\n\nimport { Sex, Event, Equipment, Entry, Lift } from \"../types/dataTypes\";\nimport { checkExhausted } from \"../types/utils\";\nimport { mapSexToClasses } from \"./entry\";\n\nexport type Place = number | \"DQ\";\n\n// Determines how the total is calculated.\ntype ResultsType = \"Projected\" | \"Final\";\n\n// Specifies a competition category under which entries can be ranked together.\nexport type Category = {\n  sex: Sex;\n  event: Event;\n  equipment: Equipment;\n  division: string;\n  weightClassStr: string;\n  isNovice: boolean;\n};\n\n// Wraps up all the entries in a category with the category's descriptors.\nexport type CategoryResults = {\n  category: Category;\n  orderedEntries: Array<Entry>;\n};\n\n// Generates a unique String out of a Category, for purposes of using as a Map key.\nconst categoryToKey = (category: Category): string => {\n  return JSON.stringify(category);\n};\nconst keyToCategory = (key: string): Category => {\n  return JSON.parse(key);\n};\n\n// Helper function for sortByPlaceInCategory().\n//\n// Determines the last successful Lift (for example, \"B\") for the Entry in\n// the given Event category.\n//\n// Lifters have already been checked to have a non-zero total.\nconst getLastSuccessfulLift = (event: Event, entry: Entry): Lift => {\n  // Iterate backwards over the Event types.\n  for (let i = event.length - 1; i >= 0; --i) {\n    const lift = event[i];\n    switch (lift) {\n      case \"S\":\n        if (entry.squatStatus.includes(1)) {\n          return \"S\";\n        }\n        break;\n      case \"B\":\n        if (entry.benchStatus.includes(1)) {\n          return \"B\";\n        }\n        break;\n      case \"D\":\n        if (entry.deadliftStatus.includes(1)) {\n          return \"D\";\n        }\n        break;\n      default:\n        return \"S\";\n    }\n  }\n  return \"S\";\n};\n\n// Helper function for sortByPlaceInCategory().\n//\n// Determines the last successful attempt (only counting the first three) for\n// the Entry for the given Lift.\n//\n// The caller already knows that a successful attempt was made, since it\n// passed getLastSuccessfulLift().\nconst getLastSuccessfulAttempt = (lift: Lift, entry: Entry): number => {\n  let statuses = null;\n  switch (lift) {\n    case \"S\":\n      statuses = entry.squatStatus;\n      break;\n    case \"B\":\n      statuses = entry.benchStatus;\n      break;\n    case \"D\":\n      statuses = entry.deadliftStatus;\n      break;\n    default:\n      checkExhausted(lift);\n      return 0;\n  }\n\n  // Consider only the first three attempts, in reverse.\n  for (let i = 2; i >= 0; --i) {\n    if (statuses[i] === 1) return i;\n  }\n  return 0;\n};\n\n// Returns a copy of the entries array sorted by Place.\n// All entries are assumed to be part of the same category.\nconst sortByPlaceInCategory = (entries: ReadonlyArray<Entry>, category: Category, type: ResultsType): Array<Entry> => {\n  const event = category.event;\n\n  // Clone the entries array to avoid modifying the original.\n  const clonedEntries = entries.slice();\n\n  // Sort in the given category, first place having the lowest index.\n  clonedEntries.sort((a, b) => {\n    // If either of the lifters are guests, sort the guest last\n    if (a.guest !== b.guest) {\n      return Number(a.guest) - Number(b.guest);\n    }\n    // Otherwise, both lifters are non-guests or guests, so sort as per usual\n    let aTotal = 0;\n\n    // First sort by Total, higher sorting lower.\n    if (type === \"Projected\") {\n      aTotal = getProjectedEventTotalKg(a, event);\n      const bTotal = getProjectedEventTotalKg(b, event);\n      if (aTotal !== bTotal) return bTotal - aTotal;\n    } else if (type === \"Final\") {\n      aTotal = getFinalEventTotalKg(a, event);\n      const bTotal = getFinalEventTotalKg(b, event);\n      if (aTotal !== bTotal) return bTotal - aTotal;\n    }\n\n    // If totals are equal, sort by Bodyweight, lower sorting lower.\n    if (a.bodyweightKg !== b.bodyweightKg) return a.bodyweightKg - b.bodyweightKg;\n\n    // If totals are zero, neither lifter took a successful attempt,\n    // so just sort arbitrarily by name.\n    if (aTotal === 0) {\n      if (a.name < b.name) return -1;\n      if (a.name > b.name) return 1;\n      return 0;\n    }\n\n    // If totals are equal and bodyweights are equal, the winner is the\n    // lifter who reached the total first. Because our implementation is\n    // stateless and doesn't remember lifting order, this gets complicated.\n    //\n    // For purposes of simplicity, this is broken into cases.\n    //\n    // At this point, the logic requires that each lifter have taken at least\n    // one successful attempt -- this is validated by checking the total\n    // against zero above.\n    //\n    // Case 1: If the lifters' last successful lifts were for different Lifts,\n    //         then the lifter with the earlier lift in SBD order wins.\n    const aLastSuccessfulLift = getLastSuccessfulLift(event, a);\n    const bLastSuccessfulLift = getLastSuccessfulLift(event, b);\n    const aLastSuccessfulLiftIndex = [\"S\", \"B\", \"D\"].indexOf(aLastSuccessfulLift);\n    const bLastSuccessfulLiftIndex = [\"S\", \"B\", \"D\"].indexOf(bLastSuccessfulLift);\n    if (aLastSuccessfulLiftIndex !== bLastSuccessfulLiftIndex) {\n      return aLastSuccessfulLiftIndex - bLastSuccessfulLiftIndex;\n    }\n\n    // Case 2: If the lifters reached the total on the same lift but on different\n    //         attempts, the lifter with the earlier attempt wins.\n    const lift: Lift = aLastSuccessfulLift;\n    const aLastSuccessfulAttempt: number = getLastSuccessfulAttempt(lift, a);\n    const bLastSuccessfulAttempt: number = getLastSuccessfulAttempt(lift, b);\n    if (aLastSuccessfulAttempt !== bLastSuccessfulAttempt) {\n      return aLastSuccessfulAttempt - bLastSuccessfulAttempt;\n    }\n\n    // Case 3: If the lifters reached the total on the same lift and on the same\n    //         attempt, defer to the lifting order to determine who lifted first.\n    const attempt = aLastSuccessfulAttempt;\n    return compareEntriesByAttempt(a, b, liftToAttemptFieldName(lift), attempt);\n  });\n\n  return clonedEntries;\n};\n\n// Determines the sort order by Event.\nconst getEventSortOrder = (ev: Event): number => {\n  return [\"SBD\", \"BD\", \"SB\", \"SD\", \"S\", \"B\", \"D\"].indexOf(ev);\n};\n\n// Determines the sort order by Equipment.\nconst getEquipmentSortOrder = (eq: Equipment): number => {\n  return [\"Bare\", \"Sleeves\", \"Wraps\", \"Single-ply\", \"Multi-ply\", \"Unlimited\"].indexOf(eq);\n};\n\n// Determines the sort order by Sex.\nconst getSexSortOrder = (sex: Sex): number => {\n  switch (sex) {\n    case \"F\":\n      return 0;\n    case \"M\":\n      return 1;\n    case \"Mx\":\n      return 2;\n    default:\n      checkExhausted(sex);\n      return 3;\n  }\n};\n\n// Determines the sort (and therefore presentation) order for the Category Results.\n// The input array is sorted in-place; nothing is returned.\nexport const sortCategoryResults = (results: Array<CategoryResults>): void => {\n  results.sort((a, b) => {\n    const catA = a.category;\n    const catB = b.category;\n\n    // First, sort by Sex.\n    const aSex = getSexSortOrder(catA.sex);\n    const bSex = getSexSortOrder(catB.sex);\n    if (aSex !== bSex) return aSex - bSex;\n\n    // Next, sort by Event.\n    const aEvent = getEventSortOrder(catA.event);\n    const bEvent = getEventSortOrder(catB.event);\n    if (aEvent !== bEvent) return aEvent - bEvent;\n\n    // Next, sort by Equipment.\n    const aEquipment = getEquipmentSortOrder(catA.equipment);\n    const bEquipment = getEquipmentSortOrder(catB.equipment);\n    if (aEquipment !== bEquipment) return aEquipment - bEquipment;\n\n    // Next, sort by Division as string.\n    if (catA.division < catB.division) return -1;\n    if (catA.division > catB.division) return 1;\n\n    // Finally, sort by WeightClass.\n    // Any SHW class should be placed at the end.\n    const aIsSHW: boolean = catA.weightClassStr.includes(\"+\");\n    const bIsSHW: boolean = catB.weightClassStr.includes(\"+\");\n    if (aIsSHW && !bIsSHW) return 1;\n    if (!aIsSHW && bIsSHW) return -1;\n    // parseInt() ignores the \"+\" at the end of SHW class strings.\n    const aWeightClass = catA.weightClassStr === \"\" ? 0 : parseInt(catA.weightClassStr);\n    const bWeightClass = catB.weightClassStr === \"\" ? 0 : parseInt(catB.weightClassStr);\n    return aWeightClass - bWeightClass;\n  });\n};\n\n// Generates objects representing every present category of competition,\n// with each entry given a Place designation.\n//\n// The returned objects are sorted in intended order of presentation.\nconst getAllResults = (\n  entries: ReadonlyArray<Entry>,\n  weightClassesKgMen: ReadonlyArray<number>,\n  weightClassesKgWomen: ReadonlyArray<number>,\n  weightClassesKgMx: ReadonlyArray<number>,\n  combineSleevesAndWraps: boolean,\n  type: ResultsType\n): Array<CategoryResults> => {\n  // Generate a map from category to the entries within that category.\n  // The map is populated by iterating over each entry and having the entry\n  // append itself to per-category lists.\n  const categoryMap = new Map<string, Entry[]>();\n  for (let i = 0; i < entries.length; i++) {\n    const e = entries[i];\n\n    // Remember consistent properties.\n    const sex = e.sex;\n    const classesForSex = mapSexToClasses(sex, weightClassesKgMen, weightClassesKgWomen, weightClassesKgMx);\n    const weightClassStr = getWeightClassStr(classesForSex, e.bodyweightKg);\n\n    // If the results combine Sleeves and Wraps, promote Sleeves to Wraps.\n    let equipment = e.equipment;\n    if (combineSleevesAndWraps && equipment === \"Sleeves\") {\n      equipment = \"Wraps\";\n    }\n\n    // Iterate over every combination of division and event, adding to the map.\n    //\n    // This code also intentionally executes if `e.divisions.length === 0`.\n    // This is used to handle an exceptional case where a meet director expects\n    // all lifters to compete Open, but has failed to specify any division\n    // on the registration page, believing that to be unneeded.\n    //\n    // If that special case were not handled, the lifter would disappear from results.\n    const numDivisions = e.divisions.length;\n    let dividx: number = 0;\n    do {\n      const division = numDivisions > 0 ? e.divisions[dividx] : \"\";\n\n      for (let evidx = 0; evidx < e.events.length; evidx++) {\n        const event = e.events[evidx];\n        const category = { sex, event, equipment, division, weightClassStr, isNovice: e.novice || false };\n        const key = categoryToKey(category);\n\n        const catEntries = categoryMap.get(key);\n        catEntries === undefined ? categoryMap.set(key, [e]) : catEntries.push(e);\n      }\n    } while (++dividx < numDivisions);\n  }\n\n  // Iterate over each category and assign a Place to the entries therein.\n  const results = [];\n  for (const [key, catEntries] of categoryMap) {\n    const category = keyToCategory(key);\n    const orderedEntries = sortByPlaceInCategory(catEntries, category, type);\n    results.push({ category, orderedEntries });\n  }\n\n  sortCategoryResults(results);\n  return results;\n};\n\nexport const getProjectedResults = (\n  entries: ReadonlyArray<Entry>,\n  weightClassesKgMen: ReadonlyArray<number>,\n  weightClassesKgWomen: ReadonlyArray<number>,\n  weightClassesKgMx: ReadonlyArray<number>,\n  combineSleevesAndWraps: boolean\n): Array<CategoryResults> => {\n  return getAllResults(\n    entries,\n    weightClassesKgMen,\n    weightClassesKgWomen,\n    weightClassesKgMx,\n    combineSleevesAndWraps,\n    \"Projected\"\n  );\n};\n\nexport const getFinalResults = (\n  entries: ReadonlyArray<Entry>,\n  weightClassesKgMen: ReadonlyArray<number>,\n  weightClassesKgWomen: ReadonlyArray<number>,\n  weightClassesKgMx: ReadonlyArray<number>,\n  combineSleevesAndWraps: boolean\n): Array<CategoryResults> => {\n  return getAllResults(\n    entries,\n    weightClassesKgMen,\n    weightClassesKgWomen,\n    weightClassesKgMx,\n    combineSleevesAndWraps,\n    \"Final\"\n  );\n};\n\nexport const getPlaceOrdinal = (entry: Entry, categoryResults: CategoryResults[]): number | null => {\n  if (entry.divisions.length === 0) return null;\n  if (entry.guest) return null;\n  // Just show the Place from the first division in the list.\n  // This is the same division as shown in the \"Division\" column.\n  const firstDiv = entry.divisions[0];\n\n  // Look at all the categories, and find the first one including this division\n  // and entry. Because the categories are in sorted order, SBD takes priority\n  // over B by default.\n  for (let i = 0; i < categoryResults.length; i++) {\n    const result = categoryResults[i];\n    if (result.category.division !== firstDiv) {\n      continue;\n    }\n\n    const catEntries = result.orderedEntries;\n    for (let j = 0; j < catEntries.length; j++) {\n      const catEntry = catEntries[j];\n\n      if (catEntry.id === entry.id) {\n        // We can use the index into the array as their place, since it sorted and guests will be last in the array\n        return j + 1;\n      }\n    }\n  }\n  return null;\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// The left card on the lifting page, showing information about the current lifter\n// and helpful information for the loading crew.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport { selectPlates, makeLoadingRelative } from \"../../logic/barLoad\";\nimport { liftToAttemptFieldName, getWeightClassForEntry, getFinalTotalKg } from \"../../logic/entry\";\nimport { getString } from \"../../logic/strings\";\nimport { kg2lbs } from \"../../logic/units\";\n\nimport BarLoad from \"./BarLoad\";\n\nimport styles from \"./LeftCard.module.scss\";\n\nimport Logo from \"./gpc-nz-square.png\";\n\nimport { Entry, Language, LoadedPlate, RecordLift } from \"../../types/dataTypes\";\nimport { GlobalState, LiftingState, RegistrationState, MeetState, RecordsState } from \"../../types/stateTypes\";\nimport { isRecordAttempt, getRecordTypeForEntry, getUpdatedRecordState } from \"../../logic/records/records\";\nimport { checkExhausted } from \"../../types/utils\";\nimport { getProjectedResults, getFinalResults, getPlaceOrdinal } from \"../../logic/divisionPlace\";\n\ninterface OwnProps {\n  attemptOneIndexed: number;\n  orderedEntries: Array<Entry>;\n  currentEntryId: number | null;\n  nextEntryId: number | null;\n  nextAttemptOneIndexed: number | null;\n}\n\ninterface StateProps {\n  registration: RegistrationState;\n  meet: MeetState;\n  updatedRecordState: RecordsState;\n\n  lifting: LiftingState;\n  language: Language;\n}\n\ntype Props = OwnProps & StateProps;\n\ninterface BarLoadOptions {\n  weightKg: number;\n  weightLbs: number;\n  rackInfo: string;\n}\n\n// Scuffed ordinal suffix calculation\nfunction getOrdinalSuffix(i: number): string {\n  const j = i % 10;\n  const k = i % 100;\n  if (j === 1 && k !== 11) {\n    return \"st\";\n  }\n  if (j === 2 && k !== 12) {\n    return \"nd\";\n  }\n  if (j === 3 && k !== 13) {\n    return \"rd\";\n  }\n  return \"th\";\n}\n\nclass LeftCard extends React.Component<Props> {\n  getBarLoadProps = (entryId: number | null, attemptOneIndexed: number | null): BarLoadOptions => {\n    const lift = this.props.lifting.lift;\n    const fieldKg = liftToAttemptFieldName(lift);\n\n    // Defaults, in case of no lifter.\n    if (entryId === null || entryId === undefined || attemptOneIndexed === null || attemptOneIndexed === undefined) {\n      return { weightKg: 0, weightLbs: 0, rackInfo: \"\" };\n    }\n\n    const entry = this.getEntryById(entryId);\n\n    const weightKg = entry[fieldKg][attemptOneIndexed - 1];\n    const weightLbs = kg2lbs(weightKg);\n\n    let rackInfo = \"\";\n    if (lift === \"S\") rackInfo = entry.squatRackInfo;\n    if (lift === \"B\") rackInfo = entry.benchRackInfo;\n\n    return { weightKg, weightLbs, rackInfo };\n  };\n\n  getBarAndCollarsWeightKg = (): number => {\n    switch (this.props.lifting.lift) {\n      case \"S\":\n        return this.props.meet.squatBarAndCollarsWeightKg;\n      case \"B\":\n        return this.props.meet.benchBarAndCollarsWeightKg;\n      case \"D\":\n        return this.props.meet.deadliftBarAndCollarsWeightKg;\n      default:\n        return 0;\n    }\n  };\n\n  private getEntryById(entryId: number) {\n    const idx = this.props.registration.lookup[entryId];\n    const entry = this.props.registration.entries[idx];\n    return entry;\n  }\n\n  render() {\n    const current = this.getBarLoadProps(this.props.currentEntryId, this.props.attemptOneIndexed);\n    const next = this.getBarLoadProps(this.props.nextEntryId, this.props.nextAttemptOneIndexed);\n\n    const barAndCollarsWeightKg = this.getBarAndCollarsWeightKg();\n\n    // Calculate both loadings.\n    const currentLoading: Array<LoadedPlate> = selectPlates(\n      current.weightKg,\n      barAndCollarsWeightKg,\n      this.props.meet.plates,\n      this.props.meet.inKg\n    );\n    const nextLoading: Array<LoadedPlate> = selectPlates(\n      next.weightKg,\n      barAndCollarsWeightKg,\n      this.props.meet.plates,\n      this.props.meet.inKg\n    );\n\n    // Set the next loading relative to the current loading.\n    if (next.weightKg >= current.weightKg) {\n      makeLoadingRelative(nextLoading, currentLoading);\n    }\n\n    let nextEntryName = undefined;\n    if (typeof this.props.nextEntryId === \"number\") {\n      const idx = this.props.registration.lookup[this.props.nextEntryId];\n      nextEntryName = this.props.registration.entries[idx].name;\n    }\n\n    const nextBarLoad =\n      next.weightKg === 0 ? undefined : (\n        <div className={styles.loadingBar}>\n          <div className={styles.nextText}>\n            <FormattedMessage\n              id=\"lifting.next-up\"\n              defaultMessage=\"NEXT UP  {lifter}\"\n              values={{\n                lifter: nextEntryName,\n              }}\n            />\n          </div>\n          <div className={styles.barArea}>\n            <BarLoad\n              key={String(next.weightKg) + next.rackInfo}\n              loading={nextLoading}\n              rackInfo={next.rackInfo}\n              inKg={this.props.meet.inKg}\n            />\n          </div>\n        </div>\n      );\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.activeCard}>\n          <div className={styles.loadingBar}>\n            {this.renderStreamOverlayCard(current)}\n            <div className={styles.barArea}>\n              <BarLoad\n                key={String(current.weightKg) + current.rackInfo}\n                loading={currentLoading}\n                rackInfo={current.rackInfo}\n                inKg={this.props.meet.inKg}\n              />\n            </div>\n          </div>\n        </div>\n        {nextBarLoad}\n        <div style={{ display: \"flex\", justifyContent: \"space-evenly\" }}>\n          <img className={styles.logo} src={Logo}></img>\n        </div>\n      </div>\n    );\n  }\n\n  getRecordAttemptText(): string | null {\n    if (this.props.currentEntryId === null || this.props.attemptOneIndexed === null) {\n      return null;\n    }\n    const lift = this.props.lifting.lift;\n    const recordTypesBroken: string[] = [];\n    const currentEntry = this.getEntryById(this.props.currentEntryId);\n    const canSetTotalRecords = getRecordTypeForEntry(currentEntry) === \"FullPower\" && lift === \"D\";\n\n    const isLiftRecordAttempt = this.isRecordAttempt(currentEntry, lift);\n    // Is it a record attempt for the lift?\n    if (isLiftRecordAttempt) {\n      let localizedLift: string = \"\";\n      if (lift === \"S\") localizedLift = getString(\"lifting.records-squat\", this.props.language);\n      else if (lift === \"B\") localizedLift = getString(\"lifting.records-bench\", this.props.language);\n      else if (lift === \"D\") localizedLift = getString(\"lifting.records-deadlift\", this.props.language);\n      else {\n        checkExhausted(lift);\n      }\n\n      recordTypesBroken.push(localizedLift);\n    }\n\n    // Total records are only announced during deadlifts in full power meets\n    const isTotalRecordAttempt = canSetTotalRecords && this.isRecordAttempt(currentEntry, \"Total\");\n    if (isTotalRecordAttempt) {\n      recordTypesBroken.push(getString(\"lifting.records-total\", this.props.language));\n    }\n\n    // If any records are being attempted, announce them\n    if (recordTypesBroken.length > 0) {\n      const officialOrUnOfficial = currentEntry.canBreakRecords\n        ? getString(\"lifting.records-official\", this.props.language)\n        : getString(\"lifting.records-unofficial\", this.props.language);\n      let messageTemplate =\n        recordTypesBroken.length == 1\n          ? getString(\"lifting.records-attempt-1-record-notice\", this.props.language).replace(\n              \"{Lift}\",\n              recordTypesBroken[0]\n            )\n          : getString(\"lifting.records-attempt-2-records-notice\", this.props.language)\n              .replace(\"{Lift1}\", recordTypesBroken[0])\n              .replace(\"{Lift2}\", recordTypesBroken[1]);\n\n      messageTemplate = messageTemplate.replace(\"{OfficialOrUnofficial}\", officialOrUnOfficial);\n      return messageTemplate;\n    }\n    return null;\n  }\n\n  renderStreamOverlayCard(barLoadProps: BarLoadOptions) {\n    if (this.props.currentEntryId === null) {\n      return null;\n    }\n\n    const useProjected = this.props.lifting.lift !== \"D\" || this.props.attemptOneIndexed < 2;\n    const categoryResults = useProjected\n      ? getProjectedResults(\n          this.props.registration.entries,\n          this.props.meet.weightClassesKgMen,\n          this.props.meet.weightClassesKgWomen,\n          this.props.meet.weightClassesKgMx,\n          this.props.meet.combineSleevesAndWraps\n        )\n      : getFinalResults(\n          this.props.registration.entries,\n          this.props.meet.weightClassesKgMen,\n          this.props.meet.weightClassesKgWomen,\n          this.props.meet.weightClassesKgMx,\n          this.props.meet.combineSleevesAndWraps\n        );\n\n    const entry = this.getEntryById(this.props.currentEntryId);\n    let placeOrdinal = null;\n    if (getFinalTotalKg(entry) !== 0) {\n      placeOrdinal = getPlaceOrdinal(entry, categoryResults);\n    }\n    const placeOrdinalStr = placeOrdinal !== null ? `  ${placeOrdinal}${getOrdinalSuffix(placeOrdinal)} place` : null;\n    const weightClass = getWeightClassForEntry(\n      entry,\n      this.props.meet.weightClassesKgMen,\n      this.props.meet.weightClassesKgWomen,\n      this.props.meet.weightClassesKgMx,\n      this.props.language\n    );\n\n    const weightClassPrefix = weightClass.endsWith(\"+\") ? \"\" : \"u\";\n\n    return (\n      <div>\n        <div className={styles.attemptText}>{entry.name}</div>\n        <div className={styles.overlaySubTitle}>\n          {entry.divisions[0]}  <span className={styles.weightClassPrefix}>{weightClassPrefix}</span>\n          {weightClass}kg\n          {placeOrdinalStr}\n        </div>\n        <div className={styles.overlayWeight}>\n          {barLoadProps.weightKg}KG <span className={styles.overlayRecordText}>{this.getRecordAttemptText()}</span>\n        </div>\n      </div>\n    );\n  }\n\n  private isRecordAttempt(entry: Entry, lift: RecordLift): boolean {\n    return isRecordAttempt(\n      this.props.updatedRecordState,\n      this.props.meet,\n      entry,\n      lift,\n      this.props.attemptOneIndexed,\n      this.props.language\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => {\n  return {\n    registration: state.registration,\n    lifting: state.lifting,\n    updatedRecordState: getUpdatedRecordState(state.records, state.meet, state.registration, state.language),\n    meet: state.meet,\n    language: state.language,\n  };\n};\n\nexport default connect(mapStateToProps)(LeftCard);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// An editable component for attempt manipulation in the LiftingContent.\n\nimport React, { FormEvent } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Form from \"react-bootstrap/Form\";\n\nimport { liftToAttemptFieldName, liftToStatusFieldName } from \"../../logic/entry\";\nimport { enterAttempt } from \"../../actions/liftingActions\";\nimport { kg2lbs, lbs2kg, string2number, displayWeight } from \"../../logic/units\";\n\nimport { Entry, Language, Lift, Validation } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\n\nimport styles from \"./LiftingTable.module.scss\";\nimport { FormControlTypeHack } from \"../../types/utils\";\nimport { Dispatch } from \"redux\";\n\ninterface StateProps {\n  inKg: boolean;\n  language: Language;\n}\n\ninterface OwnProps {\n  entry: Entry;\n  lift: Lift;\n  attemptOneIndexed: number;\n  id: string;\n}\n\ninterface DispatchProps {\n  enterAttempt: (entryId: number, lift: Lift, attemptOneIndexed: number, weightKg: number) => void;\n}\n\ntype Props = StateProps & OwnProps & DispatchProps;\n\ninterface InternalState {\n  lastGoodValue: string;\n  value: string;\n}\n\nclass AttemptInput extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.validate = this.validate.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n\n    const fieldKg = liftToAttemptFieldName(this.props.lift);\n    const weightKg: number = this.props.entry[fieldKg][this.props.attemptOneIndexed - 1];\n\n    let weightStr = \"\";\n    if (weightKg !== 0) {\n      weightStr = displayWeight(this.props.inKg ? weightKg : kg2lbs(weightKg), this.props.language);\n    }\n\n    this.state = {\n      lastGoodValue: weightStr,\n      value: weightStr,\n    };\n  }\n\n  validate = (): Validation => {\n    let { value } = this.state;\n    if (value === \"\") return null;\n\n    // Allow use of commas as decimal separator.\n    value = value.replace(\",\", \".\");\n\n    // Handle all errors before all warnings.\n    // Check that the input is a number.\n    const asNumber = Number(value);\n    if (isNaN(asNumber)) return \"error\";\n    if (!isFinite(asNumber)) return \"error\";\n    if (asNumber < 0) return \"error\";\n\n    // The bar weight must be monotonically increasing between attempts.\n    if (this.props.attemptOneIndexed > 1) {\n      const asKg = this.props.inKg ? asNumber : lbs2kg(asNumber);\n\n      const entry = this.props.entry;\n      const fieldKg = liftToAttemptFieldName(this.props.lift);\n      const fieldStatus = liftToStatusFieldName(this.props.lift);\n\n      const prevAttemptOneIndexed = this.props.attemptOneIndexed - 1;\n\n      // Check for validity against all previous attempts.\n      for (let i = 0; i < prevAttemptOneIndexed; ++i) {\n        const prevWeightKg = entry[fieldKg][i];\n\n        // Disallow this weight if it's a decrease from a previous attempt.\n        if (prevWeightKg > asKg) return \"error\";\n\n        if (prevWeightKg === asKg) {\n          const prevStatus = entry[fieldStatus][i];\n\n          // Disallow this weight if it was already successfully lifted.\n          if (prevStatus === 1) return \"error\";\n\n          // If the weight is a repeat but has no status, allow it, but complain.\n          if (prevStatus === 0) return \"warning\";\n        }\n      }\n    }\n\n    if (asNumber % 2.5 !== 0) return \"warning\";\n    return null;\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === \"Enter\") {\n      event.currentTarget.blur();\n    }\n  };\n\n  handleChange = (event: FormEvent<FormControlTypeHack>) => {\n    const value = event.currentTarget.value;\n    if (typeof value === \"string\") {\n      let fixups = value.replace(\" \", \"\");\n\n      // Dvorak \"e\" corresponds to QWERTY \".\", but also is used in exponential\n      // notation, which is a fairly impactful typo.\n      fixups = value.replace(\"e\", \".\");\n\n      this.setState({ value: fixups });\n    }\n  };\n\n  handleBlur = () => {\n    if (this.validate() === \"error\") {\n      this.setState({ value: this.state.lastGoodValue });\n      return;\n    }\n\n    const entryId = this.props.entry.id;\n    const lift = this.props.lift;\n    const attemptOneIndexed = this.props.attemptOneIndexed;\n    const asNumber = string2number(this.state.value);\n    const weightKg = this.props.inKg ? asNumber : lbs2kg(asNumber);\n\n    this.props.enterAttempt(entryId, lift, attemptOneIndexed, weightKg);\n    this.setState({ lastGoodValue: this.state.value });\n  };\n\n  render() {\n    const validation: Validation = this.validate();\n\n    return (\n      <Form.Group style={{ marginBottom: 0 }}>\n        <Form.Control\n          id={this.props.id}\n          type=\"text\"\n          placeholder=\"\"\n          value={this.state.value}\n          onKeyDown={this.handleKeyDown}\n          onChange={this.handleChange}\n          onBlur={this.handleBlur}\n          // Nothing for Valid == we don't want borders.\n          isInvalid={validation === \"error\"}\n          // Special rules in the _openlifter.scss override warning styles.\n          // Makes the borders look normal but shows a yellow background.\n          className={(validation === \"warning\" ? \"is-warning \" : \"\") + styles.attemptInput + \" attempt-input\"}\n        />\n      </Form.Group>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  inKg: state.meet.inKg,\n  language: state.language,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => ({\n  enterAttempt: (entryId, lift, attemptOneIndexed, weightKg) =>\n    dispatch(enterAttempt(entryId, lift, attemptOneIndexed, weightKg)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AttemptInput);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the calculation of AH points, used by ParaPL.\n// Taken from https://gitlab.com/openpowerlifting/opl-data/blob/master/modules/coefficients/src/ah.rs\n\nimport { Sex } from \"../../types/dataTypes\";\nimport { checkExhausted } from \"../../types/utils\";\n\n// Calculates the AH coefficient for men.\n//\n// The full formula is defined in Excel:\n//  =ROUND($AM$1/(POWER(LOG(I13),$AM$2))*M13,2)\n//\n// Where:\n//  I13: Bodyweight\n//  M13: Lift Attempt\n//  AM1: 3.2695\n//  AM2: 1.95\nfunction ahMen(bodyweightKg: number): number {\n  const AM1: number = 3.2695;\n  const AM2: number = 1.95;\n\n  const adjusted = Math.min(Math.max(bodyweightKg, 32.0), 157.0);\n\n  return AM1 / Math.pow(Math.log10(adjusted), AM2);\n}\n\n// Calculates the AH coefficient for women.\n//\n// The full formula is defined in Excel:\n//  =ROUND($AG$1/(POWER(LOG(I13),$AG$10))*M13,2)\n//\n// Where:\n//  I13: Bodyweight\n//  M13: Lift Attempt\n//  AG1: 2.7566\n//  AG10: 1.8\nfunction ahWomen(bodyweightKg: number): number {\n  const AG1: number = 2.7566;\n  const AG10: number = 1.8;\n\n  const adjusted = Math.min(Math.max(bodyweightKg, 28.0), 112.0);\n\n  return AG1 / Math.pow(Math.log10(adjusted), AG10);\n}\n\n// Calculates AH (Haleczko) points, used in ParaPL bench-only meets.\nexport const ah = (sex: Sex, bodyweightKg: number, totalKg: number): number => {\n  switch (sex) {\n    case \"M\":\n    case \"Mx\":\n      return ahMen(bodyweightKg) * totalKg;\n    case \"F\":\n      return ahWomen(bodyweightKg) * totalKg;\n    default:\n      checkExhausted(sex);\n      return 0;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the calculation of Dots points.\n//\n// Dots were introduced by the German IPF Affiliate BVDK after the IPF switched to\n// IPF Points, which do not allow comparing between sexes. The BVDK hosts team\n// competitions that allow lifters of all sexes to compete on a singular team.\n//\n// Since Wilks points have been ostracized from the IPF, and IPF Points are\n// unsuitable, German lifters therefore came up with their own formula.\n//\n// The author of the Dots formula is Tim Konertz <tim.konertz@outlook.com>.\n//\n// Tim says that Dots is an acronym for \"Dynamic Objective Team Scoring,\"\n// but that they chose the acronym before figuring out the expansion.\n//\n// Implementation taken from the main OpenPowerlifting repo, also AGPLv3+.\n\nimport { Sex } from \"../../types/dataTypes\";\nimport { checkExhausted } from \"../../types/utils\";\n\nfunction dotsPoly(a: number, b: number, c: number, d: number, e: number, x: number): number {\n  const x2 = x * x;\n  const x3 = x2 * x;\n  const x4 = x3 * x;\n  return 500.0 / (a * x4 + b * x3 + c * x2 + d * x + e);\n}\n\nexport function dotsMen(bodyweightKg: number): number {\n  const A = -0.000001093;\n  const B = 0.0007391293;\n  const C = -0.1918759221;\n  const D = 24.0900756;\n  const E = -307.75076;\n\n  const adjusted = Math.max(Math.min(bodyweightKg, 210.0), 40.0);\n  return dotsPoly(A, B, C, D, E, adjusted);\n}\n\nexport function dotsWomen(bodyweightKg: number): number {\n  const A = -0.0000010706;\n  const B = 0.0005158568;\n  const C = -0.1126655495;\n  const D = 13.6175032;\n  const E = -57.96288;\n\n  const adjusted = Math.max(Math.min(bodyweightKg, 150.0), 40.0);\n  return dotsPoly(A, B, C, D, E, adjusted);\n}\n\nexport const dots = (sex: Sex, bodyweightKg: number, totalKg: number): number => {\n  if (bodyweightKg === 0 || totalKg === 0) {\n    return 0.0;\n  }\n\n  switch (sex) {\n    case \"M\":\n    case \"Mx\":\n      return dotsMen(bodyweightKg) * totalKg;\n    case \"F\":\n      return dotsWomen(bodyweightKg) * totalKg;\n    default:\n      checkExhausted(sex);\n      return 0;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines Foster-McCulloch age coefficients.\n//\n// These are taken from the OpenPowerlifting coefficients module,\n// translated from the original Rust code.\n\nconst AGE_COEFFICIENTS = [\n  // Coefficients in the range of 0-4 are clearly nonsense.\n  0.0, // 0\n  0.0, // 1\n  0.0, // 2\n  0.0, // 3\n  0.0, // 4\n  // These coefficients don't actually exist, and are just low-balled best guesses.\n  // Kids really shouldn't be competing in this sport...\n  // Ranges from age 5 to 13.\n  1.73, // 5\n  1.67, // 6\n  1.61, // 7\n  1.55, // 8\n  1.49, // 9\n  1.43, // 10\n  1.38, // 11\n  1.33, // 12\n  1.28, // 13\n  // Foster coefficients:\n  // http://www.usapl-sd.com/Formulas/Foster.htm\n  // Ranges from age 14 to 22.\n  1.23, // 14\n  1.18, // 15\n  1.13, // 16\n  1.08, // 17\n  1.06, // 18\n  1.04, // 19\n  1.03, // 20\n  1.02, // 21\n  1.01, // 22\n  // Lifters in the range 23-40 receive no handicap.\n  1.0, // 23\n  1.0, // 24\n  1.0, // 25\n  1.0, // 26\n  1.0, // 27\n  1.0, // 28\n  1.0, // 29\n  1.0, // 30\n  1.0, // 31\n  1.0, // 32\n  1.0, // 33\n  1.0, // 34\n  1.0, // 35\n  1.0, // 36\n  1.0, // 37\n  1.0, // 38\n  1.0, // 39\n  1.0, // 40\n  // McCulloch coefficients:\n  //  http://www.usapl-sd.com/Formulas/Mcculloch.htm (contains some errors).\n  // Errors were corrected using the Masters coefficients from:\n  //  http://worldpowerliftingcongress.com/wp-content/uploads/2015/02/Glossbrenner.htm\n  // Ranges from age 41 to 80.\n  1.01, // 41\n  1.02, // 42\n  1.031, // 43\n  1.043, // 44\n  1.055, // 45\n  1.068, // 46\n  1.082, // 47\n  1.097, // 48\n  1.113, // 49\n  1.13, // 50\n  1.147, // 51\n  1.165, // 52\n  1.184, // 53\n  1.204, // 54\n  1.225, // 55\n  1.246, // 56\n  1.268, // 57\n  1.291, // 58\n  1.315, // 59\n  1.34, // 60\n  1.366, // 61\n  1.393, // 62\n  1.421, // 63\n  1.45, // 64\n  1.48, // 65\n  1.511, // 66\n  1.543, // 67\n  1.576, // 68\n  1.61, // 69\n  1.645, // 70\n  1.681, // 71\n  1.718, // 72\n  1.756, // 73\n  1.795, // 74\n  1.835, // 75\n  1.876, // 76\n  1.918, // 77\n  1.961, // 78\n  2.005, // 79\n  2.05, // 80\n  // These coefficients taken from:\n  // http://www.usapltwinportsrawopen.com/resources/USAPL+Age+Coefficients.pdf\n  // Ranges from age 81 to 90.\n  2.096, // 81\n  2.143, // 82\n  2.19, // 83\n  2.238, // 84\n  2.287, // 85\n  2.337, // 86\n  2.388, // 87\n  2.44, // 88\n  2.494, // 89\n  2.549, // 90\n  // Coefficients above 90 were just guessed at, and are unstandardized.\n  2.605, // 91\n  2.662, // 92\n  2.72, // 93\n  2.779, // 94\n  2.839, // 95\n  2.9, // 96\n  2.962, // 97\n  3.025, // 98\n  3.089, // 99\n  3.154, // 100\n];\n\n// Maps the given age into the table above.\nexport const fosterMcCulloch = (age: number): number => {\n  if (!Number.isInteger(age) || age <= 0) {\n    return 1.0;\n  }\n\n  // Greater-than is correct here: (age) is used to index into table, not (age-1).\n  if (age > AGE_COEFFICIENTS.length) {\n    return 1.0;\n  }\n\n  return AGE_COEFFICIENTS[age];\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the calculation of Schwartz-Malone points.\n// Taken from https://gitlab.com/openpowerlifting/opl-data.\n\nimport { Sex } from \"../../types/dataTypes\";\n\n// Calculates the Schwartz coefficient, used for men.\n//\n// The Schwartz formula replaced the Hoffinan formula.\n// Schwartz was proposed around February 1971.\n//\n// The exact formula was found in the magazine Powerlifting USA,\n// Vol.6, No.2, August 1982, on page 61. That text is reproduced below:\n//\n// Computerized Schwartz Formula...Dr. Lyle Schwartz has often been\n// asked for a means by which the formula he has given Powerlifting can be\n// programmed into a computer or a hand held calculator with sufficient\n// memory. To obtain the Schwartz Formula (SF) for bodyweights (BW) bet-\n// ween 40 and 126 kg, the expression is: SF = 0.631926 exp(+01) -\n// 0.262349 exp(+00) (BW) + 0.511550 exp(-02) (BW)^2 - 0.519738\n// exp(-04) (BW)^3 + 0.267626 exp(-06) (BW)^4 - 0.540132 exp(-09)\n// (BW)^5 - 0.728875 exp(-13) (BW)^6. For higher bodyweights, the follow-\n// ing simple formulae are used: for BW 126-136, SF = 0.5210-0.0012\n// (BW - 125), for BW 136-146, SF = 0.5090-0011 (BW - 135), for BW\n// 146-156, SF = 0.4980-0.0010 (BW - 145), and for BW 156-166, SF =\n// 0.4880-0.0090 (BW - 156)\n//\n// Schwartz is quoted as saying about the formula's development,\n//\n// \"Since powerlifting was still a young sport in the early 1970s\n// there was uneven development in the three lifts on the part of most\n// self-trained athletes. I compensated for such unevenness by creating\n// artificial 'best' totals by adding together the current records in the\n// individual lifts. A 'best' total would have been achieved by that ideal\n// lifter who could match the best performances to date in all three\n// powerlifts. Then I fitted these data to an artificial curve and picked\n// off numbers from the curve.\"\nexport const schwartz_coefficient = (bodyweightKg: number): number => {\n  const adjusted = Math.min(Math.max(bodyweightKg, 40.0), 166.0);\n\n  if (adjusted <= 126.0) {\n    const x0 = 0.631926 * 10.0;\n    const x1 = 0.262349 * adjusted;\n    const x2 = 0.51155 * Math.pow(10.0, -2) * Math.pow(adjusted, 2);\n    const x3 = 0.519738 * Math.pow(10.0, -4) * Math.pow(adjusted, 3);\n    const x4 = 0.267626 * Math.pow(10.0, -6) * Math.pow(adjusted, 4);\n    const x5 = 0.540132 * Math.pow(10.0, -9) * Math.pow(adjusted, 5);\n    const x6 = 0.728875 * Math.pow(10.0, -13) * Math.pow(adjusted, 6);\n    return x0 - x1 + x2 - x3 + x4 - x5 - x6;\n  } else if (adjusted <= 136.0) {\n    return 0.521 - 0.0012 * (adjusted - 125.0);\n  } else if (adjusted <= 146.0) {\n    return 0.509 - 0.0011 * (adjusted - 135.0);\n  } else if (adjusted <= 156.0) {\n    return 0.498 - 0.001 * (adjusted - 145.0);\n  } else {\n    // The final formula as published for this piece does not match\n    // the coefficient tables.\n    //\n    // From the tables, the step is exactly 0.0004 per pound, which\n    // has been converted to kg below.\n    //\n    // For reference, the published original is:\n    //   0.4880 - 0.0090 * (adjusted - 156.0)\n    return 0.4879 - 0.00088185 * (adjusted - 155.0);\n  }\n};\n\n// Calculates the Malone coefficient, used for women.\nexport const malone_coefficient = (bodyweightKg: number): number => {\n  // Values calculated by fitting to coefficient tables.\n  const A = 106.011586323613;\n  const B = -1.293027130579051;\n  const C = 0.322935585328304;\n\n  // Lower bound chosen at point where Malone = max(Wilks).\n  const adjusted = Math.max(bodyweightKg, 29.24);\n\n  return A * Math.pow(adjusted, B) + C;\n};\n\n// Calculates Schwartz-Malone points.\n//\n// Schwartz-Malone is an older system that was superseded by Wilks.\nexport const schwartzmalone = (sex: Sex, bodyweightKg: number, totalKg: number): number => {\n  switch (sex) {\n    case \"M\":\n      return schwartz_coefficient(bodyweightKg) * totalKg;\n    case \"F\":\n      return malone_coefficient(bodyweightKg) * totalKg;\n    default:\n      return 0;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the calculation of Wilks points.\n// Taken from https://gitlab.com/openpowerlifting/ipf-points-calculator.\n\nimport { Sex } from \"../../types/dataTypes\";\nimport { checkExhausted } from \"../../types/utils\";\n\nfunction wilksPoly(a: number, b: number, c: number, d: number, e: number, f: number, x: number): number {\n  const x2 = x * x;\n  const x3 = x2 * x;\n  const x4 = x3 * x;\n  const x5 = x4 * x;\n  return 500.0 / (a + b * x + c * x2 + d * x3 + e * x4 + f * x5);\n}\n\nexport function wilksMen(bodyweightKg: number): number {\n  const normalized = Math.min(Math.max(bodyweightKg, 40.0), 201.9);\n  return wilksPoly(-216.0475144, 16.2606339, -0.002388645, -0.00113732, 7.01863e-6, -1.291e-8, normalized);\n}\n\nexport function wilksWomen(bodyweightKg: number): number {\n  const normalized = Math.min(Math.max(bodyweightKg, 26.51), 154.53);\n  return wilksPoly(\n    594.31747775582,\n    -27.23842536447,\n    0.82112226871,\n    -0.00930733913,\n    0.00004731582,\n    -0.00000009054,\n    normalized\n  );\n}\n\nexport const wilks = (sex: Sex, bodyweightKg: number, totalKg: number): number => {\n  switch (sex) {\n    case \"M\":\n    case \"Mx\":\n      return wilksMen(bodyweightKg) * totalKg;\n    case \"F\":\n      return wilksWomen(bodyweightKg) * totalKg;\n    default:\n      checkExhausted(sex);\n      return 0;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the calculation of Glossbrenner points.\n// Taken from https://gitlab.com/openpowerlifting/opl-data.\n\nimport { schwartz_coefficient, malone_coefficient } from \"./schwartzmalone\";\nimport { wilksMen, wilksWomen } from \"./wilks\";\n\nimport { Sex } from \"../../types/dataTypes\";\nimport { checkExhausted } from \"../../types/utils\";\n\nconst glossbrenner_coefficient_men = (bodyweightKg: number): number => {\n  // Glossbrenner is defined piecewise.\n  if (bodyweightKg < 153.05) {\n    return (schwartz_coefficient(bodyweightKg) + wilksMen(bodyweightKg)) / 2.0;\n  } else {\n    // Linear coefficients found by fitting to a table.\n    const A = -0.000821668402557;\n    const B = 0.676940740094416;\n    return (schwartz_coefficient(bodyweightKg) + A * bodyweightKg + B) / 2.0;\n  }\n};\n\nconst glossbrenner_coefficient_women = (bodyweightKg: number): number => {\n  // Glossbrenner is defined piecewise.\n  if (bodyweightKg < 106.3) {\n    return (malone_coefficient(bodyweightKg) + wilksWomen(bodyweightKg)) / 2.0;\n  } else {\n    // Linear coefficients found by fitting to a table.\n    const A = -0.000313738002024;\n    const B = 0.852664892884785;\n    return (malone_coefficient(bodyweightKg) + A * bodyweightKg + B) / 2.0;\n  }\n};\n\n// Calculates Glossbrenner points.\n//\n// Glossbrenner is the average of two older systems, Schwartz-Malone and Wilks,\n// with a piecewise linear section.\n//\n// This points system is most often used by GPC affiliates.\nexport const glossbrenner = (sex: Sex, bodyweightKg: number, totalKg: number): number => {\n  switch (sex) {\n    case \"M\":\n    case \"Mx\":\n      return glossbrenner_coefficient_men(bodyweightKg) * totalKg;\n    case \"F\":\n      return glossbrenner_coefficient_women(bodyweightKg) * totalKg;\n    default:\n      checkExhausted(sex);\n      return 0;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the calculation of IPF GL (GOODLIFT) Points.\n\nimport { Sex, Event, Equipment } from \"../../types/dataTypes\";\n\ntype Coefficients = Array<number>;\ntype ByEvent = {\n  SBD: Coefficients;\n  B: Coefficients;\n};\ntype ByEquipment = {\n  Sleeves: ByEvent;\n  \"Single-ply\": ByEvent;\n};\ntype BySex = {\n  M: ByEquipment;\n  F: ByEquipment;\n};\n\nconst PARAMETERS: BySex = {\n  M: {\n    Sleeves: {\n      SBD: [1199.72839, 1025.18162, 0.00921],\n      B: [320.98041, 281.40258, 0.01008],\n    },\n    \"Single-ply\": {\n      SBD: [1236.25115, 1449.21864, 0.01644],\n      B: [381.22073, 733.79378, 0.02398],\n    },\n  },\n  F: {\n    Sleeves: {\n      SBD: [610.32796, 1045.59282, 0.03048],\n      B: [142.40398, 442.52671, 0.04724],\n    },\n    \"Single-ply\": {\n      SBD: [758.63878, 949.31382, 0.02435],\n      B: [221.82209, 357.00377, 0.02937],\n    },\n  },\n};\n\nexport const goodlift = (\n  totalKg: number,\n  bodyweightKg: number,\n  sex: Sex,\n  equipment: Equipment,\n  event: Event\n): number => {\n  if (totalKg === 0) return 0;\n  if (bodyweightKg < 40) return 0;\n\n  // Restrict inputs to only the defined subset.\n  let normalizedEquipment = equipment;\n  if (equipment === \"Bare\" || equipment === \"Wraps\") {\n    normalizedEquipment = \"Sleeves\";\n  } else if (equipment === \"Multi-ply\" || equipment === \"Unlimited\") {\n    normalizedEquipment = \"Single-ply\";\n  }\n  if (normalizedEquipment !== \"Sleeves\" && normalizedEquipment !== \"Single-ply\") {\n    return 0;\n  }\n\n  // Consider Mx athletes as M, since that's the harsher formula.\n  let normalizedSex = sex;\n  if (sex === \"Mx\") normalizedSex = \"M\";\n\n  if (event !== \"SBD\" && event !== \"B\") return 0;\n  if (normalizedSex !== \"M\" && normalizedSex !== \"F\") return 0;\n\n  const params = PARAMETERS[normalizedSex][normalizedEquipment][event];\n  const denom = params[0] - params[1] * Math.exp(-1.0 * params[2] * bodyweightKg);\n  const glp = denom === 0 ? 0 : Math.max(0, (totalKg * 100.0) / denom);\n  if (isNaN(glp) || bodyweightKg < 35) {\n    return 0.0;\n  }\n  return glp;\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the calculation of IPF Points.\n// Taken from https://gitlab.com/openpowerlifting/ipf-points-calculator.\n\nimport { Sex, Event, Equipment } from \"../../types/dataTypes\";\n\ntype Coefficients = Array<number>;\ntype ByEvent = {\n  SBD: Coefficients;\n  S: Coefficients;\n  B: Coefficients;\n  D: Coefficients;\n};\ntype ByEquipment = {\n  Sleeves: ByEvent;\n  \"Single-ply\": ByEvent;\n};\ntype BySex = {\n  M: ByEquipment;\n  F: ByEquipment;\n};\n\nconst PARAMETERS: BySex = {\n  M: {\n    Sleeves: {\n      SBD: [310.67, 857.785, 53.216, 147.0835],\n      S: [123.1, 363.085, 25.1667, 75.4311],\n      B: [86.4745, 259.155, 17.57845, 53.122],\n      D: [103.5355, 244.765, 15.3714, 31.5022],\n    },\n    \"Single-ply\": {\n      SBD: [387.265, 1121.28, 80.6324, 222.4896],\n      S: [150.485, 446.445, 36.5155, 103.7061],\n      B: [133.94, 441.465, 35.3938, 113.0057],\n      D: [110.135, 263.66, 14.996, 23.011],\n    },\n  },\n  F: {\n    Sleeves: {\n      SBD: [125.1435, 228.03, 34.5246, 86.8301],\n      S: [50.479, 105.632, 19.1846, 56.2215],\n      B: [25.0485, 43.848, 6.7172, 13.952],\n      D: [47.136, 67.349, 9.1555, 13.67],\n    },\n    \"Single-ply\": {\n      SBD: [176.58, 373.315, 48.4534, 110.0103],\n      S: [74.6855, 171.585, 21.9475, 52.2948],\n      B: [49.106, 124.209, 23.199, 67.4926],\n      D: [51.002, 69.8265, 8.5802, 5.7258],\n    },\n  },\n};\n\nexport const ipfpoints = (\n  totalKg: number,\n  bodyweightKg: number,\n  sex: Sex,\n  equipment: Equipment,\n  event: Event\n): number => {\n  if (totalKg === 0) return 0;\n  if (bodyweightKg < 40) return 0;\n\n  // Restrict inputs to only the defined subset.\n  let normalizedEquipment = equipment;\n  if (equipment === \"Bare\" || equipment === \"Wraps\") {\n    normalizedEquipment = \"Sleeves\";\n  } else if (equipment === \"Multi-ply\" || equipment === \"Unlimited\") {\n    normalizedEquipment = \"Single-ply\";\n  }\n  if (normalizedEquipment !== \"Sleeves\" && normalizedEquipment !== \"Single-ply\") {\n    return 0;\n  }\n\n  // Consider Mx athletes as M, since that's the harsher formula.\n  let normalizedSex = sex;\n  if (sex === \"Mx\") normalizedSex = \"M\";\n\n  if (event !== \"SBD\" && event !== \"S\" && event !== \"B\" && event !== \"D\") return 0;\n  if (normalizedSex !== \"M\" && normalizedSex !== \"F\") return 0;\n\n  const params = PARAMETERS[normalizedSex][normalizedEquipment][event];\n  const bw_log = Math.log(bodyweightKg);\n\n  const mean = params[0] * bw_log - params[1];\n  const dev = params[2] * bw_log - params[3];\n\n  const points = 500 + (100 * (totalKg - mean)) / dev;\n  if (isNaN(points) || points < 0) {\n    return 0;\n  }\n  return points;\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the calculation of Reshel points.\n//\n// Reshel is published as a table, with rounded x-values and rounded y-values.\n// No formula is given. We attempted to fit a function to the curve.\n//\n// The formula here is accurate to about 0.01, and is most inaccurate between\n// 70-80kg for men. Elsewhere it fits very closely.\n\nimport { Sex } from \"../../types/dataTypes\";\nimport { checkExhausted } from \"../../types/utils\";\n\nexport function reshelMen(bodyweightKg: number): number {\n  // Coefficients determined by GNUPlot. They need improvement.\n  const a: number = 23740.8329088123;\n  const b: number = -9.75618720662844;\n  const c: number = 0.787990994925928;\n  const d: number = -2.68445158813578;\n\n  const normalized = Math.min(Math.max(bodyweightKg, 50.0), 174.75);\n  return a * Math.pow(normalized + b, d) + c;\n}\n\nexport function reshelWomen(bodyweightKg: number): number {\n  // Coefficients determined by GNUPlot. They need improvement.\n  const a: number = 239.894659799145;\n  const b: number = -20.5105859285582;\n  const c: number = 1.16052601684125;\n  const d: number = -1.61417872668708;\n\n  const normalized = Math.min(Math.max(bodyweightKg, 40.0), 118.75);\n  return a * Math.pow(normalized + b, d) + c;\n}\n\nexport const reshel = (sex: Sex, bodyweightKg: number, totalKg: number): number => {\n  switch (sex) {\n    case \"M\":\n    case \"Mx\":\n      return reshelMen(bodyweightKg) * totalKg;\n    case \"F\":\n      return reshelWomen(bodyweightKg) * totalKg;\n    default:\n      checkExhausted(sex);\n      return 0;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the calculation of Wilks 2020 points.\n\nimport { Sex } from \"../../types/dataTypes\";\nimport { checkExhausted } from \"../../types/utils\";\n\nfunction wilks2020Poly(a: number, b: number, c: number, d: number, e: number, f: number, x: number): number {\n  const x2 = x * x;\n  const x3 = x2 * x;\n  const x4 = x3 * x;\n  const x5 = x4 * x;\n  return 600.0 / (a + b * x + c * x2 + d * x3 + e * x4 + f * x5);\n}\n\nexport function wilks2020Men(bodyweightKg: number): number {\n  const normalized = Math.min(Math.max(bodyweightKg, 40.0), 200.95);\n  return wilks2020Poly(\n    47.4617885411949,\n    8.47206137941125,\n    0.073694103462609,\n    -0.00139583381094385,\n    0.00000707665973070743,\n    -0.0000000120804336482315,\n    normalized\n  );\n}\n\nexport function wilks2020Women(bodyweightKg: number): number {\n  const normalized = Math.min(Math.max(bodyweightKg, 40.0), 150.95);\n  return wilks2020Poly(\n    -125.425539779509,\n    13.7121941940668,\n    -0.0330725063103405,\n    -0.0010504000506583,\n    0.00000938773881462799,\n    -0.000000023334613884954,\n    normalized\n  );\n}\n\nexport const wilks2020 = (sex: Sex, bodyweightKg: number, totalKg: number): number => {\n  switch (sex) {\n    case \"M\":\n    case \"Mx\":\n      return wilks2020Men(bodyweightKg) * totalKg;\n    case \"F\":\n      return wilks2020Women(bodyweightKg) * totalKg;\n    default:\n      checkExhausted(sex);\n      return 0;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Wraps all the points functions into a common interface.\n\nimport { ah } from \"./ah\";\nimport { bodyweight_multiple } from \"./bodyweight-multiple\";\nimport { dots } from \"./dots\";\nimport { fosterMcCulloch } from \"./foster-mcculloch\";\nimport { glossbrenner } from \"./glossbrenner\";\nimport { goodlift } from \"./goodlift\";\nimport { ipfpoints } from \"./ipf\";\nimport { nasapoints } from \"./nasa\";\nimport { reshel } from \"./reshel\";\nimport { schwartzmalone } from \"./schwartzmalone\";\nimport { wilks } from \"./wilks\";\nimport { wilks2020 } from \"./wilks2020\";\n\nimport { getAge } from \"../entry\";\nimport { kg2lbs } from \"../units\";\n\nimport { AgeCoefficients, Entry, Event, Equipment, Formula, Sex } from \"../../types/dataTypes\";\nimport { checkExhausted } from \"../../types/utils\";\n\nexport const getPoints = (formula: Formula, entry: Entry, event: Event, totalKg: number, inKg: boolean): number => {\n  // Some of the data are singular properties of the entry.\n  const sex: Sex = entry.sex;\n  const equipment: Equipment = entry.equipment;\n  const bodyweightKg: number = entry.bodyweightKg;\n\n  switch (formula) {\n    case \"AH\":\n      return ah(sex, bodyweightKg, totalKg);\n    case \"Bodyweight Multiple\":\n      return bodyweight_multiple(bodyweightKg, totalKg);\n    case \"Dots\":\n      return dots(sex, bodyweightKg, totalKg);\n    case \"Glossbrenner\":\n      return glossbrenner(sex, bodyweightKg, totalKg);\n    case \"IPF GL Points\":\n      return goodlift(totalKg, bodyweightKg, sex, equipment, event);\n    case \"IPF Points\":\n      return ipfpoints(totalKg, bodyweightKg, sex, equipment, event);\n    case \"NASA Points\":\n      return nasapoints(bodyweightKg, totalKg);\n    case \"Reshel\":\n      return reshel(sex, bodyweightKg, totalKg);\n    case \"Schwartz/Malone\":\n      return schwartzmalone(sex, bodyweightKg, totalKg);\n    case \"Total\":\n      return inKg ? totalKg : kg2lbs(totalKg);\n    case \"Wilks\":\n      return wilks(sex, bodyweightKg, totalKg);\n    case \"Wilks2020\":\n      return wilks2020(sex, bodyweightKg, totalKg);\n    default:\n      checkExhausted(formula);\n      return 0;\n  }\n};\n\nexport const getAgeAdjustedPoints = (\n  ageCoefficients: AgeCoefficients,\n  meetDate: string,\n  formula: Formula,\n  entry: Entry,\n  event: Event,\n  totalKg: number,\n  inKg: boolean\n): number => {\n  const points = getPoints(formula, entry, event, totalKg, inKg);\n\n  switch (ageCoefficients) {\n    case \"None\":\n      return points;\n    case \"FosterMcCulloch\":\n      return fosterMcCulloch(getAge(entry, meetDate)) * points;\n    default:\n      checkExhausted(ageCoefficients);\n      return 0;\n  }\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the calculation of points as a multiple of bodyweight.\n//\n// Although this logic is very simple, there is some finesse to avoid\n// division by zero that is easier to write once and import than repeat.\n\nexport const bodyweight_multiple = (bodyweightKg: number, totalKg: number): number => {\n  if (bodyweightKg <= 0 || totalKg <= 0) {\n    return 0;\n  }\n  return totalKg / bodyweightKg;\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the calculation of NASA Points.\n// They are defined in a coefficient table: http://nasa-sports.com/coefficient-system/\n// It turns out that they are a simple line.\n\nexport const nasapoints = (bodyweightKg: number, totalKg: number): number => {\n  // The function was determined using fitting in GNUPlot:\n  //\n  // Final set of parameters            Asymptotic Standard Error\n  // =======================            ==========================\n  // m               = 0.00620912       +/- 1.265e-06    (0.02037%)\n  // b               = 0.565697         +/- 0.0001322    (0.02337%)\n  const m = 0.00620912;\n  const b = 0.565697;\n\n  if (bodyweightKg < 30) return 0; // Arbitrary lower bound.\n  return (totalKg / bodyweightKg) * (m * bodyweightKg + b);\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// The main component of the Lifting page, contained by the LiftingView.\n\nimport React, { CSSProperties } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport AttemptInput from \"./AttemptInput\";\nimport LocalizedString from \"../translations/LocalizedString\";\n\nimport { getWeightClassStr, getWeightClassLbsStr } from \"../../reducers/meetReducer\";\nimport { getPoints } from \"../../logic/coefficients/coefficients\";\nimport {\n  getProjectedTotalKg,\n  getFinalTotalKg,\n  liftToAttemptFieldName,\n  liftToStatusFieldName,\n  mapSexToClasses,\n} from \"../../logic/entry\";\n\nimport { getProjectedResults, getFinalResults, getPlaceOrdinal } from \"../../logic/divisionPlace\";\nimport { kg2lbs, displayWeight, displayPoints, displayPlaceOrdinal } from \"../../logic/units\";\n\nimport { CategoryResults } from \"../../logic/divisionPlace\";\nimport { Entry, Equipment, Language, Lift } from \"../../types/dataTypes\";\nimport { GlobalState, MeetState, LiftingState, RegistrationState } from \"../../types/stateTypes\";\n\nimport styles from \"./LiftingTable.module.scss\";\nimport { checkExhausted } from \"../../types/utils\";\nimport { getString } from \"../../logic/strings\";\n\ninterface OwnProps {\n  attemptOneIndexed: number;\n  orderedEntries: Array<Entry>;\n  currentEntryId: number | null;\n}\n\ninterface StateProps {\n  meet: MeetState;\n  lifting: LiftingState;\n  language: Language;\n  registration: RegistrationState;\n}\n\ntype Props = OwnProps & StateProps;\n\n// List of possible columns that can be rendered.\n// The main render() function decides what columns to render,\n// and communicates its selection with each row's renderer.\ntype ColumnType =\n  | \"Lifter\"\n  | \"Bodyweight\"\n  | \"WeightClass\"\n  | \"Division\"\n  | \"Lot\"\n  | \"Equipment\"\n  | \"Age\"\n  | \"S1\"\n  | \"S2\"\n  | \"S3\"\n  | \"S4\" // eslint-disable-line\n  | \"B1\"\n  | \"B2\"\n  | \"B3\"\n  | \"B4\" // eslint-disable-line\n  | \"D1\"\n  | \"D2\"\n  | \"D3\"\n  | \"D4\" // eslint-disable-line\n  | \"BestSquat\"\n  | \"BestBench\" // eslint-disable-line\n  | \"Spacer1\"\n  | \"Spacer2\"\n  | \"ProjectedTotal\"\n  | \"ProjectedPoints\"\n  | \"FinalTotal\"\n  | \"FinalPoints\"\n  | \"Place\";\n\n// This is a global for remembering the last AttemptInput that was rendered.\n// After the \"No Lift\" or \"Good Lift\" buttons are clicked, the last-rendered\n// AttemptInput is given focus by an event handler.\n//\n// This works because the LiftingTable is always re-rendered when one of\n// those buttons is clicked, and because there's only one LiftingTable.\nexport let globalFocusAttemptInputId: string | null = null;\n\n// The logic for globalFocusAttemptInputId is looking for the AttemptInput\n// that's all the way on the right, and as far down the table as possible.\nlet globalHighestAttemptInputAttempt: number = 0;\n\nclass LiftingTable extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n    this.renderRows = this.renderRows.bind(this);\n    this.renderBest3AttemptField = this.renderBest3AttemptField.bind(this);\n    this.renderAttemptField = this.renderAttemptField.bind(this);\n    this.renderCell = this.renderCell.bind(this);\n  }\n\n  renderBest3AttemptField = (entry: Entry, lift: Lift, columnType: ColumnType) => {\n    const fieldKg = liftToAttemptFieldName(lift);\n    const fieldStatus = liftToStatusFieldName(lift);\n\n    // Look for either the best lift or the lightest no-lift.\n    let best3 = 0.0;\n    let lightestFailed = 0.0;\n\n    for (let i = 0; i < 3; i++) {\n      const kg = entry[fieldKg][i];\n\n      if (entry[fieldStatus][i] === 1) {\n        best3 = Math.max(best3, kg);\n      } else if (entry[fieldStatus][i] === -1) {\n        lightestFailed = lightestFailed === 0 ? kg : Math.min(lightestFailed, kg);\n      }\n    }\n\n    // Render cells using attempt coloring.\n    if (best3 !== 0) {\n      const asNumber = this.props.meet.inKg ? best3 : kg2lbs(best3);\n      return (\n        <td key={columnType} className={styles.goodlift}>\n          {displayWeight(asNumber, this.props.language)}\n        </td>\n      );\n    }\n    if (lightestFailed !== 0) {\n      const asNumber = this.props.meet.inKg ? lightestFailed : kg2lbs(lightestFailed);\n      return (\n        <td key={columnType} className={styles.nolift}>\n          {displayWeight(asNumber, this.props.language)}\n        </td>\n      );\n    }\n\n    // Show an empty cell by default.\n    return <td key={columnType} />;\n  };\n\n  renderAttemptField = (entry: Entry, lift: Lift, attemptOneIndexed: number, columnType: ColumnType) => {\n    const fieldKg = liftToAttemptFieldName(lift);\n    const fieldStatus = liftToStatusFieldName(lift);\n\n    const kg = entry[fieldKg][attemptOneIndexed - 1];\n    const status = entry[fieldStatus][attemptOneIndexed - 1];\n    const wStr = displayWeight(this.props.meet.inKg ? kg : kg2lbs(kg), this.props.language);\n    const displayStr = kg === 0 ? \"\" : wStr;\n\n    // Get a unique ID for each AttemptInput.\n    // This is used in combination with the globalFocusAttemptInputId to give\n    // focus to the last-rendered AttemptInput after a button is clicked.\n    const id = \"AttemptInput-\" + entry.id + \"-\" + lift + attemptOneIndexed;\n\n    // If the lifter was manually selected, always show an AttemptInput.\n    // This allows manual correction of weights when a misload occurs,\n    // even though the lift has already been marked good lift / no lift.\n    if (this.props.lifting.overrideEntryId === entry.id && attemptOneIndexed === this.props.attemptOneIndexed) {\n      // Is this a better match for giving focus?\n      if (attemptOneIndexed >= globalHighestAttemptInputAttempt) {\n        globalHighestAttemptInputAttempt = attemptOneIndexed;\n        globalFocusAttemptInputId = id;\n      }\n\n      return (\n        <td key={columnType} className={styles.attemptInputCell}>\n          <AttemptInput id={id} entry={entry} lift={lift} attemptOneIndexed={attemptOneIndexed} />\n        </td>\n      );\n    }\n\n    // If the attempt was already made, render a colored text field.\n    // The weight cannot be changed after the fact.\n    if (status !== 0) {\n      const className = status === 1 ? styles.goodlift : styles.nolift;\n      const maybeNegative = status === 1 ? \"\" : \"-\";\n      return (\n        <td key={columnType} className={className}>\n          {maybeNegative}\n          {displayStr}\n        </td>\n      );\n    }\n\n    // If the attempt isn't for the current lift, just show the number.\n    if (lift !== this.props.lifting.lift) {\n      return <td key={columnType}>{displayStr}</td>;\n    }\n\n    // Was any previous attempt taken?\n    let anyPreviousAttemptTaken = false;\n    for (let i = 1; i < attemptOneIndexed; i++) {\n      if (entry[fieldStatus][i - 1] !== 0) {\n        anyPreviousAttemptTaken = true;\n        break;\n      }\n    }\n\n    // Show a text input box if either:\n    // 1. This column is for the current attempt, and the lifter has a previous attempt.\n    // 2. This column is for the next attempt, and the lifter took the current attempt.\n    // 3. For whatever reason, someone managed to specify a weight.\n    const currentAndHasPrevious = attemptOneIndexed === this.props.attemptOneIndexed && anyPreviousAttemptTaken;\n    const nextAndTookLast =\n      attemptOneIndexed === this.props.attemptOneIndexed + 1 &&\n      entry[fieldStatus][this.props.attemptOneIndexed - 1] !== 0;\n\n    if (kg !== 0 || currentAndHasPrevious || nextAndTookLast) {\n      // Is this a better match for giving focus?\n      if (attemptOneIndexed >= globalHighestAttemptInputAttempt) {\n        globalHighestAttemptInputAttempt = attemptOneIndexed;\n        globalFocusAttemptInputId = id;\n      }\n\n      return (\n        <td key={columnType} className={styles.attemptInputCell}>\n          <AttemptInput id={id} entry={entry} lift={lift} attemptOneIndexed={attemptOneIndexed} />\n        </td>\n      );\n    }\n\n    // Default handler.\n    return <td key={columnType}>{displayStr}</td>;\n  };\n\n  renderCell = (entry: Entry, columnType: ColumnType, categoryResults: Array<CategoryResults>): JSX.Element => {\n    switch (columnType) {\n      case \"Lifter\": {\n        let cell: string | JSX.Element = entry.name;\n\n        // Bold the name of the current lifter.\n        if (this.props.currentEntryId === entry.id) {\n          cell = <b>{entry.name}</b>;\n        }\n\n        return (\n          <td key={columnType} className={styles.textCell}>\n            {cell}\n          </td>\n        );\n      }\n      case \"Bodyweight\": {\n        const bw = entry.bodyweightKg;\n        const bwStr = displayWeight(this.props.meet.inKg ? bw : kg2lbs(bw), this.props.language);\n        return <td key={columnType}>{bw === 0 ? null : bwStr}</td>;\n      }\n      case \"WeightClass\": {\n        const bw = entry.bodyweightKg;\n        const classesForSex = mapSexToClasses(\n          entry.sex,\n          this.props.meet.weightClassesKgMen,\n          this.props.meet.weightClassesKgWomen,\n          this.props.meet.weightClassesKgMx\n        );\n        const weightClass = this.props.meet.inKg\n          ? getWeightClassStr(classesForSex, bw, this.props.language)\n          : getWeightClassLbsStr(classesForSex, bw);\n        return <td key={columnType}>{bw === 0 ? null : weightClass}</td>;\n      }\n      case \"Division\": {\n        // Just show the first division in the list, if any.\n        // Changing this requires coordination with the \"Place\" column code.\n        const firstDiv = entry.divisions.length > 0 ? entry.divisions[0] : null;\n        return (\n          <td key={columnType} className={styles.textCell}>\n            {firstDiv}\n          </td>\n        );\n      }\n      case \"Lot\": {\n        return (\n          <td key={columnType} className={styles.textCell}>\n            {entry.lot === 0 ? \"\" : entry.lot}\n          </td>\n        );\n      }\n      case \"Equipment\": {\n        // Use shorter names to actually fit in the table.\n        let equipment: string | Equipment = entry.equipment;\n        if (equipment === \"Single-ply\") equipment = \"Single\";\n        if (equipment === \"Multi-ply\") equipment = \"Multi\";\n        return <td key={columnType}>{equipment}</td>;\n      }\n      case \"Age\":\n        return <td key={columnType}>{entry.age}</td>;\n      case \"S1\":\n        return this.renderAttemptField(entry, \"S\", 1, columnType);\n      case \"S2\":\n        return this.renderAttemptField(entry, \"S\", 2, columnType);\n      case \"S3\":\n        return this.renderAttemptField(entry, \"S\", 3, columnType);\n      case \"S4\":\n        return this.renderAttemptField(entry, \"S\", 4, columnType);\n      case \"B1\":\n        return this.renderAttemptField(entry, \"B\", 1, columnType);\n      case \"B2\":\n        return this.renderAttemptField(entry, \"B\", 2, columnType);\n      case \"B3\":\n        return this.renderAttemptField(entry, \"B\", 3, columnType);\n      case \"B4\":\n        return this.renderAttemptField(entry, \"B\", 4, columnType);\n      case \"D1\":\n        return this.renderAttemptField(entry, \"D\", 1, columnType);\n      case \"D2\":\n        return this.renderAttemptField(entry, \"D\", 2, columnType);\n      case \"D3\":\n        return this.renderAttemptField(entry, \"D\", 3, columnType);\n      case \"D4\":\n        return this.renderAttemptField(entry, \"D\", 4, columnType);\n      case \"BestSquat\":\n        return this.renderBest3AttemptField(entry, \"S\", columnType);\n      case \"BestBench\":\n        return this.renderBest3AttemptField(entry, \"B\", columnType);\n      case \"Spacer1\": // fallthrough\n      case \"Spacer2\":\n        return <td key={columnType} className={styles.spacerCell} />;\n      case \"ProjectedTotal\": {\n        const totalKg = getProjectedTotalKg(entry);\n        const asNumber = this.props.meet.inKg ? totalKg : kg2lbs(totalKg);\n        return <td key={columnType}>{totalKg === 0 ? null : displayWeight(asNumber, this.props.language)}</td>;\n      }\n      case \"ProjectedPoints\": {\n        const totalKg: number = getProjectedTotalKg(entry);\n        const event = entry.events.length > 0 ? entry.events[0] : \"SBD\";\n        const points: number = getPoints(this.props.meet.formula, entry, event, totalKg, this.props.meet.inKg);\n\n        // Normally this column is hidden for \"Total\", but it's handled just in case.\n        if (this.props.meet.formula === \"Total\") {\n          return <td key={columnType}>{points !== 0 ? displayWeight(points, this.props.language) : null}</td>;\n        }\n        return <td key={columnType}>{points !== 0 ? displayPoints(points, this.props.language) : null}</td>;\n      }\n      case \"FinalTotal\": {\n        const totalKg = getFinalTotalKg(entry);\n        const asNumber = this.props.meet.inKg ? totalKg : kg2lbs(totalKg);\n        return <td key={columnType}>{totalKg === 0 ? null : displayWeight(asNumber, this.props.language)}</td>;\n      }\n      case \"FinalPoints\": {\n        const totalKg: number = getFinalTotalKg(entry);\n        const event = entry.events.length > 0 ? entry.events[0] : \"SBD\";\n        const points: number = getPoints(this.props.meet.formula, entry, event, totalKg, this.props.meet.inKg);\n\n        // Normally this column is hidden for \"Total\", but it's handled just in case.\n        if (this.props.meet.formula === \"Total\") {\n          return <td key={columnType}>{points !== 0 ? displayWeight(points, this.props.language) : null}</td>;\n        }\n        return <td key={columnType}>{points !== 0 ? displayPoints(points, this.props.language) : null}</td>;\n      }\n      case \"Place\": {\n        // If the lifter has no total, then don't report a place.\n        if (getFinalTotalKg(entry) === 0) return <td key={columnType} />;\n\n        // If the lifter is a guest, they cannot place, so just display the guest symbol.\n        if (entry.guest) return <td key={columnType}>{getString(\"results.lifter-guest\", this.props.language)}</td>;\n\n        const placeOrdinal = getPlaceOrdinal(entry, categoryResults);\n        return (\n          <td key={columnType}>\n            {placeOrdinal !== null ? displayPlaceOrdinal(placeOrdinal, entry, this.props.language) : undefined}\n          </td>\n        );\n      }\n      default:\n        checkExhausted(columnType);\n        return <td key={columnType} />;\n    }\n  };\n\n  renderRows = (columns: Array<ColumnType>, categoryResults: Array<CategoryResults>) => {\n    const orderedEntries = this.props.orderedEntries;\n    const currentEntryId = this.props.currentEntryId;\n\n    const rows = [];\n    for (let i = 0; i < orderedEntries.length; i++) {\n      const entry = orderedEntries[i];\n\n      // Iterate over each columnType, handling each.\n      const cells = [];\n      for (let col = 0; col < columns.length; col++) {\n        const columnType = columns[col];\n        cells.push(this.renderCell(entry, columnType, categoryResults));\n      }\n\n      const isCurrent = entry.id === currentEntryId;\n      const rowClassName = isCurrent ? styles.current : \"\";\n      rows.push(\n        <tr key={entry.id} className={rowClassName}>\n          {cells}\n        </tr>\n      );\n    }\n    return rows;\n  };\n\n  getColumnHeaderLabel = (columnType: ColumnType) => {\n    switch (columnType) {\n      case \"Lifter\":\n        return <LocalizedString id=\"lifting.column-lifter\" />;\n      case \"Bodyweight\":\n        return <LocalizedString id=\"lifting.column-bodyweight\" />;\n      case \"WeightClass\":\n        return <LocalizedString id=\"lifting.column-weightclass\" />;\n      case \"Division\":\n        return <LocalizedString id=\"lifting.column-division\" />;\n      case \"Lot\":\n        return <LocalizedString id=\"lifting.column-lot\" />;\n      case \"Equipment\":\n        return <LocalizedString id=\"lifting.column-equipment\" />;\n      case \"Age\":\n        return <LocalizedString id=\"lifting.column-age\" />;\n      case \"S1\":\n        return <LocalizedString id=\"lifting.column-s1\" />;\n      case \"S2\":\n        return <LocalizedString id=\"lifting.column-s2\" />;\n      case \"S3\":\n        return <LocalizedString id=\"lifting.column-s3\" />;\n      case \"S4\":\n        return <LocalizedString id=\"lifting.column-s4\" />;\n      case \"B1\":\n        return <LocalizedString id=\"lifting.column-b1\" />;\n      case \"B2\":\n        return <LocalizedString id=\"lifting.column-b2\" />;\n      case \"B3\":\n        return <LocalizedString id=\"lifting.column-b3\" />;\n      case \"B4\":\n        return <LocalizedString id=\"lifting.column-b4\" />;\n      case \"D1\":\n        return <LocalizedString id=\"lifting.column-d1\" />;\n      case \"D2\":\n        return <LocalizedString id=\"lifting.column-d2\" />;\n      case \"D3\":\n        return <LocalizedString id=\"lifting.column-d3\" />;\n      case \"D4\":\n        return <LocalizedString id=\"lifting.column-d4\" />;\n      case \"BestSquat\":\n        return <LocalizedString id=\"lifting.column-bestsquat\" />;\n      case \"BestBench\":\n        return <LocalizedString id=\"lifting.column-bestbench\" />;\n      case \"Spacer1\": // fallthrough\n      case \"Spacer2\":\n        return \"\";\n      case \"ProjectedTotal\":\n        return <LocalizedString id=\"lifting.column-projectedtotal\" />;\n      case \"ProjectedPoints\":\n        return <LocalizedString id=\"lifting.column-projectedpoints\" />;\n      case \"FinalTotal\":\n        return <LocalizedString id=\"lifting.column-projectedtotal\" />;\n      case \"FinalPoints\":\n        return <LocalizedString id=\"lifting.column-finalpoints\" />;\n      case \"Place\":\n        return <LocalizedString id=\"lifting.column-place\" />;\n      default:\n        checkExhausted(columnType);\n        return \"\";\n    }\n  };\n\n  render() {\n    // Reset this: hunting for a new AttemptIndex.\n    globalHighestAttemptInputAttempt = 0;\n\n    // Select the columns for display.\n    const columns: Array<ColumnType> = [\"Lifter\"];\n    // If the score table set the division column with to zero, hide it.\n    if (this.props.lifting.columnDivisionWidthPx !== 0) {\n      columns.push(\"Division\");\n    }\n    columns.push(\"Bodyweight\", \"WeightClass\");\n\n    // The \"Lot\" column is only shown if lot numbers are used.\n    for (let i = 0; i < this.props.orderedEntries.length; ++i) {\n      if (this.props.orderedEntries[i].lot !== 0) {\n        columns.push(\"Lot\");\n        break;\n      }\n    }\n\n    // Select lift columns based off the current lift.\n    if (this.props.lifting.lift === \"S\") {\n      columns.push(\"Spacer1\");\n      columns.push(\"S1\", \"S2\", \"S3\");\n      if (this.props.attemptOneIndexed === 4) {\n        columns.push(\"S4\");\n      }\n      columns.push(\"Spacer2\");\n      columns.push(\"B1\", \"D1\");\n    } else if (this.props.lifting.lift === \"B\") {\n      columns.push(\"BestSquat\", \"Spacer1\", \"B1\", \"B2\", \"B3\");\n      if (this.props.attemptOneIndexed === 4) {\n        columns.push(\"B4\");\n      }\n      columns.push(\"Spacer2\", \"D1\");\n    } else if (this.props.lifting.lift === \"D\") {\n      columns.push(\"BestSquat\", \"BestBench\", \"Spacer1\", \"D1\", \"D2\", \"D3\");\n      if (this.props.attemptOneIndexed === 4) {\n        columns.push(\"D4\");\n      }\n      columns.push(\"Spacer2\");\n    }\n\n    // Use projected totals for everything before 2nd attempt deadlifts.\n    const useProjected = this.props.lifting.lift !== \"D\" || this.props.attemptOneIndexed < 2;\n    columns.push(useProjected ? \"ProjectedTotal\" : \"FinalTotal\");\n    if (this.props.meet.formula !== \"Total\") {\n      columns.push(useProjected ? \"ProjectedPoints\" : \"FinalPoints\");\n    }\n    columns.push(\"Place\");\n\n    // Build headers.\n    const headers = [];\n    const highlightColumn = this.props.lifting.lift + String(this.props.attemptOneIndexed);\n    for (let i = 0; i < columns.length; i++) {\n      const column = columns[i];\n      let className = styles.smallCell;\n      let style: CSSProperties | undefined;\n\n      if (column === \"Lifter\") {\n        className = styles.nameCell;\n      } else if (column === \"Division\") {\n        className = styles.divisionCell;\n        if (this.props.lifting.columnDivisionWidthPx) {\n          style = { width: this.props.lifting.columnDivisionWidthPx + \"px\" };\n        }\n      } else if (column === \"Spacer1\" || column === \"Spacer2\") {\n        className = styles.spacerCell;\n      } else if (column === highlightColumn) {\n        className = styles.activeColumn;\n      }\n\n      headers.push(\n        <th key={column} className={className} style={style}>\n          {this.getColumnHeaderLabel(column)}\n        </th>\n      );\n    }\n\n    // Calculate the Division placings for each of the lifters.\n    const categoryResults = useProjected\n      ? getProjectedResults(\n          this.props.registration.entries,\n          this.props.meet.weightClassesKgMen,\n          this.props.meet.weightClassesKgWomen,\n          this.props.meet.weightClassesKgMx,\n          this.props.meet.combineSleevesAndWraps\n        )\n      : getFinalResults(\n          this.props.registration.entries,\n          this.props.meet.weightClassesKgMen,\n          this.props.meet.weightClassesKgWomen,\n          this.props.meet.weightClassesKgMx,\n          this.props.meet.combineSleevesAndWraps\n        );\n\n    return (\n      <table className={styles.liftingtable}>\n        <thead>\n          <tr>{headers}</tr>\n        </thead>\n        <tbody>{this.renderRows(columns, categoryResults)}</tbody>\n      </table>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => {\n  return {\n    meet: state.meet,\n    lifting: state.lifting,\n    language: state.language,\n    registration: state.registration,\n  };\n};\n\nexport default connect(mapStateToProps)(LiftingTable);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// The footer of the Lifting page, contained by the LiftingView.\n// This is the parent element of the controls that affect present lifting state.\n\nimport React, { FormEvent } from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Button from \"react-bootstrap/Button\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport Form from \"react-bootstrap/Form\";\n\nimport { globalFocusAttemptInputId } from \"./LiftingTable\";\n\nimport { getString, localizeFlight } from \"../../logic/strings\";\nimport { displayNumber } from \"../../logic/units\";\n\nimport { markLift, overrideAttempt, overrideEntryId, setLiftingGroup } from \"../../actions/liftingActions\";\n\nimport { Entry, Flight, Language, Lift } from \"../../types/dataTypes\";\nimport { GlobalState, LiftingState } from \"../../types/stateTypes\";\n\nimport styles from \"./LiftingFooter.module.scss\";\nimport { Dispatch } from \"redux\";\nimport { FormControlTypeHack, assertFlight, assertString, assertLift } from \"../../types/utils\";\n\ninterface OwnProps {\n  attemptOneIndexed: number;\n  orderedEntries: ReadonlyArray<Readonly<Entry>>;\n  currentEntryId: number | null;\n  flightsOnPlatform: ReadonlyArray<Flight>;\n  toggleReplaceTableWithWeighins: () => void;\n}\n\ninterface StateProps {\n  lifting: LiftingState;\n  lengthDays: number;\n  platformsOnDays: ReadonlyArray<number>;\n  allow4thAttempts: boolean;\n  weightClassesKgMen: ReadonlyArray<number>;\n  weightClassesKgWomen: ReadonlyArray<number>;\n  weightClassesKgMx: ReadonlyArray<number>;\n  language: Language;\n  entries: readonly Readonly<Entry>[];\n}\n\ninterface DispatchProps {\n  setLiftingGroup: (day: number, platform: number, flight: Flight, lift: Lift) => void;\n  overrideAttempt: (attempt: number) => void;\n  overrideEntryId: (entryId: number) => void;\n  markLift: (entry: Entry, lift: Lift, attempt: number, success: boolean) => void;\n}\n\ntype Props = OwnProps & StateProps & DispatchProps;\n\nclass LiftingFooter extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    this.handleDayChange = this.handleDayChange.bind(this);\n    this.handlePlatformChange = this.handlePlatformChange.bind(this);\n    this.handleFlightChange = this.handleFlightChange.bind(this);\n    this.handleLiftChange = this.handleLiftChange.bind(this);\n\n    this.handleOnMouseEnter = this.handleOnMouseEnter.bind(this);\n    this.handleGoodLift = this.handleGoodLift.bind(this);\n    this.handleNoLift = this.handleNoLift.bind(this);\n\n    this.handleAttemptChange = this.handleAttemptChange.bind(this);\n    this.handleLifterChange = this.handleLifterChange.bind(this);\n\n    this.setFocusAttemptInputTimeout = this.setFocusAttemptInputTimeout.bind(this);\n\n    this.makeLifterOptions = this.makeLifterOptions.bind(this);\n  }\n\n  handleDayChange = (event: FormEvent<FormControlTypeHack>) => {\n    const day = Number(event.currentTarget.value);\n    const flight = this.props.lifting.flight;\n    const lift = this.props.lifting.lift;\n\n    // If the new day has fewer platforms, reset the platform selector also.\n    let platform = this.props.lifting.platform;\n    if (platform > this.props.platformsOnDays[day - 1]) {\n      platform = 1;\n    }\n\n    this.props.setLiftingGroup(day, platform, flight, lift);\n  };\n\n  handlePlatformChange = (event: FormEvent<FormControlTypeHack>) => {\n    const day = this.props.lifting.day;\n    const platform = Number(event.currentTarget.value);\n    const flight = this.props.lifting.flight;\n    const lift = this.props.lifting.lift;\n    this.props.setLiftingGroup(day, platform, flight, lift);\n  };\n\n  handleFlightChange = (event: FormEvent<FormControlTypeHack>) => {\n    const day = this.props.lifting.day;\n    const platform = this.props.lifting.platform;\n    const flight = event.currentTarget.value;\n    const lift = this.props.lifting.lift;\n    if (assertString(flight) && assertFlight(flight)) {\n      this.props.setLiftingGroup(day, platform, flight, lift);\n    }\n  };\n\n  handleLiftChange = (event: FormEvent<FormControlTypeHack>) => {\n    const day = this.props.lifting.day;\n    const platform = this.props.lifting.platform;\n    const flight = \"A\"; // Always reset to Flight A.\n    const lift = event.currentTarget.value;\n    if (assertString(lift) && assertLift(lift)) {\n      this.props.setLiftingGroup(day, platform, flight, lift);\n    }\n  };\n\n  handleAttemptChange = (event: FormEvent<FormControlTypeHack>) => {\n    const attempt = Number(event.currentTarget.value);\n    this.props.overrideAttempt(attempt);\n  };\n\n  handleLifterChange = (event: FormEvent<FormControlTypeHack>) => {\n    const entryId = Number(event.currentTarget.value);\n    this.props.overrideEntryId(entryId);\n  };\n\n  // After a \"No Lift\" or \"Good Lift\" button is clicked, try to change focus\n  // to the AttemptInput that the score table is likely to want to type into.\n  setFocusAttemptInputTimeout = () => {\n    if (globalFocusAttemptInputId === null) {\n      return;\n    }\n\n    // Auto-focusing is significantly less useful on 3rd attempts and beyond.\n    if (this.props.attemptOneIndexed >= 3) {\n      return;\n    }\n\n    setTimeout(function () {\n      if (globalFocusAttemptInputId === null) {\n        return;\n      }\n\n      const elem = document.getElementById(globalFocusAttemptInputId);\n      if (elem) {\n        elem.focus();\n      }\n    }, 100);\n  };\n\n  // This resolves Issue #224. The Good Lift and No Lift buttons are connected\n  // to onMouseDown handlers to greatly improve responsive feel. However, that\n  // means that an onBlur event is not fired for any AttemptInput that is\n  // currently being edited. We need to ensure that it's fired, just as if we\n  // were using a normal onClick handler.\n  //\n  // To ensure that any current AttemptInput is blurred, an onMouseEnter handler\n  // is added that always blurs the currently-focused element. Because there are\n  // several hundred milliseconds between onMouseEnter and onMouseDown due to\n  // human reaction timing, the onBlur event will fully-execute before onMouseDown.\n  handleOnMouseEnter = () => {\n    const activeElement = document.activeElement;\n    if (activeElement instanceof HTMLElement) {\n      activeElement.blur();\n    }\n  };\n\n  handleGoodLift = () => this.handleLiftResult(true);\n  handleNoLift = () => this.handleLiftResult(false);\n\n  handleLiftResult(success: boolean) {\n    // If there's no active entry, there's nothing to set.\n    if (this.props.currentEntryId === null) {\n      return;\n    }\n\n    const entry = this.getCurrentEntry();\n    const lift = this.props.lifting.lift;\n    const attempt = this.props.attemptOneIndexed;\n    this.props.markLift(entry, lift, attempt, success);\n    this.setFocusAttemptInputTimeout();\n  }\n\n  // Check whether \"document.fullscreenElement\" exists, including prefixes.\n  hasFullscreenElement = (): boolean => {\n    const doc: any = document;\n    if (doc.fullscreenElement) return true;\n    if (doc.webkitFullscreenElement) return true;\n    if (doc.mozFullscreenElement) return true;\n    if (doc.msFullscreenElement) return true;\n    return false;\n  };\n\n  // Calls exitFullscreen(), but with prefixes.\n  exitFullscreen = () => {\n    const doc: any = document;\n    if (typeof doc.exitFullscreen === \"function\") doc.exitFullscreen();\n    else if (typeof doc.webkitExitFullscreen === \"function\") doc.webkitExitFullscreen();\n    else if (typeof doc.mozExitFullscreen === \"function\") doc.mozExitFullscreen();\n    else if (typeof doc.msExitFullscreen === \"function\") doc.msExitFullscreen();\n  };\n\n  // Calls requestFullscreen(), but with prefixes.\n  requestFullscreen = (e: any) => {\n    if (typeof e.requestFullscreen === \"function\") e.requestFullscreen();\n    else if (typeof e.webkitRequestFullscreen === \"function\") e.webkitRequestFullscreen();\n    else if (typeof e.mozRequestFullscreen === \"function\") e.mozRequestFullscreen();\n    else if (typeof e.msRequestFullscreen === \"function\") e.msRequestFullscreen();\n  };\n\n  // Called when the \"Toggle Fullscreen\" button is clicked.\n  handleFullscreen = () => {\n    // Document must be typecast to \"any\" because the fullscreen properties\n    // used here aren't defined in the Flow Document type definition.\n    if (this.hasFullscreenElement() === true) {\n      this.exitFullscreen();\n    } else {\n      const liftingView = document.getElementById(\"liftingView\");\n      if (liftingView !== null) {\n        this.requestFullscreen(liftingView);\n      }\n    }\n  };\n\n  makeLifterOptions = () => {\n    const orderedEntries = this.props.orderedEntries;\n\n    if (orderedEntries.length === 0) {\n      return (\n        <option value={0} key={0}>\n          {getString(\"lifting.footer-no-lifters\", this.props.language)}\n        </option>\n      );\n    }\n\n    const lifterOptions = [];\n    for (let i = 0; i < orderedEntries.length; i++) {\n      const entry = orderedEntries[i];\n      lifterOptions.push(\n        <option value={entry.id} key={entry.id}>\n          {entry.name}\n        </option>\n      );\n    }\n    return lifterOptions;\n  };\n\n  getCurrentEntry() {\n    const entryId = this.props.currentEntryId;\n    const entry = this.props.entries.find((e) => e.id === entryId);\n    if (entry === undefined) {\n      throw new Error(`Could not find entry of id ${entryId} in the state. Critical issue with application state`);\n    }\n    return entry;\n  }\n\n  render() {\n    const language = this.props.language;\n    const numPlatforms = this.props.platformsOnDays[this.props.lifting.day - 1];\n\n    const dayOptions = [];\n    const dayTemplate = getString(\"lifting.footer-day-template\", language);\n    for (let i = 1; i <= this.props.lengthDays; i++) {\n      dayOptions.push(\n        <option value={i} key={i}>\n          {dayTemplate.replace(\"{N}\", displayNumber(i, language))}\n        </option>\n      );\n    }\n\n    const platformOptions = [];\n    const platformTemplate = getString(\"lifting.footer-platform-template\", language);\n    for (let i = 1; i <= numPlatforms; i++) {\n      platformOptions.push(\n        <option value={i} key={i}>\n          {platformTemplate.replace(\"{N}\", displayNumber(i, language))}\n        </option>\n      );\n    }\n\n    const liftOptions = [\n      <option key={\"S\"} value={\"S\"}>\n        {getString(\"lifting.footer-squat\", language)}\n      </option>,\n      <option key={\"B\"} value={\"B\"}>\n        {getString(\"lifting.footer-bench\", language)}\n      </option>,\n      <option key={\"D\"} value={\"D\"}>\n        {getString(\"lifting.footer-deadlift\", language)}\n      </option>,\n    ];\n\n    const flightOptions = [];\n    const flightTemplate = getString(\"lifting.footer-flight-template\", language);\n    for (let i = 0; i < this.props.flightsOnPlatform.length; i++) {\n      const flight = this.props.flightsOnPlatform[i];\n      const key = this.props.lifting.day + \"-\" + this.props.lifting.platform + \"-\" + i;\n      flightOptions.push(\n        <option value={flight} key={key}>\n          {flightTemplate.replace(\"{flight}\", localizeFlight(flight, language))}\n        </option>\n      );\n    }\n    if (flightOptions.length === 0) {\n      flightOptions.push(<option key=\"none\">{getString(\"lifting.footer-no-flights\", language)}</option>);\n    }\n\n    const attemptOptions = [];\n    const attemptTemplate = getString(\"lifting.footer-attempt-template\", language);\n    for (let i = 1; i <= 3; i++) {\n      attemptOptions.push(\n        <option key={i} value={i}>\n          {attemptTemplate.replace(\"{N}\", displayNumber(i, language))}\n        </option>\n      );\n    }\n    if (this.props.allow4thAttempts === true) {\n      attemptOptions.push(\n        <option key={4} value={4}>\n          {attemptTemplate.replace(\"{N}\", displayNumber(4, language))}\n        </option>\n      );\n    }\n\n    const currentEntryId = this.props.currentEntryId === null ? undefined : this.props.currentEntryId.toString();\n\n    return (\n      <div className={styles.footer}>\n        <div className={styles.leftControls}>\n          <Form.Control\n            as=\"select\"\n            value={this.props.lifting.day.toString()}\n            onChange={this.handleDayChange}\n            className={`custom-select ${styles.selector}`}\n          >\n            {dayOptions}\n          </Form.Control>\n          <Form.Control\n            as=\"select\"\n            value={this.props.lifting.platform.toString()}\n            onChange={this.handlePlatformChange}\n            className={`custom-select ${styles.selector}`}\n          >\n            {platformOptions}\n          </Form.Control>\n          <Form.Control\n            as=\"select\"\n            value={this.props.lifting.lift}\n            onChange={this.handleLiftChange}\n            className={`custom-select ${styles.selector}`}\n          >\n            {liftOptions}\n          </Form.Control>\n          <Form.Control\n            key={\"flight-\" + this.props.lifting.flight}\n            as=\"select\"\n            value={this.props.lifting.flight}\n            onChange={this.handleFlightChange}\n            className={`custom-select ${styles.selector}`}\n          >\n            {flightOptions}\n          </Form.Control>\n          <Form.Control\n            value={this.props.attemptOneIndexed.toString()}\n            as=\"select\"\n            onChange={this.handleAttemptChange}\n            className={`custom-select ${styles.selector}`}\n          >\n            {attemptOptions}\n          </Form.Control>\n          <Form.Control\n            value={currentEntryId}\n            as=\"select\"\n            onChange={this.handleLifterChange}\n            className={`custom-select ${styles.selector}`}\n          >\n            {this.makeLifterOptions()}\n          </Form.Control>\n        </div>\n\n        <div className={styles.rightControls}>\n          <ButtonGroup>\n            <Button variant=\"outline-primary\" onClick={this.props.toggleReplaceTableWithWeighins}>\n              <FormattedMessage id=\"lifting.button-toggle-weigh-ins\" defaultMessage=\"Toggle Weigh-ins\" />\n            </Button>\n            <Button variant=\"outline-secondary\" onClick={this.handleFullscreen} className={styles.fullscreen}>\n              <FormattedMessage id=\"lifting.button-toggle-fullscreen\" defaultMessage=\"Toggle Fullscreen\" />\n            </Button>\n          </ButtonGroup>\n          <button\n            type=\"button\"\n            onMouseEnter={this.handleOnMouseEnter}\n            onMouseDown={this.handleNoLift}\n            className={styles.noLift}\n          >\n            <FormattedMessage id=\"lifting.button-no-lift\" defaultMessage=\"No Lift\" />\n          </button>\n          <button\n            type=\"button\"\n            onMouseEnter={this.handleOnMouseEnter}\n            onMouseDown={this.handleGoodLift}\n            className={styles.goodLift}\n          >\n            <FormattedMessage id=\"lifting.button-good-lift\" defaultMessage=\"Good Lift\" />\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState) => {\n  return {\n    lengthDays: state.meet.lengthDays,\n    platformsOnDays: state.meet.platformsOnDays,\n    allow4thAttempts: state.meet.allow4thAttempts,\n    weightClassesKgMen: state.meet.weightClassesKgMen,\n    weightClassesKgWomen: state.meet.weightClassesKgWomen,\n    weightClassesKgMx: state.meet.weightClassesKgMx,\n    lifting: state.lifting,\n    language: state.language,\n    entries: state.registration.entries,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch) => {\n  return {\n    setLiftingGroup: (day: number, platform: number, flight: Flight, lift: Lift) =>\n      dispatch(setLiftingGroup(day, platform, flight, lift)),\n    overrideAttempt: (attempt: number) => dispatch(overrideAttempt(attempt)),\n    overrideEntryId: (entryId: number) => dispatch(overrideEntryId(entryId)),\n    markLift: (entry: Entry, lift: Lift, attempt: number, success: boolean) =>\n      dispatch(markLift(entry.id, lift, attempt, success)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LiftingFooter);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// The top bar of the Lifting page, containing huge text about the current lifter.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport { Entry } from \"../../types/dataTypes\";\nimport { GlobalState, MeetState } from \"../../types/stateTypes\";\n\nimport Logo from \"./gpc-nz-horizontal.png\";\n\nimport styles from \"./LiftingHeader.module.scss\";\n\ninterface OwnProps {\n  attemptOneIndexed: number;\n  orderedEntries: Array<Entry>;\n  currentEntryId: number | null;\n}\n\ninterface StateProps {\n  meet: MeetState;\n}\n\ntype Props = OwnProps & StateProps;\n\nclass LiftingHeader extends React.Component<Props> {\n  render() {\n    return (\n      <div className={styles.header}>\n        <div className={styles.lifterName}>{this.props.meet.name}</div>\n        <img className={styles.logo} src={Logo}></img>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => {\n  return {\n    meet: state.meet,\n  };\n};\n\nexport default connect(mapStateToProps)(LiftingHeader);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// The parent component of the Lifting page, contained by the LiftingContainer.\n//\n// The LiftingTable, LiftingFooter, etc. all share calculated state.\n// This class performs the state calculations and communicates that to its\n// sub-components via props.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport LeftCard from \"./LeftCard\";\nimport LiftingFooter from \"./LiftingFooter\";\nimport LiftingHeader from \"./LiftingHeader\";\nimport LiftingTable from \"./LiftingTable\";\nimport WeighinsView from \"../weighins/WeighinsView\";\n\nimport styles from \"./LiftingView.module.scss\";\n\nimport { getLiftingOrder } from \"../../logic/liftingOrder\";\n\nimport { Entry, Flight, Language } from \"../../types/dataTypes\";\nimport { GlobalState, MeetState, LiftingState } from \"../../types/stateTypes\";\n\ninterface StateProps {\n  meet: MeetState;\n  lifting: LiftingState;\n  flightsOnPlatform: Array<Flight>;\n  entriesInFlight: Array<Entry>;\n  language: Language;\n}\n\ntype Props = StateProps;\n\ninterface InternalState {\n  // If true, the LiftingTable is replaced with the Weighins page.\n  // This lets the score table change arbitrary rack height and attempt information\n  // without removing the current lifter or bar load displays.\n  replaceTableWithWeighins: boolean;\n}\n\nclass LiftingView extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n    this.toggleReplaceTableWithWeighins = this.toggleReplaceTableWithWeighins.bind(this);\n    this.state = {\n      replaceTableWithWeighins: false,\n    };\n  }\n\n  toggleReplaceTableWithWeighins = (): void => {\n    this.setState({\n      replaceTableWithWeighins: !this.state.replaceTableWithWeighins,\n    });\n  };\n\n  render() {\n    const now = getLiftingOrder(this.props.entriesInFlight, this.props.lifting);\n\n    let rightElement = null;\n    if (this.state.replaceTableWithWeighins === false) {\n      rightElement = (\n        <LiftingTable\n          attemptOneIndexed={now.attemptOneIndexed}\n          orderedEntries={now.orderedEntries}\n          currentEntryId={now.currentEntryId}\n        />\n      );\n    } else {\n      rightElement = (\n        <WeighinsView day={this.props.lifting.day} platform={this.props.lifting.platform} inLiftingPage={true} />\n      );\n    }\n\n    return (\n      <div>\n        <div id=\"liftingView\" className={styles.liftingView}>\n          <LiftingHeader\n            attemptOneIndexed={now.attemptOneIndexed}\n            orderedEntries={now.orderedEntries}\n            currentEntryId={now.currentEntryId}\n          />\n\n          <div className={styles.middleParentContainer}>\n            <div className={styles.leftCardContainer}>\n              <LeftCard\n                attemptOneIndexed={now.attemptOneIndexed}\n                orderedEntries={now.orderedEntries}\n                currentEntryId={now.currentEntryId}\n                nextEntryId={now.nextEntryId}\n                nextAttemptOneIndexed={now.nextAttemptOneIndexed}\n              />\n            </div>\n\n            <div className={styles.rightCardContainer}>{rightElement}</div>\n          </div>\n\n          <LiftingFooter\n            attemptOneIndexed={now.attemptOneIndexed}\n            orderedEntries={now.orderedEntries}\n            currentEntryId={now.currentEntryId}\n            flightsOnPlatform={this.props.flightsOnPlatform}\n            toggleReplaceTableWithWeighins={this.toggleReplaceTableWithWeighins}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => {\n  const day = state.lifting.day;\n  const platform = state.lifting.platform;\n  const flight = state.lifting.flight;\n\n  const entriesOnPlatform = state.registration.entries.filter(\n    (entry) => entry.day === day && entry.platform === platform\n  );\n\n  // Determine available flights from the entries themselves.\n  const flights: Array<Flight> = [];\n  for (let i = 0; i < entriesOnPlatform.length; i++) {\n    const entry = entriesOnPlatform[i];\n    if (flights.indexOf(entry.flight) === -1) {\n      flights.push(entry.flight);\n    }\n  }\n  flights.sort();\n\n  // Only receive entries that are in the currently-lifting group.\n  const entriesInFlight = entriesOnPlatform.filter((entry) => entry.flight === flight);\n\n  return {\n    meet: state.meet,\n    lifting: state.lifting,\n    flightsOnPlatform: flights,\n    entriesInFlight: entriesInFlight,\n    language: state.language,\n  };\n};\n\nexport default connect(mapStateToProps)(LiftingView);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Container for the Lifting page.\n\nimport React from \"react\";\nimport LiftingView from \"../components/lifting/LiftingView\";\n\nclass LiftingContainer extends React.Component<{}> {\n  render() {\n    return <LiftingView />;\n  }\n}\n\nexport default LiftingContainer;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Shows the first attempt ordering of lifters for a single flight.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Card from \"react-bootstrap/Card\";\nimport Table from \"react-bootstrap/Table\";\n\nimport { liftToAttemptFieldName } from \"../../logic/entry\";\nimport { orderEntriesByAttempt } from \"../../logic/liftingOrder\";\nimport { getString, localizeFlight } from \"../../logic/strings\";\nimport { kg2lbs, displayNumber, displayWeight } from \"../../logic/units\";\n\nimport { Entry, Flight, Language, Lift } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { checkExhausted } from \"../../types/utils\";\n\nimport styles from \"./OneFlightOrder.module.scss\";\n\ntype Column =\n  | \"SquatName\"\n  | \"SquatKg\"\n  | \"SquatLbs\"\n  | \"BenchSeparator\"\n  | \"BenchName\"\n  | \"BenchKg\"\n  | \"BenchLbs\"\n  | \"DeadliftSeparator\"\n  | \"DeadliftName\"\n  | \"DeadliftKg\"\n  | \"DeadliftLbs\";\n\ninterface OwnProps {\n  flight: Flight;\n  entriesInFlight: Array<Entry>;\n}\n\ninterface StateProps {\n  inKg: boolean;\n  showAlternateUnits: boolean;\n  language: Language;\n}\n\ntype Props = OwnProps & StateProps;\n\nclass OneFlightOrder extends React.Component<Props> {\n  getOrderBy = (lift: Lift): Array<Entry> => {\n    const fieldKg = liftToAttemptFieldName(lift);\n\n    // Only consider entries that registered a first attempt.\n    const entriesForLift = this.props.entriesInFlight.filter((e) => {\n      return e[fieldKg][0] !== 0;\n    });\n\n    // Sort them in-place on the basis of that first attempt.\n    return orderEntriesByAttempt(entriesForLift, fieldKg, 1);\n  };\n\n  getColumnHeader(column: Column, language: Language): string {\n    switch (column) {\n      case \"SquatName\":\n        return getString(\"flight-order.squat-column-header\", language);\n      case \"SquatKg\":\n        return getString(\"flight-order.kilograms-header\", language);\n      case \"SquatLbs\":\n        return getString(\"flight-order.pounds-header\", language);\n      case \"BenchSeparator\":\n        return \"\";\n      case \"BenchName\":\n        return getString(\"flight-order.bench-column-header\", language);\n      case \"BenchKg\":\n        return getString(\"flight-order.kilograms-header\", language);\n      case \"BenchLbs\":\n        return getString(\"flight-order.pounds-header\", language);\n      case \"DeadliftSeparator\":\n        return \"\";\n      case \"DeadliftName\":\n        return getString(\"flight-order.deadlift-column-header\", language);\n      case \"DeadliftKg\":\n        return getString(\"flight-order.kilograms-header\", language);\n      case \"DeadliftLbs\":\n        return getString(\"flight-order.pounds-header\", language);\n      default:\n        checkExhausted(column);\n        return \"\";\n    }\n  }\n\n  render() {\n    const language = this.props.language;\n\n    const bySquat = this.getOrderBy(\"S\");\n    const byBench = this.getOrderBy(\"B\");\n    const byDeadlift = this.getOrderBy(\"D\");\n\n    const hasSquat = bySquat.length !== 0;\n    const hasBench = byBench.length !== 0;\n    const hasDeadlift = byDeadlift.length !== 0;\n\n    const maxRows = Math.max(bySquat.length, byBench.length, byDeadlift.length);\n\n    // Figure out what columns to render, and in which order.\n    const columns: Array<Column> = [];\n    if (hasSquat) {\n      columns.push(\"SquatName\");\n      columns.push(this.props.inKg ? \"SquatKg\" : \"SquatLbs\");\n      if (this.props.showAlternateUnits) {\n        columns.push(this.props.inKg ? \"SquatLbs\" : \"SquatKg\");\n      }\n    }\n    if (hasBench) {\n      if (hasSquat) {\n        columns.push(\"BenchSeparator\");\n      }\n      columns.push(\"BenchName\");\n      columns.push(this.props.inKg ? \"BenchKg\" : \"BenchLbs\");\n      if (this.props.showAlternateUnits) {\n        columns.push(this.props.inKg ? \"BenchLbs\" : \"BenchKg\");\n      }\n    }\n    if (hasDeadlift) {\n      if (hasSquat || hasBench) {\n        columns.push(\"DeadliftSeparator\");\n      }\n      columns.push(\"DeadliftName\");\n      columns.push(this.props.inKg ? \"DeadliftKg\" : \"DeadliftLbs\");\n      if (this.props.showAlternateUnits) {\n        columns.push(this.props.inKg ? \"DeadliftLbs\" : \"DeadliftKg\");\n      }\n    }\n\n    // Construct a table row-by-row.\n    const rows = [];\n    for (let i = 0; i < maxRows; ++i) {\n      const builder = [];\n\n      for (let j = 0; j < columns.length; ++j) {\n        const column = columns[j];\n        const key: string = column + String(i);\n\n        let content: string = \"\";\n        let className = undefined;\n\n        switch (column) {\n          case \"SquatName\": {\n            if (i < bySquat.length) {\n              const entry = bySquat[i];\n              content = displayNumber(i + 1, language) + \". \" + entry.name;\n            }\n            break;\n          }\n          case \"SquatKg\": {\n            if (i < bySquat.length) {\n              const entry = bySquat[i];\n              content = displayWeight(entry.squatKg[0], language);\n            }\n            break;\n          }\n          case \"SquatLbs\": {\n            if (i < bySquat.length) {\n              const entry = bySquat[i];\n              content = displayWeight(kg2lbs(entry.squatKg[0]), language);\n            }\n            break;\n          }\n          case \"BenchSeparator\":\n            className = styles.leftDivider;\n            break;\n          case \"BenchName\": {\n            if (i < byBench.length) {\n              const entry = byBench[i];\n              content = displayNumber(i + 1, language) + \". \" + entry.name;\n            }\n            break;\n          }\n          case \"BenchKg\": {\n            if (i < byBench.length) {\n              const entry = byBench[i];\n              content = displayWeight(entry.benchKg[0], language);\n            }\n            break;\n          }\n          case \"BenchLbs\": {\n            if (i < byBench.length) {\n              const entry = byBench[i];\n              content = displayWeight(kg2lbs(entry.benchKg[0]), language);\n            }\n            break;\n          }\n          case \"DeadliftSeparator\":\n            className = styles.leftDivider;\n            break;\n          case \"DeadliftName\": {\n            if (i < byDeadlift.length) {\n              const entry = byDeadlift[i];\n              content = displayNumber(i + 1, language) + \". \" + entry.name;\n            }\n            break;\n          }\n          case \"DeadliftKg\": {\n            if (i < byDeadlift.length) {\n              const entry = byDeadlift[i];\n              content = displayWeight(entry.deadliftKg[0], language);\n            }\n            break;\n          }\n          case \"DeadliftLbs\": {\n            if (i < byDeadlift.length) {\n              const entry = byDeadlift[i];\n              content = displayWeight(kg2lbs(entry.deadliftKg[0]), language);\n            }\n            break;\n          }\n        }\n\n        builder.push(\n          <td key={key} className={className}>\n            {content}\n          </td>\n        );\n      }\n\n      rows.push(<tr key={i}>{builder}</tr>);\n    }\n\n    // Construct the table header.\n    const header = [];\n    for (let i = 0; i < columns.length; ++i) {\n      const column = columns[i];\n      const title = this.getColumnHeader(column, this.props.language);\n      header.push(<th key={column}>{title}</th>);\n    }\n\n    return (\n      <Card>\n        <Card.Header>\n          <FormattedMessage\n            id=\"flight-order.flight-card\"\n            defaultMessage=\"Flight {flight} Lifting Order\"\n            values={{ flight: localizeFlight(this.props.flight, this.props.language) }}\n          />\n        </Card.Header>\n        <Card.Body>\n          <Table striped hover size=\"sm\" style={{ margin: \"0px\" }}>\n            <thead>\n              <tr>{header}</tr>\n            </thead>\n            <tbody>{rows}</tbody>\n          </Table>\n        </Card.Body>\n      </Card>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => {\n  return {\n    inKg: state.meet.inKg,\n    showAlternateUnits: state.meet.showAlternateUnits,\n    language: state.language,\n  };\n};\n\nexport default connect(mapStateToProps)(OneFlightOrder);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// The parent component of the FlightOrder page, contained by the FlightOrderContainer.\n\nimport React, { FormEvent } from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Button from \"react-bootstrap/Button\";\nimport Card from \"react-bootstrap/Card\";\nimport FormControl from \"react-bootstrap/FormControl\";\n\nimport OneFlightOrder from \"./OneFlightOrder\";\n\nimport { getString } from \"../../logic/strings\";\nimport { displayNumber } from \"../../logic/units\";\n\nimport { Entry, Flight, Language } from \"../../types/dataTypes\";\nimport { GlobalState, MeetState } from \"../../types/stateTypes\";\nimport { FormControlTypeHack } from \"../../types/utils\";\n\ninterface StateProps {\n  meet: MeetState;\n  entries: ReadonlyArray<Entry>;\n  language: Language;\n}\n\ntype Props = StateProps;\n\ninterface InternalState {\n  day: number;\n  platform: number;\n}\n\nclass FlightOrderView extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.updateDay = this.updateDay.bind(this);\n    this.updatePlatform = this.updatePlatform.bind(this);\n    this.handlePrint = this.handlePrint.bind(this);\n\n    this.state = {\n      day: 1,\n      platform: 1,\n    };\n  }\n\n  updateDay = (event: FormEvent<FormControlTypeHack>) => {\n    const day = Number(event.currentTarget.value);\n    if (this.state.day !== day) {\n      // If the currently-selected platform number becomes invalid, reset it.\n      if (this.state.platform > this.props.meet.platformsOnDays[day - 1]) {\n        this.setState({ day: day, platform: 1 });\n      } else {\n        this.setState({ day: day });\n      }\n    }\n  };\n\n  updatePlatform = (event: React.FormEvent<FormControlTypeHack>) => {\n    const platform = Number(event.currentTarget.value);\n    if (this.state.platform !== platform) {\n      this.setState({ platform: platform });\n    }\n  };\n\n  handlePrint = () => {\n    window.print();\n  };\n\n  render() {\n    const language = this.props.language;\n    const selectorStyle = { width: \"120px\", marginRight: \"15px\" };\n\n    // Make options for all of the days.\n    const dayOptions = [];\n    const dayTemplate = getString(\"lifting.footer-day-template\", language);\n    for (let i = 1; i <= this.props.meet.lengthDays; i++) {\n      dayOptions.push(\n        <option value={i} key={i}>\n          {dayTemplate.replace(\"{N}\", displayNumber(i, language))}\n        </option>\n      );\n    }\n\n    // Make options for all of the available platforms on the current day.\n    const platformOptions = [];\n    const platformTemplate = getString(\"lifting.footer-platform-template\", language);\n    const numPlatforms = this.props.meet.platformsOnDays[this.state.day - 1];\n    for (let i = 1; i <= numPlatforms; i++) {\n      platformOptions.push(\n        <option value={i} key={i}>\n          {platformTemplate.replace(\"{N}\", displayNumber(i, language))}\n        </option>\n      );\n    }\n\n    // Get all the entries under the current (day, platform) selection.\n    const shownEntries = this.props.entries.filter((e) => {\n      return e.day === this.state.day && e.platform === this.state.platform;\n    });\n\n    // Look through the entries to discover what flights exist.\n    const knownFlights: Flight[] = [];\n    for (let i = 0; i < shownEntries.length; i++) {\n      const entry = shownEntries[i];\n      if (knownFlights.indexOf(entry.flight) === -1) {\n        knownFlights.push(entry.flight);\n      }\n    }\n    knownFlights.sort();\n\n    // For each flight, see if there are any lifters, and build a OneFlightOrder.\n    const flightOrders = [];\n    for (let i = 0; i < knownFlights.length; i++) {\n      const flight = knownFlights[i];\n      const entriesInFlight = shownEntries.filter((e) => e.flight === flight);\n      const id = \"\" + this.state.day + \"-\" + this.state.platform + \"-\" + flight;\n      flightOrders.push(<OneFlightOrder key={id} flight={flight} entriesInFlight={entriesInFlight} />);\n    }\n\n    // FIXME: Disable categories for the moment. They seem unhelpful.\n    // As far as I know, no one has paid them much attention.\n    /*\n    // Look through the entries to discover what divisions exist.\n    const categoryResults = getProjectedResults(\n      shownEntries,\n      this.props.meet.weightClassesKgMen,\n      this.props.meet.weightClassesKgWomen,\n      this.props.meet.weightClassesKgMx,\n      this.props.meet.combineSleevesAndWraps\n    );\n\n    let categories: Array<JSX.Element> = [];\n    for (let i = 0; i < categoryResults.length; i++) {\n      const id = \"\" + this.state.day + \"-\" + this.state.platform + \"-\" + i;\n      categories.push(<OneCategory key={id} platform={this.state.platform} categoryResults={categoryResults[i]} />);\n    }\n    */\n\n    return (\n      <div>\n        <Card style={{ marginBottom: \"17px\" }}>\n          <Card.Body style={{ display: \"flex\" }}>\n            <FormControl\n              value={this.state.day.toString()}\n              as=\"select\"\n              onChange={this.updateDay}\n              style={selectorStyle}\n              className=\"custom-select\"\n            >\n              {dayOptions}\n            </FormControl>\n\n            <FormControl\n              value={this.state.platform.toString()}\n              as=\"select\"\n              onChange={this.updatePlatform}\n              style={selectorStyle}\n              className=\"custom-select\"\n            >\n              {platformOptions}\n            </FormControl>\n\n            <Button variant=\"info\" onClick={this.handlePrint}>\n              <FormattedMessage id=\"flight-order.print-button\" defaultMessage=\"Print Page\" />\n            </Button>\n          </Card.Body>\n        </Card>\n\n        {flightOrders}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => {\n  return {\n    meet: state.meet,\n    entries: state.registration.entries,\n    language: state.language,\n  };\n};\n\nexport default connect(mapStateToProps)(FlightOrderView);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Container for the FlightOrder page.\n\nimport React from \"react\";\n\nimport FlightOrderView from \"../components/flight-order/FlightOrderView\";\nimport styles from \"../components/common/ContentArea.module.scss\";\n\nclass FlightOrderContainer extends React.Component<{}> {\n  render() {\n    return (\n      <div className={styles.contentArea}>\n        <FlightOrderView />\n      </div>\n    );\n  }\n}\n\nexport default FlightOrderContainer;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Displays the results by division.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Card from \"react-bootstrap/Card\";\nimport Table from \"react-bootstrap/Table\";\n\nimport { getFinalResults } from \"../../logic/divisionPlace\";\nimport { getWeightClassStr, getWeightClassLbsStr, wtclsStrKg2Lbs } from \"../../reducers/meetReducer\";\nimport {\n  getBest5SquatKg,\n  getBest5BenchKg,\n  getBest5DeadliftKg,\n  getFinalEventTotalKg,\n  entryHasLifted,\n} from \"../../logic/entry\";\nimport { kg2lbs, displayWeight, displayPoints, displayPlaceOrdinal } from \"../../logic/units\";\n\nimport {\n  getString,\n  localizeEquipment,\n  localizeEvent,\n  localizeWeightClassStr,\n  localizeSexPlural,\n} from \"../../logic/strings\";\nimport { getPoints } from \"../../logic/coefficients/coefficients\";\n\nimport { Category, CategoryResults } from \"../../logic/divisionPlace\";\nimport { Entry, Formula, Language } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { mapSexToClasses } from \"../../logic/entry\";\n\ninterface StateProps {\n  inKg: boolean;\n  showAlternateUnits: boolean;\n  meetName: string;\n  formula: Formula;\n  combineSleevesAndWraps: boolean;\n  lengthDays: number;\n  weightClassesKgMen: ReadonlyArray<number>;\n  weightClassesKgWomen: ReadonlyArray<number>;\n  weightClassesKgMx: ReadonlyArray<number>;\n  language: Language;\n  entries: ReadonlyArray<Entry>;\n}\n\ninterface OwnProps {\n  day: string | number; // Really a number, 0 meaning \"all\".\n}\n\ntype Props = StateProps & OwnProps;\n\nclass ByDivision extends React.Component<Props> {\n  renderEntryRow = (entry: Entry, category: Category, key: number): JSX.Element | null => {\n    // Skip no-show entries.\n    if (!entryHasLifted(entry)) return null;\n\n    // Skip DQ'd lifters. Meet directors have reported that it's embarrassing\n    // to the DQ'd lifter to have that projected.\n    const totalKg = getFinalEventTotalKg(entry, category.event);\n    if (totalKg === 0) return null;\n\n    const inKg = this.props.inKg;\n    const language = this.props.language;\n\n    // The place proceeds in order by key, except for guests\n    const place = entry.guest\n      ? getString(\"results.lifter-guest\", language)\n      : displayPlaceOrdinal(key + 1, entry, this.props.language);\n\n    const points: number = getPoints(this.props.formula, entry, category.event, totalKg, inKg);\n\n    let pointsStr = \"\";\n    if (totalKg !== 0 && points === 0) {\n      pointsStr = getString(\"results.value-not-applicable\", language);\n    } else if (totalKg !== 0 && points !== 0) {\n      pointsStr = displayPoints(points, language);\n    }\n\n    const classes = mapSexToClasses(\n      entry.sex,\n      this.props.weightClassesKgMen,\n      this.props.weightClassesKgWomen,\n      this.props.weightClassesKgMx\n    );\n    const wtcls = inKg\n      ? getWeightClassStr(classes, entry.bodyweightKg, language)\n      : getWeightClassLbsStr(classes, entry.bodyweightKg);\n    const bw = inKg ? entry.bodyweightKg : kg2lbs(entry.bodyweightKg);\n\n    const squatKg = getBest5SquatKg(entry);\n    const squat = inKg ? squatKg : kg2lbs(squatKg);\n\n    const benchKg = getBest5BenchKg(entry);\n    const bench = inKg ? benchKg : kg2lbs(benchKg);\n\n    const deadliftKg = getBest5DeadliftKg(entry);\n    const deadlift = inKg ? deadliftKg : kg2lbs(deadliftKg);\n\n    let weightTemplate = \"\";\n    if (inKg) {\n      if (this.props.showAlternateUnits === true) {\n        weightTemplate = getString(\"lifting.current-weight-kg-lbs\", language);\n      } else {\n        weightTemplate = getString(\"lifting.current-weight-kg\", language);\n      }\n    } else {\n      if (this.props.showAlternateUnits === true) {\n        weightTemplate = getString(\"lifting.current-weight-lbs-kg\", language);\n      } else {\n        weightTemplate = getString(\"lifting.current-weight-lbs\", language);\n      }\n    }\n\n    let weightString: null | string = null;\n    if (totalKg > 0) {\n      weightString = weightTemplate\n        .replace(\"{kg}\", displayWeight(totalKg, language))\n        .replace(\"{lbs}\", displayWeight(kg2lbs(totalKg), language));\n    }\n\n    return (\n      <tr key={key}>\n        <td>{place}</td>\n        <td>{entry.name}</td>\n        <td>{entry.bodyweightKg === 0 ? null : wtcls}</td>\n        <td>{entry.bodyweightKg === 0 ? null : displayWeight(bw, language)}</td>\n        <td>{entry.age === 0 ? null : entry.age}</td>\n        <td>{squatKg === 0 ? \"\" : displayWeight(squat, language)}</td>\n        <td>{benchKg === 0 ? \"\" : displayWeight(bench, language)}</td>\n        <td>{deadliftKg === 0 ? \"\" : displayWeight(deadlift, language)}</td>\n        <td>{weightString}</td>\n        <td>{pointsStr}</td>\n      </tr>\n    );\n  };\n\n  renderCategoryResults = (results: CategoryResults, key: number): JSX.Element | null => {\n    const { category, orderedEntries } = results;\n    const language = this.props.language;\n    const sex: string = localizeSexPlural(category.sex, language);\n\n    // Gather rows.\n    const rows = [];\n    for (let i = 0; i < orderedEntries.length; i++) {\n      const row = this.renderEntryRow(orderedEntries[i], category, i);\n      if (row !== null) {\n        rows.push(row);\n      }\n    }\n\n    // If all entries were no-show, don't show this panel.\n    if (rows.length === 0) {\n      return null;\n    }\n\n    let eqpstr: string = localizeEquipment(category.equipment, language);\n    if (this.props.combineSleevesAndWraps && (category.equipment === \"Sleeves\" || category.equipment === \"Wraps\")) {\n      eqpstr = getString(\"results.combined-sleeves-wraps\", language);\n    }\n\n    const units = this.props.inKg\n      ? getString(\"results.spoken-unit-kilo\", language)\n      : getString(\"results.spoken-unit-pound\", language);\n\n    // Convert the category.weightClassStr to pounds.\n    let wtcls = localizeWeightClassStr(category.weightClassStr, language);\n    if (category.weightClassStr !== \"\" && !this.props.inKg) {\n      wtcls = wtclsStrKg2Lbs(category.weightClassStr);\n    }\n\n    const noviceOrMember = category.isNovice\n      ? getString(\"results.novice\", language)\n      : getString(\"results.member\", language);\n\n    const template = getString(\"results.division-template\", language);\n    const division = template\n      .replace(\"{sex}\", sex)\n      .replace(\"{noviceOrMember}\", noviceOrMember)\n      .replace(\"{weightClass}\", wtcls)\n      .replace(\"{spokenUnits}\", category.weightClassStr !== \"\" ? units : \"\")\n      .replace(\"{equipment}\", eqpstr)\n      .replace(\"{division}\", category.division)\n      .replace(\"{event}\", localizeEvent(category.event, language));\n\n    return (\n      <Card key={key} style={{ marginTop: \"17px\" }}>\n        <Card.Header>{division}</Card.Header>\n        <Card.Body>\n          <Table hover size=\"sm\">\n            <thead>\n              <tr>\n                <th>{getString(\"lifting.column-place\", language)}</th>\n                <th>{getString(\"lifting.column-lifter\", language)}</th>\n                <th>{getString(\"lifting.column-weightclass\", language)}</th>\n                <th>{getString(\"lifting.column-bodyweight\", language)}</th>\n                <th>{getString(\"lifting.column-age\", language)}</th>\n                <th>{getString(\"flight-order.squat-column-header\", language)}</th>\n                <th>{getString(\"flight-order.bench-column-header\", language)}</th>\n                <th>{getString(\"flight-order.deadlift-column-header\", language)}</th>\n                <th>{getString(\"lifting.column-finaltotal\", language)}</th>\n                <th>{getString(\"lifting.column-finalpoints\", language)}</th>\n              </tr>\n            </thead>\n            <tbody>{rows}</tbody>\n          </Table>\n        </Card.Body>\n      </Card>\n    );\n  };\n\n  render() {\n    const results = getFinalResults(\n      this.props.entries,\n      this.props.weightClassesKgMen,\n      this.props.weightClassesKgWomen,\n      this.props.weightClassesKgMx,\n      this.props.combineSleevesAndWraps\n    );\n\n    const categoryCards = [];\n    for (let i = 0; i < results.length; i++) {\n      const panel = this.renderCategoryResults(results[i], i);\n      if (panel !== null) {\n        categoryCards.push(panel);\n      }\n    }\n\n    return <div>{categoryCards}</div>;\n  }\n}\n\nconst mapStateToProps = (state: GlobalState, ownProps: OwnProps): StateProps => {\n  const day = Number(ownProps.day);\n  let entries = state.registration.entries;\n  if (day > 0) {\n    entries = entries.filter((e) => e.day === day);\n  }\n\n  return {\n    inKg: state.meet.inKg,\n    showAlternateUnits: state.meet.showAlternateUnits,\n    meetName: state.meet.name,\n    formula: state.meet.formula,\n    combineSleevesAndWraps: state.meet.combineSleevesAndWraps,\n    lengthDays: state.meet.lengthDays,\n    weightClassesKgMen: state.meet.weightClassesKgMen,\n    weightClassesKgWomen: state.meet.weightClassesKgWomen,\n    weightClassesKgMx: state.meet.weightClassesKgMx,\n    language: state.language,\n    entries: entries,\n  };\n};\n\nexport default connect(mapStateToProps)(ByDivision);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the logic for calculating the division Place of a lifter, shared between\n// the Lifting page, the Rankings page, and data export code.\n//\n// The algorithm used is particularly bad -- the foremost goal was to make an interface\n// that allowed for maximum code reuse between the Rankings and Lifting pages,\n// which have slightly different needs.\n\nimport { getFinalEventTotalKg } from \"./entry\";\n\n// Import points formulas.\nimport { getAgeAdjustedPoints } from \"./coefficients/coefficients\";\n\n// Import age coefficients.\nimport { checkExhausted } from \"../types/utils\";\nimport { AgeCoefficients, Sex, Event, Equipment, Entry, Formula } from \"../types/dataTypes\";\n\n// Specifies a points category under which entries can be ranked together.\nexport type PointsCategory = {\n  sex: Sex;\n  event: Event;\n  equipment: Equipment;\n  isNovice: boolean;\n};\n\n// Wraps up all the entries in a category with the category's descriptors.\nexport type PointsCategoryResults = {\n  category: PointsCategory;\n  orderedEntries: Array<Entry>;\n};\n\n// Generates a unique String out of a Category, for purposes of using as a Map key.\nconst categoryToKey = (category: PointsCategory): string => {\n  return JSON.stringify(category);\n};\nconst keyToCategory = (key: string): PointsCategory => {\n  return JSON.parse(key);\n};\n\n// Returns a copy of the entries array sorted by Formula Place (Rank).\n// All entries are assumed to be part of the same category.\nconst sortByFormulaPlaceInCategory = (\n  entries: Array<Entry>,\n  category: PointsCategory,\n  formula: Formula,\n  ageCoefficients: AgeCoefficients,\n  inKg: boolean,\n  meetDate: string\n): Array<Entry> => {\n  // Make a map from Entry to initial index.\n  const indexMap = new Map();\n  for (let i = 0; i < entries.length; i++) {\n    indexMap.set(entries[i], i);\n  }\n\n  // Pre-calculate all the points into an array to avoid computing them multiple\n  // times in the sort.\n  const memoizedPoints = new Array(entries.length);\n  for (let i = 0; i < entries.length; i++) {\n    const entry = entries[i];\n    const totalKg = getFinalEventTotalKg(entry, category.event);\n\n    memoizedPoints[i] = getAgeAdjustedPoints(ageCoefficients, meetDate, formula, entry, category.event, totalKg, inKg);\n  }\n\n  // Clone the entries array to avoid modifying the original.\n  const clonedEntries = entries.slice();\n\n  // Sort in the given category, first place having the lowest index.\n  clonedEntries.sort((a, b) => {\n    const aIndex = indexMap.get(a);\n    const bIndex = indexMap.get(b);\n\n    // Appease the type checker even though this can't happen.\n    if (aIndex === undefined || bIndex === undefined) return 0;\n\n    // Guests always sort higher than non-guests.\n    // This is phrased a little strangely to also handle undefined.\n    if (a.guest !== b.guest) {\n      if (a.guest) return 1;\n      if (b.guest) return -1;\n    }\n\n    // First sort by points, higher sorting lower.\n    const aPoints = memoizedPoints[aIndex];\n    const bPoints = memoizedPoints[bIndex];\n    if (aPoints !== bPoints) return bPoints - aPoints;\n\n    // If points are equal, sort by Bodyweight, lower sorting lower.\n    if (a.bodyweightKg !== b.bodyweightKg) return a.bodyweightKg - b.bodyweightKg;\n\n    // Otherwise, they're equal.\n    return 0;\n  });\n\n  return clonedEntries;\n};\n\n// Determines the sort order by Event.\nconst getEventSortOrder = (ev: Event): number => {\n  return [\"SBD\", \"BD\", \"SB\", \"SD\", \"S\", \"B\", \"D\"].indexOf(ev);\n};\n\n// Determines the sort order by Equipment.\nconst getEquipmentSortOrder = (eq: Equipment): number => {\n  // Combine classic and equipped lifting.\n  return [\"Bare\", \"Sleeves\", \"Wraps\", \"Single-ply\", \"Multi-ply\", \"Unlimited\"].indexOf(eq);\n};\n\n// Determines the sort order by Sex.\nconst getSexSortOrder = (sex: Sex): number => {\n  switch (sex) {\n    case \"F\":\n      return 0;\n    case \"M\":\n      return 1;\n    case \"Mx\":\n      return 2;\n    default:\n      checkExhausted(sex);\n      return 3;\n  }\n};\n\n// Determines the sort (and therefore presentation) order for the Category Results.\n// The input array is sorted in-place; nothing is returned.\nexport const sortPointsCategoryResults = (results: Array<PointsCategoryResults>): void => {\n  results.sort((a, b) => {\n    const catA = a.category;\n    const catB = b.category;\n\n    // First, sort by Sex.\n    const aSex = getSexSortOrder(catA.sex);\n    const bSex = getSexSortOrder(catB.sex);\n    if (aSex !== bSex) return aSex - bSex;\n\n    // Next, sort by Event.\n    const aEvent = getEventSortOrder(catA.event);\n    const bEvent = getEventSortOrder(catB.event);\n    if (aEvent !== bEvent) return aEvent - bEvent;\n\n    // Finally, sort by Equipment.\n    const aEquipment = getEquipmentSortOrder(catA.equipment);\n    const bEquipment = getEquipmentSortOrder(catB.equipment);\n    if (aEquipment !== bEquipment) return aEquipment - bEquipment;\n\n    return 0;\n  });\n};\n\n// Generates objects representing the various ByPoints categories.\n// The returned objects are sorted in intended order of presentation.\nexport const getAllRankings = (\n  entries: ReadonlyArray<Entry>,\n  formula: Formula,\n  ageCoefficients: AgeCoefficients,\n  combineSleevesAndWraps: boolean,\n  inKg: boolean,\n  meetDate: string\n): Array<PointsCategoryResults> => {\n  // Generate a map from category to the entries within that category.\n  // The map is populated by iterating over each entry and having the entry\n  // append itself to per-category lists.\n  const categoryMap = new Map();\n  for (let i = 0; i < entries.length; i++) {\n    const e = entries[i];\n\n    // Remember consistent properties.\n    const sex = e.sex;\n    let equipment: Equipment = e.equipment;\n\n    // If the results combine Sleeves and Wraps, promote Sleeves to Wraps.\n    if (combineSleevesAndWraps && equipment === \"Sleeves\") {\n      equipment = \"Wraps\";\n    }\n\n    // Iterate over each event, adding to the map.\n    for (let evidx = 0; evidx < e.events.length; evidx++) {\n      const event = e.events[evidx];\n      const category = { sex, event, equipment, isNovice: e.novice || false };\n      const key = categoryToKey(category);\n\n      const catEntries = categoryMap.get(key);\n      catEntries === undefined ? categoryMap.set(key, [e]) : catEntries.push(e);\n    }\n  }\n\n  // Iterate over each category and assign a Place to the entries therein.\n  const results = [];\n  for (const [key, catEntries] of categoryMap) {\n    const category = keyToCategory(key);\n    const orderedEntries = sortByFormulaPlaceInCategory(catEntries, category, formula, ageCoefficients, inKg, meetDate);\n    results.push({ category, orderedEntries });\n  }\n\n  sortPointsCategoryResults(results);\n  return results;\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Displays the results by points.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Card from \"react-bootstrap/Card\";\nimport Table from \"react-bootstrap/Table\";\n\nimport { getAllRankings } from \"../../logic/pointsPlace\";\nimport { getWeightClassStr, getWeightClassLbsStr } from \"../../reducers/meetReducer\";\nimport {\n  getBest5SquatKg,\n  getBest5BenchKg,\n  getBest5DeadliftKg,\n  getFinalEventTotalKg,\n  entryHasLifted,\n} from \"../../logic/entry\";\nimport { getString, localizeEquipment, localizeEvent, localizeSex, localizeSexPlural } from \"../../logic/strings\";\nimport { kg2lbs, displayNumber, displayPoints, displayWeight, displayPlaceOrdinal } from \"../../logic/units\";\n\nimport { getAgeAdjustedPoints } from \"../../logic/coefficients/coefficients\";\n\nimport { PointsCategory, PointsCategoryResults } from \"../../logic/pointsPlace\";\nimport { AgeCoefficients, Entry, Formula, Language } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { checkExhausted } from \"../../types/utils\";\nimport { fosterMcCulloch } from \"../../logic/coefficients/foster-mcculloch\";\nimport { mapSexToClasses } from \"../../logic/entry\";\n\ninterface StateProps {\n  inKg: boolean;\n  meetName: string;\n  meetDate: string;\n  formula: Formula;\n  combineSleevesAndWraps: boolean;\n  lengthDays: number;\n  weightClassesKgMen: ReadonlyArray<number>;\n  weightClassesKgWomen: ReadonlyArray<number>;\n  weightClassesKgMx: ReadonlyArray<number>;\n  language: Language;\n  entries: ReadonlyArray<Entry>;\n}\n\n// Overloads this component so it can render different types of \"Best Lifter\" categories.\nexport type AgePointsCategory = \"BestLifter\" | \"BestMastersLifter\" | \"BestJuniorsLifter\";\n\ninterface OwnProps {\n  day: string | number; // Really a number, 0 meaning \"all\".\n  ageCoefficients: AgeCoefficients; // In OwnProps so that caller can disable it.\n  agePointsCategory: AgePointsCategory;\n}\n\ntype Props = StateProps & OwnProps;\n\nclass ByPoints extends React.Component<Props> {\n  renderEntryRow = (entry: Entry, category: PointsCategory, key: number): JSX.Element | null => {\n    // Skip no-show lifters.\n    if (!entryHasLifted(entry)) return null;\n\n    // Skip DQ'd lifters. Meet directors have reported that it's embarrassing\n    // to the DQ'd lifter to have that projected.\n    const totalKg = getFinalEventTotalKg(entry, category.event);\n    if (totalKg === 0) return null;\n\n    const inKg = this.props.inKg;\n    const language = this.props.language;\n\n    // The place proceeds in order by key, except for guests\n    const rank = entry.guest\n      ? getString(\"results.lifter-guest\", language)\n      : displayPlaceOrdinal(key + 1, entry, language);\n\n    const points: number = getAgeAdjustedPoints(\n      this.props.ageCoefficients,\n      this.props.meetDate,\n      this.props.formula,\n      entry,\n      category.event,\n      totalKg,\n      inKg\n    );\n\n    let pointsStr = \"\";\n    if (totalKg !== 0 && points === 0) {\n      pointsStr = getString(\"results.value-not-applicable\", language);\n    } else if (totalKg !== 0 && points !== 0) {\n      pointsStr = displayPoints(points, language);\n    }\n\n    const firstDivision = entry.divisions.length > 0 ? entry.divisions[0] : \"\";\n    const numDivisions = entry.divisions.length;\n\n    const classes = mapSexToClasses(\n      entry.sex,\n      this.props.weightClassesKgMen,\n      this.props.weightClassesKgWomen,\n      this.props.weightClassesKgMx\n    );\n    const wtcls = inKg\n      ? getWeightClassStr(classes, entry.bodyweightKg, language)\n      : getWeightClassLbsStr(classes, entry.bodyweightKg);\n    const bw = inKg ? entry.bodyweightKg : kg2lbs(entry.bodyweightKg);\n\n    const squatKg = getBest5SquatKg(entry);\n    const squat = inKg ? squatKg : kg2lbs(squatKg);\n\n    const benchKg = getBest5BenchKg(entry);\n    const bench = inKg ? benchKg : kg2lbs(benchKg);\n\n    const deadliftKg = getBest5DeadliftKg(entry);\n    const deadlift = inKg ? deadliftKg : kg2lbs(deadliftKg);\n\n    const total = inKg ? totalKg : kg2lbs(totalKg);\n\n    return (\n      <tr key={key}>\n        <td>{rank}</td>\n        <td>{entry.name}</td>\n        <td>{localizeSex(entry.sex, language)}</td>\n        <td>\n          {firstDivision} {numDivisions > 1 ? \"(+\" + (numDivisions - 1) + \")\" : \"\"}\n        </td>\n        <td>{localizeEquipment(entry.equipment, language)}</td>\n        <td>{entry.bodyweightKg === 0 ? null : wtcls}</td>\n        <td>{entry.bodyweightKg === 0 ? null : displayWeight(bw, language)}</td>\n        <td>{entry.age === 0 ? null : displayNumber(entry.age, language)}</td>\n        <td>{squatKg === 0 ? \"\" : displayWeight(squat, language)}</td>\n        <td>{benchKg === 0 ? \"\" : displayWeight(bench, language)}</td>\n        <td>{deadliftKg === 0 ? \"\" : displayWeight(deadlift, language)}</td>\n        <td>{totalKg === 0 ? \"\" : displayWeight(total, language)}</td>\n        <td>{pointsStr}</td>\n      </tr>\n    );\n  };\n\n  renderCategoryResults = (results: PointsCategoryResults, key: number): JSX.Element | null => {\n    const { category, orderedEntries } = results;\n    const language = this.props.language;\n    const sex: string = localizeSexPlural(category.sex, language);\n\n    // Gather rows.\n    const rows = [];\n    for (let i = 0; i < orderedEntries.length; i++) {\n      const row = this.renderEntryRow(orderedEntries[i], category, i);\n      if (row !== null) {\n        rows.push(row);\n      }\n    }\n\n    // If all lifters were No-Show, skip displaying this category.\n    if (rows.length === 0) {\n      return null;\n    }\n\n    let eqpstr: string = localizeEquipment(category.equipment, language);\n    if (this.props.combineSleevesAndWraps && (category.equipment === \"Sleeves\" || category.equipment === \"Wraps\")) {\n      eqpstr = getString(\"results.combined-sleeves-wraps\", language);\n    }\n\n    const noviceOrMember = category.isNovice\n      ? getString(\"results.novice\", language)\n      : getString(\"results.member\", language);\n\n    const template = getString(\"results.category-template\", language);\n    const categoryString = template\n      .replace(\"{sex}\", sex)\n      .replace(\"{noviceOrMember}\", noviceOrMember)\n      .replace(\"{equipment}\", eqpstr)\n      .replace(\"{event}\", localizeEvent(category.event, language));\n\n    return (\n      <Card key={key} style={{ marginTop: \"17px\" }}>\n        <Card.Header>{categoryString}</Card.Header>\n        <Card.Body>\n          <Table striped hover size=\"sm\">\n            <thead>\n              <tr>\n                <th>{getString(\"results.column-rank\", language)}</th>\n                <th>{getString(\"lifting.column-lifter\", language)}</th>\n                <th>{getString(\"results.column-sex\", language)}</th>\n                <th>{getString(\"lifting.column-division\", language)}</th>\n                <th>{getString(\"results.column-equipment\", language)}</th>\n                <th>{getString(\"lifting.column-weightclass\", language)}</th>\n                <th>{getString(\"lifting.column-bodyweight\", language)}</th>\n                <th>{getString(\"lifting.column-age\", language)}</th>\n                <th>{getString(\"flight-order.squat-column-header\", language)}</th>\n                <th>{getString(\"flight-order.bench-column-header\", language)}</th>\n                <th>{getString(\"flight-order.deadlift-column-header\", language)}</th>\n                <th>{getString(\"lifting.column-finaltotal\", language)}</th>\n                <th>\n                  {this.props.ageCoefficients === \"None\"\n                    ? getString(\"lifting.column-finalpoints\", language)\n                    : getString(\"results.column-age-points\", language)}\n                </th>\n              </tr>\n            </thead>\n            <tbody>{rows}</tbody>\n          </Table>\n        </Card.Body>\n      </Card>\n    );\n  };\n\n  render() {\n    let entries = this.props.entries;\n\n    // If this is for Best Masters lifter, just include non-standard-aged lifters.\n    if (this.props.agePointsCategory !== \"BestLifter\") {\n      entries = entries.filter((e) => {\n        // Filter out based on age.\n        switch (this.props.agePointsCategory) {\n          case \"BestLifter\":\n            break;\n          case \"BestMastersLifter\":\n            // The coefficients logic below will handle older lifters\n            // according to the chosen age coefficient system.\n            if (e.age <= 27) {\n              return false;\n            }\n            break;\n          case \"BestJuniorsLifter\":\n            // The coefficients logic below will handle older lifters\n            // according to the chosen age coefficient system.\n            if (e.age >= 27) {\n              return false;\n            }\n            break;\n          default:\n            checkExhausted(this.props.agePointsCategory);\n            break;\n        }\n\n        // Only include lifters who get an age bump.\n        switch (this.props.ageCoefficients) {\n          case \"None\":\n            return true;\n          case \"FosterMcCulloch\":\n            return fosterMcCulloch(e.age) !== 1.0;\n          default:\n            checkExhausted(this.props.ageCoefficients);\n            return true;\n        }\n      });\n    }\n\n    const results = getAllRankings(\n      entries,\n      this.props.formula,\n      this.props.ageCoefficients,\n      this.props.combineSleevesAndWraps,\n      this.props.inKg,\n      this.props.meetDate\n    );\n\n    const categoryCards = [];\n    for (let i = 0; i < results.length; i++) {\n      const panel = this.renderCategoryResults(results[i], i);\n      if (panel !== null) {\n        categoryCards.push(panel);\n      }\n    }\n\n    return <div>{categoryCards}</div>;\n  }\n}\n\nconst mapStateToProps = (state: GlobalState, ownProps: OwnProps): StateProps => {\n  const day = Number(ownProps.day);\n  let entries = state.registration.entries;\n  if (day > 0) {\n    entries = entries.filter((e) => e.day === day);\n  }\n\n  return {\n    inKg: state.meet.inKg,\n    meetName: state.meet.name,\n    meetDate: state.meet.date,\n    formula: state.meet.formula,\n    combineSleevesAndWraps: state.meet.combineSleevesAndWraps,\n    lengthDays: state.meet.lengthDays,\n    weightClassesKgMen: state.meet.weightClassesKgMen,\n    weightClassesKgWomen: state.meet.weightClassesKgWomen,\n    weightClassesKgMx: state.meet.weightClassesKgMx,\n    language: state.language,\n    entries: entries,\n  };\n};\n\nexport default connect(mapStateToProps)(ByPoints);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Exports data to a CSV format easily importable by OpenPowerlifting.\n\nimport { csvDate, csvString, Csv } from \"./csv\";\nimport { getFinalResults } from \"../divisionPlace\";\nimport { getPoints } from \"../coefficients/coefficients\";\nimport { wtclsStrKg2Lbs } from \"../../reducers/meetReducer\";\nimport {\n  getAge,\n  getBest3SquatKg,\n  getBest3BenchKg,\n  getBest3DeadliftKg,\n  getFinalEventTotalKg,\n  entryHasLifted,\n  MAX_ATTEMPTS,\n} from \"../entry\";\nimport { displayPoints, displayWeight, kg2lbs } from \"../units\";\n\nimport { Category, CategoryResults } from \"../divisionPlace\";\nimport { Entry, Equipment, Formula } from \"../../types/dataTypes\";\nimport { GlobalState, MeetState } from \"../../types/stateTypes\";\nimport { checkExhausted } from \"../../types/utils\";\n\nconst makeMeetCsv = (meet: MeetState): Csv => {\n  const csv = new Csv();\n  csv.fieldnames = [\"Federation\", \"Date\", \"MeetCountry\", \"MeetState\", \"MeetTown\", \"MeetName\", \"Formula\"];\n\n  const row: Array<string> = [\n    csvString(meet.federation),\n    csvDate(meet.date),\n    csvString(meet.country),\n    csvString(meet.state),\n    csvString(meet.city),\n    csvString(meet.name),\n    csvString(meet.formula),\n  ];\n  csv.rows = [row];\n\n  // An optional RuleSet column may be provided.\n  if (meet.combineSleevesAndWraps === true) {\n    csv.fieldnames.push(\"RuleSet\");\n    csv.rows[0].push(\"CombineRawAndWraps\");\n  }\n\n  return csv;\n};\n\nconst standardizeEquipment = (eq: Equipment): string => {\n  switch (eq) {\n    case \"Bare\":\n      return \"Raw\";\n    case \"Sleeves\":\n      return \"Raw\";\n    case \"Wraps\":\n      return \"Wraps\";\n    case \"Single-ply\":\n      return \"Single-ply\";\n    case \"Multi-ply\":\n      return \"Multi-ply\";\n    case \"Unlimited\":\n      return \"Unlimited\";\n    default:\n      checkExhausted(eq);\n      return \"Raw\";\n  }\n};\n\nconst addEntriesRow = (\n  csv: Csv,\n  category: Category,\n  inKg: boolean,\n  meetDate: string,\n  formula: Formula,\n  entry: Entry,\n  index: number\n) => {\n  const unit: string = inKg ? \"Kg\" : \"LBS\";\n  const finalEventTotalKg = getFinalEventTotalKg(entry, category.event);\n\n  // Helper functions to keep things one-liners below. Handles Kg/Lbs conversion.\n  const weight = (kg: number): string => {\n    return displayWeight(inKg ? kg : kg2lbs(kg));\n  };\n  const wtcls = (cls: string): string => {\n    return inKg ? cls : wtclsStrKg2Lbs(cls);\n  };\n\n  // Initialize an empty row with all columns available.\n  const row: Array<string> = Array(csv.fieldnames.length).fill(\"\");\n\n  if (!entryHasLifted(entry)) {\n    row[csv.index(\"Place\")] = \"NS\"; // No-Show.\n  } else if (entry.guest) {\n    row[csv.index(\"Place\")] = \"G\"; // Guest\n  } else {\n    row[csv.index(\"Place\")] = finalEventTotalKg === 0 ? \"DQ\" : csvString(index + 1);\n  }\n\n  row[csv.index(\"Name\")] = csvString(entry.name);\n  row[csv.index(\"Instagram\")] = csvString(entry.instagram);\n  row[csv.index(\"Sex\")] = csvString(entry.sex);\n  row[csv.index(\"BirthDate\")] = csvDate(entry.birthDate);\n  row[csv.index(\"Age\")] = csvString(getAge(entry, meetDate));\n  row[csv.index(\"Country\")] = csvString(entry.country);\n  row[csv.index(\"State\")] = csvString(entry.state);\n  row[csv.index(\"Equipment\")] = csvString(standardizeEquipment(entry.equipment));\n  row[csv.index(\"Division\")] = csvString(category.division);\n  row[csv.index(\"Bodyweight\" + unit)] = csvString(weight(entry.bodyweightKg));\n  row[csv.index(\"WeightClass\" + unit)] = csvString(wtcls(category.weightClassStr));\n  row[csv.index(\"Total\" + unit)] = csvString(weight(finalEventTotalKg));\n  row[csv.index(\"Event\")] = csvString(category.event);\n  row[csv.index(\"Team\")] = csvString(entry.team);\n\n  // Squat.\n  if (category.event.includes(\"S\")) {\n    row[csv.index(\"Best3Squat\" + unit)] = csvString(weight(getBest3SquatKg(entry)));\n    for (let i = 0; i < MAX_ATTEMPTS; i++) {\n      const field = \"Squat\" + (i + 1) + unit;\n      row[csv.index(field)] = csvString(weight(entry.squatKg[i] * entry.squatStatus[i]));\n    }\n  }\n\n  // Bench.\n  if (category.event.includes(\"B\")) {\n    row[csv.index(\"Best3Bench\" + unit)] = csvString(weight(getBest3BenchKg(entry)));\n    for (let i = 0; i < MAX_ATTEMPTS; i++) {\n      const field = \"Bench\" + (i + 1) + unit;\n      row[csv.index(field)] = csvString(weight(entry.benchKg[i] * entry.benchStatus[i]));\n    }\n  }\n\n  // Deadlift.\n  if (category.event.includes(\"D\")) {\n    row[csv.index(\"Best3Deadlift\" + unit)] = csvString(weight(getBest3DeadliftKg(entry)));\n    for (let i = 0; i < MAX_ATTEMPTS; i++) {\n      const field = \"Deadlift\" + (i + 1) + unit;\n      row[csv.index(field)] = csvString(weight(entry.deadliftKg[i] * entry.deadliftStatus[i]));\n    }\n  }\n\n  // Points. OpenPowerlifting does not use this column, but people have asked for it.\n  const points = getPoints(formula, entry, category.event, finalEventTotalKg, inKg);\n  row[csv.index(\"Points\")] = csvString(points === 0 ? \"\" : displayPoints(points, \"en\"));\n\n  csv.rows.push(row);\n};\n\nconst makeEntriesCsv = (state: GlobalState): Csv => {\n  const inKg: boolean = state.meet.inKg;\n  const unit: string = inKg ? \"Kg\" : \"LBS\";\n\n  const csv = new Csv();\n\n  const squatFieldnames = [];\n  for (let i = 0; i < MAX_ATTEMPTS; i++) {\n    squatFieldnames.push(\"Squat\" + (i + 1) + unit);\n  }\n  squatFieldnames.push(\"Best3Squat\" + unit);\n\n  const benchFieldnames = [];\n  for (let i = 0; i < MAX_ATTEMPTS; i++) {\n    benchFieldnames.push(\"Bench\" + (i + 1) + unit);\n  }\n  benchFieldnames.push(\"Best3Bench\" + unit);\n\n  const deadliftFieldnames = [];\n  for (let i = 0; i < MAX_ATTEMPTS; i++) {\n    deadliftFieldnames.push(\"Deadlift\" + (i + 1) + unit);\n  }\n  deadliftFieldnames.push(\"Best3Deadlift\" + unit);\n\n  csv.fieldnames = Array.prototype.concat(\n    [\"Place\", \"Name\", \"Instagram\", \"Sex\", \"BirthDate\", \"Age\", \"Country\", \"State\"],\n    [\"Equipment\", \"Division\", \"Bodyweight\" + unit, \"WeightClass\" + unit],\n    squatFieldnames,\n    benchFieldnames,\n    deadliftFieldnames,\n    [\"Total\" + unit, \"Points\", \"Event\", \"Team\"]\n  );\n\n  const results: Array<CategoryResults> = getFinalResults(\n    state.registration.entries,\n    state.meet.weightClassesKgMen,\n    state.meet.weightClassesKgWomen,\n    state.meet.weightClassesKgMx,\n    state.meet.combineSleevesAndWraps\n  );\n\n  const meet_date = state.meet.date;\n  const formula: Formula = state.meet.formula;\n\n  for (let i = 0; i < results.length; i++) {\n    const { category, orderedEntries } = results[i];\n\n    for (let j = 0; j < orderedEntries.length; j++) {\n      const entry = orderedEntries[j];\n      if (!entry.novice) {\n        addEntriesRow(csv, category, inKg, meet_date, formula, entry, j);\n      }\n    }\n  }\n\n  return csv;\n};\n\nexport const exportAsOplCsv = (state: GlobalState): string => {\n  const meetCsv: Csv = makeMeetCsv(state.meet);\n\n  const entriesCsv: Csv = makeEntriesCsv(state);\n  entriesCsv.removeEmptyColumns();\n\n  const versionStr = \"OPL Format v1,Submit by email:,issues@openpowerlifting.org\";\n\n  return versionStr + \"\\n\\n\" + meetCsv.toString() + \"\\n\" + entriesCsv.toString();\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Exports data to a spreadsheet format used by the USAPL.\n\nimport { csvString, Csv } from \"./csv\";\nimport { getFinalResults } from \"../divisionPlace\";\nimport { displayWeight } from \"../units\";\n\nimport { Category, CategoryResults } from \"../divisionPlace\";\nimport { Entry, Event } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { checkExhausted } from \"../../types/utils\";\n\n// Translates the event from our format to the NextLifter format.\nconst translateEvent = (ev: Event): string => {\n  switch (ev) {\n    // Variants present in the NextLifter software.\n    case \"SBD\":\n      return \"PL\";\n    case \"BD\":\n      return \"PP\";\n    case \"S\":\n      return \"SQ\";\n    case \"B\":\n      return \"BP\";\n    case \"D\":\n      return \"DL\";\n\n    // These variants aren't selectable in NextLifter, so the USAPL doesn't use them.\n    case \"SB\":\n      return \"SB\";\n    case \"SD\":\n      return \"SD\";\n    default:\n      checkExhausted(ev);\n      return ev;\n  }\n};\n\n// Converts the ISO8601 entry.birthDate to USAPL MM/DD/YYYY format.\nconst makeBirthDate = (entry: Entry): string => {\n  if (entry.birthDate === undefined || entry.birthDate === \"\") {\n    return \"\";\n  }\n  const [year, month, day]: Array<string> = entry.birthDate.split(\"-\");\n  return month + \"/\" + day + \"/\" + year;\n};\n\n// Given an Entry and its index in the CategoryResults.orderedEntries,\n// render all that information as a one-liner CSV string.\nconst addDataRow = (csv: Csv, category: Category, entry: Entry): void => {\n  const hasSquat: boolean = category.event.includes(\"S\");\n  const hasBench: boolean = category.event.includes(\"B\");\n  const hasDL: boolean = category.event.includes(\"D\");\n\n  // Initialize an empty row with all columns available.\n  const row: Array<string> = Array(csv.fieldnames.length).fill(\"\");\n\n  row[csv.index(\"Name\")] = csvString(entry.name);\n  row[csv.index(\"Team\")] = csvString(entry.team);\n  row[csv.index(\"Div\")] = csvString(category.division);\n  row[csv.index(\"Bwt - kg\")] = csvString(displayWeight(entry.bodyweightKg));\n  row[csv.index(\"IPF Wt Cls\")] = csvString(category.weightClassStr);\n  row[csv.index(\"DOB\")] = csvString(makeBirthDate(entry));\n  row[csv.index(\"Squat 1\")] = csvString(displayWeight(hasSquat ? entry.squatKg[0] * entry.squatStatus[0] : 0));\n  row[csv.index(\"Squat 2\")] = csvString(displayWeight(hasSquat ? entry.squatKg[1] * entry.squatStatus[1] : 0));\n  row[csv.index(\"Squat 3\")] = csvString(displayWeight(hasSquat ? entry.squatKg[2] * entry.squatStatus[2] : 0));\n  row[csv.index(\"Bench 1\")] = csvString(displayWeight(hasBench ? entry.benchKg[0] * entry.benchStatus[0] : 0));\n  row[csv.index(\"Bench 2\")] = csvString(displayWeight(hasBench ? entry.benchKg[1] * entry.benchStatus[1] : 0));\n  row[csv.index(\"Bench 3\")] = csvString(displayWeight(hasBench ? entry.benchKg[2] * entry.benchStatus[2] : 0));\n  row[csv.index(\"Deadlift 1\")] = csvString(displayWeight(hasDL ? entry.deadliftKg[0] * entry.deadliftStatus[0] : 0));\n  row[csv.index(\"Deadlift 2\")] = csvString(displayWeight(hasDL ? entry.deadliftKg[1] * entry.deadliftStatus[1] : 0));\n  row[csv.index(\"Deadlift 3\")] = csvString(displayWeight(hasDL ? entry.deadliftKg[2] * entry.deadliftStatus[2] : 0));\n  row[csv.index(\"Event\")] = csvString(translateEvent(category.event));\n  row[csv.index(\"State\")] = csvString(entry.state);\n  row[csv.index(\"MemberID\")] = csvString(entry.memberId);\n  // TODO: Drug Test.\n\n  csv.rows.push(row);\n};\n\nexport const exportAsUSAPLCsv = (state: GlobalState): string => {\n  const csv = new Csv();\n  csv.fieldnames = [\n    \"Name\",\n    \"Team\",\n    \"Div\", // Division.\n    \"Bwt - kg\", // Bodyweight, kg.\n    \"IPF Wt Cls\", // IPF Weight Class (SHW as \"120+\", same format).\n    \"DOB\", // Date of Birth, in MM/DD/YYYY format.\n    \"Squat 1\", // Units unspecified, but seem to be kg.\n    \"Squat 2\",\n    \"Squat 3\",\n    \"Bench 1\",\n    \"Bench 2\",\n    \"Bench 3\",\n    \"Deadlift 1\",\n    \"Deadlift 2\",\n    \"Deadlift 3\",\n    \"Event\", // In NextLifter format (PL, BO, etc.).\n    \"State\", // USA state of residence of the lifter, as abbreviation.\n    \"MemberID\",\n    \"Drug Test\", // \"Y\" if a test was performed, blank otherwise.\n  ];\n\n  const results: Array<CategoryResults> = getFinalResults(\n    state.registration.entries,\n    state.meet.weightClassesKgMen,\n    state.meet.weightClassesKgWomen,\n    state.meet.weightClassesKgMx,\n    state.meet.combineSleevesAndWraps\n  );\n\n  for (let i = 0; i < results.length; i++) {\n    const { category, orderedEntries } = results[i];\n\n    for (let j = 0; j < orderedEntries.length; j++) {\n      addDataRow(csv, category, orderedEntries[j]);\n    }\n  }\n\n  return csv.toString();\n};\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// The parent component of the Results page, contained by the ResultsContainer.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Button from \"react-bootstrap/Button\";\nimport Card from \"react-bootstrap/Card\";\nimport CardDeck from \"react-bootstrap/CardDeck\";\nimport FormControl from \"react-bootstrap/FormControl\";\n\nimport { saveAs } from \"file-saver\";\n\nimport ByDivision from \"./ByDivision\";\nimport ByPoints from \"./ByPoints\";\nimport ErrorModal from \"../ErrorModal\";\n\nimport { mergePlatform } from \"../../actions/registrationActions\";\n\nimport { liftingPresentOnPlatform, getWhetherPlatformsHaveLifted } from \"../../logic/entry\";\nimport { getString } from \"../../logic/strings\";\nimport { exportAsOplCsv } from \"../../logic/export/oplcsv\";\nimport { exportAsUSAPLCsv } from \"../../logic/export/usapl\";\n\nimport { Entry, Language } from \"../../types/dataTypes\";\nimport { GlobalState } from \"../../types/stateTypes\";\n\nimport styles from \"./ResultsView.module.scss\";\nimport { FormControlTypeHack, checkExhausted, assertString } from \"../../types/utils\";\nimport { Dispatch } from \"redux\";\n\ntype ResultsBy = \"Division\" | \"Points\" | \"BestMastersLifter\" | \"BestJuniorsLifter\";\n\nconst assertValidResultsBy = (value: string): value is ResultsBy => {\n  const resultsBy = value as ResultsBy;\n  switch (resultsBy) {\n    case \"BestJuniorsLifter\":\n    case \"BestMastersLifter\":\n    case \"Division\":\n    case \"Points\":\n      return true;\n    default:\n      checkExhausted(resultsBy);\n      throw new Error(`Expected a valid value for ResultsBy. Got \"${value}\"`);\n  }\n};\n\ninterface StateProps {\n  global: GlobalState;\n  language: Language;\n}\n\ninterface DispatchProps {\n  mergePlatform: (day: number, platform: number, platformEntries: Array<Entry>) => void;\n}\n\ntype Props = StateProps & DispatchProps;\n\ninterface InternalState {\n  day: number;\n  by: ResultsBy;\n  // Controls the ErrorModal popup. Shown when error !== \"\".\n  error: string;\n}\n\n// FIXME: Unfortunate use of globals :/ I don't have a better idea.\n// This is to pass information from the merge button click handler to the\n// file loader click handler.\nlet globalMergeDay: number = 0;\nlet globalMergePlatform: number = 0;\n\nclass ResultsView extends React.Component<Props, InternalState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.handleDayChange = this.handleDayChange.bind(this);\n    this.handleByChange = this.handleByChange.bind(this);\n    this.handleExportAsOplCsvClick = this.handleExportAsOplCsvClick.bind(this);\n    this.handleExportAsUSAPLCsvClick = this.handleExportAsUSAPLCsvClick.bind(this);\n    this.handleExportPlatformClick = this.handleExportPlatformClick.bind(this);\n    this.handleMergePlatformClick = this.handleMergePlatformClick.bind(this);\n    this.handleLoadFileInput = this.handleLoadFileInput.bind(this);\n    this.closeErrorModal = this.closeErrorModal.bind(this);\n    this.makePlatformMergeButtons = this.makePlatformMergeButtons.bind(this);\n\n    this.state = {\n      day: 0, // Meaning \"all\". Flow complained about mixing numbers and strings.\n      by: \"Division\",\n      error: \"\",\n    };\n  }\n\n  makeDayOptions = () => {\n    const language = this.props.language;\n    const options = [\n      <option key={\"all\"} value={0}>\n        {getString(\"results.all-days-together\", language)}\n      </option>,\n    ];\n\n    const justDayTemplate = getString(\"results.just-day-n\", language);\n    for (let day = 1; day <= this.props.global.meet.lengthDays; day++) {\n      options.push(\n        <option key={day} value={day}>\n          {justDayTemplate.replace(\"{N}\", String(day))}\n        </option>\n      );\n    }\n    return options;\n  };\n\n  handleDayChange = (event: React.FormEvent<FormControlTypeHack>) => {\n    const day = Number(event.currentTarget.value);\n    if (this.state.day !== day) {\n      this.setState({ day: day });\n    }\n  };\n\n  handleByChange = (event: React.FormEvent<FormControlTypeHack>) => {\n    const by = event.currentTarget.value;\n    if (this.state.by !== by && assertString(by) && assertValidResultsBy(by)) {\n      this.setState({ by: by });\n    }\n  };\n\n  handleExportAsOplCsvClick = () => {\n    // TODO: Share this logic with HomeContainer.\n    let meetname = this.props.global.meet.name;\n    if (meetname === \"\") {\n      meetname = getString(\"common.unnamed-filename\", this.props.language);\n    }\n    meetname = meetname.replace(/ /g, \"-\");\n\n    const csv: string = exportAsOplCsv(this.props.global);\n    const blob = new Blob([csv], { type: \"text/csv;charset=utf-8\" });\n    saveAs(blob, meetname + \".opl.csv\");\n  };\n\n  handleExportAsUSAPLCsvClick = () => {\n    // TODO: Share this logic with handleExportAsOplCsvClick.\n    let meetname = this.props.global.meet.name;\n    if (meetname === \"\") {\n      meetname = getString(\"common.unnamed-filename\", this.props.language);\n    }\n    meetname = meetname.replace(/ /g, \"-\");\n\n    const csv: string = exportAsUSAPLCsv(this.props.global);\n    const blob = new Blob([csv], { type: \"text/csv;charset=utf-8\" });\n    saveAs(blob, meetname + \".USAPL.csv\");\n  };\n\n  handleExportPlatformClick = (day: number, platform: number) => {\n    // TODO: Share this logic with handleExportAsOplCsvClick.\n    const language = this.props.language;\n    let meetname = this.props.global.meet.name;\n    if (meetname === \"\") {\n      meetname = getString(\"common.unnamed-filename\", language);\n    }\n    meetname = meetname.replace(/ /g, \"-\");\n\n    const template = getString(\"results.platform-export-filename\", language);\n    const exportname = template\n      .replace(\"{day}\", String(day))\n      .replace(\"{platform}\", String(platform))\n      .replace(\"{meetName}\", meetname);\n\n    const state = JSON.stringify(this.props.global);\n    const blob = new Blob([state], { type: \"application/json;charset=utf-8\" });\n    saveAs(blob, exportname + \".export.openlifter\");\n  };\n\n  // The file input is hidden, and we want to use a button to activate it.\n  // This event handler makes a proxy call to the *real* event handler.\n  handleMergePlatformClick = (day: number, platform: number) => {\n    const loadHelper = document.getElementById(\"loadhelper\");\n    if (loadHelper !== null) {\n      globalMergeDay = day;\n      globalMergePlatform = platform;\n      loadHelper.click();\n    }\n  };\n\n  // Called when a file is selected for merging platform data.\n  handleLoadFileInput = () => {\n    const loadHelper = document.getElementById(\"loadhelper\");\n    if (loadHelper === null || !(loadHelper instanceof HTMLInputElement) || loadHelper.files === null) {\n      return;\n    }\n\n    // Get the (day, platform) from global state.\n    const day: number = globalMergeDay;\n    const platform: number = globalMergePlatform;\n\n    // Remember the props in the onload() closure.\n    const props = this.props;\n    const language = props.language;\n\n    const rememberThis = this;\n    const selectedFile = loadHelper.files[0];\n    const reader = new FileReader();\n    reader.onload = () => {\n      let error: string | null = null;\n\n      // If this occurs, we've introduced a bug when initiating the file reader, or the read failed.\n      // Add this check as a guard so the typing is narrowed\n      if (typeof reader.result !== \"string\") {\n        window.alert(getString(\"error.internal-error\", language));\n        return;\n      }\n\n      try {\n        const obj: GlobalState = JSON.parse(reader.result);\n\n        // stateVersion must match.\n        if (obj.versions.stateVersion !== props.global.versions.stateVersion) {\n          const e = getString(\"error.version-mismatch\", language);\n          error = e\n            .replace(\"{thisVersion}\", props.global.versions.stateVersion)\n            .replace(\"{otherVersion}\", obj.versions.stateVersion);\n        } else if (obj.meet.name !== props.global.meet.name) {\n          // The meet name must match, for sanity checking.\n          const e = getString(\"error.meetname-mismatch\", language);\n          error = e.replace(\"{thisName}\", props.global.meet.name).replace(\"{otherName}\", obj.meet.name);\n        } else if (!liftingPresentOnPlatform(obj.registration.entries, day, platform)) {\n          // The meet must actually contain data from the given (day, platform).\n          const e = getString(\"error.no-platform-data\", language);\n          error = e.replace(\"{day}\", String(day)).replace(\"{platform}\", String(platform));\n        } else {\n          // Sanity checks passed: fire off a mergePlatform action!\n          const platformEntries = obj.registration.entries.filter((e) => {\n            return e.day === day && e.platform === platform;\n          });\n          props.mergePlatform(day, platform, platformEntries);\n        }\n      } catch (err) {\n        error = getString(\"error.not-json\", language);\n      }\n\n      if (typeof error === \"string\") {\n        rememberThis.setState({ error: error });\n      }\n    };\n    reader.readAsText(selectedFile);\n  };\n\n  closeErrorModal = () => {\n    this.setState({ error: \"\" });\n  };\n\n  makePlatformMergeButtons = () => {\n    // Array accessed by platformsHaveLifted[day-1][platform-1].\n    const platformsHaveLifted: Array<Array<boolean>> = getWhetherPlatformsHaveLifted(\n      this.props.global.meet.platformsOnDays,\n      this.props.global.registration.entries\n    );\n\n    const language = this.props.language;\n    const combineTemplate = getString(\"results.combine-platforms-header\", language);\n    const mergeTemplate = getString(\"results.merge-platform\", language);\n    const exportTemplate = getString(\"results.export-platform\", language);\n\n    const forms = [];\n    const numDays = Math.min(this.props.global.meet.lengthDays, platformsHaveLifted.length);\n\n    for (let i = 0; i < numDays; i++) {\n      const liftedOnDay = platformsHaveLifted[i];\n\n      const buttons = [];\n      for (let j = 0; j < liftedOnDay.length; j++) {\n        const lifted = liftedOnDay[j];\n        const variant = lifted === true ? \"success\" : \"warning\";\n        const marginStyle = j > 0 ? { marginLeft: \"14px\" } : undefined;\n\n        const actionTemplate = lifted === true ? exportTemplate : mergeTemplate;\n        buttons.push(\n          <Button\n            key={i + \"-\" + j}\n            variant={variant}\n            style={marginStyle}\n            onClick={() => {\n              lifted === true\n                ? this.handleExportPlatformClick(i + 1, j + 1)\n                : this.handleMergePlatformClick(i + 1, j + 1);\n            }}\n          >\n            {actionTemplate.replace(\"{day}\", String(i + 1)).replace(\"{platform}\", String(j + 1))}\n          </Button>\n        );\n      }\n\n      forms.push(\n        <div key={i}>\n          <div>{combineTemplate.replace(\"{N}\", String(i + 1))}</div>\n          <div>{buttons}</div>\n          {i < platformsHaveLifted.length - 1 ? <br /> : null}\n        </div>\n      );\n    }\n\n    return forms;\n  };\n\n  render() {\n    const language = this.props.language;\n    let results = null;\n    switch (this.state.by) {\n      case \"Division\":\n        results = <ByDivision key={this.state.day} day={this.state.day} />;\n        break;\n      case \"Points\":\n        results = (\n          <ByPoints key={this.state.day} day={this.state.day} ageCoefficients=\"None\" agePointsCategory=\"BestLifter\" />\n        );\n        break;\n      case \"BestMastersLifter\":\n        results = (\n          <ByPoints\n            key={this.state.day}\n            day={this.state.day}\n            ageCoefficients={this.props.global.meet.ageCoefficients}\n            agePointsCategory=\"BestMastersLifter\"\n          />\n        );\n        break;\n      case \"BestJuniorsLifter\":\n        results = (\n          <ByPoints\n            key={this.state.day}\n            day={this.state.day}\n            ageCoefficients={this.props.global.meet.ageCoefficients}\n            agePointsCategory=\"BestJuniorsLifter\"\n          />\n        );\n        break;\n      default:\n        break;\n    }\n\n    let daySelector = null;\n    if (this.props.global.meet.lengthDays > 1) {\n      daySelector = (\n        <FormControl\n          value={this.state.day.toString()}\n          as=\"select\"\n          onChange={this.handleDayChange}\n          className={`custom-select ${styles.dropdown}`}\n          style={{ marginRight: \"15px\" }}\n        >\n          {this.makeDayOptions()}\n        </FormControl>\n      );\n    }\n\n    return (\n      <div>\n        <ErrorModal\n          error={this.state.error}\n          title={getString(\"results.merge-error-title\", language)}\n          show={this.state.error !== \"\"}\n          close={this.closeErrorModal}\n        />\n\n        <CardDeck>\n          <Card style={{ marginBottom: \"17px\" }}>\n            <Card.Header>\n              <FormattedMessage id=\"results.merge-platforms-card-header\" defaultMessage=\"Merge Platforms\" />\n            </Card.Header>\n            <Card.Body>\n              <div style={{ fontWeight: \"bold\" }}>\n                <FormattedMessage\n                  id=\"results.merge-platforms-warning\"\n                  defaultMessage=\"Merging platforms will overwrite data. Please save before merging.\"\n                />\n              </div>\n              <br />\n              {this.makePlatformMergeButtons()}\n            </Card.Body>\n          </Card>\n\n          <Card style={{ marginBottom: \"17px\" }}>\n            <Card.Header>\n              <FormattedMessage id=\"results.export-results-card-header\" defaultMessage=\"Export Official Results\" />\n            </Card.Header>\n            <Card.Body>\n              <Button onClick={this.handleExportAsOplCsvClick}>\n                <FormattedMessage\n                  id=\"results.export-openpowerlifting-button\"\n                  defaultMessage=\"Export for OpenPowerlifting\"\n                />\n              </Button>\n\n              <Button onClick={this.handleExportAsUSAPLCsvClick} style={{ marginLeft: \"14px\" }}>\n                <FormattedMessage id=\"results.export-usapl-button\" defaultMessage=\"Export for USAPL\" />\n              </Button>\n            </Card.Body>\n          </Card>\n        </CardDeck>\n\n        <Card>\n          <Card.Header>\n            <FormattedMessage id=\"results.results-card-header\" defaultMessage=\"Results For...\" />\n          </Card.Header>\n          <Card.Body className={styles.controlCard}>\n            {daySelector}\n\n            <FormControl\n              value={this.state.by}\n              as=\"select\"\n              onChange={this.handleByChange}\n              className={`custom-select ${styles.dropdown}`}\n            >\n              <option value=\"Division\">{getString(\"results.by-division\", language)}</option>\n              {this.props.global.meet.ageCoefficients !== \"None\" ? (\n                <option value=\"BestJuniorsLifter\">{getString(\"results.best-juniors-lifter\", language)}</option>\n              ) : null}\n              {this.props.global.meet.ageCoefficients !== \"None\" ? (\n                <option value=\"BestMastersLifter\">{getString(\"results.best-masters-lifter\", language)}</option>\n              ) : null}\n              <option value=\"Points\">{getString(\"results.best-lifter\", language)}</option>\n            </FormControl>\n          </Card.Body>\n        </Card>\n\n        {results}\n\n        <input\n          id=\"loadhelper\"\n          type=\"file\"\n          accept=\".openlifter,.openlifter.txt\"\n          style={{ display: \"none\" }}\n          onChange={this.handleLoadFileInput}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => {\n  return {\n    global: state,\n    language: state.language,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    mergePlatform: (day, platform, platformEntries) => dispatch(mergePlatform(day, platform, platformEntries)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ResultsView);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Container for the Results page.\n\nimport React from \"react\";\n\nimport ResultsView from \"../components/results/ResultsView\";\nimport styles from \"../components/common/ContentArea.module.scss\";\n\nclass ResultsContainer extends React.Component<{}> {\n  render() {\n    return (\n      <div className={styles.contentArea}>\n        <ResultsView />\n      </div>\n    );\n  }\n}\n\nexport default ResultsContainer;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Randomizes the Meet Setup state, for debugging.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Button from \"react-bootstrap/Button\";\n\nimport LocalizedString from \"../translations/LocalizedString\";\n\nimport { randomString, randomInt, randomFixedPoint } from \"./RandomizeHelpers\";\n\nimport {\n  setDivisions,\n  setFederation,\n  setLengthDays,\n  setMeetName,\n  setPlatformsOnDays,\n  setWeightClasses,\n} from \"../../actions/meetSetupActions\";\n\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { Dispatch } from \"redux\";\nimport { Sex } from \"../../types/dataTypes\";\n\ninterface DispatchProps {\n  setDivisions: (divisions: Array<string>) => void;\n  setFederation: (federation: string) => void;\n  setLengthDays: (length: number) => void;\n  setMeetName: (name: string) => void;\n  setPlatformsOnDays: (day: number, count: number) => void;\n  setWeightClasses: (sex: Sex, classesKg: number[]) => void;\n}\n\ntype Props = GlobalState & DispatchProps;\n\nconst NonsenseFederations = [\n  \"CTHULHU\",\n  \"USPLAWH\",\n  \"FIREFOX\",\n  \"PIZZAHUT\",\n  \"50% RAW\",\n  \"TODDLERS\",\n  \"COFFEE\",\n  \"THEBORG\",\n  \"LETITSNOW\",\n];\n\nconst NonsenseDivisions = [\"Masters\", \"Juniors\", \"Lawyers\", \"Infants\", \"Turtles\", \"Rabbits\"];\n\nclass RandomizeMeetSetupButton extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n    this.randomizeMeetSetup = this.randomizeMeetSetup.bind(this);\n  }\n\n  randomizeMeetSetup() {\n    // Set a gibberish MeetName.\n    // ==========================================\n    this.props.setMeetName(randomString() + randomString());\n\n    // Generate a nonsense federation.\n    // ==========================================\n    const fed = NonsenseFederations[randomInt(0, NonsenseFederations.length - 1)];\n    this.props.setFederation(fed);\n\n    // Generate nonsense weight classes.\n    // ==========================================\n    const numClassesMen = randomInt(5, 12);\n    const numClassesWomen = randomInt(4, 8);\n\n    let classesMen = [];\n    for (let i = 0; i < numClassesMen; i++) {\n      classesMen.push(randomFixedPoint(40, 145, 1));\n    }\n    classesMen = classesMen.sort((a, b) => Number(a) - Number(b));\n\n    let classesWomen = [];\n    for (let i = 0; i < numClassesWomen; i++) {\n      classesWomen.push(randomFixedPoint(35, 110, 1));\n    }\n    classesWomen = classesWomen.sort((a, b) => Number(a) - Number(b));\n\n    let classesMx = [];\n    for (let i = 0; i < numClassesWomen; i++) {\n      classesMx.push(randomFixedPoint(40, 120, 1));\n    }\n    classesMx = classesMx.sort((a, b) => Number(a) - Number(b));\n\n    this.props.setWeightClasses(\"M\", classesMen);\n    this.props.setWeightClasses(\"F\", classesWomen);\n    this.props.setWeightClasses(\"Mx\", classesMx);\n\n    // Generate nonsense days and platforms.\n    // ==========================================\n    const numDays = randomInt(1, 4);\n    this.props.setLengthDays(numDays);\n\n    for (let i = 0; i < numDays; i++) {\n      const day = i + 1;\n      const numPlatforms = randomInt(1, 2);\n      this.props.setPlatformsOnDays(day, numPlatforms);\n    }\n\n    // Generate nonsense divisions.\n    // ==========================================\n    const numDivisions = randomInt(1, 20);\n    const divisions = [];\n    for (let i = 0; i < numDivisions; i++) {\n      let div = NonsenseDivisions[randomInt(0, NonsenseDivisions.length - 1)];\n      if (Math.random() > 0.5) {\n        const age_lower = randomInt(1, 40);\n        const age_upper = randomInt(age_lower + 1, 99);\n        div = div + \" \" + String(age_lower) + \"-\" + String(age_upper);\n      }\n\n      // Disallow repeat divisions.\n      if (divisions.indexOf(div) === -1) {\n        divisions.push(div);\n      }\n    }\n    this.props.setDivisions(divisions);\n  }\n\n  render() {\n    return (\n      <Button onClick={this.randomizeMeetSetup}>\n        <LocalizedString id=\"nav.meet-setup\" />\n      </Button>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): GlobalState => ({\n  ...state,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    setDivisions: (divisions: Array<string>) => dispatch(setDivisions(divisions)),\n    setFederation: (federation: string) => dispatch(setFederation(federation)),\n    setLengthDays: (length: number) => dispatch(setLengthDays(length)),\n    setMeetName: (name: string) => dispatch(setMeetName(name)),\n    setPlatformsOnDays: (day: number, count: number) => dispatch(setPlatformsOnDays(day, count)),\n    setWeightClasses: (sex: Sex, classesKg: number[]) => dispatch(setWeightClasses(sex, classesKg)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RandomizeMeetSetupButton);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Randomizes the Registration page, for debugging.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Dispatch } from \"redux\";\n\nimport Button from \"react-bootstrap/Button\";\n\nimport LocalizedString from \"../translations/LocalizedString\";\n\nimport { randomInt } from \"./RandomizeHelpers\";\nimport { newRegistration, deleteRegistration } from \"../../actions/registrationActions\";\n\nimport { GlobalState } from \"../../types/stateTypes\";\nimport { Event, Entry, Sex, Equipment, Flight } from \"../../types/dataTypes\";\n\nconst NonsenseFirstNames = [\n  \"Aragorn\",\n  \"Arwen\",\n  \"Aule\",\n  \"Balin\",\n  \"Beorn\",\n  \"Beregond\",\n  \"Bert\",\n  \"Bifur\",\n  \"Bilbo\",\n  \"Bofur\",\n  \"Bolg\",\n  \"Bombur\",\n  \"Boromir\",\n  \"Bregalad\",\n  \"Bullroarer\",\n  \"Bungo\",\n  \"Carc\",\n  \"Celeborn\",\n  \"Dain\",\n  \"Denethor\",\n  \"Dori\",\n  \"Dwalin\",\n  \"Elrohir\",\n  \"Elrond\",\n  \"Eomer\",\n  \"Eowyn\",\n  \"Este\",\n  \"Faramir\",\n  \"Fili\",\n  \"Fredegar\",\n  \"Frodo\",\n  \"Galadriel\",\n  \"Galion\",\n  \"Gandalf\",\n  \"Gimli\",\n  \"Gloin\",\n  \"Glorfindel\",\n  \"Golfimbul\",\n  \"Gollum\",\n  \"Gothmog\",\n  \"Grima\",\n  \"Imrahil\",\n  \"Kili\",\n  \"Legolas\",\n  \"Lorien\",\n  \"Mandos\",\n  \"Manwe\",\n  \"Melkor\",\n  \"Meriadoc\",\n  \"Nessa\",\n  \"Nienna\",\n  \"Nori\",\n  \"Oin\",\n  \"Ori\",\n  \"Orome\",\n  \"Peregrin\",\n  \"Pippin\",\n  \"Radagast\",\n  \"Roac\",\n  \"Samwise\",\n  \"Saruman\",\n  \"Sauron\",\n  \"Shelob\",\n  \"Smaug\",\n  \"Theoden\",\n  \"Thorin\",\n  \"Thranduil\",\n  \"Tom\",\n  \"Treebeard\",\n  \"Tulkas\",\n  \"Ulmo\",\n  \"Vaire\",\n  \"Vana\",\n  \"Varda\",\n  \"William\",\n  \"Yavanna\",\n];\n\nconst NonsenseLastNames = [\n  \"Black\",\n  \"Burbage\",\n  \"Carrow\",\n  \"Cattermole\",\n  \"Chang\",\n  \"Clearwater\",\n  \"Crabbe\",\n  \"Creevey\",\n  \"Crouch\",\n  \"Delacour\",\n  \"Diggory\",\n  \"Dumbledore\",\n  \"Dursley\",\n  \"Edgecombe\",\n  \"Filch\",\n  \"Flitwick\",\n  \"Fudge\",\n  \"Goyle\",\n  \"Granger\",\n  \"Grindelwald\",\n  \"Hagrid\",\n  \"Hufflepuff\",\n  \"Kettleburn\",\n  \"Lockhart\",\n  \"Longbottom\",\n  \"Lovegood\",\n  \"Lupin\",\n  \"Malfoy\",\n  \"Marchbanks\",\n  \"McGonagall\",\n  \"McLaggen\",\n  \"Moody\",\n  \"Nott\",\n  \"Ogden\",\n  \"Ollivander\",\n  \"Parkinson\",\n  \"Pettigrew\",\n  \"Peverell\",\n  \"Pince\",\n  \"Podmore\",\n  \"Pomfrey\",\n  \"Potter\",\n  \"Quirrell\",\n  \"Riddle\",\n  \"Rookwood\",\n  \"Rowle\",\n  \"Runcorn\",\n  \"Scrimgeour\",\n  \"Shacklebolt\",\n  \"Shunpike\",\n  \"Sinistra\",\n  \"Slughorn\",\n  \"Slytherin\",\n  \"Snape\",\n  \"Spinnet\",\n  \"Sprout\",\n  \"Thicknesse\",\n  \"Tonks\",\n  \"Trelawney\",\n  \"Twycross\",\n  \"Umbridge\",\n  \"Vance\",\n  \"Voldemort\",\n  \"Weasley\",\n  \"Wood\",\n  \"Yaxley\",\n  \"Zabini\",\n];\n\ninterface DispatchProps {\n  newRegistration: (obj: Partial<Entry>) => void;\n  deleteRegistration: (entryId: number) => void;\n}\n\ntype Props = GlobalState & DispatchProps;\n\nclass RandomizeRegistrationButton extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n    this.deleteExistingRegistrations = this.deleteExistingRegistrations.bind(this);\n    this.generateEntries = this.generateEntries.bind(this);\n    this.randomizeRegistration = this.randomizeRegistration.bind(this);\n  }\n\n  deleteExistingRegistrations() {\n    const entryIds = this.props.registration.entries.map((e) => e.id);\n    for (let i = 0; i < entryIds.length; i++) {\n      this.props.deleteRegistration(entryIds[i]);\n    }\n  }\n\n  // Generate entries in a flight together, in case we want to give them\n  // similar properties.\n  generateEntries(day: number, platform: number, flight: Flight) {\n    const numLifters = randomInt(6, 18);\n\n    for (let i = 0; i < numLifters; i++) {\n      // Set a nonsense Name.\n      // ==========================================\n      const firstName = NonsenseFirstNames[randomInt(0, NonsenseFirstNames.length - 1)];\n      const lastName = NonsenseLastNames[randomInt(0, NonsenseLastNames.length - 1)];\n      const name = firstName + \" \" + lastName;\n\n      // Set a random Sex.\n      // ==========================================\n      const sexes: Sex[] = [\"M\", \"F\", \"Mx\"];\n      const sex: Sex = sexes[randomInt(0, sexes.length - 1)];\n\n      // 10% chance they're a guest.\n      // ==========================================\n      const isGuest: boolean = randomInt(1, 10) === 1;\n\n      // 90% chance they're able to break records.\n      // ==========================================\n      const canBreakRecords: boolean = randomInt(1, 10) > 1;\n\n      // Assign a random Team.\n      // ==========================================\n      const teams: string[] = [\"Team Red\", \"Team Green\", \"Team Blue\"];\n      const team: string = teams[randomInt(0, teams.length - 1)];\n\n      // Generate random events, making most lifters SBD.\n      // ==========================================\n      const events: Event[] = [];\n      if (Math.random() < 0.5) {\n        events.push(\"SBD\");\n      }\n      if (Math.random() < 0.1) {\n        events.push(\"BD\");\n      }\n      if (Math.random() < 0.1) {\n        events.push(\"S\");\n      }\n      if (Math.random() < 0.1) {\n        events.push(\"B\");\n      }\n      if (Math.random() < 0.1) {\n        events.push(\"D\");\n      }\n      if (events.length === 0) {\n        events.push(\"SBD\");\n      }\n\n      // Generate random equipment, making most lifters SBD,\n      // being careful that it matches their events.\n      // ==========================================\n      let hasSquat = false;\n      for (let i = 0; i < events.length; i++) {\n        if (events[i].includes(\"S\")) {\n          hasSquat = true;\n          break;\n        }\n      }\n\n      const equipmentSelect = Math.random();\n      let equipment: Equipment = \"Sleeves\";\n      if (equipmentSelect < 0.7) {\n        // Nothing, sleeves default case.\n      } else if (equipmentSelect < 0.9) {\n        if (hasSquat) {\n          equipment = \"Wraps\";\n        }\n      } else if (equipmentSelect < 0.95) {\n        equipment = \"Single-ply\";\n      } else if (equipmentSelect < 0.98) {\n        equipment = \"Multi-ply\";\n      } else {\n        equipment = \"Unlimited\";\n      }\n\n      // File into random divisions.\n      // ==========================================\n      const divisions = [];\n      if (this.props.meet.divisions.length > 0) {\n        const divisionsUpperBound = Math.max(1, this.props.meet.divisions.length - 1);\n        const numDivisions = randomInt(1, divisionsUpperBound);\n\n        // List of remaining available divisions.\n        const divchooser = this.props.meet.divisions.slice();\n\n        for (let i = 0; i < numDivisions; i++) {\n          const choice = randomInt(0, divchooser.length - 1);\n          divisions.push(divchooser[choice]);\n\n          // Delete the choice from the list of available divisions.\n          divchooser.splice(choice, 1);\n        }\n      }\n\n      this.props.newRegistration({\n        day: day,\n        platform: platform,\n        flight: flight,\n        name: name,\n        sex: sex,\n        team: team,\n        events: events,\n        equipment: equipment,\n        divisions: divisions,\n        guest: isGuest,\n        canBreakRecords: canBreakRecords,\n      });\n    }\n  }\n\n  randomizeRegistration() {\n    const FLIGHTCHARS: Flight[] = [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\"];\n\n    this.deleteExistingRegistrations();\n    for (let day = 1; day <= this.props.meet.lengthDays; day++) {\n      const numPlatforms = this.props.meet.platformsOnDays[day - 1];\n      for (let platform = 1; platform <= numPlatforms; platform++) {\n        const numFlights = randomInt(1, 3);\n        for (let flight = 0; flight < numFlights; flight++) {\n          this.generateEntries(day, platform, FLIGHTCHARS[flight]);\n        }\n      }\n    }\n  }\n\n  render() {\n    return (\n      <Button onClick={this.randomizeRegistration}>\n        <LocalizedString id=\"nav.registration\" />\n      </Button>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): GlobalState => ({\n  ...state,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    newRegistration: (obj: Partial<Entry>) => dispatch(newRegistration(obj)),\n    deleteRegistration: (entryId: number) => dispatch(deleteRegistration(entryId)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RandomizeRegistrationButton);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Randomizes the Registration page, for debugging.\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Dispatch } from \"redux\";\n\nimport Button from \"react-bootstrap/Button\";\n\nimport LocalizedString from \"../translations/LocalizedString\";\n\nimport { randomInt, randomFixedPoint } from \"./RandomizeHelpers\";\nimport { lbs2kg } from \"../../logic/units\";\n\nimport { updateRegistration } from \"../../actions/registrationActions\";\nimport { enterAttempt } from \"../../actions/liftingActions\";\n\nimport { GlobalState, MeetState, RegistrationState } from \"../../types/stateTypes\";\nimport { Entry, Lift } from \"../../types/dataTypes\";\n\ninterface StateProps {\n  meet: MeetState;\n  registration: RegistrationState;\n}\n\ninterface DispatchProps {\n  updateRegistration: (entryId: number, obj: Partial<Entry>) => void;\n  enterAttempt: (entryId: number, lift: Lift, attemptOneIndexed: number, weightKg: number) => void;\n}\n\ntype Props = StateProps & DispatchProps;\n\nclass RandomizeWeighinsButton extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n    this.randomizeWeighins = this.randomizeWeighins.bind(this);\n  }\n\n  randomAttempt = () => {\n    const multiple = 2.5;\n    if (this.props.meet.inKg) {\n      return Math.floor(randomFixedPoint(25, 360, 1) / multiple) * multiple;\n    } else {\n      return lbs2kg(Math.floor(randomFixedPoint(55, 800, 1) / multiple) * multiple);\n    }\n  };\n\n  randomizeWeighins = () => {\n    const entries = this.props.registration.entries;\n    const inKg: boolean = this.props.meet.inKg;\n\n    for (let i = 0; i < entries.length; i++) {\n      const entry = entries[i];\n\n      // Get a random bodyweight.\n      // ==========================================\n      const bodyweightKg = inKg ? randomFixedPoint(20, 150, 1) : lbs2kg(randomFixedPoint(40, 320, 1));\n      this.props.updateRegistration(entry.id, {\n        bodyweightKg: bodyweightKg,\n      });\n\n      // Get a random age.\n      const age = randomInt(5, 79);\n      this.props.updateRegistration(entry.id, {\n        age: age,\n      });\n\n      // Figure out which events we're generating information for.\n      // ==========================================\n      let hasSquat = false;\n      let hasBench = false;\n      let hasDeadlift = false;\n      for (let j = 0; j < entry.events.length; j++) {\n        const e = entry.events[j];\n        if (e.includes(\"S\")) {\n          hasSquat = true;\n        }\n        if (e.includes(\"B\")) {\n          hasBench = true;\n        }\n        if (e.includes(\"D\")) {\n          hasDeadlift = true;\n        }\n      }\n\n      // Set attempts.\n      // ==========================================\n      if (hasSquat) {\n        this.props.enterAttempt(entry.id, \"S\", 1, this.randomAttempt());\n      }\n      if (hasBench) {\n        this.props.enterAttempt(entry.id, \"B\", 1, this.randomAttempt());\n      }\n      if (hasDeadlift) {\n        this.props.enterAttempt(entry.id, \"D\", 1, this.randomAttempt());\n      }\n\n      // Set rack info.\n      // ==========================================\n      if (hasSquat) {\n        const height = String(randomInt(2, 18));\n        const pos = Math.random() < 0.9 ? \"out\" : \"in\";\n        this.props.updateRegistration(entry.id, {\n          squatRackInfo: height + pos,\n        });\n      }\n\n      if (hasBench) {\n        const height = String(randomInt(0, 12));\n        const safety = String(randomInt(0, 4));\n        this.props.updateRegistration(entry.id, {\n          benchRackInfo: height + \"/\" + safety,\n        });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <Button onClick={this.randomizeWeighins}>\n        <LocalizedString id=\"nav.weigh-ins\" />\n      </Button>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  meet: state.meet,\n  registration: state.registration,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => ({\n  updateRegistration: (entryId, obj) => dispatch(updateRegistration(entryId, obj)),\n  enterAttempt: (entryId, lift, attemptOneIndexed, weightKg) =>\n    dispatch(enterAttempt(entryId, lift, attemptOneIndexed, weightKg)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RandomizeWeighinsButton);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Tools for manipulating state information to aid debugging.\n\nimport React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { connect } from \"react-redux\";\n\nimport Button from \"react-bootstrap/Button\";\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\nimport Card from \"react-bootstrap/Card\";\n\nimport RandomizeMeetSetupButton from \"./RandomizeMeetSetup\";\nimport RandomizeRegistrationButton from \"./RandomizeRegistration\";\nimport RandomizeWeighinsButton from \"./RandomizeWeighins\";\n\nimport { GlobalState } from \"../../types/stateTypes\";\n\nclass StateTools extends React.Component<GlobalState> {\n  // The simplest possible way to implement a Reset button.\n  reInitializeRedux = () => {\n    localStorage.clear();\n    window.location.reload();\n  };\n\n  render() {\n    return (\n      <div>\n        <Card style={{ marginBottom: \"17px\" }}>\n          <Card.Header>\n            <FormattedMessage id=\"debug.generator-card-header\" defaultMessage=\"Generate Random Valid Data\" />\n          </Card.Header>\n          <Card.Body>\n            <Button style={{ marginRight: \"15px\" }} variant=\"danger\" onClick={this.reInitializeRedux}>\n              <FormattedMessage id=\"debug.button-reset\" defaultMessage=\"Reset\" />\n            </Button>\n            <ButtonGroup>\n              <RandomizeMeetSetupButton />\n              <RandomizeRegistrationButton />\n              <RandomizeWeighinsButton />\n            </ButtonGroup>\n          </Card.Body>\n        </Card>\n\n        <Card>\n          <Card.Header>\n            <FormattedMessage id=\"debug.state-card-header\" defaultMessage=\"Redux State\" />\n          </Card.Header>\n          <Card.Body>\n            <pre>{JSON.stringify(this.props, null, 2)}</pre>\n          </Card.Body>\n        </Card>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): GlobalState => ({\n  ...state,\n});\n\nexport default connect(mapStateToProps)(StateTools);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// A page dedicated to debugging tools.\n\nimport React from \"react\";\n\nimport StateTools from \"../components/debug/StateTools\";\nimport styles from \"../components/common/ContentArea.module.scss\";\n\nconst DebugContainer = () => {\n  return (\n    <div className={styles.contentArea}>\n      <StateTools />\n    </div>\n  );\n};\n\nexport default DebugContainer;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2020 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Card from \"react-bootstrap/Card\";\nimport Col from \"react-bootstrap/Col\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\n\nimport styles from \"../components/common/ContentArea.module.scss\";\n\n// Extracted out so that <pre> renders linebreaks properly.\nconst licenseText =\n  \"This program is free software: you can redistribute it and/or modify\\n\" +\n  \"it under the terms of the GNU Affero General Public License as\\n\" +\n  \"published by the Free Software Foundation, either version 3 of the\\n\" +\n  \"License, or (at your option) any later version.\\n\" +\n  \"\\n\" +\n  \"This program is distributed in the hope that it will be useful,\\n\" +\n  \"but WITHOUT ANY WARRANTY; without even the implied warranty of\\n\" +\n  \"MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n\" +\n  \"GNU Affero General Public License for more details.\";\n\nclass AboutContainer extends React.Component<{}> {\n  render() {\n    return (\n      <Container className={styles.contentArea}>\n        <Row>\n          <Col md={6}>\n            <Card>\n              <Card.Header>\n                <FormattedMessage id=\"about.credits-header\" defaultMessage=\"Credits\" />\n              </Card.Header>\n              <Card.Body>\n                <p>\n                  <FormattedMessage\n                    id=\"about.made-by\"\n                    defaultMessage=\"OpenLifter is made by the OpenPowerlifting project.\"\n                  />\n                </p>\n                <p>\n                  <a href=\"https://www.openpowerlifting.org\" rel=\"noopener noreferrer\" target=\"_blank\">\n                    OpenPowerlifting.org\n                  </a>\n                </p>\n                <p>\n                  <FormattedMessage id=\"about.credits-intro\" defaultMessage=\"Thanks to:\" />\n                  <ul>\n                    <li>Irene Aguilar &mdash; Spanish localization</li>\n                    <li>Baptiste Appel &mdash; French localization</li>\n                    <li>Baptiste Marchais &mdash; French localization</li>\n                    <li>Romina Basting &mdash; German localization</li>\n                    <li>Mike Beelen &mdash; Dutch localization</li>\n                    <li>Sean Berlin &mdash; Patron</li>\n                    <li>Jernimo Cavalcante &mdash; Portuguese localization</li>\n                    <li>Arman Danielyan &mdash; Russian localization</li>\n                    <li>Tommy DeFea &mdash; Graphic design</li>\n                    <li>Alper Dokucu &mdash; Turkish localization</li>\n                    <li>David Jasiulewicz &mdash; Patron</li>\n                    <li>Jared Klopper &mdash; Programming</li>\n                    <li>Andreas Kolettis &mdash; Greek localization</li>\n                    <li>Boris Lerner &mdash; Russian localization</li>\n                    <li>Kai Ma &mdash; Simplified Chinese localization</li>\n                    <li>Rodney Marsh &mdash; Programming</li>\n                    <li>Giulio Maschi &mdash; Italian localization</li>\n                    <li>Trystan Oakley &mdash; Testing</li>\n                    <li>Matt Pearce &mdash; Coefficient calculations</li>\n                    <li>David Sacras &mdash; Portuguese localization</li>\n                    <li>Alan Sambol &mdash; Croatian localization</li>\n                    <li>Milena Schaefer &mdash; German localization</li>\n                    <li>Vitaliy Shvarz &mdash; Ukrainian localization</li>\n                    <li>Sean Stangl &mdash; Programming and maintenance</li>\n                    <li>Michael Vessia &mdash; Programming and maintenance</li>\n                    <li>Andrius Virbiianskas &mdash; Lithuanian localization</li>\n                    <li>Sarah Wellberg &mdash; UX design and testing</li>\n                    <li>Jo Whiteley &mdash; Testing</li>\n                  </ul>\n                </p>\n              </Card.Body>\n            </Card>\n          </Col>\n\n          <Col md={6}>\n            <Card>\n              <Card.Header>\n                <FormattedMessage id=\"about.license-header\" defaultMessage=\"License\" />\n              </Card.Header>\n              <Card.Body>\n                <p>\n                  <FormattedMessage\n                    id=\"about.copyright\"\n                    defaultMessage=\"OpenLifter is Copyright (C) 2018-2020 The OpenPowerlifting Project.\"\n                  />\n                </p>\n                <p>\n                  <FormattedMessage\n                    id=\"about.freedom-intro\"\n                    defaultMessage=\"OpenLifter is Free Software. Free Software grants you the following freedoms:\"\n                  />\n                </p>\n                <ol>\n                  <li>\n                    <FormattedMessage\n                      id=\"about.freedom-0\"\n                      defaultMessage=\"The freedom to run the program as you wish, for any purpose.\"\n                    />\n                  </li>\n                  <li>\n                    <FormattedMessage\n                      id=\"about.freedom-1\"\n                      defaultMessage=\"The freedom to study how the program works, and change it as you wish.\"\n                    />\n                  </li>\n                  <li>\n                    <FormattedMessage\n                      id=\"about.freedom-2\"\n                      defaultMessage=\"The freedom to redistribute copies so you can help others.\"\n                    />\n                  </li>\n                  <li>\n                    <FormattedMessage\n                      id=\"about.freedom-3\"\n                      defaultMessage=\"The freedom to distribute copies of your modified versions to others.\"\n                    />\n                  </li>\n                </ol>\n                <p>\n                  <FormattedMessage\n                    id=\"about.freedom-quick-summary\"\n                    defaultMessage=\"The AGPLv3+ license we use means that if you distribute this software or host it on a server, you must give your users the same rights we give you, including full source code. In addition, AGPLv3+ code must remain free/libre, and cannot be included in proprietary software or in free/libre software with a weaker or incompatible license.\"\n                  />\n                </p>\n                <p>\n                  <FormattedMessage\n                    id=\"about.agpl-short-english-intro\"\n                    defaultMessage=\"Here is the short English license blurb:\"\n                  />\n                </p>\n                <pre>{licenseText}</pre>\n                <a href=\"https://www.gnu.org/licenses/agpl-3.0.en.html\" rel=\"noopener noreferrer\" target=\"_blank\">\n                  <FormattedMessage\n                    id=\"about.link-full-agpl-license\"\n                    defaultMessage=\"Full Text of the GNU Affero General Public License, Version 3\"\n                  />\n                </a>\n                <br />\n                <a href=\"https://www.gnu.org/licenses/gpl-faq.html\" rel=\"noopener noreferrer\" target=\"_blank\">\n                  <FormattedMessage id=\"about.link-gnu-faq\" defaultMessage=\"FAQ about GNU Licenses\" />\n                </a>\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n      </Container>\n    );\n  }\n}\n\nexport default AboutContainer;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2020 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { LiftingRecord, Language, Sex, Equipment, RecordLift, RecordType } from \"../../types/dataTypes\";\nimport { Csv, validateCsvColumns } from \"../export/csv\";\nimport { getString } from \"../strings\";\nimport { validateSex, validateEquipment, validateRecordType, validateRecordLift } from \"./validation\";\nimport { displayNumber } from \"../units\";\nimport { MeetState } from \"../../types/stateTypes\";\n\ninterface RecordsCsvMetadata {\n  allColumns: string[];\n  mandatoryColumns: string[];\n  optionalColumns: string[];\n\n  columnNames: {\n    name: string;\n    weight: string;\n    date: string;\n    location: string;\n    division: string;\n    sex: string;\n    class: string;\n    equipment: string;\n    recordLift: string;\n    recordType: string;\n  };\n}\n\nexport function getRecordCsvMetadata(language: Language): RecordsCsvMetadata {\n  const col_name = getString(\"records.csv.name\", language);\n  const col_weight = getString(\"records.csv.weight\", language);\n  const col_date = getString(\"records.csv.date\", language);\n  const col_location = getString(\"records.csv.location\", language);\n  const col_division = getString(\"records.csv.division\", language);\n  const col_sex = getString(\"records.csv.sex\", language);\n  const col_class = getString(\"records.csv.class\", language);\n  const col_equipment = getString(\"records.csv.equipment\", language);\n  const col_record_lift = getString(\"records.csv.record-lift\", language);\n  const col_record_type = getString(\"records.csv.record-type\", language);\n\n  return {\n    allColumns: [\n      col_name,\n      col_weight,\n      col_date,\n      col_location,\n      col_division,\n      col_sex,\n      col_class,\n      col_equipment,\n      col_record_lift,\n      col_record_type,\n    ],\n    mandatoryColumns: [\n      col_name,\n      col_weight,\n      col_division,\n      col_sex,\n      col_class,\n      col_equipment,\n      col_record_lift,\n      col_record_type,\n    ],\n    optionalColumns: [col_date, col_location],\n    columnNames: {\n      name: col_name,\n      weight: col_weight,\n      date: col_date,\n      location: col_location,\n      division: col_division,\n      sex: col_sex,\n      class: col_class,\n      equipment: col_equipment,\n      recordLift: col_record_lift,\n      recordType: col_record_type,\n    },\n  };\n}\n\nexport const makeExampleRecordsCsv = (language: Language): string => {\n  const metadata = getRecordCsvMetadata(language);\n  const columnNames = metadata.columnNames;\n  const csv = new Csv();\n  csv.rows = [[], []]; // appendColumns() will resize the dummy rows correctly.\n  csv.appendColumns(metadata.allColumns);\n\n  const firstRow = csv.rows[0];\n  firstRow[csv.index(columnNames.name)] = getString(\"records.example-1.name\", language);\n  firstRow[csv.index(columnNames.weight)] = \"350\";\n  firstRow[csv.index(columnNames.date)] = getString(\"records.example.date\", language);\n  firstRow[csv.index(columnNames.location)] = getString(\"records.example.location\", language);\n  firstRow[csv.index(columnNames.division)] = getString(\"records.example.division\", language);\n  firstRow[csv.index(columnNames.sex)] = getString(\"records.example-1.sex\", language);\n  firstRow[csv.index(columnNames.class)] = getString(\"records.example-1.class\", language);\n  firstRow[csv.index(columnNames.equipment)] = getString(\"records.example-1.equipment\", language);\n  firstRow[csv.index(columnNames.recordLift)] = getString(\"records.example-1.record-lift\", language);\n  firstRow[csv.index(columnNames.recordType)] = getString(\"records.example-1.record-type\", language);\n\n  const secondRow = csv.rows[1];\n  secondRow[csv.index(columnNames.name)] = getString(\"records.example-2.name\", language);\n  secondRow[csv.index(columnNames.weight)] = \"125\";\n  secondRow[csv.index(columnNames.date)] = getString(\"records.example.date\", language);\n  secondRow[csv.index(columnNames.location)] = getString(\"records.example.location\", language);\n  secondRow[csv.index(columnNames.division)] = getString(\"records.example.division\", language);\n  secondRow[csv.index(columnNames.sex)] = getString(\"records.example-2.sex\", language);\n  secondRow[csv.index(columnNames.class)] = getString(\"records.example-2.class\", language);\n  secondRow[csv.index(columnNames.equipment)] = getString(\"records.example-2.equipment\", language);\n  secondRow[csv.index(columnNames.recordLift)] = getString(\"records.example-2.record-lift\", language);\n  secondRow[csv.index(columnNames.recordType)] = getString(\"records.example-2.record-type\", language);\n\n  return csv.toString();\n};\n\nexport const loadRecordsFromCsv = (csv: Csv, meet: MeetState, language: Language): LiftingRecord[] | string => {\n  const metadata = getRecordCsvMetadata(language);\n  const columnNames = metadata.columnNames;\n\n  const validationError = validateCsvColumns(csv, language, metadata.mandatoryColumns, metadata.optionalColumns);\n  if (validationError !== null) {\n    return validationError;\n  }\n\n  const errprefix_template = getString(\"error.csv-field-prefix\", language);\n\n  const records: LiftingRecord[] = [];\n  // The fieldnames are valid! Now we can start building Entries.\n  for (let i = 0; i < csv.rows.length; ++i) {\n    // Iterate over each field and integrate it into the Entry object.\n    const row: Array<string> = csv.rows[i];\n\n    let fullName: string = \"\";\n    let weight: number = 0;\n    let date: string = \"\";\n    let location: string = \"\";\n    let division: string = \"\";\n    let sex: Sex = \"F\";\n    let weightClass: string = \"\";\n    let equipment: Equipment = \"Sleeves\";\n    let recordLift: RecordLift = \"Total\";\n    let recordType: RecordType = \"FullPower\";\n\n    for (let j = 0; j < row.length; ++j) {\n      const fieldname = csv.fieldnames[j];\n      const cell = row[j];\n\n      // User-visible row number, for error messages.\n      // The first row is for the fieldnames, and spreadsheet programs are 1-indexed.\n      const rowstr = displayNumber(i + 2, language);\n\n      // Start building the error string early, since it's repeated a lot.\n      const errprefix = errprefix_template\n        .replace(\"{cellType}\", fieldname)\n        .replace(\"{cellValue}\", cell)\n        .replace(\"{rowNumber}\", rowstr);\n\n      if (fieldname === columnNames.name) {\n        if (cell.trim() === \"\") {\n          return errprefix + getString(\"records.import.error-name-missing\", language);\n        } else {\n          fullName = cell;\n        }\n      } else if (fieldname === columnNames.weight) {\n        const parsedFloat = Number(cell);\n        if (Number.isNaN(parsedFloat)) {\n          return errprefix + getString(\"error.csv-field-suffix-integer\", language);\n        } else if (parsedFloat < 0) {\n          // Can't be negative, but allow 0 to specify an empty/standard record\n          return errprefix + getString(\"records.import.error-weight-not-negative\", language);\n        }\n        weight = parsedFloat;\n      } else if (fieldname === columnNames.date) {\n        date = cell;\n      } else if (fieldname === columnNames.location) {\n        location = cell;\n      } else if (fieldname === columnNames.division) {\n        const rawDiv = cell.trim();\n        if (rawDiv === \"\") {\n          return errprefix + getString(\"records.import.error-division-missing\", language);\n          // GPC-NZ - Also allow import of the synthetic \"Sub Masters\" record division, which isn't a real division\n        } else if (meet.divisions.indexOf(rawDiv) === -1 && rawDiv !== \"Sub Masters\") {\n          return (\n            errprefix +\n            getString(\"records.import.error-division-invalid\", language).replace(\n              \"{Divisions}\",\n              meet.divisions.join(\", \")\n            )\n          );\n        } else {\n          division = cell;\n        }\n      } else if (fieldname === columnNames.sex) {\n        const validationResult = validateSex(cell, language, errprefix);\n        if (validationResult.result !== null) {\n          sex = validationResult.result;\n        } else {\n          return validationResult.errorMessage;\n        }\n      } else if (fieldname === columnNames.class) {\n        weightClass = cell;\n      } else if (fieldname === columnNames.equipment) {\n        const validationResult = validateEquipment(cell, language, errprefix);\n        if (validationResult.result !== null) {\n          equipment = validationResult.result;\n        } else {\n          return validationResult.errorMessage;\n        }\n      } else if (fieldname === columnNames.recordLift) {\n        const validationResult = validateRecordLift(cell, language, errprefix);\n        if (validationResult.result !== null) {\n          recordLift = validationResult.result;\n        } else {\n          return validationResult.errorMessage;\n        }\n      } else if (fieldname === columnNames.recordType) {\n        const validationResult = validateRecordType(cell, language, errprefix);\n        if (validationResult.result !== null) {\n          recordType = validationResult.result;\n        } else {\n          return validationResult.errorMessage;\n        }\n      }\n    }\n\n    //TODO: Validate weight class against sex of record & allowed weight classes in meet\n\n    records.push({\n      fullName,\n      weight,\n      date,\n      location,\n      division,\n      sex,\n      weightClass,\n      equipment,\n      recordLift,\n      recordType,\n    });\n  }\n  return records;\n};\n","const borderRadius = \"0px\";\n\nexport const exportedRecordsPageCss = `\nbody {\n    background-color: white;\n}\n\nth, td {\n    text-align: left;\n    padding-right: ${borderRadius};\n}\n\ntr {\n    min-width: 80px;\n}\n\ntable {\n    font-size: 18px;\n    background-color: white;\n    border-bottom-left-radius: ${borderRadius};\n    border-bottom-right-radius: ${borderRadius};\n}\n\n.tinyColumn {\n    min-width: 60px;\n}\n\n.smallColumn {\n    min-width: 95px;\n}\n\n.mediumColumn {\n    min-width: 130px;\n}\n\n.largeColumn {\n    min-width: 240px;\n}\n\n.recordsPage {\n    align-items: center;\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    color: black;\n}\n\n.recordsPageTitle {\n    font-size: 50px;\n    font-weight: bold;\n}\n\n.categoryHeading {\n    font-size: 30px;\n    background-color: black;\n    color: white;\n    font-weight: bold;\n    padding: 4px;\n    margin: 0px;\n    border-top-left-radius: ${borderRadius};\n    border-top-right-radius: ${borderRadius};\n}\n\n.recordCategory {\n    border-style: solid;\n    margin-bottom: 10px;\n    max-width: 100%;\n}\n\n.logoContainer {\n    background-color: black;\n    width: 100%;\n    display: flex;\n    justify-content: space-around;\n}\n\n.responsiveImage {\n    max-width: 100%;\n}\n\n`;\n","import React from \"react\";\nimport { LiftingRecord, Language } from \"../../types/dataTypes\";\nimport { exportedRecordsPageCss } from \"./ExportedRecordsPage.css\";\nimport { localizeEquipment, localizeRecordType, localizeRecordLift, localizeSexPlural } from \"../strings\";\nimport { FormattedMessage } from \"react-intl\";\nimport { logoData } from \"./ExportedRecordsPageLogo\";\nimport { RecordCategoryGrouping } from \"./records\";\n\ninterface Props {\n  recordCategories: RecordCategoryGrouping[];\n  language: Language;\n}\n\nexport class ExportedRecordsPage extends React.Component<Props, {}> {\n  render() {\n    return (\n      <html>\n        <head>\n          <title>\n            <FormattedMessage id=\"records.export.page.title\" defaultMessage=\"Powerlifting Records\" />\n          </title>\n          <style>{exportedRecordsPageCss}</style>\n        </head>\n        <body>\n          <div className=\"recordsPage\">\n            <div className=\"logoContainer\">\n              <img src={logoData} className=\"responsiveImage\"></img>\n            </div>\n\n            <p className=\"recordsPageTitle\">\n              <FormattedMessage id=\"records.export.page.title\" defaultMessage=\"Powerlifting Records\" />\n            </p>\n            {this.props.recordCategories.map((category, index) => this.renderCategory(category, index))}\n          </div>\n        </body>\n      </html>\n    );\n  }\n\n  renderCategory(grouping: RecordCategoryGrouping, index: number) {\n    const category = grouping.category;\n    const language = this.props.language;\n    const localizedSex = localizeSexPlural(category.sex, language);\n    const localizedEquipment = localizeEquipment(category.equipment, language);\n    return (\n      <div key={index} className=\"recordCategory\">\n        <p className=\"categoryHeading\">\n          {localizedSex} {localizedEquipment} - {category.division} {category.weightClass}\n        </p>\n        <table>\n          <thead>\n            <tr>\n              <th className=\"mediumColumn\">\n                <FormattedMessage id=\"records.export.page.column-record-type\" defaultMessage=\"Record Lift\" />\n              </th>\n              <th className=\"tinyColumn\">\n                <FormattedMessage id=\"records.export.page.column-weight\" defaultMessage=\"Weight\" />\n              </th>\n              <th className=\"tinyColumn\">\n                <FormattedMessage id=\"records.export.page.column-record-lift\" defaultMessage=\"Lift\" />\n              </th>\n              <th className=\"largeColumn\">\n                <FormattedMessage id=\"records.export.page.column-name\" defaultMessage=\"Name\" />\n              </th>\n              <th className=\"smallColumn\">\n                <FormattedMessage id=\"records.export.page.column-date\" defaultMessage=\"Date\" />\n              </th>\n              <th className=\"largeColumn\">\n                <FormattedMessage id=\"records.export.page.column-location\" defaultMessage=\"Location\" />\n              </th>\n            </tr>\n          </thead>\n          <tbody>{grouping.records.map((record, index) => this.renderRecord(record, index))}</tbody>\n        </table>\n      </div>\n    );\n  }\n\n  renderRecord(record: LiftingRecord, index: number) {\n    return (\n      <tr key={index}>\n        <td>{localizeRecordType(record.recordType, this.props.language)}</td>\n        <td>{record.weight}</td>\n        <td>{localizeRecordLift(record.recordLift, this.props.language)}</td>\n        <td>{record.fullName}</td>\n        <td>{record.date}</td>\n        <td>{record.location}</td>\n      </tr>\n    );\n  }\n}\n","export const logoData =\n  \"data:image/png;base64,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\";\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { GlobalState, MeetState, RecordsState, RegistrationState } from \"../../types/stateTypes\";\nimport React from \"react\";\nimport { Dispatch } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { LiftingRecord, Language, Sex, Equipment, RecordLift, RecordType } from \"../../types/dataTypes\";\nimport { importRecords } from \"../../actions/recordActions\";\nimport ErrorModal from \"../ErrorModal\";\nimport {\n  getString,\n  localizeEquipment,\n  localizeRecordLift,\n  localizeRecordType,\n  localizeSex,\n  localizeWeightClassStr,\n} from \"../../logic/strings\";\nimport { Card, Button, Form, Row, Col, Table, Alert } from \"react-bootstrap\";\nimport { FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Csv } from \"../../logic/export/csv\";\nimport { loadRecordsFromCsv, makeExampleRecordsCsv } from \"../../logic/import/records-csv\";\nimport { faExclamationTriangle, faSpinner } from \"@fortawesome/free-solid-svg-icons\";\n\nimport {\n  FormControlTypeHack,\n  assertString,\n  assertSex,\n  assertEquipment,\n  assertRecordLift,\n  assertRecordType,\n  checkExhausted,\n  isNotUndefined,\n} from \"../../types/utils\";\nimport { makeRecordsCsv } from \"../../logic/export/records\";\nimport { getUpdatedRecordState, groupAndSortRecordsIntoCategories } from \"../../logic/records/records\";\nimport { displayNumber } from \"../../logic/units\";\nimport { generateRecordsPageHtml } from \"../../logic/records/htmlExport\";\n\ntype AnyOptionType = \"Any\";\nconst AnyOption: AnyOptionType = \"Any\";\n\ninterface StateProps {\n  meet: MeetState;\n  language: Language;\n  updatedRecords: RecordsState;\n  registration: RegistrationState;\n}\n\ninterface DispatchProps {\n  importRecords: (records: LiftingRecord[]) => void;\n}\n\ninterface State {\n  error: string;\n  isLoadingFiles: boolean;\n  divisionFilter: string | AnyOptionType;\n  sexFilter: Sex | AnyOptionType;\n  weightClassFilter: string | AnyOptionType;\n  equipmentFilter: Equipment | AnyOptionType;\n  recordLiftFilter: RecordLift | AnyOptionType;\n  recordTypeFilter: RecordType | AnyOptionType;\n}\n\ntype Props = StateProps & DispatchProps;\n\nclass RecordsView extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      error: \"\",\n      isLoadingFiles: false,\n      divisionFilter: AnyOption,\n      sexFilter: AnyOption,\n      weightClassFilter: AnyOption,\n      equipmentFilter: AnyOption,\n      recordLiftFilter: AnyOption,\n      recordTypeFilter: AnyOption,\n    };\n  }\n\n  closeErrorModal() {\n    this.setState({ error: \"\" });\n  }\n\n  handleExportCsvClick() {\n    const language = this.props.language;\n    const text = makeRecordsCsv(this.props.updatedRecords, this.props.meet, language);\n    const blob = new Blob([text], { type: \"application/text;charset=utf-8\" });\n\n    const basename = getString(\"records.export-filename\", this.props.language);\n    const filename = basename.replace(\"{MeetName}\", this.props.meet.name) + \".csv\";\n    saveAs(blob, filename);\n  }\n\n  handleExportWebPageClick() {\n    const html = generateRecordsPageHtml(this.props.updatedRecords, this.props.meet, this.props.language);\n    const blob = new Blob([html], { type: \"application/html;charset=utf-8\" });\n\n    const basename = getString(\"records.export-filename\", this.props.language);\n\n    const filename = basename.replace(\"{MeetName}\", this.props.meet.name) + \".html\";\n    saveAs(blob, filename);\n  }\n\n  handleDownloadCsvTemplateClick = () => {\n    const text = makeExampleRecordsCsv(this.props.language);\n    const blob = new Blob([text], { type: \"application/text;charset=utf-8\" });\n    const filename = getString(\"import.template-filename\", this.props.language) + \".csv\";\n    saveAs(blob, filename);\n  };\n\n  handleImportClick() {\n    const loadhelper = document.getElementById(\"loadhelper\");\n    if (loadhelper !== null) {\n      loadhelper.click();\n    }\n  }\n\n  handleSexFilterChange(event: React.FormEvent<FormControlTypeHack>) {\n    const sex = event.currentTarget.value;\n    if (sex === AnyOption || (assertString(sex) && assertSex(sex))) {\n      this.setState({\n        sexFilter: sex,\n      });\n    }\n  }\n\n  handleDivisionFilterChange(event: React.FormEvent<FormControlTypeHack>) {\n    const value = event.currentTarget.value;\n    if (value !== undefined) {\n      this.setState({\n        divisionFilter: value,\n      });\n    }\n  }\n\n  handleWeightClassFilterChange(event: React.FormEvent<FormControlTypeHack>) {\n    const value = event.currentTarget.value;\n    if (value !== undefined) {\n      this.setState({\n        weightClassFilter: value,\n      });\n    }\n  }\n\n  handleEquipmentFilterChange(event: React.FormEvent<FormControlTypeHack>) {\n    const equipment = event.currentTarget.value;\n    if (equipment === AnyOption || (assertString(equipment) && assertEquipment(equipment))) {\n      this.setState({\n        equipmentFilter: equipment,\n      });\n    }\n  }\n\n  handleRecordLiftFilterChange(event: React.FormEvent<FormControlTypeHack>) {\n    const recordLift = event.currentTarget.value;\n    if (recordLift === AnyOption || (assertString(recordLift) && assertRecordLift(recordLift))) {\n      this.setState({\n        recordLiftFilter: recordLift,\n      });\n    }\n  }\n\n  handleRecordTypeFilterChange(event: React.FormEvent<FormControlTypeHack>) {\n    const recordType = event.currentTarget.value;\n    if (recordType === AnyOption || (assertString(recordType) && assertRecordType(recordType))) {\n      this.setState({\n        recordTypeFilter: recordType,\n      });\n    }\n  }\n\n  handleLoadFileInput() {\n    const loadHelper = document.getElementById(\"loadhelper\");\n    if (loadHelper === null || !(loadHelper instanceof HTMLInputElement) || loadHelper.files === null) {\n      return;\n    }\n\n    const selectedFile = loadHelper.files[0];\n\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      // If this occurs, we've introduced a bug when initiating the file reader, or the read failed.\n      // Add this check as a guard so the typing is narrowed\n      if (typeof reader.result !== \"string\") {\n        window.alert(\"Unable to load file: an unexpected internal error occured\");\n        return;\n      }\n\n      const csv = new Csv();\n      const maybeError = csv.fromString(reader.result.replace(/;/g, \",\"));\n\n      // Check if an error message occurred.\n      if (typeof maybeError === \"string\") {\n        this.setState({ error: maybeError });\n        return;\n      }\n\n      // Try to parse the CSV into records\n      const maybeRecords = loadRecordsFromCsv(csv, this.props.meet, this.props.language);\n      if (typeof maybeRecords === \"string\") {\n        this.setState({ error: maybeRecords });\n        return;\n      }\n\n      // Successfully parsed and loaded!\n      const records: LiftingRecord[] = maybeRecords;\n      this.props.importRecords(records);\n    };\n\n    reader.onloadstart = () => {\n      this.setState({ isLoadingFiles: true });\n    };\n\n    reader.onloadend = () => {\n      this.setState({ isLoadingFiles: false });\n    };\n\n    reader.readAsText(selectedFile);\n\n    // this will reset the input field so the same file can be selected again. Without this picking the same file for import silently does nothing\n    loadHelper.value = \"\";\n  }\n\n  getEligibleWeightClasses(filterType: Sex | AnyOptionType): string[] {\n    const meet = this.props.meet;\n\n    if (filterType == AnyOption) {\n      return this.getEligibleWeightClasses(\"M\")\n        .concat(this.getEligibleWeightClasses(\"F\"))\n        .concat(this.getEligibleWeightClasses(\"Mx\"));\n    }\n\n    let classes: readonly number[];\n    if (filterType === \"M\") {\n      classes = meet.weightClassesKgMen;\n    } else if (filterType === \"F\") {\n      classes = meet.weightClassesKgWomen;\n    } else if (filterType === \"Mx\") {\n      classes = meet.weightClassesKgMx;\n    } else {\n      checkExhausted(filterType);\n      classes = [];\n    }\n\n    let allOptions = classes.map((c) => c.toString());\n    // If there is at least one class, include the SHW class\n    if (allOptions.length > 0) {\n      allOptions = allOptions.concat([classes[classes.length - 1] + \"+\"]);\n    }\n    return allOptions;\n  }\n\n  renderRecordsDisabledWarning() {\n    if (!this.props.meet.recordsEnabled) {\n      return (\n        <Alert variant=\"warning\" style={{ marginTop: \"16px\" }}>\n          <FontAwesomeIcon style={{ marginRight: \"5px\" }} icon={faExclamationTriangle} />\n          <FormattedMessage\n            id=\"records.records-disabled-warning\"\n            defaultMessage=\"Records cannot be set at this meet. This is configured on the meet setup page\"\n          ></FormattedMessage>\n        </Alert>\n      );\n    }\n  }\n\n  render() {\n    const filteredRecords = Object.entries(this.props.updatedRecords.confirmedRecords)\n      .map((kvp) => kvp[1])\n      .filter(isNotUndefined)\n      .filter((record) => {\n        return (\n          record !== undefined &&\n          (this.state.divisionFilter === AnyOption || this.state.divisionFilter === record.division) &&\n          (this.state.sexFilter === AnyOption || this.state.sexFilter === record.sex) &&\n          (this.state.weightClassFilter === AnyOption || this.state.weightClassFilter === record.weightClass) &&\n          (this.state.equipmentFilter === AnyOption || this.state.equipmentFilter === record.equipment) &&\n          (this.state.recordLiftFilter === AnyOption || this.state.recordLiftFilter === record.recordLift) &&\n          (this.state.recordTypeFilter === AnyOption || this.state.recordTypeFilter === record.recordType)\n        );\n      });\n\n    const filteredSortedRecords = groupAndSortRecordsIntoCategories(filteredRecords, this.props.meet).flatMap(\n      (cat) => cat.records\n    );\n\n    return (\n      <div>\n        <ErrorModal\n          error={this.state.error}\n          title={getString(\"common.importation-error\", this.props.language)}\n          show={this.state.error !== \"\"}\n          close={() => this.closeErrorModal()}\n        />\n\n        {this.renderRecordsDisabledWarning()}\n\n        <Card style={{ marginBottom: \"17px\" }}>\n          <Card.Header>\n            <FormattedMessage id=\"records.auto-import-card-header\" defaultMessage=\"Auto-Import Records\" />\n          </Card.Header>\n          <Card.Body>\n            <Button variant=\"info\" onClick={() => this.handleDownloadCsvTemplateClick()}>\n              <FormattedMessage id=\"registration.button-download-template\" defaultMessage=\"Download Template\" />\n            </Button>{\" \"}\n            <Button variant=\"danger\" onClick={() => this.handleImportClick()} style={{ marginLeft: \"14px\" }}>\n              {this.state.isLoadingFiles && <FontAwesomeIcon style={{ marginRight: \"5px\" }} icon={faSpinner} spin />}\n              <FormattedMessage id=\"records.button-overwrite-from-csv\" defaultMessage=\"Overwrite Records from CSV\" />\n            </Button>\n            <Button variant=\"success\" onClick={() => this.handleExportCsvClick()} style={{ marginLeft: \"14px\" }}>\n              <FormattedMessage id=\"registration.button-export-to-csv\" defaultMessage=\"Export to CSV\" />\n            </Button>\n            <Button variant=\"primary\" onClick={() => this.handleExportWebPageClick()} style={{ marginLeft: \"14px\" }}>\n              <FormattedMessage id=\"records.export-as-web-page\" defaultMessage=\"Export to CSV\" />\n            </Button>\n          </Card.Body>\n        </Card>\n        <input\n          id=\"loadhelper\"\n          type=\"file\"\n          accept=\".csv\"\n          style={{ display: \"none\" }}\n          onChange={() => this.handleLoadFileInput()}\n        />\n        <Card style={{ marginBottom: \"17px\" }}>\n          <Card.Header>\n            <FormattedMessage id=\"records.filter-header\" defaultMessage=\"Filter Records\" />\n          </Card.Header>\n          <Card.Body>\n            <Row>\n              {/* Division */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"lifting.column-division\" defaultMessage=\"Division\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={this.state.divisionFilter}\n                    as=\"select\"\n                    onChange={(event: React.FormEvent<FormControlTypeHack>) => this.handleDivisionFilterChange(event)}\n                    className=\"custom-select\"\n                  >\n                    <option value={AnyOption}>{getString(\"common.any\", this.props.language)}</option>\n                    {this.props.meet.divisions.concat([\"Sub Masters\"]).map((division, i) => {\n                      return (\n                        <option key={i} value={division}>\n                          {division}\n                        </option>\n                      );\n                    })}\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n              {/* Sex */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.sex-label\" defaultMessage=\"Sex\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={this.state.sexFilter}\n                    as=\"select\"\n                    onChange={(event: React.FormEvent<FormControlTypeHack>) => this.handleSexFilterChange(event)}\n                    className=\"custom-select\"\n                  >\n                    <option value={AnyOption}>{getString(\"common.any\", this.props.language)}</option>\n                    <option value=\"M\">{getString(\"sex.m\", this.props.language)}</option>\n                    <option value=\"F\">{getString(\"sex.f\", this.props.language)}</option>\n                    <option value=\"Mx\">{getString(\"sex.mx\", this.props.language)}</option>\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n              {/* Weight Class */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"lifting.column-weightclass\" defaultMessage=\"Class\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={this.state.weightClassFilter.toString()}\n                    as=\"select\"\n                    onChange={(event: React.FormEvent<FormControlTypeHack>) =>\n                      this.handleWeightClassFilterChange(event)\n                    }\n                    className=\"custom-select\"\n                  >\n                    <option value={AnyOption}>{getString(\"common.any\", this.props.language)}</option>\n                    {this.getEligibleWeightClasses(this.state.sexFilter).map((weightClass, i) => {\n                      return (\n                        <option key={i} value={weightClass}>\n                          {weightClass}\n                        </option>\n                      );\n                    })}\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n              {/* Equipment */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"registration.equipment-label\" defaultMessage=\"Equipment\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={this.state.equipmentFilter}\n                    as=\"select\"\n                    onChange={(event: React.FormEvent<FormControlTypeHack>) => this.handleEquipmentFilterChange(event)}\n                    className=\"custom-select\"\n                  >\n                    <option value={AnyOption}>{getString(\"common.any\", this.props.language)}</option>\n                    <option value=\"Bare\">{getString(\"equipment.bare\", this.props.language)}</option>\n                    <option value=\"Sleeves\">{getString(\"equipment.sleeves\", this.props.language)}</option>\n                    <option value=\"Wraps\">{getString(\"equipment.wraps\", this.props.language)}</option>\n                    <option value=\"Single-ply\">{getString(\"equipment.single-ply\", this.props.language)}</option>\n                    <option value=\"Multi-ply\">{getString(\"equipment.multi-ply\", this.props.language)}</option>\n                    <option value=\"Unlimited\">{getString(\"equipment.unlimited\", this.props.language)}</option>\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n              {/* Record Lift */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"records.lift-label\" defaultMessage=\"Lift\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={this.state.recordLiftFilter}\n                    as=\"select\"\n                    onChange={(event: React.FormEvent<FormControlTypeHack>) => this.handleRecordLiftFilterChange(event)}\n                    className=\"custom-select\"\n                  >\n                    <option value={AnyOption}>{getString(\"common.any\", this.props.language)}</option>\n                    <option value=\"S\">{getString(\"event.s\", this.props.language)}</option>\n                    <option value=\"B\">{getString(\"event.b\", this.props.language)}</option>\n                    <option value=\"D\">{getString(\"event.d\", this.props.language)}</option>\n                    <option value=\"Total\">{getString(\"formula.total\", this.props.language)}</option>\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n              {/* Record Type */}\n              <Col md={1}>\n                <Form.Group>\n                  <Form.Label>\n                    <FormattedMessage id=\"records.record-type-label\" defaultMessage=\"Record Type\" />\n                  </Form.Label>\n                  <Form.Control\n                    value={this.state.recordTypeFilter}\n                    as=\"select\"\n                    onChange={(event: React.FormEvent<FormControlTypeHack>) => this.handleRecordTypeFilterChange(event)}\n                    className=\"custom-select\"\n                  >\n                    <option value={AnyOption}>{getString(\"common.any\", this.props.language)}</option>\n                    <option value=\"FullPower\">\n                      {getString(\"records.record-type.full-power\", this.props.language)}\n                    </option>\n                    <option value=\"SingleLift\">\n                      {getString(\"records.record-type.single-lift\", this.props.language)}\n                    </option>\n                  </Form.Control>\n                </Form.Group>\n              </Col>\n            </Row>\n\n            <Row>\n              <Table>\n                <thead>\n                  <tr>\n                    <th>Division</th>\n                    <th>Sex</th>\n                    <th>Weight Class</th>\n                    <th>Equipment</th>\n                    <th>Lift</th>\n                    <th>Record Type</th>\n                    <th>Full Name</th>\n                    <th>Weight</th>\n                    <th>Date</th>\n                    <th>Location</th>\n                  </tr>\n                </thead>\n                <tbody>{filteredSortedRecords.map((record, index) => this.renderRow(record, index))}</tbody>\n              </Table>\n            </Row>\n          </Card.Body>\n        </Card>\n      </div>\n    );\n  }\n\n  renderRow(record: LiftingRecord, index: number) {\n    return (\n      <tr key={index}>\n        <td>{record.division}</td>\n        <td>{localizeSex(record.sex, this.props.language)}</td>\n        <td>{localizeWeightClassStr(record.weightClass, this.props.language)}</td>\n        <td>{localizeEquipment(record.equipment, this.props.language)}</td>\n        <td>{localizeRecordLift(record.recordLift, this.props.language)}</td>\n        <td>{localizeRecordType(record.recordType, this.props.language)}</td>\n        <td>{record.fullName}</td>\n        <td>{displayNumber(record.weight, this.props.language)}</td>\n        <td>{record.date}</td>\n        <td>{record.location}</td>\n      </tr>\n    );\n  }\n}\n\nconst mapStateToProps = (state: GlobalState): StateProps => ({\n  meet: state.meet,\n  updatedRecords: getUpdatedRecordState(state.records, state.meet, state.registration, state.language),\n  registration: state.registration,\n  language: state.language,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps => {\n  return {\n    importRecords: (records) => dispatch(importRecords(records)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RecordsView);\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { MeetState, RecordsState } from \"../../types/stateTypes\";\nimport { Csv, csvString } from \"./csv\";\nimport { localizeSex, localizeEquipment, localizeRecordType, localizeRecordLift } from \"../strings\";\nimport { Language } from \"../../types/dataTypes\";\nimport { getRecordCsvMetadata } from \"../import/records-csv\";\nimport { groupAndSortRecordsIntoCategories } from \"../records/records\";\nimport { isNotUndefined } from \"../../types/utils\";\n\n// Exports record data to a CSV file.\nexport function makeRecordsCsv(recordState: RecordsState, meetState: MeetState, language: Language): string {\n  const metadata = getRecordCsvMetadata(language);\n  const columnNames = metadata.columnNames;\n  const csv = new Csv();\n\n  const records = Object.entries(recordState.confirmedRecords)\n    .map((entry) => entry[1])\n    .filter(isNotUndefined);\n  const sortedAndGroupedRecords = groupAndSortRecordsIntoCategories(records, meetState);\n\n  csv.appendColumns(metadata.allColumns);\n  sortedAndGroupedRecords\n    .flatMap((group) => group.records)\n    .forEach((record) => {\n      if (record !== undefined) {\n        const row: Array<string> = new Array(csv.fieldnames.length).fill(\"\");\n\n        row[csv.index(columnNames.name)] = csvString(record.fullName);\n        row[csv.index(columnNames.weight)] = csvString(record.weight);\n        row[csv.index(columnNames.date)] = csvString(record.date);\n        row[csv.index(columnNames.location)] = csvString(record.location);\n        row[csv.index(columnNames.division)] = csvString(record.division);\n        row[csv.index(columnNames.sex)] = csvString(localizeSex(record.sex, language));\n        row[csv.index(columnNames.class)] = csvString(record.weightClass);\n        row[csv.index(columnNames.equipment)] = csvString(localizeEquipment(record.equipment, language));\n        row[csv.index(columnNames.recordLift)] = csvString(localizeRecordLift(record.recordLift, language));\n        row[csv.index(columnNames.recordType)] = csvString(localizeRecordType(record.recordType, language));\n\n        csv.rows.push(row);\n      }\n    });\n\n  return csv.toString();\n}\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2020 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { RecordsState, MeetState } from \"../../types/stateTypes\";\nimport ReactDOMServer from \"react-dom/server\";\nimport React from \"react\";\nimport { Language } from \"../../types/dataTypes\";\nimport { ExportedRecordsPage } from \"./ExportedRecordsPage\";\nimport translations from \"../../translations\";\nimport { IntlProvider } from \"react-intl\";\nimport { groupAndSortRecordsIntoCategories } from \"./records\";\nimport { isNotUndefined } from \"../../types/utils\";\n\nexport function generateRecordsPageHtml(\n  updatedRecords: RecordsState,\n  meetState: MeetState,\n  language: Language\n): string {\n  const records = Object.entries(updatedRecords.confirmedRecords)\n    .map((kvp) => kvp[1])\n    .filter(isNotUndefined);\n\n  const recordCategories = groupAndSortRecordsIntoCategories(records, meetState);\n  const messages = (translations as any)[language];\n  return ReactDOMServer.renderToString(\n    <IntlProvider locale={language} defaultLocale=\"en\" key={language} messages={messages}>\n      <ExportedRecordsPage recordCategories={recordCategories} language={language} />\n    </IntlProvider>\n  );\n}\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\nimport { ImportRecordsAction } from \"../types/actionTypes\";\nimport { LiftingRecord } from \"../types/dataTypes\";\n\nexport function importRecords(records: LiftingRecord[]): ImportRecordsAction {\n  return {\n    type: \"IMPORT_RECORDS\",\n    records,\n  };\n}\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// A page dedicated to debugging tools.\n\nimport React from \"react\";\nimport RecordsView from \"../components/registration/RecordsView\";\n\nconst RecordsContainer = () => {\n  return (\n    <div>\n      <RecordsView />\n    </div>\n  );\n};\n\nexport default RecordsContainer;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// The RootContainer manually implements route parsing from GET parameters.\n//\n// The issue is that because OpenLifter is statically hosted, only the base\n// \"/\" route actually contains the index.html of the application. The other\n// routes (such as \"/lifting\") have index.html files that redirect to \"/\".\n//\n// We've changed things so that \"/lifting/index.html\" redirects to \"/?lifting\".\n// But React Router isn't able to route based on GET parameters.\n//\n// Therefore it's set up so that \"/\" routes to this RootContainer,\n// and the RootContainer inspects the GET parameters and renders the\n// appropriate container.\n\nimport React from \"react\";\n\nimport HomeContainer from \"./HomeContainer\";\nimport MeetSetupContainer from \"./MeetSetupContainer\";\nimport RegistrationContainer from \"./RegistrationContainer\";\nimport WeighinsContainer from \"./WeighinsContainer\";\nimport LiftingContainer from \"./LiftingContainer\";\nimport FlightOrderContainer from \"./FlightOrderContainer\";\nimport ResultsContainer from \"./ResultsContainer\";\nimport DebugContainer from \"./DebugContainer\";\nimport AboutContainer from \"./AboutContainer\";\nimport RecordsContainer from \"./RecordsContainer\";\n\nclass RootContainer extends React.Component {\n  render() {\n    if (typeof window.location.search !== \"string\") {\n      return <HomeContainer />;\n    }\n\n    switch (window.location.search) {\n      case \"?meet-setup\":\n        return <MeetSetupContainer />;\n      case \"?registration\":\n        return <RegistrationContainer />;\n      case \"?weigh-ins\":\n        return <WeighinsContainer />;\n      case \"?flight-order\":\n        return <FlightOrderContainer />;\n      case \"?lifting\":\n        return <LiftingContainer />;\n      case \"?results\":\n        return <ResultsContainer />;\n      case \"?debug\":\n        return <DebugContainer />;\n      case \"?about\":\n        return <AboutContainer />;\n      case \"?records\":\n        return <RecordsContainer />;\n      default:\n        return <HomeContainer />;\n    }\n  }\n}\n\nexport default RootContainer;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\n// Defines the Navigation component for navigating between pages using react-router.\n\nimport React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport Nav from \"react-bootstrap/Nav\";\nimport Navbar from \"react-bootstrap/Navbar\";\n\n// The LinkContainer is used to wrap Components that change the URL,\n// hooking them up with the Router.\nimport { LinkContainer } from \"react-router-bootstrap\";\n\nconst Navigation = () => {\n  return (\n    <Navbar sticky=\"top\" bg=\"dark\" variant=\"dark\" expand=\"lg\">\n      <Navbar.Brand>\n        <img alt=\"OpenLifter\" src=\"openlifter-white.svg\" height=\"20\" />\n      </Navbar.Brand>\n\n      {/* Navbar uses Toggle and Collapse to automatically create a hamburger menu\n          in case of overflow on small screens.*/}\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n      <Navbar.Collapse>\n        <Nav>\n          <LinkContainer exact to=\"/\">\n            <Nav.Link>\n              <FormattedMessage id=\"nav.home\" defaultMessage=\"Home\" />\n            </Nav.Link>\n          </LinkContainer>\n          <LinkContainer to=\"/meet-setup\">\n            <Nav.Link>\n              <FormattedMessage id=\"nav.meet-setup\" defaultMessage=\"Meet Setup\" />\n            </Nav.Link>\n          </LinkContainer>\n          <LinkContainer to=\"/records\">\n            <Nav.Link>\n              <FormattedMessage id=\"nav.records\" defaultMessage=\"Records\" />\n            </Nav.Link>\n          </LinkContainer>\n          <LinkContainer to=\"/registration\">\n            <Nav.Link>\n              <FormattedMessage id=\"nav.registration\" defaultMessage=\"Registration\" />\n            </Nav.Link>\n          </LinkContainer>\n          <LinkContainer to=\"/weigh-ins\">\n            <Nav.Link>\n              <FormattedMessage id=\"nav.weigh-ins\" defaultMessage=\"Weigh-ins\" />\n            </Nav.Link>\n          </LinkContainer>\n          <LinkContainer to=\"/flight-order\">\n            <Nav.Link>\n              <FormattedMessage id=\"nav.flight-order\" defaultMessage=\"Flight Order\" />\n            </Nav.Link>\n          </LinkContainer>\n          <LinkContainer to=\"/lifting\">\n            <Nav.Link>\n              <FormattedMessage id=\"nav.lifting\" defaultMessage=\"Lifting\" />\n            </Nav.Link>\n          </LinkContainer>\n          <LinkContainer to=\"/results\">\n            <Nav.Link>\n              <FormattedMessage id=\"nav.results\" defaultMessage=\"Results\" />\n            </Nav.Link>\n          </LinkContainer>\n          <LinkContainer to=\"/debug\">\n            <Nav.Link>\n              <FormattedMessage id=\"nav.debug\" defaultMessage=\"Debug\" />\n            </Nav.Link>\n          </LinkContainer>\n        </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n  );\n};\n\nexport default Navigation;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport { createStore, applyMiddleware } from \"redux\";\nimport { persistStore, persistReducer } from \"redux-persist\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport storage from \"redux-persist/lib/storage\";\n\nimport thunk from \"redux-thunk\";\nimport rootReducer from \"./reducers/rootReducer\";\n\nimport { GlobalState } from \"./types/stateTypes\";\n\nconst persistConfig = {\n  key: \"root\",\n  storage,\n};\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\n\nexport default function configureStore(initialState: Partial<GlobalState> = {}) {\n  const store = createStore(persistedReducer, initialState, composeWithDevTools(applyMiddleware(thunk)));\n  const persistor = persistStore(store as any);\n  return { store, persistor };\n}\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { Provider } from \"react-redux\";\nimport { PersistGate } from \"redux-persist/integration/react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\nimport OpenLifterIntlProvider from \"./components/translations/OpenLifterIntlProvider\";\n\nimport RootContainer from \"./containers/RootContainer\";\nimport MeetSetupContainer from \"./containers/MeetSetupContainer\";\nimport RegistrationContainer from \"./containers/RegistrationContainer\";\nimport WeighinsContainer from \"./containers/WeighinsContainer\";\nimport LiftingContainer from \"./containers/LiftingContainer\";\nimport FlightOrderContainer from \"./containers/FlightOrderContainer\";\nimport ResultsContainer from \"./containers/ResultsContainer\";\nimport DebugContainer from \"./containers/DebugContainer\";\nimport AboutContainer from \"./containers/AboutContainer\";\nimport Navigation from \"./components/Navigation\";\n\nimport configureStore from \"./store\";\n\nimport { getDefaultLanguage } from \"./logic/strings\";\nimport RecordsContainer from \"./containers/RecordsContainer\";\n\nclass App extends React.Component {\n  render() {\n    const { store, persistor } = configureStore({ language: getDefaultLanguage() });\n\n    return (\n      // Provider is a React component from the react-redux library.\n      // Its purpose is to \"provide\" the given store to its child components.\n      // Because the Provider wraps the whole App here, the store is global state.\n      //\n      // Switch iterates over its children (Routes) and renders the first one that matches the current path name\n      //\n      // Route takes a path and a component, and renders the given component if the current path matches the specified path.\n      <Provider store={store}>\n        <PersistGate loading={null} persistor={persistor}>\n          <OpenLifterIntlProvider>\n            <Router basename={process.env.REACT_APP_ROUTER_BASENAME}>\n              <div>\n                <Navigation />\n                <Switch>\n                  <Route exact path=\"/\" component={RootContainer} />\n                  <Route path=\"/meet-setup\" component={MeetSetupContainer} />\n                  <Route path=\"/registration\" component={RegistrationContainer} />\n                  <Route path=\"/weigh-ins\" component={WeighinsContainer} />\n                  <Route path=\"/flight-order\" component={FlightOrderContainer} />\n                  <Route path=\"/lifting\" component={LiftingContainer} />\n                  <Route path=\"/results\" component={ResultsContainer} />\n                  <Route path=\"/debug\" component={DebugContainer} />\n                  <Route path=\"/about\" component={AboutContainer} />\n                  <Route path=\"/records\" component={RecordsContainer} />\n                </Switch>\n              </div>\n            </Router>\n          </OpenLifterIntlProvider>\n        </PersistGate>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","// vim: set ts=2 sts=2 sw=2 et:\n//\n// This file is part of OpenLifter, simple Powerlifting meet software.\n// Copyright (C) 2019 The OpenPowerlifting Project.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport * as serviceWorker from \"./serviceWorker\";\nimport App from \"./App\";\n\nimport \"./bootstrap-custom/bootstrap.scss\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nconst rootElement = document.getElementById(\"root\");\nif (rootElement !== null) {\n  ReactDOM.render(<App />, rootElement);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contentArea\":\"ContentArea_contentArea__3c6kc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LeftCard_container__2XjgL\",\"activeCard\":\"LeftCard_activeCard__1M9K6\",\"loadingBar\":\"LeftCard_loadingBar__2trT4\",\"attemptText\":\"LeftCard_attemptText__1JsZg\",\"overlaySubTitle\":\"LeftCard_overlaySubTitle__1zl1R\",\"weightClassPrefix\":\"LeftCard_weightClassPrefix__2OYkz\",\"overlayWeight\":\"LeftCard_overlayWeight__1lASX\",\"overlayRecordText\":\"LeftCard_overlayRecordText__2nCT4\",\"barArea\":\"LeftCard_barArea__3OqZl\",\"nextText\":\"LeftCard_nextText__2cIaN\",\"logo\":\"LeftCard_logo__iO5Fv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"LiftingFooter_footer__2Mb6I\",\"leftControls\":\"LiftingFooter_leftControls__kesKc\",\"rightControls\":\"LiftingFooter_rightControls__mXLjl\",\"fullscreen\":\"LiftingFooter_fullscreen__1HPVI\",\"goodLift\":\"LiftingFooter_goodLift__T-O7p\",\"noLift\":\"LiftingFooter_noLift__3-y0k\",\"selector\":\"LiftingFooter_selector__1Ndtq\"};"],"sourceRoot":""}